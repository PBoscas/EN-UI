/*! sly 1.6.1 - 8th Aug 2015 | https://github.com/darsain/sly */
!function(a,b,c){"use strict";function d(b,p,q){function K(c){var d=0,e=Gb.length;if(yb.old=a.extend({},yb),wb=tb?0:ub[rb.horizontal?"width":"height"](),Bb=zb[rb.horizontal?"width":"height"](),xb=tb?b:vb[rb.horizontal?"outerWidth":"outerHeight"](),Gb.length=0,yb.start=0,yb.end=H(xb-wb,0),Rb){d=Ib.length,Hb=vb.children(rb.itemSelector),Ib.length=0;var f,g=j(vb,rb.horizontal?"paddingLeft":"paddingTop"),h=j(vb,rb.horizontal?"paddingRight":"paddingBottom"),i="border-box"===a(Hb).css("boxSizing"),l="none"!==Hb.css("float"),m=0,n=Hb.length-1;xb=0,Hb.each(function(b,c){var d=a(c),e=c.getBoundingClientRect(),i=G(rb.horizontal?e.width||e.right-e.left:e.height||e.bottom-e.top),k=j(d,rb.horizontal?"marginLeft":"marginTop"),o=j(d,rb.horizontal?"marginRight":"marginBottom"),p=i+k+o,q=!k||!o,r={};r.el=c,r.size=q?i:p,r.half=r.size/2,r.start=xb+(q?k:0),r.center=r.start-G(wb/2-r.size/2),r.end=r.start-wb+r.size,b||(xb+=g),xb+=p,rb.horizontal||l||o&&k&&b>0&&(xb-=I(k,o)),b===n&&(r.end+=h,xb+=h,m=q?o:0),Ib.push(r),f=r}),vb[0].style[rb.horizontal?"width":"height"]=(i?xb:xb-g-h)+"px",xb-=m,Ib.length?(yb.start=Ib[0][Pb?"center":"start"],yb.end=Pb?f.center:xb>wb?f.end:yb.start):yb.start=yb.end=0}if(yb.center=G(yb.end/2+yb.start/2),V(),Ab.length&&Bb>0&&(rb.dynamicHandle?(Cb=yb.start===yb.end?Bb:G(Bb*wb/xb),Cb=k(Cb,rb.minHandleSize,Bb),Ab[0].style[rb.horizontal?"width":"height"]=Cb+"px"):Cb=Ab[rb.horizontal?"outerWidth":"outerHeight"](),Db.end=Bb-Cb,ec||N()),!tb&&wb>0){var o=yb.start,p="";if(Rb)a.each(Ib,function(a,b){Pb?Gb.push(b.center):b.start+b.size>o&&o<=yb.end&&(o=b.start,Gb.push(o),o+=wb,o>yb.end&&o<yb.end+wb&&Gb.push(yb.end))});else for(;o-wb<yb.end;)Gb.push(o),o+=wb;if(Eb[0]&&e!==Gb.length){for(var q=0;q<Gb.length;q++)p+=rb.pageBuilder.call(sb,q);Fb=Eb.html(p).children(),Fb.eq(Jb.activePage).addClass(rb.activeClass)}}if(Jb.slideeSize=xb,Jb.frameSize=wb,Jb.sbSize=Bb,Jb.handleSize=Cb,Rb){c&&null!=rb.startAt&&(T(rb.startAt),sb[Qb?"toCenter":"toStart"](rb.startAt));var r=Ib[Jb.activeItem];L(Qb&&r?r.center:k(yb.dest,yb.start,yb.end))}else c?null!=rb.startAt&&L(rb.startAt,1):L(k(yb.dest,yb.start,yb.end));ob("load")}function L(a,b,c){if(Rb&&cc.released&&!c){var d=U(a),e=a>yb.start&&a<yb.end;Qb?(e&&(a=Ib[d.centerItem].center),Pb&&rb.activateMiddle&&T(d.centerItem)):e&&(a=Ib[d.firstItem].start)}cc.init&&cc.slidee&&rb.elasticBounds?a>yb.end?a=yb.end+(a-yb.end)/6:a<yb.start&&(a=yb.start+(a-yb.start)/6):a=k(a,yb.start,yb.end),ac.start=+new Date,ac.time=0,ac.from=yb.cur,ac.to=a,ac.delta=a-yb.cur,ac.tweesing=cc.tweese||cc.init&&!cc.slidee,ac.immediate=!ac.tweesing&&(b||cc.init&&cc.slidee||!rb.speed),cc.tweese=0,a!==yb.dest&&(yb.dest=a,ob("change"),ec||M()),Z(),V(),W(),O()}function M(){if(sb.initialized){if(!ec)return ec=t(M),void(cc.released&&ob("moveStart"));ac.immediate?yb.cur=ac.to:ac.tweesing?(ac.tweeseDelta=ac.to-yb.cur,D(ac.tweeseDelta)<.1?yb.cur=ac.to:yb.cur+=ac.tweeseDelta*(cc.released?rb.swingSpeed:rb.syncSpeed)):(ac.time=I(+new Date-ac.start,rb.speed),yb.cur=ac.from+ac.delta*a.easing[rb.easing](ac.time/rb.speed,ac.time,0,1,rb.speed)),ac.to===yb.cur?(yb.cur=ac.to,cc.tweese=ec=0):ec=t(M),ob("move"),tb||(m?vb[0].style[m]=n+(rb.horizontal?"translateX":"translateY")+"("+-yb.cur+"px)":vb[0].style[rb.horizontal?"left":"top"]=-G(yb.cur)+"px"),!ec&&cc.released&&ob("moveEnd"),N()}}function N(){Ab.length&&(Db.cur=yb.start===yb.end?0:((cc.init&&!cc.slidee?yb.dest:yb.cur)-yb.start)/(yb.end-yb.start)*Db.end,Db.cur=k(G(Db.cur),Db.start,Db.end),_b.hPos!==Db.cur&&(_b.hPos=Db.cur,m?Ab[0].style[m]=n+(rb.horizontal?"translateX":"translateY")+"("+Db.cur+"px)":Ab[0].style[rb.horizontal?"left":"top"]=Db.cur+"px"))}function O(){Fb[0]&&_b.page!==Jb.activePage&&(_b.page=Jb.activePage,Fb.removeClass(rb.activeClass).eq(Jb.activePage).addClass(rb.activeClass),ob("activePage",_b.page))}function P(){bc.speed&&yb.cur!==(bc.speed>0?yb.end:yb.start)||sb.stop(),hc=cc.init?t(P):0,bc.now=+new Date,bc.pos=yb.cur+(bc.now-bc.lastTime)/1e3*bc.speed,L(cc.init?bc.pos:G(bc.pos)),cc.init||yb.cur!==yb.dest||ob("moveEnd"),bc.lastTime=bc.now}function Q(a,b,d){if("boolean"===e(b)&&(d=b,b=c),b===c)L(yb[a],d);else{if(Qb&&"center"!==a)return;var f=sb.getPos(b);f&&L(f[a],d,!Qb)}}function R(a){return null!=a?i(a)?a>=0&&a<Ib.length?a:-1:Hb.index(a):-1}function S(a){return R(i(a)&&0>a?a+Ib.length:a)}function T(a,b){var c=R(a);return!Rb||0>c?!1:((_b.active!==c||b)&&(Hb.eq(Jb.activeItem).removeClass(rb.activeClass),Hb.eq(c).addClass(rb.activeClass),_b.active=Jb.activeItem=c,W(),ob("active",c)),c)}function U(a){a=k(i(a)?a:yb.dest,yb.start,yb.end);var b={},c=Pb?0:wb/2;if(!tb)for(var d=0,e=Gb.length;e>d;d++){if(a>=yb.end||d===Gb.length-1){b.activePage=Gb.length-1;break}if(a<=Gb[d]+c){b.activePage=d;break}}if(Rb){for(var f=!1,g=!1,h=!1,j=0,l=Ib.length;l>j;j++)if(f===!1&&a<=Ib[j].start+Ib[j].half&&(f=j),h===!1&&a<=Ib[j].center+Ib[j].half&&(h=j),j===l-1||a<=Ib[j].end+Ib[j].half){g=j;break}b.firstItem=i(f)?f:0,b.centerItem=i(h)?h:b.firstItem,b.lastItem=i(g)?g:b.centerItem}return b}function V(b){a.extend(Jb,U(b))}function W(){var a=yb.dest<=yb.start,b=yb.dest>=yb.end,c=(a?1:0)|(b?2:0);if(_b.slideePosState!==c&&(_b.slideePosState=c,Yb.is("button,input")&&Yb.prop("disabled",a),Zb.is("button,input")&&Zb.prop("disabled",b),Yb.add(Vb)[a?"addClass":"removeClass"](rb.disabledClass),Zb.add(Ub)[b?"addClass":"removeClass"](rb.disabledClass)),_b.fwdbwdState!==c&&cc.released&&(_b.fwdbwdState=c,Vb.is("button,input")&&Vb.prop("disabled",a),Ub.is("button,input")&&Ub.prop("disabled",b)),Rb&&null!=Jb.activeItem){var d=0===Jb.activeItem,e=Jb.activeItem>=Ib.length-1,f=(d?1:0)|(e?2:0);_b.itemsButtonState!==f&&(_b.itemsButtonState=f,Wb.is("button,input")&&Wb.prop("disabled",d),Xb.is("button,input")&&Xb.prop("disabled",e),Wb[d?"addClass":"removeClass"](rb.disabledClass),Xb[e?"addClass":"removeClass"](rb.disabledClass))}}function X(a,b,c){if(a=S(a),b=S(b),a>-1&&b>-1&&a!==b&&(!c||b!==a-1)&&(c||b!==a+1)){Hb.eq(a)[c?"insertAfter":"insertBefore"](Ib[b].el);var d=b>a?a:c?b:b-1,e=a>b?a:c?b+1:b,f=a>b;null!=Jb.activeItem&&(a===Jb.activeItem?_b.active=Jb.activeItem=c?f?b+1:b:f?b:b-1:Jb.activeItem>d&&Jb.activeItem<e&&(_b.active=Jb.activeItem+=f?1:-1)),K()}}function Y(a,b){for(var c=0,d=$b[a].length;d>c;c++)if($b[a][c]===b)return c;return-1}function Z(){cc.released&&!sb.isPaused&&sb.resume()}function $(a){return G(k(a,Db.start,Db.end)/Db.end*(yb.end-yb.start))+yb.start}function _(){cc.history[0]=cc.history[1],cc.history[1]=cc.history[2],cc.history[2]=cc.history[3],cc.history[3]=cc.delta}function ab(a){cc.released=0,cc.source=a,cc.slidee="slidee"===a}function bb(b){var c="touchstart"===b.type,d=b.data.source,e="slidee"===d;cc.init||!c&&eb(b.target)||("handle"!==d||rb.dragHandle&&Db.start!==Db.end)&&(!e||(c?rb.touchDragging:rb.mouseDragging&&b.which<2))&&(c||f(b),ab(d),cc.init=0,cc.$source=a(b.target),cc.touch=c,cc.pointer=c?b.originalEvent.touches[0]:b,cc.initX=cc.pointer.pageX,cc.initY=cc.pointer.pageY,cc.initPos=e?yb.cur:Db.cur,cc.start=+new Date,cc.time=0,cc.path=0,cc.delta=0,cc.locked=0,cc.history=[0,0,0,0],cc.pathToLock=e?c?30:10:0,u.on(c?x:w,cb),sb.pause(1),(e?vb:Ab).addClass(rb.draggedClass),ob("moveStart"),e&&(fc=setInterval(_,10)))}function cb(a){if(cc.released="mouseup"===a.type||"touchend"===a.type,cc.pointer=cc.touch?a.originalEvent[cc.released?"changedTouches":"touches"][0]:a,cc.pathX=cc.pointer.pageX-cc.initX,cc.pathY=cc.pointer.pageY-cc.initY,cc.path=E(F(cc.pathX,2)+F(cc.pathY,2)),cc.delta=rb.horizontal?cc.pathX:cc.pathY,cc.released||!(cc.path<1)){if(!cc.init){if(cc.path<rb.dragThreshold)return cc.released?db():c;if(!(rb.horizontal?D(cc.pathX)>D(cc.pathY):D(cc.pathX)<D(cc.pathY)))return db();cc.init=1}f(a),!cc.locked&&cc.path>cc.pathToLock&&cc.slidee&&(cc.locked=1,cc.$source.on(z,g)),cc.released&&(db(),rb.releaseSwing&&cc.slidee&&(cc.swing=(cc.delta-cc.history[0])/40*300,cc.delta+=cc.swing,cc.tweese=D(cc.swing)>10)),L(cc.slidee?G(cc.initPos-cc.delta):$(cc.initPos+cc.delta))}}function db(){clearInterval(fc),cc.released=!0,u.off(cc.touch?x:w,cb),(cc.slidee?vb:Ab).removeClass(rb.draggedClass),setTimeout(function(){cc.$source.off(z,g)}),yb.cur===yb.dest&&cc.init&&ob("moveEnd"),sb.resume(1),cc.init=0}function eb(b){return~a.inArray(b.nodeName,B)||a(b).is(rb.interactive)}function fb(){sb.stop(),u.off("mouseup",fb)}function gb(a){switch(f(a),this){case Ub[0]:case Vb[0]:sb.moveBy(Ub.is(this)?rb.moveBy:-rb.moveBy),u.on("mouseup",fb);break;case Wb[0]:sb.prev();break;case Xb[0]:sb.next();break;case Yb[0]:sb.prevPage();break;case Zb[0]:sb.nextPage()}}function hb(a){return dc.curDelta=(rb.horizontal?a.deltaY||a.deltaX:a.deltaY)||-a.wheelDelta,dc.curDelta/=1===a.deltaMode?3:100,Rb?(o=+new Date,dc.last<o-dc.resetTime&&(dc.delta=0),dc.last=o,dc.delta+=dc.curDelta,D(dc.delta)<1?dc.finalDelta=0:(dc.finalDelta=G(dc.delta/1),dc.delta%=1),dc.finalDelta):dc.curDelta}function ib(a){a.originalEvent[r]=sb;var b=+new Date;if(J+rb.scrollHijack>b&&Sb[0]!==document&&Sb[0]!==window)return void(J=b);if(rb.scrollBy&&yb.start!==yb.end){var c=hb(a.originalEvent);(rb.scrollTrap||c>0&&yb.dest<yb.end||0>c&&yb.dest>yb.start)&&f(a,1),sb.slideBy(rb.scrollBy*c)}}function jb(a){rb.clickBar&&a.target===zb[0]&&(f(a),L($((rb.horizontal?a.pageX-zb.offset().left:a.pageY-zb.offset().top)-Cb/2)))}function kb(a){if(rb.keyboardNavBy)switch(a.which){case rb.horizontal?37:38:f(a),sb["pages"===rb.keyboardNavBy?"prevPage":"prev"]();break;case rb.horizontal?39:40:f(a),sb["pages"===rb.keyboardNavBy?"nextPage":"next"]()}}function lb(a){return eb(this)?void(a.originalEvent[r+"ignore"]=!0):void(this.parentNode!==vb[0]||a.originalEvent[r+"ignore"]||sb.activate(this))}function mb(){this.parentNode===Eb[0]&&sb.activatePage(Fb.index(this))}function nb(a){rb.pauseOnHover&&sb["mouseenter"===a.type?"pause":"resume"](2)}function ob(a,b){if($b[a]){for(qb=$b[a].length,C.length=0,pb=0;qb>pb;pb++)C.push($b[a][pb]);for(pb=0;qb>pb;pb++)C[pb].call(sb,a,b)}}if(!(this instanceof d))return new d(b,p,q);var pb,qb,rb=a.extend({},d.defaults,p),sb=this,tb=i(b),ub=a(b),vb=rb.slidee?a(rb.slidee).eq(0):ub.children().eq(0),wb=0,xb=0,yb={start:0,center:0,end:0,cur:0,dest:0},zb=a(rb.scrollBar).eq(0),Ab=zb.children().eq(0),Bb=0,Cb=0,Db={start:0,end:0,cur:0},Eb=a(rb.pagesBar),Fb=0,Gb=[],Hb=0,Ib=[],Jb={firstItem:0,lastItem:0,centerItem:0,activeItem:null,activePage:0},Kb=new l(ub[0]),Lb=new l(vb[0]),Mb=new l(zb[0]),Nb=new l(Ab[0]),Ob="basic"===rb.itemNav,Pb="forceCentered"===rb.itemNav,Qb="centered"===rb.itemNav||Pb,Rb=!tb&&(Ob||Qb||Pb),Sb=rb.scrollSource?a(rb.scrollSource):ub,Tb=rb.dragSource?a(rb.dragSource):ub,Ub=a(rb.forward),Vb=a(rb.backward),Wb=a(rb.prev),Xb=a(rb.next),Yb=a(rb.prevPage),Zb=a(rb.nextPage),$b={},_b={},ac={},bc={},cc={released:1},dc={last:0,delta:0,resetTime:200},ec=0,fc=0,gc=0,hc=0;tb||(b=ub[0]),sb.initialized=0,sb.frame=b,sb.slidee=vb[0],sb.pos=yb,sb.rel=Jb,sb.items=Ib,sb.pages=Gb,sb.isPaused=0,sb.options=rb,sb.dragging=cc,sb.reload=function(){K()},sb.getPos=function(a){if(Rb){var b=R(a);return-1!==b?Ib[b]:!1}var c=vb.find(a).eq(0);if(c[0]){var d=rb.horizontal?c.offset().left-vb.offset().left:c.offset().top-vb.offset().top,e=c[rb.horizontal?"outerWidth":"outerHeight"]();return{start:d,center:d-wb/2+e/2,end:d-wb+e,size:e}}return!1},sb.moveBy=function(a){bc.speed=a,!cc.init&&bc.speed&&yb.cur!==(bc.speed>0?yb.end:yb.start)&&(bc.lastTime=+new Date,bc.startPos=yb.cur,ab("button"),cc.init=1,ob("moveStart"),s(hc),P())},sb.stop=function(){"button"===cc.source&&(cc.init=0,cc.released=1)},sb.prev=function(){sb.activate(null==Jb.activeItem?0:Jb.activeItem-1)},sb.next=function(){sb.activate(null==Jb.activeItem?0:Jb.activeItem+1)},sb.prevPage=function(){sb.activatePage(Jb.activePage-1)},sb.nextPage=function(){sb.activatePage(Jb.activePage+1)},sb.slideBy=function(a,b){a&&(Rb?sb[Qb?"toCenter":"toStart"](k((Qb?Jb.centerItem:Jb.firstItem)+rb.scrollBy*a,0,Ib.length)):L(yb.dest+a,b))},sb.slideTo=function(a,b){L(a,b)},sb.toStart=function(a,b){Q("start",a,b)},sb.toEnd=function(a,b){Q("end",a,b)},sb.toCenter=function(a,b){Q("center",a,b)},sb.getIndex=R,sb.activate=function(a,b){var c=T(a);rb.smart&&c!==!1&&(Qb?sb.toCenter(c,b):c>=Jb.lastItem?sb.toStart(c,b):c<=Jb.firstItem?sb.toEnd(c,b):Z())},sb.activatePage=function(a,b){i(a)&&L(Gb[k(a,0,Gb.length-1)],b)},sb.resume=function(a){rb.cycleBy&&rb.cycleInterval&&("items"!==rb.cycleBy||Ib[0]&&null!=Jb.activeItem)&&!(a<sb.isPaused)&&(sb.isPaused=0,gc?gc=clearTimeout(gc):ob("resume"),gc=setTimeout(function(){switch(ob("cycle"),rb.cycleBy){case"items":sb.activate(Jb.activeItem>=Ib.length-1?0:Jb.activeItem+1);break;case"pages":sb.activatePage(Jb.activePage>=Gb.length-1?0:Jb.activePage+1)}},rb.cycleInterval))},sb.pause=function(a){a<sb.isPaused||(sb.isPaused=a||100,gc&&(gc=clearTimeout(gc),ob("pause")))},sb.toggle=function(){sb[gc?"pause":"resume"]()},sb.set=function(b,c){a.isPlainObject(b)?a.extend(rb,b):rb.hasOwnProperty(b)&&(rb[b]=c)},sb.add=function(b,c){var d=a(b);Rb?(null==c||!Ib[0]||c>=Ib.length?d.appendTo(vb):Ib.length&&d.insertBefore(Ib[c].el),null!=Jb.activeItem&&c<=Jb.activeItem&&(_b.active=Jb.activeItem+=d.length)):vb.append(d),K()},sb.remove=function(b){if(Rb){var c=S(b);if(c>-1){Hb.eq(c).remove();var d=c===Jb.activeItem;null!=Jb.activeItem&&c<Jb.activeItem&&(_b.active=--Jb.activeItem),K(),d&&(_b.active=null,sb.activate(Jb.activeItem))}}else a(b).remove(),K()},sb.moveAfter=function(a,b){X(a,b,1)},sb.moveBefore=function(a,b){X(a,b)},sb.on=function(a,b){if("object"===e(a))for(var c in a)a.hasOwnProperty(c)&&sb.on(c,a[c]);else if("function"===e(b))for(var d=a.split(" "),f=0,g=d.length;g>f;f++)$b[d[f]]=$b[d[f]]||[],-1===Y(d[f],b)&&$b[d[f]].push(b);else if("array"===e(b))for(var h=0,i=b.length;i>h;h++)sb.on(a,b[h])},sb.one=function(a,b){function c(){b.apply(sb,arguments),sb.off(a,c)}sb.on(a,c)},sb.off=function(a,b){if(b instanceof Array)for(var c=0,d=b.length;d>c;c++)sb.off(a,b[c]);else for(var e=a.split(" "),f=0,g=e.length;g>f;f++)if($b[e[f]]=$b[e[f]]||[],null==b)$b[e[f]].length=0;else{var h=Y(e[f],b);-1!==h&&$b[e[f]].splice(h,1)}},sb.destroy=function(){return d.removeInstance(b),Sb.add(Ab).add(zb).add(Eb).add(Ub).add(Vb).add(Wb).add(Xb).add(Yb).add(Zb).off("."+r),u.off("keydown",kb),Wb.add(Xb).add(Yb).add(Zb).removeClass(rb.disabledClass),Hb&&null!=Jb.activeItem&&Hb.eq(Jb.activeItem).removeClass(rb.activeClass),Eb.empty(),tb||(ub.off("."+r),Kb.restore(),Lb.restore(),Mb.restore(),Nb.restore(),a.removeData(b,r)),Ib.length=Gb.length=0,_b={},sb.initialized=0,sb},sb.init=function(){if(!sb.initialized){if(d.getInstance(b))throw new Error("There is already a Sly instance on this element");d.storeInstance(b,sb),sb.on(q);var a=["overflow","position"],c=["position","webkitTransform","msTransform","transform","left","top","width","height"];Kb.save.apply(Kb,a),Mb.save.apply(Mb,a),Lb.save.apply(Lb,c),Nb.save.apply(Nb,c);var e=Ab;return tb||(e=e.add(vb),ub.css("overflow","hidden"),m||"static"!==ub.css("position")||ub.css("position","relative")),m?n&&e.css(m,n):("static"===zb.css("position")&&zb.css("position","relative"),e.css({position:"absolute"})),rb.forward&&Ub.on(A,gb),rb.backward&&Vb.on(A,gb),rb.prev&&Wb.on(z,gb),rb.next&&Xb.on(z,gb),rb.prevPage&&Yb.on(z,gb),rb.nextPage&&Zb.on(z,gb),Sb.on(y,ib),zb[0]&&zb.on(z,jb),Rb&&rb.activateOn&&ub.on(rb.activateOn+"."+r,"*",lb),Eb[0]&&rb.activatePageOn&&Eb.on(rb.activatePageOn+"."+r,"*",mb),Tb.on(v,{source:"slidee"},bb),Ab&&Ab.on(v,{source:"handle"},bb),u.on("keydown",kb),tb||(ub.on("mouseenter."+r+" mouseleave."+r,nb),ub.on("scroll."+r,h)),sb.initialized=1,K(!0),rb.cycleBy&&!tb&&sb[rb.startPaused?"pause":"resume"](),sb}}}function e(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof a}function f(a,b){a.preventDefault(),b&&a.stopPropagation()}function g(b){f(b,1),a(this).off(b.type,g)}function h(){this.scrollLeft=0,this.scrollTop=0}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a,b){return 0|G(String(a.css(b)).replace(/[^\-0-9.]/g,""))}function k(a,b,c){return b>a?b:a>c?c:a}function l(a){var b={};return b.style={},b.save=function(){if(a&&a.nodeType){for(var c=0;c<arguments.length;c++)b.style[arguments[c]]=a.style[arguments[c]];return b}},b.restore=function(){if(a&&a.nodeType){for(var c in b.style)b.style.hasOwnProperty(c)&&(a.style[c]=b.style[c]);return b}},b}var m,n,o,p="sly",q="Sly",r=p,s=b.cancelAnimationFrame||b.cancelRequestAnimationFrame,t=b.requestAnimationFrame,u=a(document),v="touchstart."+r+" mousedown."+r,w="mousemove."+r+" mouseup."+r,x="touchmove."+r+" touchend."+r,y=(document.implementation.hasFeature("Event.wheel","3.0")?"wheel.":"mousewheel.")+r,z="click."+r,A="mousedown."+r,B=["INPUT","SELECT","BUTTON","TEXTAREA"],C=[],D=Math.abs,E=Math.sqrt,F=Math.pow,G=Math.round,H=Math.max,I=Math.min,J=0;u.on(y,function(a){var b=a.originalEvent[r],c=+new Date;(!b||b.options.scrollHijack<c-J)&&(J=c)}),d.getInstance=function(b){return a.data(b,r)},d.storeInstance=function(b,c){return a.data(b,r,c)},d.removeInstance=function(b){return a.removeData(b,r)},function(a){function b(a){var b=(new Date).getTime(),d=Math.max(0,16-(b-c)),e=setTimeout(a,d);return c=b,e}t=a.requestAnimationFrame||a.webkitRequestAnimationFrame||b;var c=(new Date).getTime(),d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.clearTimeout;s=function(b){d.call(a,b)}}(window),function(){function a(a){for(var d=0,e=b.length;e>d;d++){var f=b[d]?b[d]+a.charAt(0).toUpperCase()+a.slice(1):a;if(null!=c.style[f])return f}}var b=["","Webkit","Moz","ms","O"],c=document.createElement("div");m=a("transform"),n=a("perspective")?"translateZ(0) ":""}(),b[q]=d,a.fn[p]=function(b,c){var f,g;return a.isPlainObject(b)||(("string"===e(b)||b===!1)&&(f=b===!1?"destroy":b,g=Array.prototype.slice.call(arguments,1)),b={}),this.each(function(a,e){var h=d.getInstance(e);h||f?h&&f&&h[f]&&h[f].apply(h,g):h=new d(e,b,c).init()})},d.defaults={slidee:null,horizontal:!1,itemNav:null,itemSelector:null,smart:!1,activateOn:null,activateMiddle:!1,scrollSource:null,scrollBy:0,scrollHijack:300,scrollTrap:!1,dragSource:null,mouseDragging:!1,touchDragging:!1,releaseSwing:!1,swingSpeed:.2,elasticBounds:!1,dragThreshold:3,interactive:null,scrollBar:null,dragHandle:!1,dynamicHandle:!1,minHandleSize:50,clickBar:!1,syncSpeed:.5,pagesBar:null,activatePageOn:null,pageBuilder:function(a){return"<li>"+(a+1)+"</li>"},forward:null,backward:null,prev:null,next:null,prevPage:null,nextPage:null,cycleBy:null,cycleInterval:5e3,pauseOnHover:!1,startPaused:!1,moveBy:300,speed:0,easing:"swing",startAt:null,keyboardNavBy:null,draggedClass:"dragged",activeClass:"active",disabledClass:"disabled"}}(jQuery,window);
$(document).ready(function () {
	$('body').removeClass('on-load');
	initTooltip();
	initRangeSlider();
	initProbabilitySlider();
	initColorSlider();
	initSelect();
	initSlidingMenu();
	initMobileMenu();
	initDropDownMenu();
	initSlickCount();
	initMap();
	initCheckedBox();
	initCustomCheckbox ();
	initSlickSlider();
	initGallerySlider();
	initScrollTop();
	initModalShow();
	initHoverDrop();
	initAlertModal();
	initCloseMenu();
	initValidateBootstrapForm();
	initTableDrop();
	initAccordionTable();
	initDataTable();
	initSlickSliderCard();
	initCustomDropDown();
	initSlickCarousel();
	initSlideDownExpanded();
	initStickyOption();
	initTableCheckbox();
	initDataTableTeam();
	initDragDrop();
	initAppendRow();
	initStickyBlock();
	initCustomDrop();
	initDataTableRanking();
	initDataTableScoring();
	initDropSubject();
	initButtonPassword();
	initImgLoader();
	initOverflowLink();
	initMmenu();
	initFormValidate();
	initCustomForm();
	initTooltipFunc();
	initToggleExpanded();
	initTooltipCustom();
	initAccordion();
	initScrollMenu();
	initShowMoreText();
	initFeatureSlider();
	initMediaSmartSlider();
	initScrollWrap();
	initStickBar();
	initSearchTabs();
	initMatchHeight();
	initInputMask();
	initDatePicker();
	initFormGroups();
	initSlyScrollBar();
	initStickyTableHead();
	initPercentSlider();
	initValidatePassword();
	initDropdownPopper();
	initRangeFormSlider();
	initStickySecondarySidebar();
	initSlideBlock();
	initTagsSelect();
	initCardSlider();
	initGridView();
	initTabsToAccordion();
	initValidateCheckboxForm();
	initStarRating();
	initCounterChecked();
	initSortItems();
	initShowCustomInput();
	initGoalSlider();
	initFileUpload();
	initStickyDashboard();
	initSearchCardsMap();
	initDataTableRequest();
	initScheduler();
	initDataTableListing();
	initFeatureSliderMobile();
	initComparisonSlider();
});


function initComparisonSlider(){
	$('.comparison-table__offers').each(function() {
		var $slider = $(this);

		$slider.slick({
			slidesToShow: 3,
			infinite: false,
			swipe: false,
			swipeToSlide: false,
			touchMove: false,
			variableWidth: true,
			draggable: false,
			nextArrow: $slider.closest('.comparison-table__head').find('.arrow-next'),
			prevArrow: $slider.closest('.comparison-table__head').find('.arrow-prev'),
			responsive: [
				{
					breakpoint: 1024,
					settings: {
						slidesToShow: 1,
						swipe: true,
						swipeToSlide: true,
						variableWidth: true,
						focusOnSelect: true,
						touchMove: true,
						draggable: true,
					}
				}
			]
		});

		$slider.on('beforeChange', function(event, slick, currentSlide, nextSlide) {
			$(this).closest('.comparison-table').find('.comparison-table__options').each(function() {
				$(this).slick('goTo', nextSlide);
			});
		});
	});

	$('.comparison-table__options').each(function() {
		var $slider = $(this);

		$slider.slick({
			slidesToShow: 3,
			arrows: false,
			infinite: false,
			swipe: false,
			swipeToSlide: false,
			variableWidth: true,
			touchMove: false,
			draggable: false
		});
	});

	if($('.comparison-table__head').length){
		initFixedHead();
		initFixesGroupHead();
		$(window).on('load resize scroll', function() {
			initFixedHead();
			initFixesGroupHead();
		});
	}

	function initFixedHead() {
		if($('.comparison-table').offset().top < $(window).scrollTop() + $('.header').innerHeight()){
			$('.comparison-table').addClass('comparison-fixed-head');
		} else {
			$('.comparison-table').removeClass('comparison-fixed-head');
		}
		if($('.comparison-table').offset().top + $('.comparison-table').innerHeight() <= $(window).scrollTop() + $('.comparison-table__head-holder').innerHeight() + $('.header').innerHeight() + $('.comparison-table .comparison-table__group.fixed').last().find('.comparison-table__row-head').innerHeight()){
			$('.comparison-table').addClass('comparison-fixed-head-bottom');
		} else {
			$('.comparison-table').removeClass('comparison-fixed-head-bottom');
		}
	}

	function initFixesGroupHead() {
		$('.comparison-table__group').each(function() {
			var top = $(this).offset().top;

			if(top < $(window).scrollTop() + $('.header').innerHeight() + $('.comparison-table__head-holder').innerHeight()) {
				$(this).addClass('fixed');
			} else {
				$(this).removeClass('fixed');
			}
		});
	}
}

function initFeatureSliderMobile() {
	initSLider();
	$(window).on('load resize orientationchange', function () {
		initSLider();
	});

	function initSLider() {
		$('.slider-mobile').each(function () {
			var $carousel = $(this);
			if ($(window).width() > 767 && $carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick('unslick');
				initGallerySlider();
			} else if ($(window).width() <= 767 && !$carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick({
					slidesToShow: 4,
					slidesToScroll: 1,
					arrows: false,
					responsive: [
						{
							breakpoint: 767,
							settings: {
								slidesToShow: 3
							}
						},
					]
				});
				initGallerySlider();
			} else {
				initGallerySlider();
			}
		});
	}
}

function initDataTableListing() {
	var table = $('table.default-datatable').DataTable({
		pagingType: "simple_numbers",
		"language": {
			"lengthMenu": "Display Per Page _MENU_",
			oPaginate: {
				sNext: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-right"></use></svg>',
				sPrevious: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-left"></use></svg>'
			}
		},
        "drawCallback": function () {
			$('.dataTables_paginate > .pagination').addClass('pagination-bg text-ubuntu');
			$('.dataTables_length').addClass('flat-custom-select-drop');
			$('.dataTables_length').addClass('dataTables_length-custom-secondary');
			if ($('table.default-datatable tr').length < 4) {
				$('.dataTables_wrapper .bottom').hide();
			}
		},
		"bFilter": false,
		"bInfo": false,
		"autoWidth": false,
		"aLengthMenu": [
			[10, 15, -1],
			[10, 15, "All"]
		],
		"iDisplayLength": 4,
		"dom": '<"top"i>rt<"bottom"flp><"clear">'
	});
	$(".dataTables_length select").selectpicker();
}

function initScheduler(){
	const events = [
		{
			start: new DayPilot.Date("2021-02-23T09:45:00"),
			end: new DayPilot.Date("2021-02-23T10:00:00"),
			id: DayPilot.guid(),
			// resource: String.fromCharCode(65 + i),
			resource: 'J',
			backColor: "#AAB0BB",
			areas: [
				{width: 15, height: 15,  symbol: "assets/img/sprite-icons.svg#sports-car", cssClass: "icon"},
			]
		},
		{
			start: new DayPilot.Date("2021-02-23T10:00:00"),
			end: new DayPilot.Date("2021-02-23T10:15:00"),
			id: DayPilot.guid(),
			// resource: String.fromCharCode(65 + i),
			resource: 'J',
			backColor: "#5EC5FF",
			areas: [
				{width: 15, height: 15, symbol: "assets/img/sprite-icons.svg#house-filled", cssClass: "icon"},
			]
		},
		
		{
			start: new DayPilot.Date("2021-02-23T10:30:00"),
			end: new DayPilot.Date("2021-02-23T10:45:00"),
			id: DayPilot.guid(),
			// resource: String.fromCharCode(65 + i),
			resource: 'I',
			backColor: "#5EC5FF",
			areas: [
				{width: 15, height: 15, symbol: "assets/img/sprite-icons.svg#house-filled", cssClass: "icon"},
			]
		},
		{
			start: new DayPilot.Date("2021-02-23T10:45:00"),
			end: new DayPilot.Date("2021-02-23T10:55:00"),
			id: DayPilot.guid(),
			// resource: String.fromCharCode(65 + i),
			resource: 'K',
			backColor: "#5EC5FF",
			areas: [
				{width: 15, height: 15, symbol: "assets/img/sprite-icons.svg#house-filled", cssClass: "icon"},
			]
		},
		{
			start: new DayPilot.Date("2021-02-23T11:00:00"),
			end: new DayPilot.Date("2021-02-23T11:55:00"),
			id: DayPilot.guid(),
			// resource: String.fromCharCode(65 + i),
			resource: 'K',
			backColor: "#DA498C",
			areas: [
				{width: 15, height: 15, symbol: "assets/img/sprite-icons.svg#interviewer", cssClass: "icon"},
			]
		},
		{
			start: new DayPilot.Date("2021-02-23T09:00:00"),
			end: new DayPilot.Date("2021-02-23T11:00:00"),
			id: DayPilot.guid(),
			// resource: String.fromCharCode(65 + i),
			resource: 'K',
			backColor: "#181E39"
		}
	]

	$('#dp').each(function () {
		var dp = this;
		var dayp = $(this).daypilotScheduler({
		  cellWidth: 74,
		  eventHeight: 28,
		  headerHeight: 25,
		  showBaseTimeHeader: false,
		  startDate: "2021-02-23",
		  days: 1,
          cellDuration: 15,
		  heightSpec: "Max",
		//height: 500,
		//   rowHeaderColumnDefaultWidth: 60,
		  rowHeaderWidth: 400,
		  events: {
			  list: events
		  },
		  timeHeaders:[
			  {groupBy: "Hour", format: "h:mm tt"}
		  ],
		  scale: "Hour",
		  snapToGrid: false,

		  treeEnabled: true,
		  treePreventParentUsage: false,
		  rowHeaderWidthAutoFit: false,
		  rowMinHeight: 60,
		  CssOnly: true,
		//   rowHeaderSplitterWidth: 20,
		//   rowMarginTop: 10,
		  rowMarginBottom: 10,
		  cellBorderColor: "#E6E7EC",
		  rowMoveHandling: "Update",
		  resources:[
			{
				name: "<div class='scheduler-info'>2945 Lake Floyd Circle <span class='address-text'>Washington, MD 20024</span> </div>",
				id: "I",
				expanded: false,
				img: 'assets/img/img219.png'
			},
			{
				name: "<div class='scheduler-info'>2945 Lake Floyd Circle <span class='address-text'>Washington, MD 20024</span> </div>",
				id: "J",
				expanded: false,
				img: 'assets/img/img221.png'
			},
			{
				name: "<div class='scheduler-info'>2945 Lake Floyd Circle <span class='address-text'>Washington, MD 20024</span> </div>",
				id: "K",
				expanded: false,
				img: 'assets/img/img160.jpg'
			}
		  ],

		  onBeforeRowHeaderRender(args){
			  console.log(args);
			  args.row.html = "<div class='scheduler-custom-content'>" +
								"<div class='visual'><img src='" + args.row.uq.data.img + "'/></div>" +
								args.row.uq.data.name +
							"</div>";
			  args.row.cssClass = "scheduler-custom-row";
		  },

		//   onTimeRangeSelected(args) {
		// 	  DayPilot.Modal.prompt("New event name:", "New Event").then(function (modal) {
		// 		dayp.clearSelection();
		// 		  var name = modal.result;
		// 		  if (!name) return;
		// 		  var e = new DayPilot.Event({
		// 			  start: args.start,
		// 			  end: args.end,
		// 			  id: DayPilot.guid(),
		// 			  resource: args.resource,
		// 			  text: name
		// 		  });
		// 		  dayp.events.add(e);
		// 		  dayp.message("Created");
		// 	  });
		//   },
		  
		  onBeforeResHeaderRender(args) {
			// args.resource.html = "<div class='scheduler-custom-content'>hghjf</div>";
		  },

		  onBeforeCellRender(args) {
			args.cell.backColor = "#fff";
		  },

		  onBeforeEventRender(args) {
			// args.data.areas = [
			// 	{width: 15, height: 15,  symbol: "assets/img/sprite-icons.svg#sports-car", cssClass: "icon"},
			// ];
			args.data.text = "";
			args.data.barHidden = true;
			args.data.deleteDisabled = true;
			args.data.borderColor = "none";
		  },

		  
			// onBeforeCellRender(args) {
			// 	if (args.cell.start < new DayPilot.Date("2021-02-23T12:00:00") || args.cell.resource === "D") {
			// 		args.cell.disabled = true;
			// 		args.cell.backColor = "#181E39";
			// 	}
			// }
		});

		// $('.availability-form #previous').on('click', function(e) {
		// 	e.preventDefault();
		// 	changeDate(dp.startDate.addHours(-1));
		// });

		dayp.scrollTo("2021-03-01");

		// function changeDate(date) {
		// 	dayp.startDate = date.firstDayOfMonth();
		// 	dayp.days = dayp.startDate.daysInMonth();
		// 	dayp.update();
		// }
	});

}

function initDataTableRequest() {
    var groupColumn = 2;
	var table = $('table.request-table').DataTable({
		pagingType: "simple_numbers",
		"language": {
			"lengthMenu": "Display Per Page _MENU_",
			oPaginate: {
				sNext: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-right"></use></svg>',
				sPrevious: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-left"></use></svg>'
			}
		},
        "drawCallback": function () {
            var api = this.api();
            var rows = api.rows( {page:'current'} ).nodes();
            var last=null;
 
            api.column(groupColumn, {page:'current'} ).data().each( function ( group, i ) {
                if ( last !== group ) {
                    $(rows).eq( i ).before(
                        '<tr class="group"><td colspan="4">'+group+'</td></tr>'
                    );
 
                    last = group;
                }
			} );
			$('.dataTables_paginate > .pagination').addClass('pagination-bg text-ubuntu');
			$('.dataTables_length').addClass('flat-custom-select-drop');
			$('.dataTables_length').addClass('dataTables_length-custom-secondary');
		},
        "columnDefs": [
            { "visible": false, "targets": groupColumn }
        ],
        "order": [[ groupColumn, 'asc' ]],
		"bFilter": false,
		"bInfo": false,
		"autoWidth": false,
		"aLengthMenu": [
			[10, 15, -1],
			[10, 15, "All"]
		],
		"iDisplayLength": 7,
		"dom": '<"top"i>rt<"bottom"flp><"clear">'
	});
	$(".dataTables_length select").selectpicker();

    $('table.request-table').on( 'click', 'tr.group', function () {
        var currentOrder = table.order()[0];
        if ( currentOrder[0] === groupColumn && currentOrder[1] === 'asc' ) {
            table.order( [ groupColumn, 'desc' ] ).draw();
        }
        else {
            table.order( [ groupColumn, 'asc' ] ).draw();
        }
    } );
}

function initSearchCardsMap() {
	$('.map-seacrh-card').each(function () {
		var $map = $(this),
			location = $map.data('location').split(', ');
		var map = new google.maps.Map(this, {
			center: {
				lat: parseFloat(location[0]),
				lng: parseFloat(location[1])
			},
			zoom: 13
		});
	});
};

function initStickyDashboard(){
	if ($('.dashboard-navigation').length) {
		$(window).on('scroll load resize', function () {
			var stickyTop = $('.content-section').offset().top - $('.header__main-header').innerHeight();
			if ($(window).scrollTop() > stickyTop) {
				$('body').addClass('dashboard-sticky');
			} else {
				$('body').removeClass('dashboard-sticky');
			}
		});
	}
}

function initFileUpload(){
	$("#mydropzone").dropzone({
		url: "/file/post",
		parallelUploads: 2,
		maxFilesize: 3,
		filesizeBase: 1000,
		maxFiles: 3,
		uploadMultiple: false,
		addRemoveLinks: true,
		dictRemoveFile: "Remove",
	});
}


function initSortItems() {
	var placeholderHeight;

	var placeholderEl =  $('<div class="properties-placeholder-animator"></div>');

	$(".properties-items.sort-items").sortable({
		placeholder: 'properties-placeholder',
		axis: "y",
		revert: false,
		start: function(e, ui){
				placeholderHeight = ui.item.outerHeight();
				ui.placeholder.height(placeholderHeight + 15);
				placeholderEl.data('height', placeholderHeight);
				placeholderEl.insertAfter(ui.placeholder);
		},
		change: function(event, ui) {
				ui.placeholder.stop().height(0).animate({
						height: ui.item.outerHeight() + 15
				}, 300);
				placeholderAnimatorHeight = parseInt($(".properties-placeholder-animator").attr("data-height"));
				$(".properties-placeholder-animator").stop().height(placeholderAnimatorHeight + 15).animate({
						height: 0
				}, 300, function() {
						$(this).remove();
						placeholderHeight = ui.item.outerHeight();
						$('<div class="properties-placeholder-animator" data-height="' + placeholderHeight + '"></div>').insertAfter(ui.placeholder);
				});
		},
		stop: function(e, ui) {
				$(".properties-placeholder-animator").remove();
		},
 });
}

function initShowCustomInput() {
	$('.dropdown-menu').each(function() {
		$(this).on("click", "li:last-child", function(){
      $(this).closest('.col-lg-4').next().children('.custom').slideDown();
		});

		$(this).on("click", "li:not(:last)", function(){
      $(this).closest('.col-lg-4').next().children('.custom').slideUp();
   	});
	});
}

function initGoalSlider() {
	$(".goal-testimonials").slick({
		slidesToShow: 1,
		infinite: true,
		slidesToScroll: 1,
		arrows: true,
		dots: true,
		prevArrow: '<div class="prev"><svg class="ico-prev" width="22" height="30"><use xlink:href="assets/img/sprite-icons.svg#ico-prev"></use></svg></div>',
		nextArrow: '<div class="next"><svg class="ico-next" width="22" height="30"><use xlink:href="assets/img/sprite-icons.svg#ico-next"></use></svg></div>',
		responsive: [
			{
				breakpoint: 768,
				settings: {
					arrows: false
				}
			}
		]
	});
	var heightSlide = $(".goal-testimonials .slide").outerHeight(true);
	var heightSlideInfo = $(".goal-testimonials .info").outerHeight(true);
	var marginBottomSlideQuote = parseInt($(".goal-testimonials .quote").css("marginBottom"));
	var calculateTop = (((heightSlide - heightSlideInfo - marginBottomSlideQuote) / 2));
	$(".goal-testimonials .slick-arrow").css('top', calculateTop);
}

function initCounterChecked(){
    var $checkboxes = $('.vendor-sub-category__inner input[type="checkbox"]');
        
    $checkboxes.on('change', function(){
        var countCheckedCheckboxes = $checkboxes.filter(':checked').length;
        $('#count-checked').text(countCheckedCheckboxes);
	});

	function updateCounter() {
		var len = $('.vendor-sub-category__inner input["type="checkbox"]:checked').length;
		if(len>0){$("#count-checked").text('('+len+')');}else{$("#count-checked").text(' ');}
	}
}

function initStarRating(){
	$(".my-rating").starRating({
		totalStars: 5,
		starShape: 'rounded',
		emptyColor: '#A3A5B0',
		hoverColor: '#1AACFF',
		strokeWidth: 0,
		disableAfterRate: false,
		activeColor: '#1AACFF',
		ratedColor: '#1AACFF',
		ratedColors: ['#1AACFF', '#1AACFF', '#1AACFF', '#1AACFF', '#1AACFF'],
		starSize: 35
	  });
	  $(".my-rating-star").starRating({
		  totalStars: 5,
		  starShape: 'rounded',
		  emptyColor: '#D1D2D7',
		  hoverColor: '#1AACFF',
		  strokeWidth: 0,
		  disableAfterRate: false,
		  activeColor: '#1AACFF',
		  ratedColor: '#1AACFF',
		  ratedColors: ['#1AACFF', '#1AACFF', '#1AACFF', '#1AACFF', '#1AACFF'],
		  starSize: 45
		});
}

function initValidateCheckboxForm(){
	$('.validate-checkbox-form').on('submit', function(e) {
		if(validateCheckbox($(this))){
		e.preventDefault();
	  }
	});

	$('.validate-checkbox-form').on('change', function() {
		$(this).find('button[type="submit"]').removeAttr('disabled');
	});

	$('.validate-checkbox-form .vendor-sub-category__inner').on('click', function() {
		if($(this).closest('.vendor-main-category__item').find('.vendor-sub-category__inner input[type="checkbox"], .vendor-sub-category__inner input[type="radio"]').length){
			$(this).closest('.vendor-main-category__item').removeClass('error-form');
		} else {
			$(this).closest('.vendor-main-category__item').addClass('error-form');
		}
	});

	$('.vendor-main-category .remove-category').on('click', function (e) {
		e.preventDefault();
		$(this).closest('.vendor-main-category__item-wrap').remove();
	});
	
	
	function validateCheckbox($form) {
		$form.find('.vendor-main-category__item.required').each(function() {
			var $row = $(this);
			if($(this).find('.vendor-sub-category__inner input[type="checkbox"]:checked, .vendor-sub-category__inner input[type="radio"]:checked').length) {
				$row.removeClass('error-form');
			} else {
				$row.addClass('error-form');
			}
		});
	  
	  if(!$form.find('.vendor-main-category__item.error-form').length){
		return false;
	  } else {
		return true;
	  }
	}

	$('.toggle-options').closest('.vendor-sub-category__item').siblings('.vendor-sub-category__item').find('input[type="radio"]').on('change', function() {
		$('.local-category').slideUp('show-options');
	});

	$('.toggle-options input[type="radio"]').on('change', function() {
		$('.local-category').slideDown('show-options');
	});

	$('.toggle-options').closest('.radio-options li').siblings('.radio-options li').find('input[type="radio"]').on('change', function() {
		$('.accordion-form-options').slideUp('show-options');
	});

	$('.toggle-options input[type="radio"]').on('change', function() {
		$('.accordion-form-options').slideDown('show-options');
	});


    $('.company-service-fields, .profile-logo-options, .local-service-fields').hide();
    $('.company-services-drop .selectpicker').on('change', function() {
        if($('.company-services-drop .selectpicker').val() == 'show-service') {
            $('.company-service-fields').slideDown(); 
        } else {
            $('.company-service-fields').slideUp(); 
        } 
    });
	$('.service-area-drop .selectpicker').on('change', function() {
        if($('.service-area-drop .selectpicker').val() == 'local-service') {
            $('.local-service-fields').slideDown();
        } else {
            $('.local-service-fields').slideUp();
        } 
    });
    $('.vendor-form .btn-image-upload').on('click', function(e) {
		e.preventDefault();
		$('.profile-logo-options').slideDown();
    });
}


function initTabsToAccordion(){
	$('.documents-tabset .suggested-list a').on('click mouseenter', function(e) {
		e.preventDefault();
		var ind = $(this).closest('li').index();
		$(this)
			.closest('li')
			.addClass('active')
			.siblings('li.active')
			.removeClass('active');
		$(this)
			.closest('.documents-tabset')
			.find('.documents-tab-body .documents-tab-body__tab')
			.eq(ind)
			.addClass('active')
			.siblings('.documents-tab-body__tab.active')
			.removeClass('active');
		if($(window).innerWidth() < 1200){
			var dest = $(this).closest('li').offset().top;
		}
		$(window).resize();
	});
}


function initGridView(){
	$('.view-navigation .btn-small-grid').on('click', function(e) {
		e.preventDefault();
		$(this).closest('.section-tile-items__item').find('.goal-cards').addClass('large-grid-view');
	});
	$('.view-navigation .btn-large-grid').on('click', function(e) {
		e.preventDefault();
		$(this).closest('.section-tile-items__item').find('.goal-cards').removeClass('large-grid-view');
	});
}

function initCardSlider() {
	initSLider();
	$(window).on('load resize orientationchange', function () {
		initSLider();
	});

	function initSLider() {
		$('.snapshot-cards').each(function () {
			var $carousel = $(this);
			if ($(window).width() > 1200 && $carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick('unslick');
				initGallerySlider();
			} else if ($(window).width() < 1200 && !$carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick({
					slidesToShow: 3,
					infinite: true,
					slidesToScroll: 1,
					variableWidth: true,
					dots: false,
					nextArrow: $carousel.closest('.snapshot-cards-wrap').find('.arrow-next'),
					prevArrow: $carousel.closest('.snapshot-cards-wrap').find('.arrow-prev')
				});
				initGallerySlider();
			} else {
				initGallerySlider();
			}
		});
	}
}

function initTagsSelect(){
	$(".select-multiple").select2({
		tags: true,
		dropdownCssClass: "select-multiple-drop",
        matcher: matchCustom,
        templateResult: formatCustom,
		createTag: function () { return null }
	}).on('change', function() {
		var $selected = $(this).find('option:selected');
		var $container = $(this).siblings('.select-multiple-tags-container');
		var $list = $('<ul>');
		$selected.each(function(k, v) {
		  var $li = $('<li class="tag-selected"><a class="destroy-tag-selected"></a>' + $(v).text() + '</li>');
		  $li.children('a.destroy-tag-selected')
			.off('click.select2-copy')
			.on('click.select2-copy', function(e) {
			  var $opt = $(this).data('select2-opt');
			  $opt.attr('selected', false);
			  $opt.parents('select').trigger('change');
			}).data('select2-opt', $(v));
		  $list.append($li);
		});
		$container.html('').append($list);
	}).trigger('change');

	function stringMatch(term, candidate) {
		return candidate && candidate.toLowerCase().indexOf(term.toLowerCase()) >= 0;
	}
	
	function matchCustom(params, data) {
		if ($.trim(params.term) === '') {
			return data;
		}
		// Do not display the item if there is no 'text' property
		if (typeof data.text === 'undefined') {
			return null;
		}
		// Match text of option
		if (stringMatch(params.term, data.text)) {
			return data;
		}
		// Match attribute "data-button" of option
		if (stringMatch(params.term, $(data.element).attr('data-button'))) {
			return data;
		}
		// Return `null` if the term should not be displayed
		return null;
	}
	
	function formatCustom(state) {
		return $(
			'<div><div>' + state.text + '</div><div class="button">'
				+ $(state.element).attr('data-button')
				+ '</div></div>'
		);
	}


	// Link for modal in Select2 option
    $('.select-multiple').on("select2:open", function () {
		$this_html = jQuery(this).closest('.select-multiple-holder').find('.select-multiple-link').html();
		if(!$(".select2-results").find('.select2-results__option--custom').length){
			$(".select2-results").append("<div class='select2-results__option select2-results__option--custom'>" + $this_html + "</div>");
		}
	});
}

function initSlideBlock(){
	$('.view-button').on('click', function() {
		$(this).closest('.notice-overview-holder').find('.notice-holder').addClass('open');
		$(this).closest('.notice-overview-holder').find('.notice-overview-holder__description-wrap').addClass('open');
	});
	$('.close-button').on('click', function() {
		$(this).closest('.notice-overview-holder').find('.notice-holder').removeClass('open');
		$(this).closest('.notice-overview-holder').find('.notice-overview-holder__description-wrap').removeClass('open');
	});
}

function initRangeFormSlider(){
	$('.range').each(function () {
		var pipsSlider = this;
		noUiSlider.create(pipsSlider, {
			start: 3,
			connect: [true, false],
			tooltips: true,
			range: {
				'min': 0,
				'max': 10
			},
			pips: {
				mode: 'range'
			},
			format: wNumb({
				decimals: 0,
				thousand: ' '
			})
		});
	});
}


function initValidatePassword(){
	$( ".verify-account-form" ).validate( {
		rules: {
			password: {
				required: true,
				minlength: 5
			},
			confirm_password: {
				required: true,
				minlength: 5,
				equalTo: "#password"
			},
			agree: "required"
		},
		messages: {
			password: {
				required: "Please provide a password",
				minlength: "Your password must be at least 5 characters long"
			},
			confirm_password: {
				required: "Please provide a password",
				minlength: "Your password must be at least 5 characters long",
				equalTo: "Please enter the same password as above"
			},
			agree: "Please accept our policy"
		},
		errorElement: "span",
		errorPlacement: function ( error, element ) {
			error.addClass( "label" );

			if ( element.prop( "type" ) === "checkbox" ) {
				error.insertAfter( element.parent( "label" ) );
			} else {
				error.insertAfter( element );
			}
		},
		highlight: function ( element, errorClass, validClass ) {
			$( element ).parents( ".form-group" ).addClass( "has-error" ).removeClass( "has-success" );
		},
		unhighlight: function (element, errorClass, validClass) {
			$( element ).parents( ".form-group" ).addClass( "has-success" ).removeClass( "has-error" );
		}
	} );
	$('.verify-account-form').on('change', function() {
		if($(this).is(':valid') && !$(this).find('[aria-invalid="true"]').length){
			$(this).find('button[type="submit"]').removeAttr('disabled');
		} else {
			$(this).find('button[type="submit"]').attr('disabled', true);
		}
	});
	
}

function initDropdownPopper(){
	$('.dropdown-toggle').dropdown({
		flip: false
	});

	$('.dropdown-menu').on('click', function(e) {
		if($(this).hasClass('filter-menu-drop')) {
			e.stopPropagation();
		}
	});
}

function initPercentSlider() {
	$('.percent-slider').each(function () {
		var pipsSlider = this;
		noUiSlider.create(pipsSlider, {
			start: 45,
			connect: [true, false],
			tooltips: true,
			range: {
				'min': 0,
				'max': 100
			},
			pips: {
				mode: 'range'
			},
			format: wNumb({
				decimals: 0,
				thousand: ' '
			})
		});
	});
}

function initStickyTableHead() {
	$(window).on("load resize scroll", function() {
		$('.offer-summary-table__sticky-head').each(function() {
			var fixedHeaderHeight = 0;
			if ($(window).innerWidth() > 1023) {
				fixedHeaderHeight = $('.header').innerHeight();
			}
			var offset = $(window).scrollTop() + fixedHeaderHeight - $(this).offset().top;
			if(offset > 0){
				$(this).addClass('fixed');
				if(offset >= $('.offer-summary-table, .comparison-table').innerHeight() - $(this).innerHeight() - fixedHeaderHeight){
					offset = $('.offer-summary-table, .comparison-table').innerHeight() - $(this).innerHeight() - fixedHeaderHeight;
				}
				$(this).find('.offer-summary-table__offer-holder').css('top', offset);
				$(this).find('.offer-summary-table__buttons').css('top', offset);
			} else {
				$(this).removeClass('fixed');
				$(this).find('.offer-summary-table__offer-holder').css('top', 'auto');
				$(this).find('.offer-summary-table__buttons').css('top', 'auto');
			}
		});
	});
}

function initSlyScrollBar(){
	var $frame = $('.offer-summary-table .scroll-cover');
	var $slidee = $frame.children('offer-summary-table .scroll-holder').eq(0);
	var $wrap  = $frame.parent();

	// Call Sly on frame
	$frame.each(function() {
		$(this).sly({
			horizontal: 1,
			itemNav: 'basic',
			scrollBy: 1,
			touchDragging: false,
			mouseDragging: false,
			smart:  1,
			scrollSource: false,
			activateOn: 'click',
			speed: 200,
			moveBy: 600,

			// Buttons
			prev: $('.offer-summary-table .arrow-prev'),
			next: $('.offer-summary-table .arrow-next')
		});
	});
}


function initFormGroups(){
	$('input[type="checkbox"][data-group]').on('change', function(){
	var groupName = $(this).data('group');

	$(this).closest('form').find('input[data-group="' + groupName + '"]:not([type="checkbox"]), select[data-group="' + groupName + '"]').prop('disabled', !$(this).is(':checked'));
	$(this).closest('form').find('select[data-group="' + groupName + '"]').selectpicker('refresh');
  });

	$("select[name='group01']").on('change', function(){
		$(this).closest('form').find("select[name='group02']").removeAttr('disabled').selectpicker('refresh');
	});

	$("select[name='group02']").on('change', function(){
		$(this).closest('form').find("input.form-control").removeAttr('disabled');
	});
}


function initDatePicker(){
	$('input.datepicker').daterangepicker({
		singleDatePicker: true,
		showDropdowns: false,
		minYear: 2020,
		minDate: new Date(),
		autoApply: true,
		locale:{
			"daysOfWeek": [
				"S",
				"M",
				"T",
				"W",
				"T",
				"F",
				"S"
			],
			"monthNames": [
				"January",
				"February",
				"March",
				"April",
				"May",
				"June",
				"July",
				"August",
				"September",
				"October",
				"November",
				"December"
			]
		}
	});
	$('input.datepicker').val('');
	$('.datepicker-field input.datepicker').attr("placeholder","Choose Date");
	$('.details-form input.datepicker').attr("placeholder","MM/DD/YYYY");
}

function initInputMask(){
	$("input.currency-mask").inputmask( "decimal",{
		digits: 2,
		groupSeparator: ",",
		rightAlign: false,
		allowPlus: false,
		allowMinus: false,
		prefix: "$",
		autoGroup: true,
		digitsOptional:false,
		autoUnmask:true,
		showMaskOnHover: false,
		placeholder: "0",
		numericInput: true
	});

	$("input.currency-input").inputmask( "decimal",{
		digits: 2,
		groupSeparator: ",",
		rightAlign: false,
		prefix: "",
		autoGroup: true,
		showMaskOnHover: false,
		alias: "numeric",
		autoGroup: !0,
		digitsOptional: !1
	});

	$("input.phone").inputmask("(999) 999-9999",
	{
		showMaskOnHover: false,
		rightAlign: false
	});

	$("input.numeric-value").inputFilter(function(value) {
		return /^\d*$/.test(value);
	});
	

	$('.percentage-input').inputmask( "decimal",{
		digits: 2,
		rightAlign: false,
		prefix: "",
		autoGroup: true,
		showMaskOnHover: false,
		alias: "numeric",
		allowMinus: false,
		allowPlus: false,
		autoGroup: !0,
		digitsOptional: !1,
		groupSize: 1,
		integerDigits: 2
	 });
	 
}


// jQuery input filter showcase
(function($) {
	$.fn.inputFilter = function(inputFilter) {
	  return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function() {
		if (inputFilter(this.value)) {
		  this.oldValue = this.value;
		  this.oldSelectionStart = this.selectionStart;
		  this.oldSelectionEnd = this.selectionEnd;
		} else if (this.hasOwnProperty("oldValue")) {
		  this.value = this.oldValue;
		  this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
		} else {
		  this.value = "";
		}
	  });
	};
  }(jQuery));
// jQuery input filter showcase

function initMatchHeight(){
	$('.records-card__title').matchHeight();
}

function initSearchTabs(){
	$('[data-tabs]').on('click', function(e) {
		e.preventDefault();
		$(this).closest('li').addClass('active').siblings('li.active').removeClass('active');
		var activeTabsName = $(this).data('tabs');
		$('[data-tabs-name="' + activeTabsName + '"]').each(function() {
			$(this).addClass('active').siblings('.tab.active').removeClass('active');
		});
		window.location.hash = '#' + activeTabsName;
		$(window).resize();
	});
	  if(window.location.hash && $('a[href="' + window.location.hash + '"]').length){
		 $('a[href="' + window.location.hash + '"]').click();
	 }
	$('.tab-control li.active a').trigger('click');
	$('.tab-control a').on('click', function(e) {
		if ($(this).closest('li').hasClass('active') && $(window).innerWidth() < 767) {
			e.preventDefault();
			$(this).closest('.tab-control').toggleClass('open');
		}
	});
	$(document).on('click', function(e) {
		if ($(e.target).closest('.tab-control.open li.active').length)
			return;
		$('.tab-control.open').removeClass('open');
	});
}

function initStickySecondarySidebar(){
    var window_width = $( window ).width();

    if (window_width <= 1200) {
		$(".stick-to-top").trigger("sticky_kit:detach");
    } else {
      make_sticky();
    }

    $( window ).resize(function() {

      window_width = $( window ).width();

      if (window_width <= 1200) {
        $(".stick-to-top").trigger("sticky_kit:detach");
      } else {
        make_sticky();
      }

    });

    function make_sticky() {
		var headerHeight = $('.header__main-header').innerHeight();
      $(".stick-to-top").stick_in_parent({
        parent: '.content-section',
		offset_top: headerHeight + 80
      });
	}
	
}


function initStickBar(){
	var headerHeight = $('.header__main-header').innerHeight();
	var menuHeight = $('.property-menu').length ? $(".property-menu").innerHeight() : 0;
	var dashboardHeight = $('.dashboard-navigation').length ? $(".dashboard-navigation").innerHeight() : 0;
	var stopWatching = false;
	var expandedClicked = false;
	var timeout = false;

	function initSticky() {
		if($(window).innerWidth() > 1000){
			$("#sticky-bar").stick_in_parent({
				offset_top: headerHeight + menuHeight + 10
			});
		}
	}

	function destroySticky() {
		$("#sticky-bar").trigger("sticky_kit:detach");
	}

	initSticky();

	$("#sticky-bar").on('sticky_kit:unstick', function() {
		expandedClicked = false;
		if(!$(this).find('.aside-review .aside-expanded.open').length){
			$(this).find('.btn-expanded').trigger('click', 'fake');
			timeout = true;
			setTimeout(function() {
				timeout = false;
			}, 350);
		}
	});

	$('.btn-expanded').on('click', function(e, type) {
		destroySticky();
		$(this).closest('.aside-profile-block').find('.aside-review .aside-expanded').toggleClass('open');
		if(!$(this).closest('.aside-profile-block').find('.aside-review .aside-expanded').hasClass('open')){
			expandedClicked = true;
			$(this).closest('.aside-profile-block').find('.aside-review .aside-expanded').stop().slideUp(function() {
				initSticky();
			});
		} else {
			$(this).closest('.aside-profile-block').find('.aside-review .aside-expanded').stop().slideDown(function() {
				initSticky();
			});
			stopWatching = true;
			setTimeout(function() {
				stopWatching = false;
			}, 1000);
		}
	});

	if($('#sticky-bar').length){
		var $sidebar = $('#sticky-bar');
		$(window).on('load resize scroll', function() {
			if(!expandedClicked && !timeout){
				if($(window).scrollTop() + $('.header').innerHeight() + $('.property-menu-holder').innerHeight() > $sidebar.closest('.property-section__main-content').offset().top + $sidebar.innerHeight() - $(window).innerHeight()){
					if(!$sidebar.find('.aside-review .aside-expanded.open').length) return false;
					$sidebar.find('.btn-expanded').trigger('click');
				}
			}
		});
	}


	$('.btn-expanded').on('click', function() {
		$(this).closest('.btn-expanded-holder').find('.btn-expanded__text').toggleClass('show-text');
	});
 
};


function initScrollWrap(){
	var $frame  = $('.property-menu-scroll'),
		breakpoint = 1023,
		slyInited = false;
	init();
	$(window).on('resize', function() {
		init();
	});
	function init() {
		if($(window).innerWidth() > breakpoint && !slyInited){
			var $wrap  = $frame.parent();
			$frame.sly({
				horizontal: 1,
				itemNav: 'basic',
				scrollSource: null, 
				smart: 1,
				activateOn: 'click',
				mouseDragging:  true,
				touchDragging: 1,
				releaseSwing: 1,
				scrollBy: 0,
				activatePageOn: 'click',
				speed: 300,
				dragHandle: 1,
				dynamicHandle: 1,
				clickBar: 1,
			prev: $wrap.find('.prev'),
			next: $wrap.find('.next')
			});
		} else if($(window).innerWidth() <= breakpoint && slyInited){
			$frame.sly(false);
		}
	}

	$('.property-menu .active-category').on('click', function() {
		$(this).closest('.property-menu').toggleClass('open');
	});

	$(document).on('click', function(e){
		if($(e.target).closest('.active-category').length) return;
		$('.property-menu').removeClass('open');
	});
}


function initMediaSmartSlider(){
		$('.media-slider').slick({
			arrows: false,
			dots: false,
			centerMode: true,
			slidesToShow: 1,
			variableWidth: true,
			responsive: [
				{
					breakpoint: 1024,
					settings: {
						variableWidth: false,
						centerMode: false,
						slidesToShow: 1,
						adaptiveHeight: true
					}
				}
			]
		});

}


function initFeatureSlider() {
	initSLider();
	$(window).on('load resize orientationchange', function () {
		initSLider();
	});

	function initSLider() {
		$('.feature-slider').each(function () {
			var $carousel = $(this);
			if ($(window).width() > 1023 && $carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick('unslick');
				initGallerySlider();
			} else if ($(window).width() <= 1023 && !$carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick({
					slidesToShow: 4,
					slidesToScroll: 1,
					arrows: true,
					responsive: [
						{
							breakpoint: 768,
							settings: {
								slidesToShow: 3
							}
						},
						{
							breakpoint: 600,
							settings: {
								slidesToShow: 1
							}
						}
					]
				});
				initGallerySlider();
			} else {
				initGallerySlider();
			}
		});
	}
}


function initShowMoreText(){
	$('.general-info-wrap__btn').on('click', function(e) {
		e.preventDefault();
		$('.general-info-wrap').toggleClass('open');
		$('.general-info-wrap__more-text').slideToggle();
	});
}


function initScrollMenu(){

	if ($('.property-menu').length) {
		$(window).on('scroll', function () {
			var stickyTop = $('.property-menu-holder').offset().top;
			var headerHeight = $('.header__main-header').innerHeight();
			if ($(window).scrollTop() + headerHeight > stickyTop){
				$('.property-menu').addClass('sticky');
			} else {
				$('.property-menu').removeClass('sticky');
			}
		});
	}

	var offsetArr = [];
	  $(window).on('load resize', function() {
		offsetArr = [];
		for(var i = 0; i < $('.property-menu li').length; i++){
		  var elId = $('.property-menu li').eq(i).find('a').attr('href');
		  if($(elId).length){
			offsetArr.push($(elId).offset().top);
		  }
		}
	  });

	$('.property-list a').on('click', function(e) {
		if($(this).attr('href')[0] == "#"){
			if($($(this).attr('href')).length){
				e.preventDefault();
				var self = this;
				var dest = $($(self).attr('href')).offset().top;
				if($(window).innerWidth() > 1023){
					dest = dest - $('.property-menu').innerHeight()- $('.header__main-header').innerHeight();
				}
				$('html, body').stop().animate({
					scrollTop: dest
				}, 700);
				var text = $(this).text();
				$(this).closest('.property-menu').find('.active-category').text(text);
			}
		}
	});

	  $(window).on('load resize scroll', function() {
		var _top = $(window).scrollTop();
		for(var i = offsetArr.length - 1; i >= 0; i--){
		  if(_top + $('.header__main-header').innerHeight() + $('.property-menu').innerHeight() + 15 > offsetArr[i]){
			$('.property-menu li').removeClass('active');
			$('.property-menu li').eq(i).closest('li').addClass('active');
			break;
		  } else if(_top < offsetArr[0]) {
			$('.property-menu li').removeClass('active');
		  }
		}
	  });

	  var offsetArr2 = [];
		$(window).on('load resize', function() {
			offsetArr2 = [];
		  for(var i = 0; i < $('.anchor-list li').length; i++){
			var elId = $('.anchor-list li').eq(i).find('a').attr('href');
			if(elId !== '#' && $(elId).length){
				offsetArr2.push($(elId).offset().top);
			}
		  }
		});

		$(window).on('load resize scroll', function() {
		  var _top = $(window).scrollTop();
		  for(var i = offsetArr2.length - 1; i >= 0; i--){
			if(_top + $('.header__main-header').innerHeight() + $('.sticky-submenu').innerHeight() + 15 > offsetArr2[i]){
			  $('.anchor-list li').removeClass('active');
			  $('.anchor-list li').eq(i).closest('li').addClass('active');
			  break;
			} else if(_top < offsetArr2[0]) {
			  $('.anchor-list li').removeClass('active');
			}
		  }
		});

		$('.listing-navigation-list a').on('click', function(e) {
			if($(this).attr('href')[0] == "#"){
				if($($(this).attr('href')).length){
					e.preventDefault();
					var self = this;
					var dest = $($(self).attr('href')).offset().top;
					if($(window).innerWidth() > 1023){
						dest = dest - $('.sticky-submenu').innerHeight()- $('.header__main-header').innerHeight();
					}
					$('html, body').stop().animate({
						scrollTop: dest
					}, 700);
				}
			}
		});
	

	  $('.anchor-list a').on('click', function(e) {
		if($(this).attr('href')[0] == "#"){
			if($($(this).attr('href')).length){
				e.preventDefault();
				var self = this;
				var dest = $($(self).attr('href')).offset().top;
				if($(window).innerWidth() > 1023){
					dest = dest - $('.sticky-submenu').innerHeight()- $('.header__main-header').innerHeight();
				}
				if($(window).innerWidth() <= 1023){
					dest = dest - $('.sticky-submenu').innerHeight();
				}
				$('html, body').stop().animate({
					scrollTop: dest
				}, 700);
			}
		}
	});

	if ($('.section-nav-holder').length) {
		$(window).on('scroll', function () {
			var stickyTop = $('.section-nav-sticky').offset().top;
			var headerHeight = $('.header__main-header').innerHeight();
			if ($(window).scrollTop() + headerHeight > stickyTop){
				$('.section-nav-holder').addClass('sticky');
			} else {
				$('.section-nav-holder').removeClass('sticky');
			}
		});
	}
}


function initAccordion(){
	$('.accordion-item:not(.open) .expanded').hide();
	$('.accordion-item .title').on('click', function() {
	var item = $(this).closest('.accordion-item')[0];
	$(this).closest('.accordion-item').toggleClass('open');
		if($(this).closest('.accordion-item').hasClass('open')){
			$(this).closest('.accordion-item').find('.expanded').stop().slideDown();
			$(this).closest('.accordion-item').closest('.accordion-items').find('.accordion-item').each(function(){
			if(this != item){
			}
		});
		} else {
			$(this).closest('.accordion-item').find('.expanded').stop().slideUp();
		}
	});
}


function initTooltipCustom(){
	$('.tooltip-secondary').tooltip({
		customClass: 'bg-secondary-tooltip',
		html:true,
		boundary: 'window'
	});
	$('.tooltip-blue').tooltip({
		customClass: 'bg-blue-tooltip',
		html:true,
		boundary: 'window'
	});
	$('.tooltip-options').tooltip({
		customClass: 'bg-white-options',
		trigger: 'hover',
		boundary: 'window'
	});
	$('.tooltip-large').tooltip({
		customClass: 'bg-blue-options',
		boundary: 'window',
		trigger : 'hover'
	});
	$('.tooltip-large-success').tooltip({
		customClass: 'bg-success-options',
		boundary: 'window'
	});
	$('.tooltip-large-light').tooltip({
		customClass: 'bg-light-options',
		boundary: 'window'
	});
	$('.tooltip-large-yellow').tooltip({
		customClass: 'bg-yellow-options',
		boundary: 'window'
	});
	$('.tooltip-large-gray').tooltip({
		customClass: 'bg-gray-options',
		boundary: 'window'
	});
    var window_width = $( window ).width();

    if (window_width >= 1200) {
		$('button:not(.tooltip-show), a:not(.tooltip-show)').on('click', function(){
			$('[data-toggle="tooltip"]').tooltip('hide');
		});
    }
}


function initToggleExpanded(){
	$('.mls-access-wrap .btn-toggle').on('click', function(e) {
		e.preventDefault();
		$('.mls-access-wrap .expanded').slideDown();
	});
	$('.dropdown-mobile-head .close-drop').on('click', function(e) {
		e.preventDefault();
		$(this).closest('.dropdown').find('.dropdown-menu').removeClass('show');
		$(this).closest('.dropdown').find('.dropdown').removeClass('show');
	});
	$('.search-filter-sort .toggle-search').on('click', function(e) {
		e.preventDefault();
		$('.form-field-expanded .form-group').slideToggle();
	});
	$('.comparison-table .filter-button').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('active');
		$('.table-search-holder').slideToggle();
	});
	// 263 comparison page
	$('.agent-section-card__card-block__agent .agent-desc').on('mouseover', function() {
		$(this).toggleClass('open');
		$(this).closest('.agent-section-card').find('.agent-section-card__card-block').toggleClass('open');
	});
	$(document).on('mousemove', function(e){
		if($(e.target).closest('.agent-section-card').length) return;
		$('.agent-section-card__card-block').removeClass('open');
	});
	// 263 comparison page
	$('.mls-access-wrap .ico-close').on('click', function() {
		$('.mls-access-wrap .expanded').slideUp();
	});
	$('.btn-comment-expanded').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('open');
		$(this).closest('.reviews-list__item').find('.comments-wrap-expanded').slideToggle();
	});
	$('.p-m-comment-list-i-com .p-m-comment-list-i-c-reply').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('open');
		$(this).closest('.p-m-comment-list-i-com').find('.comment-expanded-tile').slideToggle();
	});
	$('.comment-insert .p-m-comment-list-i-c-reply').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('open');
		$(this).closest('.comment-insert').find('.comment-expanded-tile').slideToggle();
	});
	$('.head-navigation .btn-icon').on('click', function() {
		$(this).toggleClass('open');
		$('.head-navigation .head-navigation__expanded').slideToggle();
	});
	$('.dashboard-menu__mobile-button .options-button').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('open');
		$('.dashboard-actions-profile').slideToggle();
	});
	$('.details-wrap__toggle-btn').on('click', function() {
		$(this).toggleClass('open');
		$('.details-wrap__expanded').slideToggle();
	});
	$('.details-wrap .more-details-btn').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('open');
		$('.details-wrap__expanded').slideToggle();
	});
	$('.details-wrap__expanded .close-button').on('click', function() {
		$('.details-wrap__expanded').slideToggle();
		$('.details-wrap__toggle-btn').removeClass('open');
	});
	$('.property-content__item').each(function() {
		if(!$(this).hasClass('open')){
			$(this).find('.accordion-items__expanded-holder').hide();
		}
	});
	$('.page-head .toggle-btn').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('open');
		$(this).closest('.page-head').find('.page-head__expanded').slideToggle();
	});
	$('.slide-title .toggle-btn').on('click', function(e) {
		e.preventDefault();
		$(this).toggleClass('open');
		$(this).closest('.frame-content').find('.slide-expanded').slideToggle();
	});
	$('.options-block__primary-expanded .options-links__button.more-options').on('click', function(e) {
		e.preventDefault();
		$(this).closest('.participant-cards__item').find('.options-block__secondary-expanded').addClass('open');
	});
	$('.options-block__secondary-expanded .options-links__button.close-options').on('click', function(e) {
		e.preventDefault();
		$(this).closest('.participant-cards__item').find('.options-block__secondary-expanded').removeClass('open');
	});
	$(document).on('click mousemove', function(e) {
		if($(e.target).closest('.participant-cards__item').length) return;
		$('.options-block__secondary-expanded.open').removeClass('open');
	});

	$('.property-content .btn-icon').on('click', function() {
		if($(this).closest('.property-content__item').hasClass('open')){
			$(this).closest('.property-content__item').find('.accordion-items__expanded-holder').stop().slideUp();
			$(this).closest('.property-content__item').removeClass('open');
		} else {
			$(this).closest('.property-content__item').find('.accordion-items__expanded-holder').stop().slideDown();
			$(this).closest('.property-content__item').addClass('open');
		}
	});
}

function initCustomForm() {
	$(function () {
		jcf.replaceAll();
	});
}

function initTooltipFunc() {
	$('.tooltip').tooltipster({
		animation: 'fade',
		delay: 200,
		theme: ['tooltipster-noir', 'tooltipster-noir-customized'],
		interactive: true,
	});

	if ($(window).width() < 1025) {
		$('.tooltip').tooltipster('destroy');
	}
}

function initFormValidate() {

	$('.secret-code-input .form-control, .comments-form .p-m-comment-write-text textarea').on('blur change', function () {
		if ($(this).val().length) {
			$(this).addClass('has-value');
		} else {
			$(this).removeClass('has-value');
		}
	});

	$('[data-input-group]').on('focus', function() {
		var group = $(this).data('inputGroup'),
			input = this;

		$('[data-input-group="' + group + '"]').each(function() {
			if(this !== input){
				$(this).attr('disabled', 'disabled');
			}
		});
	});

	$('[data-input-group]').on('blur', function() {
		var group = $(this).data('inputGroup');

		if(!$(this).val().length){
			$('[data-input-group="' + group + '"]').each(function() {
				$(this).removeAttr('disabled');
			});
		}
	});

	$(".reset-form").on('click', function() {
		$(this).closest('form').find("input.form-control, textarea").val("");
		$(this).closest('form').find('.selectpicker').val('');
		$(this).closest('form').find('select.selectpicker').selectpicker('refresh');
	});

	$('input.alpha-numeric').alphanumeric();
	
	$('.validate-form').each(function () {
		$(this).validate({
			ignore: [],       
			rules: {
				firstname: "required",
				login: "required",
				lastname: "required",
				password: {
					required: true
				},
				confirm_password: {
					required: true,
					equalTo: "#password"
				},
				select: {
					required: true
				},
				select1: {
					required: true
				},
				select2: {
					required: true
				},
				email: {
					required: true,
					email: true
				},
				comment:{
					required: true,
				},
				field:{
					required: true,
				},
				field1:{
					required: true,
				},
				field2:{
					required: true,
				},
				agree: {
					required: false
				}
			},
		});
	});$('.selectpicker').on('change', function () {
		$(this).valid();
	});
	$('.validate-form').on('change', function() {
		if($(this).valid()){
			$(this).find('button[type="submit"]').removeAttr('disabled');
		} else {
			$(this).find('button[type="submit"]').attr('disabled', true);
		}
	});
}

function initMmenu() {
	$(".drop-hover-mmenu").each(function() {
		var $menu = $(this);
		$menu.mmenu({
			"autoHeight": true,
			"dropdown": true,
			"offCanvas": false,
			navbar: {
				title: " "
			}
		});

		var mmenu = $menu.data('mmenu')

		$(this).closest('.mm-wrapper').find('.nav-link').on('mouseenter', function() {
				mmenu.closeAllPanels();
		});
	});


	$('.mm-btn_next').on('click', function () {
		var self = this;
		setTimeout(function () {
			$('.mm-panel_opened .mm-navbar__title').html($(self).find('.menu-item__inner').html());
		}, 100);
	});

	$(window).on('orientationchange', function () {
		$('.nav-list> li.has-drop').removeClass('open');
	});

	$(".drop-options-mmenu").each(function() {
		var $menu = $(this);
		$menu.mmenu({
			"autoHeight": true,
			"dropdown": true,
			"offCanvas": false
		});
	});

}


$(function () {
	$(".ellipsis-text").each(function() {
		$(this).dotdotdot({
			callback: dotdotdotCallback
		});
	});

	$(".ellipsis-text-toggle").on('click', function (e) {
		e.preventDefault();
		$(this).toggleClass('active');
		var div = $(this).closest('.ellipsis-block').find('.ellipsis-text');
		if ($(this).hasClass('active')) {
			div.addClass('expanded');
			div.trigger('destroy');
		} else {
			div.removeClass('expanded');
			div.dotdotdot({
				after: ".more",
				watch: true,
				callback: dotdotdotCallback
			});
		}
	});

	function dotdotdotCallback(isTruncated, originalContent) {
		var $link = $(originalContent.prevObject).closest('.ellipsis-block').find('.ellipsis-text-toggle');
		if (!isTruncated) {
			$link.addClass('disabled');
		} else {
			$link.removeClass('disabled');
		}
	}
});


$(function() {
	$(".ellipsis-text-inner").dotdotdot({
	  after: 'a.more',
	  watch: "window",
	  callback: dotdotdotCallback
	});
  
	$(".ellipsis-text-inner").on('click','a',function(e) {
		e.preventDefault();
	  if ($(this).hasClass('more')) {
		var div = $(this).closest('.ellipsis-text-inner').addClass('open');
		div.trigger('destroy').find('a.more').css('display','none');
		div.css('max-height', '100%');
		$("a.less", div).css('display','inline-block');
	  }
	  else {
		$(this).css('display','none');
		$(this).closest('.ellipsis-text-inner').removeClass('open').css("max-height", "165px").dotdotdot({ after: "a.more", callback: dotdotdotCallback });
	  }
	});
  
	function dotdotdotCallback(isTruncated, originalContent) {
	  if (!isTruncated) {
		$("a", this).remove();   
	  }
	}
  });

function initOverflowLink() {
	$(document).on('mouseenter', ".link-mail", function () {
		var $this = $(this);
		if (this.offsetWidth < this.scrollWidth && !$this.attr('title')) {
			$this.tooltip({
				title: $this.text(),
				placement: "bottom"
			});
			$this.tooltip('show');
		}
	});
}

function initDataTableTeam() {
	var table = $('table.team-table-wrap').DataTable({
		pagingType: "simple_numbers",
		"language": {
			"lengthMenu": "results to display _MENU_",
			oPaginate: {
				sNext: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-right"></use></svg>',
				sPrevious: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-left"></use></svg>'
			}
		},
		"drawCallback": function () {
			$('.dataTables_paginate > .pagination').addClass('pagination-bg');
			$('.dataTables_length').addClass('flat-custom-select-drop');
			$('.dataTables_length').addClass('dataTables_length-custom');
		},
		"bFilter": false,
		"bInfo": false,
		"autoWidth": false,
		"aLengthMenu": [
			[5, 10, 15, -1],
			[5, 10, 15, "All"]
		],
		"iDisplayLength": 5,
		"dom": '<"top"i>rt<"bottom"flp><"clear">'
	});
	$(".dataTables_length select").selectpicker();
}

function initImgLoader() {
	$('.image-loader').each(function () {
		var loader = this;
		$(loader).find('input[type="file"]').on('change', function (e) {
			readURL(this);
			$(loader).find('.image-preview').fadeIn();
		});

		$(loader).find('.image-preview__uploaded-img img').on('load', function () {
			$(this).cropper('destroy').cropper({
				aspectRatio: 1 / 1,
				preview: $(loader).find('.image-preview__img')
			});
		});
	});

	function readURL(input) {
		if (input.files && input.files[0]) {
			var reader = new FileReader();

			reader.onload = function (e) {
				$(input).closest('.image-loader').find('.image-preview__uploaded-img img').attr('src', e.target.result);
			}

			reader.readAsDataURL(input.files[0]);
		}
	}
}

function initButtonPassword() {
	$('.login-form .btn-show').on('click', function () {
		if ($('.form-control-password').attr('data-password') == 'false') {

			$('.form-control-password').removeAttr('type');
			$('.form-control-password').attr('type', 'text');

			$('.form-control-password').removeAttr('data-password');
			$('.form-control-password').attr('data-password', 'true');

			$('.button-psswd').html('Hide password');

		} else {

			$('.form-control-password').removeAttr('type');
			$('.form-control-password').attr('type', 'password');

			$('.form-control-password').removeAttr('data-password');
			$('.form-control-password').attr('data-password', 'false');
		}

	});
}

function initDropSubject() {
	$('.custom-multiple-select').each(function () {
		var subClass = $(this).data('subClass');
		$(this).select2({
			templateResult: formatState,
			placeholder: "Please select",
			dropdownCssClass: subClass
		});
	});
	$('.custom-multiple-select').on('select2:select', function (e) {
		if (e.params.data) {
			$('.select2-selection__rendered').text('Click Here To Change');
			var $elem = $('<div class="select-option" ></div>').append('<span class="select-option__img" ><img src="' + e.params.data.title + '" /></span>');
			$elem.append('<span class="select-option__content" >' + e.params.data.text + '<span>');
			$('.select-2-results-container').html($elem);
		}
	})

	function formatState(state) {
		if (!state.id) {
			return state.text;
		}
		var $state = $(
			'<span class="select-option"><span class="select-option__img"><img src="' + state.title + '"/></span><span class="select-option__content"> ' + state.text + '</span></span>'
		);
		return $state;
	};
}

function initDataTableRanking() {
	var table = $('table.historical-table-wrap').DataTable({
		pagingType: "simple_numbers",
		"language": {
			oPaginate: {
				sNext: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-right"></use></svg>',
				sPrevious: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-left"></use></svg>'
			}
		},
		"drawCallback": function () {
			$('.dataTables_paginate > .pagination').addClass('pagination-bg');
		},
		"bFilter": false,
		"bInfo": false,
		"lengthChange": false,
		"autoWidth": false,
		"iDisplayLength": 5
	});
}

function initDataTableScoring() {
	var table = $('table.scoring-table-wrap').DataTable({
		pagingType: "simple_numbers",
		"language": {
			"lengthMenu": "results to display _MENU_",
			oPaginate: {
				sNext: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-right"></use></svg>',
				sPrevious: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-left"></use></svg>'
			}
		},
		"drawCallback": function () {
			$('.dataTables_paginate > .pagination').addClass('pagination-bg');
			$('.dataTables_length').addClass('flat-custom-select-drop');
			$('.dataTables_length').addClass('dataTables_length-custom');
		},
		"bFilter": false,
		"bInfo": false,
		"autoWidth": false,
		"aLengthMenu": [
			[5, 10, 15, -1],
			[5, 10, 15, "All"]
		],
		"iDisplayLength": 5,
		"dom": '<"top"i>rt<"bottom"flp><"clear">'
	});
	$(".dataTables_length select").selectpicker();
}

function initDataTable() {
	var table = $('table.datatable-table').DataTable({
		destroy: true,
		pagingType: 'full_numbers',
		"language": {
			"sLengthMenu": "_MENU_",
			oPaginate: {
				sFirst: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-double-left"></use></svg>',
				sPrevious: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-left"></use></svg>',
				sNext: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-right"></use></svg>',
				sLast: '<svg width="9" height="13"><use xlink:href="assets/img/sprite-icons.svg#chevron-double-right"></use></svg>'
			}
		},
		"bInfo": false,
		"autoWidth": false,
		"bFilter": false,
		fnInitComplete: function (oSettings, json) {
			$('.dataTables_length').detach().prependTo(".custom-length");
		},
		"aLengthMenu": [
			["Show 8 Rows", "Show 16 Rows", "Show 24 Rows", -1],
			["Show 8 Rows", "Show 16 Rows", "Show 24 Rows", "All"]
		],
		"pageLength": 8
	});

	$('.custom-select').addClass('selectpicker');

	$('table.datatable-table tfoot th').each(function () {
		var title = $(this).text();
		$(this).html('<input type="text" placeholder="' + title + '" />');
		var input = $(this);
		$(this).append("<span class='btn-clear'></span>");
		$('.btn-clear').on('click', function () {
			$(this).prev('.datatable-table-input input').val('');
		});
	});

	$('#change-date').on('change', function () {
		var elValue = $(this).val();
		var dataColumn = table.column(4);
		dataColumn.order(elValue).draw()
	});

	table.columns().every(function () {
		var that = this;
		$('input', this.footer()).on('keyup change clear', function () {
			if (that.search() !== this.value) {
				that
					.search(this.value)
					.draw();
			}
		});
	});


	$("div.toolbar").html('<h2>' + table.data("title") + '</h2>');
}

function initCustomDrop() {
	$('.nav-menu-list a').on('click', function (e) {
		if ($(this).closest('li').hasClass('active') && $(window).innerWidth() < 1280) {
			$(this).closest('.nav-menu-list').toggleClass('open');
		}
	});
	$(document).on('click', function (e) {
		if ($(e.target).closest('.nav-menu-list.open li.active').length)
			return;
		$('.nav-menu-list.open').removeClass('open');
	});
}

function initStickyBlock() {	

	if ($('.tools-progress-wrap').length) {
		var stickyTop = $('.tools-progress-wrap').offset().top;
		$(window).on('scroll', function () {
			if ($(window).scrollTop() > stickyTop) {
				$('.tools-progress-wrap').addClass('sticky');
			} else {
				$('.tools-progress-wrap').removeClass('sticky');
			}
		});
	}
	
	if ($('.sticky-navigation-wrap.sticky-submenu').length) {
		var stickyTop = $('.entry-navigation').offset().top + 200;
		$(window).on('scroll', function () {
			if ($(window).scrollTop() > stickyTop) {
				$('.sticky-navigation-wrap.sticky-submenu').addClass('sticky');
			} else {
				$('.sticky-navigation-wrap.sticky-submenu').removeClass('sticky');
			}
		});
	}
}

function initAppendRow() {
	$('.btn-add').on('click', function (e) {
		e.preventDefault();
		var options = [{
			text: 'Single Hung',
			value: 'value_1'
		}, {
			text: 'Walk-In ',
			value: 'value_2'
		}, {
			text: 'Single Hung',
			value: 'value_3'
		}]
		var $select = $('<div class="form-group"><label class="label-form text-secondary">closet <span class="label-num">#</span> type</label><div class="custom-select-drop"></div><span class="btn-remove"></span></div>');
		$select.append('<select class="selectpicker"/>');
		options.forEach(function (option) {
			var $option = $('<option/>').text(option.text).attr('value', option.value);
			$select.find('.selectpicker').append($option);
		});
		$('.form-group-append').append($select);
		initSelect();
		$('.form-group-append').on('click', '.btn-remove', function (e) {
			e.preventDefault();
			$(this).closest('.form-group').remove();
		});
	});
}

function initDragDrop() {
	$('.drop-form input[type="file"]').on('change', function (e) {
		if (e.target.files.length) {
			$(this).closest('.drop-form').addClass('uploaded');
		} else {
			$(this).closest('.drop-form').removeClass('uploaded');
		}
	});
}

function initTableCheckbox() {
	$('.imported-table-wrap input[data-select-group]').on('change', function () {
		var groupName = $(this).data('select-group');
		if ($(this).prop('checked')) {
			$('[data-selected-group="' + groupName + '"]').each(function () {
				$(this).prop('checked', 'checked').change();
			});
		} else {
			$('[data-selected-group="' + groupName + '"]').each(function () {
				$(this).prop('checked', false).change();
			});
		}
	});
	$('.imported-table-wrap .form-check-input input[type="checkbox"]').on('change', function () {
		if ($(this).prop('checked')) {
			$(this).closest('.imported-table-wrap__row').addClass('checked');
		} else {
			$(this).closest('.imported-table-wrap__row').removeClass('checked');
		}
	});
	var table = $('table.imported-table-wrap').DataTable({
		retrieve: true,
		paging: false,
		"bInfo": false,
		"autoWidth": false,
		"bFilter": false
	});
}

function initStickyOption() {
	$('.quick-add-modal__quick-add').on('click', function (e) {
		e.preventDefault();
		$('body').addClass('quick-add-modal-open');
	});

	$('.quick-add-modal__close-modal').on('click', function (e) {
		e.preventDefault();
		$('body').removeClass('quick-add-modal-open');
	});

	$(document).click(function (event) {
		if (!$(event.target).closest('.quick-add-modal,.quick-add-modal__quick-add').length) {
			$('body').removeClass('quick-add-modal-open');
		}
	});

}

function initSlideDownExpanded() {
	$('.management-list-group').each(function () {
		if (!$(this).hasClass('open')) {
			$(this).find('.tab-content-expanded').hide();
		}
	});
	$('.management-list-group .client-management-list__see-more').on('click', function () {
		if ($(this).closest('.management-list-group').hasClass('open')) {
			$(this).closest('.management-list-group').find('.tab-content-expanded').stop().slideUp();
			$(this).closest('.management-list-group').removeClass('open');
		} else {
			$(this).closest('.management-list-group').find('.tab-content-expanded').stop().slideDown();
			$(this).closest('.management-list-group').addClass('open');
		}
	});

}

function initSlickCarousel() {
	$('.collections-slider').slick({
		dots: false,
		slidesToShow: 4,
		slidesToScroll: 1,
		responsive: [{
			breakpoint: 1024,
			settings: {
				variableWidth: true,
				slidesToShow: 4,
				arrows: false
			}
		}]
	});
	$('.tour-days-row').slick({
		dots: false,
		slidesToShow: 3,
		slidesToScroll: 1
	});
}

function initCustomDropDown() {
	$('.custom-dropdown-option').each(function () {
		var $dropdown = $(this),
			$main = $(this).find('.select-item'),
			$li = $(this).find('li.input-option'),
			$inputoption = $(this).find('.select-option'),
			default_text = $(this).data('placeholder');

		$main.on('click', function () {
			if ($dropdown.hasClass('open')) {
				$dropdown.removeClass('open');
			} else {
				$('.custom-dropdown-option.open').removeClass('open');
				$main.html(default_text);
				$dropdown.addClass('open');
			}
		});

		$li.on('click', function () {
			var livalue = $(this).data('value');
			var lihtml = $(this).html();
			$main.html(lihtml);
			$dropdown.toggleClass('open');
			$inputoption.val(livalue);
		});
	});

	$(document).on('click', function (e) {
		if ($(e.target).closest('.custom-dropdown-option').length) return;
		$('.custom-dropdown-option.open').removeClass('open');
	})

	$('.dashboard-menu-wrap .dashboard-menu__item.active').on('click', function(e) {
		e.preventDefault();
		$('.dashboard-menu').toggleClass('open');
		$('.btn-toggle').toggleClass('open');
	});

	$('.profile-inner-info__profile-block .btn-toggle').on('click', function() {
		$('.profile-inner-info__profile-block').toggleClass('open');
	});
}

function initSlickSliderCard() {
	$('.card-carousel').each(function () {
		var slider = $(this);
		$(this).slick({
			infinite: true,
			dots: false,
			slidesToShow: 4,
			variableWidth: true,
			slidesToScroll: 1,
			nextArrow: $(slider).closest('.slider-carousel-wrap').find('.arrow-next'),
			prevArrow: $(slider).closest('.slider-carousel-wrap').find('.arrow-prev')
		});
	});
	$('.card-slider').each(function () {
		var carousel = $(this);
		$(this).slick({
			infinite: true,
			dots: false,
			slidesToShow: 3,
			slidesToScroll: 1,
			nextArrow: $(carousel).closest('.slider-overview-wrap').find('.arrow-next'),
			prevArrow: $(carousel).closest('.slider-overview-wrap').find('.arrow-prev'),
			responsive: [
				{
					breakpoint: 1201,
					settings: {
						variableWidth: true
					}
				}
			]
		});
	});
}

function removeUpload() {
	$('.file-upload-input').val('').replaceWith($('.file-upload-input').clone());
	$('.file-upload-content').hide();
	$('.image-upload-wrap').show();
}

$('.image-upload-wrap').bind('dragover', function () {
	$('.image-upload-wrap').addClass('image-dropping');
});
$('.image-upload-wrap').bind('dragleave', function () {
	$('.image-upload-wrap').removeClass('image-dropping');
});

function readURL(input) {

	if (input.files && input.files[0]) {

		var reader = new FileReader();

		reader.onload = function (e) {
			$('.image-upload-wrap').hide();

			$('.file-upload-image').attr('src', e.target.result);
			$('.file-upload-content').show();

			$('.image-title').html(input.files[0].name);
		};

		reader.readAsDataURL(input.files[0]);

	} else {
		removeUpload();
	}
}

function initAccordionTable() {
	$('.table-summary-details__item:not(.open) .expanded').hide();
	$('.table-summary-details__item .table-summary-details__arrow-button').on('click', function () {
		var item = $(this).closest('.table-summary-details__item')[0];
		$(this).closest('.table-summary-details__item').toggleClass('open');
		if ($(this).closest('.table-summary-details__item').hasClass('open')) {
			$(this).closest('.table-summary-details__item').find('.expenses-transaction-expanded').stop().slideDown();
			$(this).closest('.table-summary-details__item').closest('.table-summary-details').find('.table-summary-details__item').each(function () {
				if (this != item) {
					$(this).removeClass('open').find('.expenses-transaction-expanded').stop().slideUp()
				}
			});
		} else {
			$(this).closest('.table-summary-details__item').find('.expenses-transaction-expanded').stop().slideUp();
		}
	});
};

function initTableDrop() {
	$('.table-summary .table-summary__btn').on('click', function (e) {
		e.preventDefault();
		$(this).toggleClass('open');
	});


	$('.table-summary > li[data-drop-group]').hide();

	$('.table-summary__btn[data-drop]').on('click', function () {
		var groupName = $(this).data('drop');
		$(this).closest('>li').toggleClass('open');
		$('.table-summary >li').each(function () {
			if ($(this).data('drop-group') == groupName) {
				$(this).stop().slideToggle();
			}
		});
	});
}

function initCloseMenu() {
	$('.navbar-users>li .dropdown>a').on('click', function () {
		$('body').removeClass('menu-open');
	});
	$('.property-slider .close').on('click', function () {
		$('body').removeClass('property-slider-modal');
	});
}

function initValidateBootstrapForm() {
	window.addEventListener("onload", function () {
		var form = document.getElementById("needs-validation");
		form.addEventListener("submit", function (event) {
			if (form.checkValidity() == false) {
				event.preventDefault();
				event.stopPropagation();
			}
			form.classList.add("was-validated");
		}, false);
	}, false);

	$('.email').on('blur', function () {
		if ($(this).val() != '') {
			var pattern = /^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;
			if (pattern.test($(this).val())) {
				$(this).css({
					'border': '2px solid #1aca8e'
				});
			} else {
				$(this).css({
					'border': '2px solid #FB4C60'
				});
			}
		} else {
			$(this).css({
				'border': '1px solid #FB4C60'
			});
			$('#valid').text('ENTER YOUR EMAIl');
		}
	});
}

function initAlertModal() {
	$('.temp-alert').on('closed.bs.alert', function () {})

	window.setTimeout(function () {
		$(".temp-alert").fadeTo(200, 0).slideUp(500, function () {
			$(this).remove();
		});
	}, 3000);
}

function initHoverDrop() {
	$('.card-list__inner').on('mouseover', function () {
		$(this).closest('.card-list__inner').addClass('hover');
	});
	$('.card-list__inner').on('mouseout', function () {
		$(this).closest('.card-list__inner').removeClass('hover');
	});
	$('.participant-cards__item').on('hover', function () {
		$(this).closest('.participant-cards__item').addClass('hover');
	});
}

function initModalShow() {
	$('.btn-film').on('click', function (e) {
		e.preventDefault();
		$('body').addClass('modal-show');
	});
	$('.modal-close').on('click', function (e) {
		e.preventDefault();
		$('body').removeClass('modal-show');
	});
	$('.btn-film').on('click', function () {
		$(this).closest('.card-list__inner').addClass('active');
	});
	$('.modal-close').on('click', function () {
		$('.card-list__inner').removeClass('active');
	});

	$(window).on('load',function(){
		window.setTimeout(function () {
			$('#system-modal, #recommend-modal').modal('show');
		}, 5000);	
	});
	$(".show-modal").modal({ show : true });
}

function initScrollTop() {
	var btn = $('.button-scroll-top');
	$('.map-content-scroll').scroll(function () {
		if ($(this).scrollTop() > 50) {
			btn.addClass('show');
		} else {
			btn.removeClass('show');
		}
	});
	var button = $('.button-scroll-top__btn-page');
	$(window).scroll(function () {
		if ($(this).scrollTop() > 50) {
			button.addClass('show');
		} else {
			button.removeClass('show');
		}
	});
	$('.button-scroll-top').on('click', function (e) {
		e.preventDefault();
		$('.map-content-scroll').animate({
			scrollTop: 0
		}, 700);
	});
	$('.button-scroll-top__btn-page').on('click', function (e) {
		e.preventDefault();
		$('html, body').animate({
			scrollTop: 0
		}, 700);
	});
}

function initSlickSlider() {
	initSLider();
	$(window).on('load resize orientationchange', function () {
		initSLider();
	});

	function initSLider() {
		$('.carousel').each(function () {
			var $carousel = $(this);
			if ($(window).width() > 767 && $carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick('unslick');
				initGallerySlider();
			} else if ($(window).width() <= 767 && !$carousel.hasClass('slick-initialized')) {
				destroyGallerySlider();
				$carousel.slick({
					slidesToShow: 1,
					slidesToScroll: 1,
					mobileFirst: true,
					arrows: false,
					centerMode: true,
				});
				initGallerySlider();
			} else {
				initGallerySlider();
			}
		});
	}
}

function initGallerySlider() {
	$('.gallery-items').each(function () {
		if (!$(this).hasClass('slick-initialized')) {
			$(this).slick({
				slidesToShow: 1,
				slidesToScroll: 1,
				swipe: false
			});
		}
	});
}

function destroyGallerySlider() {
	$('.gallery-items').each(function () {
		if ($(this).hasClass('slick-initialized')) {
			$(this).slick('unslick');
		}
	});
}

function initCustomCheckbox () {
	$('.collecting-wrap').each(function() {
		var $wrap = $(this),
			check = $wrap.find('.check-all'),
			uncheck = $wrap.find('.uncheck-all');

		var checkboxes = $wrap.find('input[type="checkbox"]');
		
		function handler (type) {
			checkboxes.each(function (index, item) {
				$(this).prop('checked', type).trigger('change');
				jcf.getInstance(item).refresh();
			})
		}

		check.on('click', handler.bind(null, true));
		uncheck.on('click', handler.bind(null, false));
	});
	$('.vendor-main-category__item').each(function() {
		var $wrap = $(this),
			check = $wrap.find('.check-all'),
			uncheck = $wrap.find('.uncheck-all');

		var checkboxes = $wrap.find('input[type="checkbox"]');
		
		function handler (type) {
			checkboxes.each(function (index, item) {
				$(this).prop('checked', type).trigger('change');
				jcf.getInstance(item).refresh();
			})
		}

		check.on('click', handler.bind(null, true));
		uncheck.on('click', handler.bind(null, false));
	});
}

function initCheckedBox() {
	$('.card-list .card-list__form-check input[type="checkbox"]').on('change', function () {
		if ($(this).prop('checked')) {
			$(this).closest('.card-list__inner').addClass('checked');
		} else {
			$(this).closest('.card-list__inner').removeClass('checked');
		}
	});
	$('.info-squares .info-squares__inner').on('click', function () {
		$(this).toggleClass('checked');
		if ($(this).hasClass('checked')) {
			$(this).find('.jcf-checkbox').addClass('jcf-checked').trigger('change');
		} else {
			$(this).find('.jcf-checkbox').removeClass('jcf-checked').trigger('change');
		}
	});
	$('.check-all').on('click', function () {
		$(this).closest('.collecting-wrap').find('.info-squares__inner').addClass('checked');
		$(this).closest('.vendor-main-category__item').find('.vendor-sub-category__inner').addClass('checked');
	});
	$('.uncheck-all').on('click', function () {
		$(this).closest('.collecting-wrap').find('.info-squares__inner').removeClass('checked');
		$(this).closest('.vendor-main-category__item').find('.vendor-sub-category__inner').removeClass('checked');
	});
	$('.properties-list input[type="checkbox"]').on('change', function () {
		if ($(this).prop('checked')) {
			$(this).closest('.properties-list__inner').addClass('checked');
			$(this).closest('.btn-check').find('.text').text('Deselect this property');
		} else {
			$(this).closest('.properties-list__inner').removeClass('checked');
			$(this).closest('.btn-check').find('.text').text('Confirm this property');
		}
	});

	$('.properties-list .btn-check label').on('mouseenter', function () {
		if ($(this).closest('.btn-check').find('input[type="checkbox"]').prop('checked')) {
			$(this).find('.text').text('Deselect this property');
		}
	});

	$('.properties-list .btn-check label').on('mouseleave', function () {
		if ($(this).closest('.btn-check').find('input[type="checkbox"]').prop('checked')) {
			$(this).find('.text').text('Selected');
		}
	});
}

function initMap() {
	if ($('#map').length) {
		map = new google.maps.Map(document.getElementById('map'), {
			center: {
				lat: -34.397,
				lng: 150.644
			},
			zoom: 8
		});
	};
};

function initSlickCount() {
	$('.concerns-slider-holder').each(function () {
		var $slider = $(this),
			totalSlides = $(this).find('.concerns-slider-holder .concern-list > .slider-item').length;

		$slider.find('.concerns-slider-holder .concern-list').on('init', function () {
			$slider.find('.slider-status .slider-total').text(totalSlides);
		});

		$slider.find('.concern-list').slick({
			slidesToShow: 4,
			responsive: [{
				breakpoint: 767,
				settings: {
					slidesToShow: 1,
					slidesToScroll: 1,
					centerMode: true,
					arrows: false
				}
			}]
		});
		$slider.find('.concerns-slider-holder .concern-list').on('beforeChange', function (event, slick, currentSlide, nextSlide) {
			var statusText = nextSlide + 1 + '-',
				slidesBy = $slider.find('.concerns-slider-holder .concern-list').slick('slickGetOption', 'slidesToShow');
			if (nextSlide - 1 + slidesBy < totalSlides) {
				var currentEndSlideIndex = nextSlide + slidesBy;
				statusText = statusText + currentEndSlideIndex;
			} else {
				var currentEndSlideIndex = totalSlides - nextSlide - 1;
				if (currentEndSlideIndex == 0) {
					currentEndSlideIndex = slidesBy - 1;
				}
				statusText = statusText + currentEndSlideIndex;
			}
			$slider.find('.slider-current').text(statusText);
		});
	});
	$('.slider-holder').each(function () {
		var $slider = $(this),
			totalSlides = $(this).find('.properties-list > .slider-item').length;

		$slider.find('.properties-list').on('init', function () {
			$slider.find('.slider-status .slider-total').text(totalSlides);
		});

		$slider.find('.properties-list').slick({
			slidesToShow: 4,
			responsive: [{
					breakpoint: 1200,
					settings: {
						slidesToShow: 3,
						slidesToScroll: 1,
						centerMode: true
					}
				},
				{
					breakpoint: 1023,
					settings: {
						slidesToShow: 2,
						slidesToScroll: 1,
						centerMode: true
					}
				},
				{
					breakpoint: 767,
					settings: {
						slidesToShow: 1,
						slidesToScroll: 1,
						centerMode: true,
						arrows: false
					}
				}
			]
		});
		$slider.find('.properties-list').on('beforeChange', function (event, slick, currentSlide, nextSlide) {
			var statusText = nextSlide + 1 + '-',
				slidesBy = $slider.find('.properties-list').slick('slickGetOption', 'slidesToShow');
			if (nextSlide - 1 + slidesBy < totalSlides) {
				var currentEndSlideIndex = nextSlide + slidesBy;
				statusText = statusText + currentEndSlideIndex;
			} else {
				var currentEndSlideIndex = totalSlides - nextSlide - 1;
				if (currentEndSlideIndex == 0) {
					currentEndSlideIndex = slidesBy - 1;
				}
				statusText = statusText + currentEndSlideIndex;
			}
			$slider.find('.slider-current').text(statusText);
		});
	});
}

function initDropDownMenu() {
	$('.nav-list .has-drop > a').on('click', function (e) {
		e.preventDefault();
		if ($(window).innerWidth() < 1024) {
			$(this).closest('li').toggleClass('open');
			if ($(this).closest('li').hasClass('open')) {
				$(this)
					.closest('li')
					.find('> .drop-hover-menu')
					.stop()
					.slideDown();
				$(this)
					.closest('li')
					.siblings('li.open')
					.removeClass('open')
					.find('> .drop-hover-menu')
					.stop()
					.slideUp();
			} else {
				$(this)
					.closest('li')
					.find('> .drop-hover-menu')
					.stop()
					.slideUp();
			}
		}
	});
	$('.drop-menu-list .has-subdrop > .drop-link').on('click', function (e) {
		e.preventDefault();
		if ($(window).innerWidth() < 1024) {
			$(this).closest('li').toggleClass('open');
			if ($(this).closest('li').hasClass('open')) {
				$(this)
					.closest('li')
					.find('> .drop-options')
					.stop()
					.slideDown();
				$(this)
					.closest('li')
					.siblings('li.open')
					.removeClass('open')
					.find('> .drop-options')
					.stop()
					.slideUp();
			} else {
				$(this)
					.closest('li')
					.find('> .drop-options')
					.stop()
					.slideUp();
			}
		}
	});
	$('.overview-menu .has-drop > a').on('click', function (e) {
		e.preventDefault();
		if ($(window).innerWidth() < 1024) {
			$(this).closest('li').toggleClass('open');
			if ($(this).closest('li').hasClass('open')) {
				$(this)
					.closest('li')
					.find('> .drop-menu-wrap')
					.stop()
					.slideDown();
				$(this)
					.closest('li')
					.siblings('li.open')
					.removeClass('open')
					.find('> .drop-menu-wrap')
					.stop()
					.slideUp();
			} else {
				$(this)
					.closest('li')
					.find('> .drop-menu-wrap')
					.stop()
					.slideUp();
			}
		}
	});
};

function initMobileMenu() {
	$('.burger').on('click', function (e) {
		e.preventDefault();
		$('body').toggleClass('menu-open');
	});
}

function initSlidingMenu() {
	$('.nav-menu-sliding .btn-back').on('click', function (e) {
		e.preventDefault();
		$('body').toggleClass('nav-open');
	});
	
	$('.btn-toggle-slider').on('click', function (e) {
		e.preventDefault();
		$('body').toggleClass('property-slider-modal');
	});
}

function initSelect() {
	$(".selectpicker:not(.inited)").each(function () {
		$(this).selectpicker({
			size: '8'
		}).addClass('inited');
	});

	$('.selectpicker').on('change', function () {
		const $select = $(this).closest('.custom-select-drop');
		$select.removeClass('success declined');
		switch ($(this).val()) {
			case "success":
				$select.addClass('success');
				break;
			case "declined":
				$select.addClass('declined');
				break;
		}
	});
}

function initTooltip() {
	$('.button-scroll-top').tooltip({
		customClass: 'bg-secondary-tooltip'
	});
}

function initRangeSlider() {
	$('.slider-handles').each(function () {
		var slider = this;
		noUiSlider.create(slider, {
			start: [20, 80],
			connect: true,
			range: {
				'min': 0,
				'max': 200
			},
			tooltips: true,
			pips: {
				mode: 'count',
				values: 5
			}
		});
	});
}

function initProbabilitySlider() {
	$('.probability-slider').each(function () {
		var pipsSlider = this;
		noUiSlider.create(pipsSlider, {
			start: 0,
			connect: true,
			tooltips: true,
			stepped: true,
			range: {
				'min': 0,
				'max': 10
			},
			pips: {
				mode: 'count',
				values: 11
			},
			format: wNumb({
				decimals: 0,
				thousand: ' '
			})
		});
		pipsSlider.noUiSlider.on('update', function (values) {
			/* Set Maximum Position */
			var maxPos = Math.max(values);

			/* Add Highlight Class to Pip */
			$(pipsSlider).find('.noUi-value:visible').removeClass('highlight').eq(maxPos).addClass('highlight');
		});
	});
}

function initColorSlider() {
	$('.color-slider').each(function () {
		var pipsSlider = this;
		noUiSlider.create(pipsSlider, {
			start: 20,
			connect: [true, false],
			tooltips: true,
			range: {
				'min': 0,
				'max': 5
			},
			pips: {
				mode: 'count',
				values: 5
			}
		});
	});
}

/* ================================================
 * bootstrap4-tooltip-custom-class.js v1.0.0
 *
 * Extend Bootstrap v4 Tooltip plugin by adding custom classes.
 * Custom classes can be added by using `customClass` paramater or via `data-custom-class` attribute.
 * There are 5 predefined custom classes in CSS: .tooltip-primary, .tooltip-success, .tooltip-info, .tooltip-warning, .tooltip-danger.
 * Compatible with Bootstrap v4.0.0-beta, v4.0.0 and v4.1.0
 * ============================================= */

;
(function ($) {

	if (typeof $.fn.tooltip.Constructor === 'undefined') {
		throw new Error('Bootstrap Tooltip must be included first!');
	}

	var Tooltip = $.fn.tooltip.Constructor;

	// add customClass option to Bootstrap Tooltip
	$.extend(Tooltip.Default, {
		customClass: ''
	});

	var _show = Tooltip.prototype.show;

	Tooltip.prototype.show = function () {

		// invoke parent method
		_show.apply(this, Array.prototype.slice.apply(arguments));

		if (this.config.customClass) {
			var tip = this.getTipElement();
			$(tip).addClass(this.config.customClass);
		}

	};

})(window.jQuery);

! function (e) {
	"function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? module.exports = e() : window.wNumb = e()
}(function () {
	"use strict";
	var o = ["decimals", "thousand", "mark", "prefix", "suffix", "encoder", "decoder", "negativeBefore", "negative", "edit", "undo"];

	function w(e) {
		return e.split("").reverse().join("")
	}

	function h(e, t) {
		return e.substring(0, t.length) === t
	}

	function f(e, t, n) {
		if ((e[t] || e[n]) && e[t] === e[n]) throw new Error(t)
	}

	function x(e) {
		return "number" == typeof e && isFinite(e)
	}

	function n(e, t, n, r, i, o, f, u, s, c, a, p) {
		var d, l, h, g = p,
			v = "",
			m = "";
		return o && (p = o(p)), !!x(p) && (!1 !== e && 0 === parseFloat(p.toFixed(e)) && (p = 0), p < 0 && (d = !0, p = Math.abs(p)), !1 !== e && (p = function (e, t) {
			return e = e.toString().split("e"), (+((e = (e = Math.round(+(e[0] + "e" + (e[1] ? +e[1] + t : t)))).toString().split("e"))[0] + "e" + (e[1] ? e[1] - t : -t))).toFixed(t)
		}(p, e)), -1 !== (p = p.toString()).indexOf(".") ? (h = (l = p.split("."))[0], n && (v = n + l[1])) : h = p, t && (h = w((h = w(h).match(/.{1,3}/g)).join(w(t)))), d && u && (m += u), r && (m += r), d && s && (m += s), m += h, m += v, i && (m += i), c && (m = c(m, g)), m)
	}

	function r(e, t, n, r, i, o, f, u, s, c, a, p) {
		var d, l = "";
		return a && (p = a(p)), !(!p || "string" != typeof p) && (u && h(p, u) && (p = p.replace(u, ""), d = !0), r && h(p, r) && (p = p.replace(r, "")), s && h(p, s) && (p = p.replace(s, ""), d = !0), i && function (e, t) {
			return e.slice(-1 * t.length) === t
		}(p, i) && (p = p.slice(0, -1 * i.length)), t && (p = p.split(t).join("")), n && (p = p.replace(n, ".")), d && (l += "-"), "" !== (l = (l += p).replace(/[^0-9\.\-.]/g, "")) && (l = Number(l), f && (l = f(l)), !!x(l) && l))
	}

	function i(e, t, n) {
		var r, i = [];
		for (r = 0; r < o.length; r += 1) i.push(e[o[r]]);
		return i.push(n), t.apply("", i)
	}
	return function e(t) {
		if (!(this instanceof e)) return new e(t);
		"object" == typeof t && (t = function (e) {
			var t, n, r, i = {};
			for (void 0 === e.suffix && (e.suffix = e.postfix), t = 0; t < o.length; t += 1)
				if (void 0 === (r = e[n = o[t]])) "negative" !== n || i.negativeBefore ? "mark" === n && "." !== i.thousand ? i[n] = "." : i[n] = !1 : i[n] = "-";
				else if ("decimals" === n) {
				if (!(0 <= r && r < 8)) throw new Error(n);
				i[n] = r
			} else if ("encoder" === n || "decoder" === n || "edit" === n || "undo" === n) {
				if ("function" != typeof r) throw new Error(n);
				i[n] = r
			} else {
				if ("string" != typeof r) throw new Error(n);
				i[n] = r
			}
			return f(i, "mark", "thousand"), f(i, "prefix", "negative"), f(i, "prefix", "negativeBefore"), i
		}(t), this.to = function (e) {
			return i(t, n, e)
		}, this.from = function (e) {
			return i(t, r, e)
		})
	}
});


/*
 Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net
*/
(function(){var b,f;b=this.jQuery||window.jQuery;f=b(window);b.fn.stick_in_parent=function(d){var A,w,J,n,B,K,p,q,k,E,t;null==d&&(d={});t=d.sticky_class;B=d.inner_scrolling;E=d.recalc_every;k=d.parent;q=d.offset_top;p=d.spacer;w=d.bottoming;null==q&&(q=0);null==k&&(k=void 0);null==B&&(B=!0);null==t&&(t="is_stuck");A=b(document);null==w&&(w=!0);J=function(a,d,n,C,F,u,r,G){var v,H,m,D,I,c,g,x,y,z,h,l;if(!a.data("sticky_kit")){a.data("sticky_kit",!0);I=A.height();g=a.parent();null!=k&&(g=g.closest(k));
if(!g.length)throw"failed to find stick parent";v=m=!1;(h=null!=p?p&&a.closest(p):b("<div />"))&&h.css("position",a.css("position"));x=function(){var c,f,e;if(!G&&(I=A.height(),c=parseInt(g.css("border-top-width"),10),f=parseInt(g.css("padding-top"),10),d=parseInt(g.css("padding-bottom"),10),n=g.offset().top+c+f,C=g.height(),m&&(v=m=!1,null==p&&(a.insertAfter(h),h.detach()),a.css({position:"",top:"",width:"",bottom:""}).removeClass(t),e=!0),F=a.offset().top-(parseInt(a.css("margin-top"),10)||0)-q,
u=a.outerHeight(!0),r=a.css("float"),h&&h.css({width:a.outerWidth(!0),height:u,display:a.css("display"),"vertical-align":a.css("vertical-align"),"float":r}),e))return l()};x();if(u!==C)return D=void 0,c=q,z=E,l=function(){var b,l,e,k;if(!G&&(e=!1,null!=z&&(--z,0>=z&&(z=E,x(),e=!0)),e||A.height()===I||x(),e=f.scrollTop(),null!=D&&(l=e-D),D=e,m?(w&&(k=e+u+c>C+n,v&&!k&&(v=!1,a.css({position:"fixed",bottom:"",top:c}).trigger("sticky_kit:unbottom"))),e<F&&(m=!1,c=q,null==p&&("left"!==r&&"right"!==r||a.insertAfter(h),
h.detach()),b={position:"",width:"",top:""},a.css(b).removeClass(t).trigger("sticky_kit:unstick")),B&&(b=f.height(),u+q>b&&!v&&(c-=l,c=Math.max(b-u,c),c=Math.min(q,c),m&&a.css({top:c+"px"})))):e>F&&(m=!0,b={position:"fixed",top:c},b.width="border-box"===a.css("box-sizing")?a.outerWidth()+"px":a.width()+"px",a.css(b).addClass(t),null==p&&(a.after(h),"left"!==r&&"right"!==r||h.append(a)),a.trigger("sticky_kit:stick")),m&&w&&(null==k&&(k=e+u+c>C+n),!v&&k)))return v=!0,"static"===g.css("position")&&g.css({position:"relative"}),
a.css({position:"absolute",bottom:d,top:"auto"}).trigger("sticky_kit:bottom")},y=function(){x();return l()},H=function(){G=!0;f.off("touchmove",l);f.off("scroll",l);f.off("resize",y);b(document.body).off("sticky_kit:recalc",y);a.off("sticky_kit:detach",H);a.removeData("sticky_kit");a.css({position:"",bottom:"",top:"",width:""});g.position("position","");if(m)return null==p&&("left"!==r&&"right"!==r||a.insertAfter(h),h.remove()),a.removeClass(t)},f.on("touchmove",l),f.on("scroll",l),f.on("resize",
y),b(document.body).on("sticky_kit:recalc",y),a.on("sticky_kit:detach",H),setTimeout(l,0)}};n=0;for(K=this.length;n<K;n++)d=this[n],J(b(d));return this}}).call(this);



/*
* jquery-match-height 0.7.2 by @liabru
* http://brm.io/jquery-match-height/
* License MIT
*/
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=-1,o=-1,n=function(t){return parseFloat(t)||0},a=function(e){var o=1,a=t(e),i=null,r=[];return a.each(function(){var e=t(this),a=e.offset().top-n(e.css("margin-top")),s=r.length>0?r[r.length-1]:null;null===s?r.push(e):Math.floor(Math.abs(i-a))<=o?r[r.length-1]=s.add(e):r.push(e),i=a}),r},i=function(e){var o={
byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof e?t.extend(o,e):("boolean"==typeof e?o.byRow=e:"remove"===e&&(o.remove=!0),o)},r=t.fn.matchHeight=function(e){var o=i(e);if(o.remove){var n=this;return this.css(o.property,""),t.each(r._groups,function(t,e){e.elements=e.elements.not(n)}),this}return this.length<=1&&!o.target?this:(r._groups.push({elements:this,options:o}),r._apply(this,o),this)};r.version="0.7.2",r._groups=[],r._throttle=80,r._maintainScroll=!1,r._beforeUpdate=null,
r._afterUpdate=null,r._rows=a,r._parse=n,r._parseOptions=i,r._apply=function(e,o){var s=i(o),h=t(e),l=[h],c=t(window).scrollTop(),p=t("html").outerHeight(!0),u=h.parents().filter(":hidden");return u.each(function(){var e=t(this);e.data("style-cache",e.attr("style"))}),u.css("display","block"),s.byRow&&!s.target&&(h.each(function(){var e=t(this),o=e.css("display");"inline-block"!==o&&"flex"!==o&&"inline-flex"!==o&&(o="block"),e.data("style-cache",e.attr("style")),e.css({display:o,"padding-top":"0",
"padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),l=a(h),h.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||"")})),t.each(l,function(e,o){var a=t(o),i=0;if(s.target)i=s.target.outerHeight(!1);else{if(s.byRow&&a.length<=1)return void a.css(s.property,"");a.each(function(){var e=t(this),o=e.attr("style"),n=e.css("display");"inline-block"!==n&&"flex"!==n&&"inline-flex"!==n&&(n="block");var a={
display:n};a[s.property]="",e.css(a),e.outerHeight(!1)>i&&(i=e.outerHeight(!1)),o?e.attr("style",o):e.css("display","")})}a.each(function(){var e=t(this),o=0;s.target&&e.is(s.target)||("border-box"!==e.css("box-sizing")&&(o+=n(e.css("border-top-width"))+n(e.css("border-bottom-width")),o+=n(e.css("padding-top"))+n(e.css("padding-bottom"))),e.css(s.property,i-o+"px"))})}),u.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||null)}),r._maintainScroll&&t(window).scrollTop(c/p*t("html").outerHeight(!0)),
this},r._applyDataApi=function(){var e={};t("[data-match-height], [data-mh]").each(function(){var o=t(this),n=o.attr("data-mh")||o.attr("data-match-height");n in e?e[n]=e[n].add(o):e[n]=o}),t.each(e,function(){this.matchHeight(!0)})};var s=function(e){r._beforeUpdate&&r._beforeUpdate(e,r._groups),t.each(r._groups,function(){r._apply(this.elements,this.options)}),r._afterUpdate&&r._afterUpdate(e,r._groups)};r._update=function(n,a){if(a&&"resize"===a.type){var i=t(window).width();if(i===e)return;e=i;
}n?o===-1&&(o=setTimeout(function(){s(a),o=-1},r._throttle)):s(a)},t(r._applyDataApi);var h=t.fn.on?"on":"bind";t(window)[h]("load",function(t){r._update(!1,t)}),t(window)[h]("resize orientationchange",function(t){r._update(!0,t)})});


(function ($) {
    $.fn.alphanumeric = function (p) {
        var input = $(this),
            az = "abcdefghijklmnopqrstuvwxyz",
            options = $.extend({
                ichars: '!@#$%^&*()+=[]\\\';,/{}|":<>?~`.- _',
                nchars: '',
                allow: ''
            }, p),
            s = options.allow.split(''),
            i = 0,
            ch,
            regex;

        for (i; i < s.length; i++) {
            if (options.ichars.indexOf(s[i]) != -1) {
                s[i] = '\\' + s[i];
            }
        }

        if (options.nocaps) {
            options.nchars += az.toUpperCase();
        }
        if (options.allcaps) {
            options.nchars += az;
        }

        options.allow = s.join('|');

        regex = new RegExp(options.allow, 'gi');
        ch = (options.ichars + options.nchars).replace(regex, '');

        input.keypress(function (e) {
            var key = String.fromCharCode(!e.charCode ? e.which : e.charCode);

            if (ch.indexOf(key) != -1 && !e.ctrlKey) {
                e.preventDefault();
            }
        });

        input.blur(function () {
            var value = input.val(),
                j = 0;

            for (j; j < value.length; j++) {
                if (ch.indexOf(value[j]) != -1) {
                    input.val('');
                    return false;
                }
            }
            return false;
        });

        return input;
    };

    $.fn.numeric = function (p) {
        var az = 'abcdefghijklmnopqrstuvwxyz',
            aZ = az.toUpperCase();

        return this.each(function () {
            $(this).alphanumeric($.extend({
                nchars: az + aZ
            }, p));
        });
    };

    $.fn.alpha = function (p) {
        var nm = '1234567890';
        return this.each(function () {
            $(this).alphanumeric($.extend({
                nchars: nm
            }, p));
        });
    };
})(jQuery);


/*
 *  jQuery StarRatingSvg v1.2.0
 *
 *  http://github.com/nashio/star-rating-svg
 *  Author: Ignacio Chavez
 *  hello@ignaciochavez.com
 *  Licensed under MIT
 */

;(function ( $, window, document, undefined ) {

	'use strict';
  
	// Create the defaults once
	var pluginName = 'starRating';
	var noop = function(){};
	var defaults = {
	  totalStars: 5,
	  useFullStars: false,
	  starShape: 'straight',
	  emptyColor: 'lightgray',
	  hoverColor: 'orange',
	  activeColor: 'gold',
	  ratedColor: 'crimson',
	  useGradient: true,
	  readOnly: false,
	  disableAfterRate: true,
	  baseUrl: false,
	  starGradient: {
		start: '#FEF7CD',
		end: '#FF9511'
	  },
	  strokeWidth: 4,
	  strokeColor: 'black',
	  initialRating: 0,
	  starSize: 40,
	  callback: noop,
	  onHover: noop,
	  onLeave: noop
	};
  
	  // The actual plugin constructor
	var Plugin = function( element, options ) {
	  var _rating;
	  var newRating;
	  var roundFn;
  
	  this.element = element;
	  this.$el = $(element);
	  this.settings = $.extend( {}, defaults, options );
  
	  // grab rating if defined on the element
	  _rating = this.$el.data('rating') || this.settings.initialRating;
  
	  // round to the nearest half
	  roundFn = this.settings.forceRoundUp ? Math.ceil : Math.round;
	  newRating = (roundFn( _rating * 2 ) / 2).toFixed(1);
	  this._state = {
		rating: newRating
	  };
  
	  // create unique id for stars
	  this._uid = Math.floor( Math.random() * 999 );
  
	  // override gradient if not used
	  if( !options.starGradient && !this.settings.useGradient ){
		this.settings.starGradient.start = this.settings.starGradient.end = this.settings.activeColor;
	  }
  
	  this._defaults = defaults;
	  this._name = pluginName;
	  this.init();
	};
  
	var methods = {
	  init: function () {
		this.renderMarkup();
		this.addListeners();
		this.initRating();
	  },
  
	  addListeners: function(){
		if( this.settings.readOnly ){ return; }
		this.$stars.on('mouseover', this.hoverRating.bind(this));
		this.$stars.on('mouseout', this.restoreState.bind(this));
		this.$stars.on('click', this.handleRating.bind(this));
	  },
  
	  // apply styles to hovered stars
	  hoverRating: function(e){
		var index = this.getIndex(e);
		this.paintStars(index, 'hovered');
		this.settings.onHover(index + 1, this._state.rating, this.$el);
	  },
  
	  // clicked on a rate, apply style and state
	  handleRating: function(e){
		var index = this.getIndex(e);
		var rating = index + 1;
  
		this.applyRating(rating, this.$el);
		this.executeCallback( rating, this.$el );
  
		if(this.settings.disableAfterRate){
		  this.$stars.off();
		}
	  },
  
	  applyRating: function(rating){
		var index = rating - 1;
		// paint selected and remove hovered color
		this.paintStars(index, 'rated');
		this._state.rating = index + 1;
		this._state.rated = true;
	  },
  
	  restoreState: function(e){
		var index = this.getIndex(e);
		var rating = this._state.rating || -1;
		// determine star color depending on manually rated
		var colorType = this._state.rated ? 'rated' : 'active';
		this.paintStars(rating - 1, colorType);
		this.settings.onLeave(index + 1, this._state.rating, this.$el);
	  },
  
	  getIndex: function(e){
		var $target = $(e.currentTarget);
		var width = $target.width();
		var side = $(e.target).attr('data-side');
		var minRating = this.settings.minRating;
  
		// hovered outside the star, calculate by pixel instead
		side = (!side) ? this.getOffsetByPixel(e, $target, width) : side;
		side = (this.settings.useFullStars) ? 'right' : side ;
  
		// get index for half or whole star
		var index = $target.index() - ((side === 'left') ? 0.5 : 0);
  
		// pointer is way to the left, rating should be none
		index = ( index < 0.5 && (e.offsetX < width / 4) ) ? -1 : index;
  
		// force minimum rating
		index = ( minRating && minRating <= this.settings.totalStars && index < minRating ) ? minRating - 1 : index;
		return index;
	  },
  
	  getOffsetByPixel: function(e, $target, width){
		var leftX = e.pageX - $target.offset().left;
		return ( leftX <= (width / 2) && !this.settings.useFullStars) ? 'left' : 'right';
	  },
  
	  initRating: function(){
		this.paintStars(this._state.rating - 1, 'active');
	  },
  
	  paintStars: function(endIndex, stateClass){
		var $polygonLeft;
		var $polygonRight;
		var leftClass;
		var rightClass;
		var s = this.settings;
  
		$.each(this.$stars, function(index, star){
		  $polygonLeft = $(star).find('[data-side="left"]');
		  $polygonRight = $(star).find('[data-side="right"]');
		  leftClass = rightClass = (index <= endIndex) ? stateClass : 'empty';
  
		  // has another half rating, add half star
		  leftClass = ( index - endIndex === 0.5 ) ? stateClass : leftClass;
  
		  $polygonLeft.attr('class', 'svg-'  + leftClass + '-' + this._uid);
		  $polygonRight.attr('class', 'svg-'  + rightClass + '-' + this._uid);
  
		  // get color for level
		  var ratedColorsIndex = endIndex >= 0 ? Math.ceil(endIndex) : 0;
  
		  var ratedColor;
		  if (s.ratedColors && s.ratedColors.length && s.ratedColors[ratedColorsIndex]) {
			ratedColor = s.ratedColors[ratedColorsIndex];
		  } else {
			ratedColor = this._defaults.ratedColor;
		  }
  
		  // only override colors in rated stars and when rated number is valid
		  if (stateClass === 'rated' && endIndex > -1) {
            // limit to painting only to rated stars, and specific case for half star
            if (index <= Math.ceil(endIndex) || (index < 1 && endIndex < 0)) {
              $polygonLeft.attr('style', 'fill:'+ratedColor);
            }
            if (index <= endIndex) {
              $polygonRight.attr('style', 'fill:'+ratedColor);
            }
          } else {
              $polygonLeft.attr('style', 'stroke-opacity: 0');
              $polygonRight.attr('style', 'stroke-opacity: 0');
          }
		}.bind(this));
	  },
  
	  renderMarkup: function () {
		var s = this.settings;
		var baseUrl = s.baseUrl ? location.href.split('#')[0] : '';
  
		// inject an svg manually to have control over attributes
		var star = '<div class="jq-star" style="width:' + s.starSize+ 'px;  height:' + s.starSize + 'px;"><svg version="1.0" class="jq-star-svg" shape-rendering="geometricPrecision" xmlns="http://www.w3.org/2000/svg" ' + this.getSvgDimensions(s.starShape) +  ' stroke-width:' + s.strokeWidth + 'px;" xml:space="preserve"><style type="text/css">.svg-empty-' + this._uid + '{fill:url(' + baseUrl + '#' + this._uid + '_SVGID_1_);}.svg-hovered-' + this._uid + '{fill:url(' + baseUrl + '#' + this._uid + '_SVGID_2_);}.svg-active-' + this._uid + '{fill:url(' + baseUrl + '#' + this._uid + '_SVGID_3_);}.svg-rated-' + this._uid + '{fill:' + s.ratedColor + ';}</style>' +
  
		this.getLinearGradient(this._uid + '_SVGID_1_', s.emptyColor, s.emptyColor, s.starShape) +
		this.getLinearGradient(this._uid + '_SVGID_2_', s.hoverColor, s.hoverColor, s.starShape) +
		this.getLinearGradient(this._uid + '_SVGID_3_', s.starGradient.start, s.starGradient.end, s.starShape) +
		this.getVectorPath(this._uid, {
		  starShape: s.starShape,
		  strokeWidth: s.strokeWidth,
		  strokeColor: s.strokeColor
		} ) +
		'</svg></div>';
  
		// inject svg markup
		var starsMarkup = '';
		for( var i = 0; i < s.totalStars; i++){
		  starsMarkup += star;
		}
		this.$el.append(starsMarkup);
		this.$stars = this.$el.find('.jq-star');
	  },
  
	  getVectorPath: function(id, attrs){
		return (attrs.starShape === 'rounded') ?
		  this.getRoundedVectorPath(id, attrs) : this.getSpikeVectorPath(id, attrs);
	  },
  
	  getSpikeVectorPath: function(id, attrs){
		return '<polygon data-side="center" class="svg-empty-' + id + '" points="281.1,129.8 364,55.7 255.5,46.8 214,-59 172.5,46.8 64,55.4 146.8,129.7 121.1,241 212.9,181.1 213.9,181 306.5,241 " style="fill: transparent; stroke: ' + attrs.strokeColor + ';" />' +
		  '<polygon data-side="left" class="svg-empty-' + id + '" points="281.1,129.8 364,55.7 255.5,46.8 214,-59 172.5,46.8 64,55.4 146.8,129.7 121.1,241 213.9,181.1 213.9,181 306.5,241 " style="stroke-opacity: 0;" />' +
			'<polygon data-side="right" class="svg-empty-' + id + '" points="364,55.7 255.5,46.8 214,-59 213.9,181 306.5,241 281.1,129.8 " style="stroke-opacity: 0;" />';
	  },
  
	  getRoundedVectorPath: function(id, attrs){
		var fullPoints = 'M520.9,336.5c-3.8-11.8-14.2-20.5-26.5-22.2l-140.9-20.5l-63-127.7 c-5.5-11.2-16.8-18.2-29.3-18.2c-12.5,0-23.8,7-29.3,18.2l-63,127.7L28,314.2C15.7,316,5.4,324.7,1.6,336.5S1,361.3,9.9,370 l102,99.4l-24,140.3c-2.1,12.3,2.9,24.6,13,32c5.7,4.2,12.4,6.2,19.2,6.2c5.2,0,10.5-1.2,15.2-3.8l126-66.3l126,66.2 c4.8,2.6,10,3.8,15.2,3.8c6.8,0,13.5-2.1,19.2-6.2c10.1-7.3,15.1-19.7,13-32l-24-140.3l102-99.4 C521.6,361.3,524.8,348.3,520.9,336.5z';
  
		return '<path data-side="center" class="svg-empty-' + id + '" d="' + fullPoints + '" style="stroke: ' + attrs.strokeColor + '; fill: transparent; " /><path data-side="right" class="svg-empty-' + id + '" d="' + fullPoints + '" style="stroke-opacity: 0;" /><path data-side="left" class="svg-empty-' + id + '" d="M121,648c-7.3,0-14.1-2.2-19.8-6.4c-10.4-7.6-15.6-20.3-13.4-33l24-139.9l-101.6-99 c-9.1-8.9-12.4-22.4-8.6-34.5c3.9-12.1,14.6-21.1,27.2-23l140.4-20.4L232,164.6c5.7-11.6,17.3-18.8,30.2-16.8c0.6,0,1,0.4,1,1 v430.1c0,0.4-0.2,0.7-0.5,0.9l-126,66.3C132,646.6,126.6,648,121,648z" style="stroke: ' + attrs.strokeColor + '; stroke-opacity: 0;" />';
	  },
  
	  getSvgDimensions: function(starShape){
		return (starShape === 'rounded') ? 'width="550px" height="500.2px" viewBox="0 146.8 550 500.2" style="enable-background:new 0 0 550 500.2;' : 'x="0px" y="0px" width="305px" height="305px" viewBox="60 -62 309 309" style="enable-background:new 64 -59 305 305;';
	  },
  
	  getLinearGradient: function(id, startColor, endColor, starShape){
		var height = (starShape === 'rounded') ? 500 : 250;
		return '<linearGradient id="' + id + '" gradientUnits="userSpaceOnUse" x1="0" y1="-50" x2="0" y2="' + height + '"><stop  offset="0" style="stop-color:' + startColor + '"/><stop  offset="1" style="stop-color:' + endColor + '"/> </linearGradient>';
	  },
  
	  executeCallback: function(rating, $el){
		var callback = this.settings.callback;
		callback(rating, $el);
	  }
  
	};
  
	var publicMethods = {
  
	  unload: function() {
		var _name = 'plugin_' + pluginName;
		var $el = $(this);
		var $starSet = $el.data(_name).$stars;
		$starSet.off();
		$el.removeData(_name).remove();
	  },
  
	  setRating: function(rating, round) {
		var _name = 'plugin_' + pluginName;
		var $el = $(this);
		var $plugin = $el.data(_name);
		if( rating > $plugin.settings.totalStars || rating < 0 ) { return; }
		if( round ){
		  rating = Math.round(rating);
		}
		$plugin.applyRating(rating);
	  },
  
	  getRating: function() {
		var _name = 'plugin_' + pluginName;
		var $el = $(this);
		var $starSet = $el.data(_name);
		return $starSet._state.rating;
	  },
  
	  resize: function(newSize) {
		var _name = 'plugin_' + pluginName;
		var $el = $(this);
		var $starSet = $el.data(_name);
		var $stars = $starSet.$stars;
  
		if(newSize <= 1 || newSize > 200) {
		  console.error('star size out of bounds');
		  return;
		}
  
		$stars = Array.prototype.slice.call($stars);
		$stars.forEach(function(star){
		  $(star).css({
			'width': newSize + 'px',
			'height': newSize + 'px'
		  });
		});
	  },
  
	  setReadOnly: function(flag) {
		var _name = 'plugin_' + pluginName;
		var $el = $(this);
		var $plugin = $el.data(_name);
		if(flag === true){
		  $plugin.$stars.off('mouseover mouseout click');
		} else {
		  $plugin.settings.readOnly = false;
		  $plugin.addListeners();
		}
	  }
  
	};
  
  
	// Avoid Plugin.prototype conflicts
	$.extend(Plugin.prototype, methods);
  
	$.fn[ pluginName ] = function ( options ) {
  
	  // if options is a public method
	  if( !$.isPlainObject(options) ){
		if( publicMethods.hasOwnProperty(options) ){
		  return publicMethods[options].apply(this, Array.prototype.slice.call(arguments, 1));
		} else {
		  $.error('Method '+ options +' does not exist on ' + pluginName + '.js');
		}
	  }
  
	  return this.each(function() {
		// preventing against multiple instantiations
		if ( !$.data( this, 'plugin_' + pluginName ) ) {
		  $.data( this, 'plugin_' + pluginName, new Plugin( this, options ) );
		}
	  });
	};
  
  })( jQuery, window, document );
	
	
"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Emitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=!0,a=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){s.value.apply(this,i)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++){if(n[i]===t){n.splice(i,1);break}}return this}}]),e}(),Dropzone=function(){function C(e,t){var n,i,r;if(_classCallCheck(this,C),(n=_possibleConstructorReturn(this,_getPrototypeOf(C).call(this))).element=e,n.version=C.version,n.defaultOptions.previewTemplate=n.defaultOptions.previewTemplate.replace(/\n*/g,""),n.clickableElements=[],n.listeners=[],n.files=[],"string"==typeof n.element&&(n.element=document.querySelector(n.element)),!n.element||null==n.element.nodeType)throw new Error("Invalid dropzone element.");if(n.element.dropzone)throw new Error("Dropzone already attached.");C.instances.push(_assertThisInitialized(n)),n.element.dropzone=_assertThisInitialized(n);var o=null!=(r=C.optionsForElement(n.element))?r:{};if(n.options=C.extend({},n.defaultOptions,o,null!=t?t:{}),n.options.forceFallback||!C.isBrowserSupported())return _possibleConstructorReturn(n,n.options.fallback.call(_assertThisInitialized(n)));if(null==n.options.url&&(n.options.url=n.element.getAttribute("action")),!n.options.url)throw new Error("No URL provided.");if(n.options.acceptedFiles&&n.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(n.options.uploadMultiple&&n.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return n.options.acceptedMimeTypes&&(n.options.acceptedFiles=n.options.acceptedMimeTypes,delete n.options.acceptedMimeTypes),null!=n.options.renameFilename&&(n.options.renameFile=function(e){return n.options.renameFilename.call(_assertThisInitialized(n),e.name,e)}),n.options.method=n.options.method.toUpperCase(),(i=n.getExistingFallback())&&i.parentNode&&i.parentNode.removeChild(i),!1!==n.options.previewsContainer&&(n.options.previewsContainer?n.previewsContainer=C.getElement(n.options.previewsContainer,"previewsContainer"):n.previewsContainer=n.element),n.options.clickable&&(!0===n.options.clickable?n.clickableElements=[n.element]:n.clickableElements=C.getElements(n.options.clickable,"clickable")),n.init(),n}return _inherits(C,Emitter),_createClass(C,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,n){if(n)return{dzuuid:n.file.upload.uuid,dzchunkindex:n.index,dztotalfilesize:n.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:n.file.upload.totalChunkCount,dzchunkbyteoffset:n.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e;this.element.className="".concat(this.element.className," dz-browser-not-supported");var t=!0,n=!1,i=void 0;try{for(var r,o=this.element.getElementsByTagName("div")[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(/(^| )dz-message($| )/.test(a.className)){(e=a).className="dz-message";break}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}e||(e=C.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var l=e.getElementsByTagName("span")[0];return l&&(null!=l.textContent?l.textContent=this.options.dictFallbackMessage:null!=l.innerText&&(l.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,n,i){var r={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},o=e.width/e.height;null==t&&null==n?(t=r.srcWidth,n=r.srcHeight):null==t?t=n*o:null==n&&(n=t/o);var a=(t=Math.min(t,r.srcWidth))/(n=Math.min(n,r.srcHeight));if(r.srcWidth>t||r.srcHeight>n)if("crop"===i)a<o?(r.srcHeight=e.height,r.srcWidth=r.srcHeight*a):(r.srcWidth=e.width,r.srcHeight=r.srcWidth/a);else{if("contain"!==i)throw new Error("Unknown resizeMethod '".concat(i,"'"));a<o?n=t/o:t=n*o}return r.srcX=(e.width-r.srcWidth)/2,r.srcY=(e.height-r.srcHeight)/2,r.trgWidth=t,r.trgHeight=n,r},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Check</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <title>Error</title>\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:function(){},dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:function(){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var n=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){t.previewElement=C.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement);var e=!0,i=!1,r=void 0;try{for(var o,a=t.previewElement.querySelectorAll("[data-dz-name]")[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;l.textContent=t.name}}catch(e){i=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(i)throw r}}var s=!0,u=!1,c=void 0;try{for(var d,p=t.previewElement.querySelectorAll("[data-dz-size]")[Symbol.iterator]();!(s=(d=p.next()).done);s=!0)(l=d.value).innerHTML=this.filesize(t.size)}catch(e){u=!0,c=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw c}}this.options.addRemoveLinks&&(t._removeLink=C.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),t.previewElement.appendChild(t._removeLink));var h=function(e){return e.preventDefault(),e.stopPropagation(),t.status===C.UPLOADING?C.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(t)}):n.options.dictRemoveFileConfirmation?C.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(t)}):n.removeFile(t)},f=!0,v=!1,m=void 0;try{for(var y,g=t.previewElement.querySelectorAll("[data-dz-remove]")[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){y.value.addEventListener("click",h)}}catch(e){v=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(v)throw m}}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");var n=!0,i=!1,r=void 0;try{for(var o,a=e.previewElement.querySelectorAll("[data-dz-thumbnail]")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.alt=e.name,l.src=t}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);var n=!0,i=!1,r=void 0;try{for(var o,a=e.previewElement.querySelectorAll("[data-dz-errormessage]")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.textContent=t}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t){if(e.previewElement){var n=!0,i=!1,r=void 0;try{for(var o,a=e.previewElement.querySelectorAll("[data-dz-uploadprogress]")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;"PROGRESS"===l.nodeName?l.value=t:l.style.width="".concat(t,"%")}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,o=n;r<o.length;r++){var a=o[r];for(var l in a){var s=a[l];e[l]=s}}return e}}]),_createClass(C,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(t){return this.files.filter(function(e){return e.status===t}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(C.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(C.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(C.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===C.UPLOADING||e.status===C.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var s=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(C.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length){!function l(){return s.hiddenFileInput&&s.hiddenFileInput.parentNode.removeChild(s.hiddenFileInput),s.hiddenFileInput=document.createElement("input"),s.hiddenFileInput.setAttribute("type","file"),(null===s.options.maxFiles||1<s.options.maxFiles)&&s.hiddenFileInput.setAttribute("multiple","multiple"),s.hiddenFileInput.className="dz-hidden-input",null!==s.options.acceptedFiles&&s.hiddenFileInput.setAttribute("accept",s.options.acceptedFiles),null!==s.options.capture&&s.hiddenFileInput.setAttribute("capture",s.options.capture),s.hiddenFileInput.style.visibility="hidden",s.hiddenFileInput.style.position="absolute",s.hiddenFileInput.style.top="0",s.hiddenFileInput.style.left="0",s.hiddenFileInput.style.height="0",s.hiddenFileInput.style.width="0",C.getElement(s.options.hiddenInputContainer,"hiddenInputContainer").appendChild(s.hiddenFileInput),s.hiddenFileInput.addEventListener("change",function(){var e=s.hiddenFileInput.files;if(e.length){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;s.addFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}return s.emit("addedfiles",e),l()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;var e=!0,t=!1,n=void 0;try{for(var i,r=this.events[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.on(o,this.options[o])}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.on("uploadprogress",function(){return s.updateTotalUploadProgress()}),this.on("removedfile",function(){return s.updateTotalUploadProgress()}),this.on("canceled",function(e){return s.emit("complete",e)}),this.on("complete",function(e){if(0===s.getAddedFiles().length&&0===s.getUploadingFiles().length&&0===s.getQueuedFiles().length)return setTimeout(function(){return s.emit("queuecomplete")},0)});function a(e){var t;return(t=e).dataTransfer.types&&t.dataTransfer.types.some(function(e){return"Files"==e})&&(e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1)}return this.listeners=[{element:this.element,events:{dragstart:function(e){return s.emit("dragstart",e)},dragenter:function(e){return a(e),s.emit("dragenter",e)},dragover:function(e){var t;try{t=e.dataTransfer.effectAllowed}catch(e){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",a(e),s.emit("dragover",e)},dragleave:function(e){return s.emit("dragleave",e)},drop:function(e){return a(e),s.drop(e)},dragend:function(e){return s.emit("dragend",e)}}}],this.clickableElements.forEach(function(t){return s.listeners.push({element:t,events:{click:function(e){return t===s.element&&e.target!==s.element&&!C.elementInside(e.target,s.element.querySelector(".dz-message"))||s.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,C.instances.splice(C.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e,t=0,n=0;if(this.getActiveFiles().length){var i=!0,r=!1,o=void 0;try{for(var a,l=this.getActiveFiles()[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;t+=s.upload.bytesSent,n+=s.upload.total}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}e=100*t/n}else e=100;return this.emit("totaluploadprogress",e,n,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(e,"]"):"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t;if(e=this.getExistingFallback())return e;var n='<div class="dz-fallback">';this.options.dictFallbackText&&(n+="<p>".concat(this.options.dictFallbackText,"</p>")),n+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var i=C.createElement(n);return"FORM"!==this.element.tagName?(t=C.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(i):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:i}},{key:"getExistingFallback",value:function(){for(var e=function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(/(^| )fallback($| )/.test(a.className))return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}},t=0,n=["div","form"];t<n.length;t++){var i,r=n[t];if(i=e(this.element.getElementsByTagName(r)))return i}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(i){return function(){var e=[];for(var t in i.events){var n=i.events[t];e.push(i.element.addEventListener(t,n,!1))}return e}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(i){return function(){var e=[];for(var t in i.events){var n=i.events[t];e.push(i.element.removeEventListener(t,n,!1))}return e}()})}},{key:"disable",value:function(){var t=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(e){return t.cancelUpload(e)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,n="b";if(0<e){for(var i=["tb","gb","mb","kb","b"],r=0;r<i.length;r++){var o=i[r];if(Math.pow(this.options.filesizeBase,4-r)/10<=e){t=e/Math.pow(this.options.filesizeBase,4-r),n=o;break}}t=Math.round(10*t)/10}return"<strong>".concat(t,"</strong> ").concat(this.options.dictFileSizeUnits[n])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],n=0;n<e.dataTransfer.files.length;n++)t[n]=e.dataTransfer.files[n];if(t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}this.emit("addedfiles",t)}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(e){return e.items})){this.emit("paste",e);var t=e.clipboardData.items;return t.length?this._addFilesFromItems(t):void 0}}},{key:"handleFiles",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.addFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"_addFilesFromItems",value:function(s){var u=this;return function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=s[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a,l=r.value;null!=l.webkitGetAsEntry&&(a=l.webkitGetAsEntry())?a.isFile?e.push(u.addFile(l.getAsFile())):a.isDirectory?e.push(u._addFilesFromDirectory(a,a.name)):e.push(void 0):null!=l.getAsFile&&(null==l.kind||"file"===l.kind)?e.push(u.addFile(l.getAsFile())):e.push(void 0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}()}},{key:"_addFilesFromDirectory",value:function(e,s){function t(t){return __guardMethod__(console,"log",function(e){return e.log(t)})}var u=this,n=e.createReader();return function l(){return n.readEntries(function(e){if(0<e.length){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.isFile?a.file(function(e){if(!u.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath="".concat(s,"/").concat(e.name),u.addFile(e)}):a.isDirectory&&u._addFilesFromDirectory(a,"".concat(s,"/").concat(a.name))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}l()}return null},t)}()}},{key:"accept",value:function(e,t){this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):C.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(t){var n=this;t.upload={uuid:C.uuidv4(),progress:0,total:t.size,bytesSent:0,filename:this._renameFile(t)},this.files.push(t),t.status=C.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){e?(t.accepted=!1,n._errorProcessing([t],e)):(t.accepted=!0,n.options.autoQueue&&n.enqueueFile(t)),n._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;this.enqueueFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==C.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=C.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var t=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var n=this._thumbnailQueue.shift();return this.createThumbnail(n,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(e){return t.emit("thumbnail",n,e),t._processingThumbnail=!1,t._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===C.UPLOADING&&this.cancelUpload(e),this.files=without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);var t=!0,n=!1,i=void 0;try{for(var r,o=this.files.slice()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.status===C.UPLOADING&&!e||this.removeFile(a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}},{key:"resizeImage",value:function(r,e,t,n,o){var a=this;return this.createThumbnail(r,e,t,n,!0,function(e,t){if(null==t)return o(r);var n=a.options.resizeMimeType;null==n&&(n=r.type);var i=t.toDataURL(n,a.options.resizeQuality);return"image/jpeg"!==n&&"image/jpg"!==n||(i=ExifRestore.restore(r.dataURL,i)),o(C.dataURItoBlob(i))})}},{key:"createThumbnail",value:function(e,t,n,i,r,o){var a=this,l=new FileReader;l.onload=function(){e.dataURL=l.result,"image/svg+xml"!==e.type?a.createThumbnailFromUrl(e,t,n,i,r,o):null!=o&&o(l.result)},l.readAsDataURL(e)}},{key:"displayExistingFile",value:function(t,e,n,i,r){var o=this,a=!(4<arguments.length&&void 0!==r)||r;if(this.emit("addedfile",t),this.emit("complete",t),a){t.dataURL=e,this.createThumbnailFromUrl(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.resizeMethod,this.options.fixOrientation,function(e){o.emit("thumbnail",t,e),n&&n()},i)}else this.emit("thumbnail",t,e),n&&n()}},{key:"createThumbnailFromUrl",value:function(o,a,l,s,t,u,e){var c=this,d=document.createElement("img");return e&&(d.crossOrigin=e),d.onload=function(){var e=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&t&&(e=function(e){return EXIF.getData(d,function(){return e(EXIF.getTag(this,"Orientation"))})}),e(function(e){o.width=d.width,o.height=d.height;var t=c.options.resize.call(c,o,a,l,s),n=document.createElement("canvas"),i=n.getContext("2d");switch(n.width=t.trgWidth,n.height=t.trgHeight,4<e&&(n.width=t.trgHeight,n.height=t.trgWidth),e){case 2:i.translate(n.width,0),i.scale(-1,1);break;case 3:i.translate(n.width,n.height),i.rotate(Math.PI);break;case 4:i.translate(0,n.height),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-n.width);break;case 7:i.rotate(.5*Math.PI),i.translate(n.height,-n.width),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n.height,0)}drawImageIOSFix(i,d,null!=t.srcX?t.srcX:0,null!=t.srcY?t.srcY:0,t.srcWidth,t.srcHeight,null!=t.trgX?t.trgX:0,null!=t.trgY?t.trgY:0,t.trgWidth,t.trgHeight);var r=n.toDataURL("image/png");if(null!=u)return u(r,n)})},null!=u&&(d.onerror=u),d.src=o.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,n=t;if(!(e<=t)){var i=this.getQueuedFiles();if(0<i.length){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-t));for(;n<e;){if(!i.length)return;this.processFile(i.shift()),n++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.processing=!0,a.status=C.UPLOADING,this.emit("processing",a)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(t){return this.files.filter(function(e){return e.xhr===t}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===C.UPLOADING){var t=this._getFilesWithXhr(e.xhr),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.status=C.CANCELED}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}void 0!==e.xhr&&e.xhr.abort();var l=!0,s=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var p=c.value;this.emit("canceled",p)}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==C.ADDED&&e.status!==C.QUEUED||(e.status=C.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"!=typeof e)return e;for(var t=arguments.length,n=new Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(this,n)}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(s){var u=this;this._transformFiles(s,function(e){if(u.options.chunking){var t=e[0];s[0].upload.chunked=u.options.chunking&&(u.options.forceChunking||t.size>u.options.chunkSize),s[0].upload.totalChunkCount=Math.ceil(t.size/u.options.chunkSize)}if(s[0].upload.chunked){var r=s[0],o=e[0];r.upload.chunks=[];var i=function(){for(var e=0;void 0!==r.upload.chunks[e];)e++;if(!(e>=r.upload.totalChunkCount)){0;var t=e*u.options.chunkSize,n=Math.min(t+u.options.chunkSize,r.size),i={name:u._getParamName(0),data:o.webkitSlice?o.webkitSlice(t,n):o.slice(t,n),filename:r.upload.filename,chunkIndex:e};r.upload.chunks[e]={file:r,index:e,dataBlock:i,status:C.UPLOADING,progress:0,retries:0},u._uploadData(s,[i])}};if(r.upload.finishedChunkUpload=function(e){var t=!0;e.status=C.SUCCESS,e.dataBlock=null,e.xhr=null;for(var n=0;n<r.upload.totalChunkCount;n++){if(void 0===r.upload.chunks[n])return i();r.upload.chunks[n].status!==C.SUCCESS&&(t=!1)}t&&u.options.chunksUploaded(r,function(){u._finished(s,"",null)})},u.options.parallelChunkUploads)for(var n=0;n<r.upload.totalChunkCount;n++)i();else i()}else{for(var a=[],l=0;l<s.length;l++)a[l]={name:u._getParamName(l),data:e[l],filename:s[l].upload.filename};u._uploadData(s,a)}})}},{key:"_getChunk",value:function(e,t){for(var n=0;n<e.upload.totalChunkCount;n++)if(void 0!==e.upload.chunks[n]&&e.upload.chunks[n].xhr===t)return e.upload.chunks[n]}},{key:"_uploadData",value:function(t,e){var n=this,i=new XMLHttpRequest,r=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){l.value.xhr=i}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}t[0].upload.chunked&&(t[0].upload.chunks[e[0].chunkIndex].xhr=i);var u=this.resolveOption(this.options.method,t),c=this.resolveOption(this.options.url,t);i.open(u,c,!0),i.timeout=this.resolveOption(this.options.timeout,t),i.withCredentials=!!this.options.withCredentials,i.onload=function(e){n._finishedUploading(t,i,e)},i.ontimeout=function(){n._handleUploadError(t,i,"Request timedout after ".concat(n.options.timeout," seconds"))},i.onerror=function(){n._handleUploadError(t,i)},(null!=i.upload?i.upload:i).onprogress=function(e){return n._updateFilesUploadProgress(t,i,e)};var d={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var p in this.options.headers&&C.extend(d,this.options.headers),d){var h=d[p];h&&i.setRequestHeader(p,h)}var f=new FormData;if(this.options.params){var v=this.options.params;for(var m in"function"==typeof v&&(v=v.call(this,t,i,t[0].upload.chunked?this._getChunk(t[0],i):null)),v){var y=v[m];f.append(m,y)}}var g=!0,b=!1,k=void 0;try{for(var w,F=t[Symbol.iterator]();!(g=(w=F.next()).done);g=!0){var z=w.value;this.emit("sending",z,i,f)}}catch(e){b=!0,k=e}finally{try{g||null==F.return||F.return()}finally{if(b)throw k}}this.options.uploadMultiple&&this.emit("sendingmultiple",t,i,f),this._addFormElementData(f);for(var x=0;x<e.length;x++){var E=e[x];f.append(E.name,E.data,E.filename)}this.submitRequest(i,f,t)}},{key:"_transformFiles",value:function(n,i){for(var e=this,r=[],o=0,t=function(t){e.options.transformFile.call(e,n[t],function(e){r[t]=e,++o===n.length&&i(r)})},a=0;a<n.length;a++)t(a)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName){var t=!0,n=!1,i=void 0;try{for(var r,o=this.element.querySelectorAll("input, textarea, select, button")[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,l=a.getAttribute("name"),s=a.getAttribute("type");if(s=s&&s.toLowerCase(),null!=l)if("SELECT"===a.tagName&&a.hasAttribute("multiple")){var u=!0,c=!1,d=void 0;try{for(var p,h=a.options[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var f=p.value;f.selected&&e.append(l,f.value)}}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}else(!s||"checkbox"!==s&&"radio"!==s||a.checked)&&e.append(l,a.value)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"_updateFilesUploadProgress",value:function(e,t,n){var i;if(void 0!==n){if(i=100*n.loaded/n.total,e[0].upload.chunked){var r=e[0],o=this._getChunk(r,t);o.progress=i,o.total=n.total,o.bytesSent=n.loaded;r.upload.progress=0,r.upload.total=0;for(var a=r.upload.bytesSent=0;a<r.upload.totalChunkCount;a++)void 0!==r.upload.chunks[a]&&void 0!==r.upload.chunks[a].progress&&(r.upload.progress+=r.upload.chunks[a].progress,r.upload.total+=r.upload.chunks[a].total,r.upload.bytesSent+=r.upload.chunks[a].bytesSent);r.upload.progress=r.upload.progress/r.upload.totalChunkCount}else{var l=!0,s=!1,u=void 0;try{for(var c,d=e[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var p=c.value;p.upload.progress=i,p.upload.total=n.total,p.upload.bytesSent=n.loaded}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}}var h=!0,f=!1,v=void 0;try{for(var m,y=e[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var g=m.value;this.emit("uploadprogress",g,g.upload.progress,g.upload.bytesSent)}}catch(e){f=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(f)throw v}}}else{var b=!0,k=!0,w=!(i=100),F=void 0;try{for(var z,x=e[Symbol.iterator]();!(k=(z=x.next()).done);k=!0){var E=z.value;100===E.upload.progress&&E.upload.bytesSent===E.upload.total||(b=!1),E.upload.progress=i,E.upload.bytesSent=E.upload.total}}catch(e){w=!0,F=e}finally{try{k||null==x.return||x.return()}finally{if(w)throw F}}if(b)return;var C=!0,_=!1,S=void 0;try{for(var D,T=e[Symbol.iterator]();!(C=(D=T.next()).done);C=!0){var L=D.value;this.emit("uploadprogress",L,i,L.upload.bytesSent)}}catch(e){_=!0,S=e}finally{try{C||null==T.return||T.return()}finally{if(_)throw S}}}}},{key:"_finishedUploading",value:function(e,t,n){var i;if(e[0].status!==C.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(i=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{i=JSON.parse(i)}catch(e){n=e,i="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,i,n):this._handleUploadError(e,t,i)}}},{key:"_handleUploadError",value:function(e,t,n){if(e[0].status!==C.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var i=this._getChunk(e[0],t);if(i.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[i.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(e,n||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}},{key:"submitRequest",value:function(e,t){e.send(t)}},{key:"_finished",value:function(e,t,n){var i=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;s.status=C.SUCCESS,this.emit("success",s,t,n),this.emit("complete",s)}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,n){var i=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var s=a.value;s.status=C.ERROR,this.emit("error",s,t,n),this.emit("complete",s)}}catch(e){r=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw o}}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,n),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),C}();Dropzone.initClass(),Dropzone.version="5.7.0",Dropzone.options={},Dropzone.optionsForElement=function(e){return e.getAttribute("id")?Dropzone.options[camelize(e.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var s;if(document.querySelectorAll)s=document.querySelectorAll(".dropzone");else{s=[];var e=function(l){return function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=l[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;/(^| )dropzone($| )/.test(a.className)?e.push(s.push(a)):e.push(void 0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}()};e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))}return function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=s[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;!1!==Dropzone.optionsForElement(a)?e.push(new Dropzone(a)):e.push(void 0)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){var t=!0,n=!1,i=void 0;try{for(var r,o=Dropzone.blacklistedBrowsers[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.test(navigator.userAgent)&&(e=!1)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}else e=!1;else e=!1;return e},Dropzone.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0,a=t.length,l=0<=a;l?o<=a:a<=o;l?o++:o--)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})};var without=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},camelize=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};Dropzone.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},Dropzone.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},Dropzone.getElement=function(e,t){var n;if("string"==typeof e?n=document.querySelector(e):null!=e.nodeType&&(n=e),null==n)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector or a plain HTML element."));return n},Dropzone.getElements=function(e,t){var n,i;if(e instanceof Array){i=[];try{var r=!0,o=!1,a=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)n=l.value,i.push(this.getElement(n,t))}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}}catch(e){i=null}}else if("string"==typeof e){var u=!0,c=!(i=[]),d=void 0;try{for(var p,h=document.querySelectorAll(e)[Symbol.iterator]();!(u=(p=h.next()).done);u=!0)n=p.value,i.push(n)}catch(e){c=!0,d=e}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}else null!=e.nodeType&&(i=[e]);if(null==i||!i.length)throw new Error("Invalid `".concat(t,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return i},Dropzone.confirm=function(e,t,n){return window.confirm(e)?t():null!=n?n():void 0},Dropzone.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");var n=e.type,i=n.replace(/\/.*$/,""),r=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;if("."===(u=u.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(u.toLowerCase(),e.name.length-u.length))return!0}else if(/\/\*$/.test(u)){if(i===u.replace(/\/.*$/,""))return!0}else if(n===u)return!0}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new Dropzone(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(e){e.naturalWidth;var t=e.naturalHeight,n=document.createElement("canvas");n.width=1,n.height=t;var i=n.getContext("2d");i.drawImage(e,0,0);for(var r=i.getImageData(1,0,1,t).data,o=0,a=t,l=t;o<l;){0===r[4*(l-1)+3]?a=l:o=l,l=a+o>>1}var s=l/t;return 0==s?1:s},drawImageIOSFix=function(e,t,n,i,r,o,a,l,s,u){var c=detectVerticalSquash(t);return e.drawImage(t,n,i,r,o,a,l,s,u/c)},ExifRestore=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",n=void 0,i=void 0,r="",o=void 0,a=void 0,l=void 0,s="",u=0;o=(n=e[u++])>>2,a=(3&n)<<4|(i=e[u++])>>4,l=(15&i)<<2|(r=e[u++])>>6,s=63&r,isNaN(i)?l=s=64:isNaN(r)&&(s=64),t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l)+this.KEY_STR.charAt(s),n=i=r="",o=a=l=s="",u<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),i=this.slice2Segments(n),r=this.exifManipulation(t,i);return"data:image/jpeg;base64,".concat(this.encode64(r))}},{key:"exifManipulation",value:function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)}},{key:"getExifArray",value:function(e){for(var t=void 0,n=0;n<e.length;){if(255===(t=e[n])[0]&225===t[1])return t;n++}return[]}},{key:"insertExif",value:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),r=i.indexOf(255,3),o=i.slice(0,r),a=i.slice(r),l=o;return l=(l=l.concat(t)).concat(a)}},{key:"slice2Segments",value:function(e){for(var t=0,n=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var i=t+(256*e[t+2]+e[t+3])+2,r=e.slice(t,i);n.push(r),t=i}if(t>e.length)break}return n}},{key:"decode64",value:function(e){var t=void 0,n=void 0,i="",r=void 0,o=void 0,a="",l=0,s=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(l++))<<2|(r=this.KEY_STR.indexOf(e.charAt(l++)))>>4,n=(15&r)<<4|(o=this.KEY_STR.indexOf(e.charAt(l++)))>>2,i=(3&o)<<6|(a=this.KEY_STR.indexOf(e.charAt(l++))),s.push(t),64!==o&&s.push(n),64!==a&&s.push(i),t=n=i="",r=o=a="",l<e.length;);return s}}]),e}();ExifRestore.initClass();var contentLoaded=function(t,n){function i(e){if("readystatechange"!==e.type||"complete"===o.readyState)return("load"===e.type?t:o)[s](u+e.type,i,!1),!r&&(r=!0)?n.call(t,e.type||e):void 0}var r=!1,e=!0,o=t.document,a=o.documentElement,l=o.addEventListener?"addEventListener":"attachEvent",s=o.addEventListener?"removeEventListener":"detachEvent",u=o.addEventListener?"":"on";if("complete"!==o.readyState){if(o.createEventObject&&a.doScroll){try{e=!t.frameElement}catch(e){}e&&!function t(){try{a.doScroll("left")}catch(e){return void setTimeout(t,50)}return i("poll")}()}return o[l](u+"DOMContentLoaded",i,!1),o[l](u+"readystatechange",i,!1),t[l](u+"load",i,!1)}};function __guard__(e,t){return null!=e?t(e):void 0}function __guardMethod__(e,t,n){return null!=e&&"function"==typeof e[t]?n(e,t):void 0}Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction);
  

/*! jQuery Validation Plugin - v1.19.2 - 5/23/2020
 * https://jqueryvalidation.org/
 * Copyright (c) 2020 Jrn Zaefferer; Licensed MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.extend(a.fn,{validate:function(b){if(!this.length)return void(b&&b.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(this.on("click.validate",":submit",function(b){c.submitButton=b.currentTarget,a(this).hasClass("cancel")&&(c.cancelSubmit=!0),void 0!==a(this).attr("formnovalidate")&&(c.cancelSubmit=!0)}),this.on("submit.validate",function(b){function d(){var d,e;return c.submitButton&&(c.settings.submitHandler||c.formSubmitted)&&(d=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(a(c.submitButton).val()).appendTo(c.currentForm)),!(c.settings.submitHandler&&!c.settings.debug)||(e=c.settings.submitHandler.call(c,c.currentForm,b),d&&d.remove(),void 0!==e&&e)}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)},valid:function(){var b,c,d;return a(this[0]).is("form")?b=this.validate().form():(d=[],b=!0,c=a(this[0].form).validate(),this.each(function(){b=c.element(this)&&b,b||(d=d.concat(c.errorList))}),c.errorList=d),b},rules:function(b,c){var d,e,f,g,h,i,j=this[0],k="undefined"!=typeof this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=j&&(!j.form&&k&&(j.form=this.closest("form")[0],j.name=this.attr("name")),null!=j.form)){if(b)switch(d=a.data(j.form,"validator").settings,e=d.rules,f=a.validator.staticRules(j),b){case"add":a.extend(f,a.validator.normalizeRule(c)),delete f.messages,e[j.name]=f,c.messages&&(d.messages[j.name]=a.extend(d.messages[j.name],c.messages));break;case"remove":return c?(i={},a.each(c.split(/\s/),function(a,b){i[b]=f[b],delete f[b]}),i):(delete e[j.name],f)}return g=a.validator.normalizeRules(a.extend({},a.validator.classRules(j),a.validator.attributeRules(j),a.validator.dataRules(j),a.validator.staticRules(j)),j),g.required&&(h=g.required,delete g.required,g=a.extend({required:h},g)),g.remote&&(h=g.remote,delete g.remote,g=a.extend(g,{remote:h})),g}}});var b=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.extend(a.expr.pseudos||a.expr[":"],{blank:function(c){return!b(""+a(c).val())},filled:function(c){var d=a(c).val();return null!==d&&!!b(""+d)},unchecked:function(b){return!a(b).prop("checked")}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1===arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:void 0===c?b:(arguments.length>2&&c.constructor!==Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!==Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(new RegExp("\\{"+a+"\\}","g"),function(){return c})}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(a)))},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(b,c){var d=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===c.which&&""===this.elementValue(b)||a.inArray(c.keyCode,d)!==-1||(b.name in this.submitted||b.name in this.invalid)&&this.element(b)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}."),step:a.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c="undefined"!=typeof a(this).attr("contenteditable")&&"false"!==a(this).attr("contenteditable");if(!this.form&&c&&(this.form=a(this).closest("form")[0],this.name=a(this).attr("name")),d===this.form){var e=a.data(this.form,"validator"),f="on"+b.type.replace(/^validate/,""),g=e.settings;g[f]&&!a(this).is(g.ignore)&&g[f].call(e,this,b)}}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c,d=this.currentForm,e=this.groups={};a.each(this.settings.groups,function(b,c){"string"==typeof c&&(c=c.split(/\s/)),a.each(c,function(a,c){e[c]=b})}),c=this.settings.rules,a.each(c,function(b,d){c[b]=a.validator.normalizeRule(d)}),a(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",b).on("click.validate","select, option, [type='radio'], [type='checkbox']",b),this.settings.invalidHandler&&a(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){var c,d,e=this.clean(b),f=this.validationTargetFor(e),g=this,h=!0;return void 0===f?delete this.invalid[e.name]:(this.prepareElement(f),this.currentElements=a(f),d=this.groups[f.name],d&&a.each(this.groups,function(a,b){b===d&&a!==f.name&&(e=g.validationTargetFor(g.clean(g.findByName(a))),e&&e.name in g.invalid&&(g.currentElements.push(e),h=g.check(e)&&h))}),c=this.check(f)!==!1,h=h&&c,c?this.invalid[f.name]=!1:this.invalid[f.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),a(b).attr("aria-invalid",!c)),h},showErrors:function(b){if(b){var c=this;a.extend(this.errorMap,b),this.errorList=a.map(this.errorMap,function(a,b){return{message:a,element:c.findByName(b)[0]}}),this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var b=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(b)},resetElements:function(a){var b;if(this.settings.unhighlight)for(b=0;a[b];b++)this.settings.unhighlight.call(this,a[b],this.settings.errorClass,""),this.findByName(a[b].name).removeClass(this.settings.validClass);else a.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)void 0!==a[b]&&null!==a[b]&&a[b]!==!1&&c++;return c},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(a){a.not(this.containers).text(""),this.addWrapper(a).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1===a.grep(this.errorList,function(a){return a.element.name===b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var d=this.name||a(this).attr("name"),e="undefined"!=typeof a(this).attr("contenteditable")&&"false"!==a(this).attr("contenteditable");return!d&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),e&&(this.form=a(this).closest("form")[0],this.name=d),this.form===b.currentForm&&(!(d in c||!b.objectLength(a(this).rules()))&&(c[d]=!0,!0))})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.split(" ").join(".");return a(this.settings.errorElement+"."+b,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([])},reset:function(){this.resetInternals(),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},elementValue:function(b){var c,d,e=a(b),f=b.type,g="undefined"!=typeof e.attr("contenteditable")&&"false"!==e.attr("contenteditable");return"radio"===f||"checkbox"===f?this.findByName(b.name).filter(":checked").val():"number"===f&&"undefined"!=typeof b.validity?b.validity.badInput?"NaN":e.val():(c=g?e.text():e.val(),"file"===f?"C:\\fakepath\\"===c.substr(0,12)?c.substr(12):(d=c.lastIndexOf("/"),d>=0?c.substr(d+1):(d=c.lastIndexOf("\\"),d>=0?c.substr(d+1):c)):"string"==typeof c?c.replace(/\r/g,""):c)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d,e,f,g=a(b).rules(),h=a.map(g,function(a,b){return b}).length,i=!1,j=this.elementValue(b);"function"==typeof g.normalizer?f=g.normalizer:"function"==typeof this.settings.normalizer&&(f=this.settings.normalizer),f&&(j=f.call(b,j),delete g.normalizer);for(d in g){e={method:d,parameters:g[d]};try{if(c=a.validator.methods[d].call(this,j,b,e.parameters),"dependency-mismatch"===c&&1===h){i=!0;continue}if(i=!1,"pending"===c)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!c)return this.formatAndAdd(b,e),!1}catch(k){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+b.id+", check the '"+e.method+"' method.",k),k instanceof TypeError&&(k.message+=".  Exception occurred when checking element "+b.id+", check the '"+e.method+"' method."),k}}if(!i)return this.objectLength(g)&&this.successList.push(b),!0},customDataMessage:function(b,c){return a(b).data("msg"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase())||a(b).data("msg")},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor===String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){"string"==typeof c&&(c={method:c});var d=this.findDefined(this.customMessage(b.name,c.method),this.customDataMessage(b,c.method),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c.method],"<strong>Warning: No message defined for "+b.name+"</strong>"),e=/\$?\{(\d+)\}/g;return"function"==typeof d?d=d.call(this,c.parameters,b):e.test(d)&&(d=a.validator.format(d.replace(e,"{$1}"),c.parameters)),d},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b);this.errorList.push({message:c,element:a,method:b.method}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){var a,b,c;for(a=0;this.errorList[a];a++)c=this.errorList[a],this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass),this.showLabel(c.element,c.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d,e,f,g,h=this.errorsFor(b),i=this.idOrName(b),j=a(b).attr("aria-describedby");h.length?(h.removeClass(this.settings.validClass).addClass(this.settings.errorClass),h.html(c)):(h=a("<"+this.settings.errorElement+">").attr("id",i+"-error").addClass(this.settings.errorClass).html(c||""),d=h,this.settings.wrapper&&(d=h.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(d):this.settings.errorPlacement?this.settings.errorPlacement.call(this,d,a(b)):d.insertAfter(b),h.is("label")?h.attr("for",i):0===h.parents("label[for='"+this.escapeCssMeta(i)+"']").length&&(f=h.attr("id"),j?j.match(new RegExp("\\b"+this.escapeCssMeta(f)+"\\b"))||(j+=" "+f):j=f,a(b).attr("aria-describedby",j),e=this.groups[b.name],e&&(g=this,a.each(g.groups,function(b,c){c===e&&a("[name='"+g.escapeCssMeta(b)+"']",g.currentForm).attr("aria-describedby",h.attr("id"))})))),!c&&this.settings.success&&(h.text(""),"string"==typeof this.settings.success?h.addClass(this.settings.success):this.settings.success(h,b)),this.toShow=this.toShow.add(h)},errorsFor:function(b){var c=this.escapeCssMeta(this.idOrName(b)),d=a(b).attr("aria-describedby"),e="label[for='"+c+"'], label[for='"+c+"'] *";return d&&(e=e+", #"+this.escapeCssMeta(d).replace(/\s+/g,", #")),this.errors().filter(e)},escapeCssMeta:function(a){return a.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(b){return this.checkable(b)&&(b=this.findByName(b.name)),a(b).not(this.settings.ignore)[0]},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){return a(this.currentForm).find("[name='"+this.escapeCssMeta(b)+"']")},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return!this.dependTypes[typeof a]||this.dependTypes[typeof a](a,b)},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){var c=this.elementValue(b);return!a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){this.pending[b.name]||(this.pendingRequest++,a(b).addClass(this.settings.pendingClass),this.pending[b.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],a(b).removeClass(this.settings.pendingClass),c&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.submitButton&&a("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!c&&0===this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b,c){return c="string"==typeof c&&c||"remote",a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,{method:c})})},destroy:function(){this.resetForm(),a(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor===String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={},d=a(b).attr("class");return d&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},normalizeAttributeRule:function(a,b,c,d){/min|max|step/.test(c)&&(null===b||/number|range|text/.test(b))&&(d=Number(d),isNaN(d)&&(d=void 0)),d||0===d?a[c]=d:b===c&&"range"!==b&&(a[c]=!0)},attributeRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)"required"===c?(d=b.getAttribute(c),""===d&&(d=!0),d=!!d):d=f.attr(c),this.normalizeAttributeRule(e,g,c,d);return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(b){var c,d,e={},f=a(b),g=b.getAttribute("type");for(c in a.validator.methods)d=f.data("rule"+c.charAt(0).toUpperCase()+c.substring(1).toLowerCase()),""===d&&(d=!0),this.normalizeAttributeRule(e,g,c,d);return e},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)return void delete b[d];if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0===e.param||e.param:(a.data(c.form,"validator").resetElements(a(c)),delete b[d])}}),a.each(b,function(d,e){b[d]=a.isFunction(e)&&"normalizer"!==d?e(c):e}),a.each(["minlength","maxlength"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){var c;b[this]&&(a.isArray(b[this])?b[this]=[Number(b[this][0]),Number(b[this][1])]:"string"==typeof b[this]&&(c=b[this].replace(/[\[\]]/g,"").split(/[\s,]+/),b[this]=[Number(c[0]),Number(c[1])]))}),a.validator.autoCreateRanges&&(null!=b.min&&null!=b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),null!=b.minlength&&null!=b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!==d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";if("select"===c.nodeName.toLowerCase()){var e=a(c).val();return e&&e.length>0}return this.checkable(c)?this.getLength(b,c)>0:void 0!==b&&null!==b&&b.length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a)},date:function(){var a=!1;return function(b,c){return a||(a=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(c)||!/Invalid|NaN/.test(new Date(b).toString())}}(),dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d},maxlength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e<=d},rangelength:function(b,c,d){var e=a.isArray(b)?b.length:this.getLength(b,c);return this.optional(c)||e>=d[0]&&e<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||a<=c},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(b,c,d){var e,f=a(c).attr("type"),g="Step attribute on input type "+f+" is not supported.",h=["text","number","range"],i=new RegExp("\\b"+f+"\\b"),j=f&&!i.test(h.join()),k=function(a){var b=(""+a).match(/(?:\.(\d+))?$/);return b&&b[1]?b[1].length:0},l=function(a){return Math.round(a*Math.pow(10,e))},m=!0;if(j)throw new Error(g);return e=k(d),(k(b)>e||l(b)%l(d)!==0)&&(m=!1),this.optional(c)||m},equalTo:function(b,c,d){var e=a(d);return this.settings.onfocusout&&e.not(".validate-equalTo-blur").length&&e.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){a(c).valid()}),b===e.val()},remote:function(b,c,d,e){if(this.optional(c))return"dependency-mismatch";e="string"==typeof e&&e||"remote";var f,g,h,i=this.previousValue(c,e);return this.settings.messages[c.name]||(this.settings.messages[c.name]={}),i.originalMessage=i.originalMessage||this.settings.messages[c.name][e],this.settings.messages[c.name][e]=i.message,d="string"==typeof d&&{url:d}||d,h=a.param(a.extend({data:b},d.data)),i.old===h?i.valid:(i.old=h,f=this,this.startRequest(c),g={},g[c.name]=b,a.ajax(a.extend(!0,{mode:"abort",port:"validate"+c.name,dataType:"json",data:g,context:f.currentForm,success:function(a){var d,g,h,j=a===!0||"true"===a;f.settings.messages[c.name][e]=i.originalMessage,j?(h=f.formSubmitted,f.resetInternals(),f.toHide=f.errorsFor(c),f.formSubmitted=h,f.successList.push(c),f.invalid[c.name]=!1,f.showErrors()):(d={},g=a||f.defaultMessage(c,{method:e,parameters:b}),d[c.name]=i.message=g,f.invalid[c.name]=!0,f.showErrors(d)),i.valid=j,f.stopRequest(c,j)}},d)),"pending")}}});var c,d={};return a.ajaxPrefilter?a.ajaxPrefilter(function(a,b,c){var e=a.port;"abort"===a.mode&&(d[e]&&d[e].abort(),d[e]=c)}):(c=a.ajax,a.ajax=function(b){var e=("mode"in b?b:a.ajaxSettings).mode,f=("port"in b?b:a.ajaxSettings).port;return"abort"===e?(d[f]&&d[f].abort(),d[f]=c.apply(this,arguments),d[f]):c.apply(this,arguments)}),a});

Dropzone.autoDiscover = false;



/**
@license
DayPilot Pro for JavaScript 2021.1.4880 (trial)
Copyright (c) 2005 - 2021 Annpoint s.r.o.
https://www.daypilot.org/
Use of this software is subject to license terms.
*/
if("undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){function e(e){var t=DayPilot.Date.Cache.Ticks;if(t[e])return DayPilot.Stats.cacheHitsTicks+=1,t[e];var n,i=new Date(e),a=i.getUTCMilliseconds();n=0===a?"":a<10?".00"+a:a<100?".0"+a:"."+a;var r=i.getUTCSeconds();r<10&&(r="0"+r);var o=i.getUTCMinutes();o<10&&(o="0"+o);var s=i.getUTCHours();s<10&&(s="0"+s);var l=i.getUTCDate();l<10&&(l="0"+l);var d=i.getUTCMonth()+1;d<10&&(d="0"+d);var c=i.getUTCFullYear();if(c<=0)throw"The minimum year supported is 1.";c<10?c="000"+c:c<100?c="00"+c:c<1e3&&(c="0"+c);var u=c+"-"+d+"-"+l+"T"+s+":"+o+":"+r+n;return t[e]=u,u}function t(e,t){return!DayPilot.Util.isNullOrUndefined(e)&&(!DayPilot.Util.isNullOrUndefined(t)&&e.toLocaleLowerCase()===t.toLocaleLowerCase())}function n(e){e=Math.min(e,255),e=Math.max(e,0);var t=e.toString(16);return e<16?"0"+t:t}if("undefined"==typeof DayPilot.$){DayPilot.$=function(e){return document.getElementById(e)},DayPilot.isKhtml=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("KHTML")!==-1,DayPilot.isIE=navigator&&navigator.userAgent&&(navigator.userAgent.indexOf("MSIE")!==-1||navigator.userAgent.indexOf("Trident")!==-1),DayPilot.isIEQuirks=DayPilot.isIE&&document.compatMode&&"BackCompat"===document.compatMode,DayPilot.browser={},DayPilot.browser.ff=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1,DayPilot.browser.chrome=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Chrome")!==-1,DayPilot.browser.ie=DayPilot.isIE,DayPilot.browser.edge=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Edge")!==-1,DayPilot.browser.webkit=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("WebKit")!==-1,DayPilot.browser.hover=!window.matchMedia("(any-hover: none)").matches,DayPilot.browser.passiveEvents=!1,function(){try{window.addEventListener("test",null,Object.defineProperty({},"passive",{"get":function(){DayPilot.browser.passiveEvents=!0}}))}catch(e){}}(),DayPilot.libs={},DayPilot.libs.angularjs="object"==typeof angularjs,DayPilot.touch={},DayPilot.touch.start=window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",DayPilot.touch.move=window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",DayPilot.touch.end=window.navigator.msPointerEnabled?"MSPointerUp":"touchend",DayPilot.mo2=function(e,t){if("undefined"!=typeof t.offsetX){var n={x:t.offsetX+1,y:t.offsetY+1};if(!e)return n;for(var i=t.srcElement;i&&i!==e;)"SPAN"!==i.tagName&&(n.x+=i.offsetLeft,i.offsetTop>0&&(n.y+=i.offsetTop-i.scrollTop)),i=i.offsetParent;return i?n:null}if("undefined"!=typeof t.layerX){var n={x:t.layerX,y:t.layerY,src:t.target};if(!e)return n;for(var i=t.target;i&&"absolute"!==i.style.position&&"relative"!==i.style.position;)i=i.parentNode,DayPilot.isKhtml&&(n.y+=i.scrollTop);for(;i&&i!==e;)n.x+=i.offsetLeft,n.y+=i.offsetTop-i.scrollTop,i=i.offsetParent;return i?n:null}return null},DayPilot.mo3=function(e,t){var n,i=DayPilot.page(t);if(i)if(e){var a=DayPilot.abs(e);if(!a)throw new Error("no abs");n={x:i.x-a.x,y:i.y-a.y}}else n={x:i.x,y:i.y};else if(n=DayPilot.mo2(e,t),!n)return null;return n.shift=t.shiftKey,n.meta=t.metaKey,n.ctrl=t.ctrlKey,n.alt=t.altKey,n},DayPilot.mc=function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},DayPilot.Stats={},DayPilot.Stats.eventObjects=0,DayPilot.Stats.dateObjects=0,DayPilot.Stats.cacheHitsCtor=0,DayPilot.Stats.cacheHitsParsing=0,DayPilot.Stats.cacheHitsTicks=0,DayPilot.Stats.print=function(){console.log("DayPilot.Stats.eventObjects: "+DayPilot.Stats.eventObjects),console.log("DayPilot.Stats.dateObjects: "+DayPilot.Stats.dateObjects),console.log("DayPilot.Stats.cacheHitsCtor: "+DayPilot.Stats.cacheHitsCtor),console.log("DayPilot.Stats.cacheHitsParsing: "+DayPilot.Stats.cacheHitsParsing),console.log("DayPilot.Stats.cacheHitsTicks: "+DayPilot.Stats.cacheHitsTicks),console.log("DayPilot.Date.Cache.Ctor keys: "+Object.keys(DayPilot.Date.Cache.Ctor).length),console.log("DayPilot.Date.Cache.Parsing keys: "+Object.keys(DayPilot.Date.Cache.Parsing).length)},DayPilot.list=function(e,t){if(e&&e.isDayPilotList&&!t)return e;var n=DayPilot.isArray(e)||"[object NodeList]"===Object.prototype.toString.call(e),i=!n&&!DayPilot.Util.isNullOrUndefined(e),a=[];if(a.isDayPilotList=!0,a.clone=function(){var e=DayPilot.list();return a.each(function(t){e.push(t)}),e},a.each=function(e){if(e){if(a.forEach)return void a.forEach(e);for(var t=0;t<this.length;t++)e(a[t],t,a)}},a.addProps=function(e){var t=a.clone();if(e)for(var n in e)t[n]=e[n];return t},a.last=function(){return 0===a.length?null:a[a.length-1]},a.first=function(){return 0===a.length?null:a[0]},a.add=function(e){var t=a.clone();return t.push(e),t},a.map=function(e){if("function"!=typeof e)throw"DayPilot.list().map(f): Function expected";var t=DayPilot.list();return a.each(function(n,i,a){t.push(e(n,i,a))}),t},a.filter=function(e){var t=DayPilot.list();if("function"!=typeof e)throw"DayPilot.list().filter(f): Function expected";return a.each(function(n,i,a){e(n,i,a)&&t.push(n)}),t},a.concat=function(e){if(!e)return a;for(var t=a.clone(),n=0;n<e.length;n++)t.push(e[n]);return t},a.find||(a.find=function(e){if("function"!=typeof e)throw"DayPilot.list().find(f): Function expected";for(var t=0;t<this.length;t++)if(e(a[t]))return a[t]}),a.findIndex||(a.findIndex=function(e){if("function"!=typeof e)throw"DayPilot.list().findIndex(f): Function expected";for(var t=0;t<this.length;t++)if(e(a[t]))return t;return-1}),a.some||(a.some=function(e){if("function"!=typeof e)throw"DayPilot.list().some(f): Function expected";for(var t=0;t<this.length;t++)if(e(a[t]))return!0;return!1}),a.reduce||(a.reduce=function(e,t){if("function"!=typeof e)throw"DayPilot.list().reduce(f): Function expected";var n,i=0;if("undefined"!=typeof t)n=t;else{if(i=1,0===a.length)throw"DayPilot.list().reduce(f): No initial value and empty list";n=a[0]}for(var r=i;r<this.length;r++)n=e(n,a[r],r,this);return n}),a.isEmpty=function(){return 0===a.length},n)for(var r=0;r<e.length;r++)a[r]=e[r];else i&&(a[0]=e);return a},DayPilot.list.for=function(e,t){for(var n=DayPilot.list(),i=0;i<e;i++)"function"==typeof t?n.push(t(i)):n.push(i);return n},DayPilot.line=function(e,t,n,i,a){a=a||{};var r={"x":e,"y":t},o={"x":n,"y":i,"deg":DayPilot.deg(e,t,n,i)},s=!1;if(t<i){var l=t;t=i,i=l,l=e,e=n,n=l,s=!0}var d=DayPilot.deg(e,t,n,i),c={"x":e,"y":t},u={"x":n,"y":i},h=function(){var a=Math.abs(e-n),r=Math.abs(t-i),o=(e+n)/2;return o-Math.sqrt(a*a+r*r)/2}(),f=function(){return(t+i)/2}(),v=DayPilot.distance(c,u),p=document.createElement("div");p.setAttribute("style","width:"+v+"px;height:0px;-moz-transform:rotate("+d+"deg);-webkit-transform:rotate("+d+"deg);-ms-transform:rotate("+d+"deg);transform:rotate("+d+"deg);position:absolute;top:"+f+"px;left:"+h+"px;"),a.cssClass&&(p.className=a.cssClass);var m=document.createElement("div");m.appendChild(p);var g,b,d,y,w=!!a.arrow;if(w){var g=o.y-5,b=o.x-5,d=d;o.y>r.y&&(d-=180);var y=document.createElement("div");y.style.borderColor="black",y.style.width="10px",y.style.height="10px",y.style.borderRadius="10px",y.style.position="absolute",y.style.left=b+"px",y.style.top=g+"px",a.cssClass?y.className=a.cssClass+"_circle":y.style.backgroundColor="black",m.appendChild(y)}return m},DayPilot.deg=function(e,t,n,i){var a,r=Math.abs(e-n),o=Math.abs(t-i),s=(e+n)/2,l=(t+i)/2,d=Math.sqrt(r*r+o*o),c=s-d/2,u=l;r=d/2,a=Math.abs(s-c),o=Math.sqrt(Math.abs(e-c)*Math.abs(e-c)+Math.abs(t-u)*Math.abs(t-u));var h=(o*o-r*r-a*a)/(2*r*a);return 180*Math.acos(h)/Math.PI},DayPilot.complete=function(e){return"complete"===document.readyState?void e():(DayPilot.complete.list||(DayPilot.complete.list=[],DayPilot.re(document,"readystatechange",function(){if("complete"===document.readyState){for(var e=0;e<DayPilot.complete.list.length;e++){(0,DayPilot.complete.list[e])()}DayPilot.complete.list=[]}})),void DayPilot.complete.list.push(e))},DayPilot.page=function(e){var t=e.changedTouches&&e.changedTouches[0]?e.changedTouches[0]:e;return"undefined"==typeof t.pageX||DayPilot.browser.ie?"undefined"!=typeof e.clientX&&document.body&&document.documentElement?{x:e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:e.clientY+document.body.scrollTop+document.documentElement.scrollTop}:null:{x:t.pageX,y:t.pageY}},DayPilot.rel=function(e,t){var n=DayPilot.abs(e),i=DayPilot.abs(t);return{"x":n.x-i.x,"y":n.y-i.y,"w":e.offsetWidth,"h":e.offsetHeight}},DayPilot.abs=function(e,t){if(!e)return null;if(e.getBoundingClientRect){var n=DayPilot.absBoundingClientBased(e);if(t){var i=DayPilot.absOffsetBased(e,!1),t=DayPilot.absOffsetBased(e,!0);n.x+=t.x-i.x,n.y+=t.y-i.y,n.w=t.w,n.h=t.h}return n}return DayPilot.absOffsetBased(e,t)},DayPilot.absBoundingClientBased=function(e){var t=e.getBoundingClientRect();return{x:t.left+window.pageXOffset,y:t.top+window.pageYOffset,w:e.clientWidth,h:e.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}}},DayPilot.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},DayPilot.absOffsetBased=function(e,t){for(var n={x:e.offsetLeft,y:e.offsetTop,w:e.clientWidth,h:e.clientHeight,toString:function(){return"x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h}};DayPilot.op(e);)e=DayPilot.op(e),n.x-=e.scrollLeft,n.y-=e.scrollTop,t&&(n.x<0&&(n.w+=n.x,n.x=0),n.y<0&&(n.h+=n.y,n.y=0),e.scrollLeft>0&&n.x+n.w>e.clientWidth&&(n.w-=n.x+n.w-e.clientWidth),e.scrollTop&&n.y+n.h>e.clientHeight&&(n.h-=n.y+n.h-e.clientHeight)),n.x+=e.offsetLeft,n.y+=e.offsetTop;var i=DayPilot.pageOffset();return n.x+=i.x,n.y+=i.y,n},DayPilot.wd=function(){var e=DayPilot.isIEQuirks,t=document.documentElement.clientHeight;e&&(t=document.body.clientHeight);var n=document.documentElement.clientWidth;e&&(n=document.body.clientWidth);var i=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,a=document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft,r={};return r.width=n,r.height=t,r.scrollTop=i,r.scrollLeft=a,r},DayPilot.op=function(e){try{return e.offsetParent}catch(e){return document.body}},DayPilot.distance=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},DayPilot.doc=function(){var e=document.documentElement;return e&&e.clientHeight?e:document.body},DayPilot.pageOffset=function(){if("undefined"!=typeof window.pageXOffset)return{x:window.pageXOffset,y:window.pageYOffset};var e=DayPilot.doc();return{x:e.scrollLeft,y:e.scrollTop}},DayPilot.ac=function(e,t){if(!t)var t=[];for(var n=0;e.children&&n<e.children.length;n++)t.push(e.children[n]),DayPilot.ac(e.children[n],t);return t},DayPilot.indexOf=function(e,t,n){if(!e||!e.length)return-1;for(var i=0;i<e.length;i++)if(n){if(n(e[i],t))return i}else if(e[i]===t)return i;return-1},DayPilot.contains=function(e,t){if(2!==arguments.length)throw new DayPilot.Error("DayPilot.contains() requires two arguments.");return!!e&&(e===t&&!DayPilot.isArray(e)||DayPilot.indexOf(e,t)!==-1)},DayPilot.rfa=function(e,t){var n=DayPilot.indexOf(e,t);n!==-1&&e.splice(n,1)},DayPilot.sheet=function(e){e=e||window.document;var t=e.createElement("style");t.setAttribute("type","text/css"),t.styleSheet||t.appendChild(e.createTextNode("")),(e.head||e.getElementsByTagName("head")[0]).appendChild(t);var n=!!t.styleSheet,i={};return i.rules=[],i.commit=function(){try{n&&(t.styleSheet.cssText=this.rules.join("\n"))}catch(e){}},i.add=function(e,a,r){if(n)return void this.rules.push(e+"{"+a+"}");if(t.sheet.insertRule)"undefined"==typeof r&&(r=t.sheet.cssRules.length),t.sheet.insertRule(e+"{"+a+"}",r);else{if(!t.sheet.addRule)throw"No CSS registration method found";t.sheet.addRule(e,a,r)}return i},i},DayPilot.Args=function(e){var t=this;this.isArgs=!0,this.preventDefault=function(){e&&e.preventDefault(),t.preventDefault.value=!0}},DayPilot.Debug=function(e){var t=this;this.printToBrowserConsole=!1,this.enabled=!1,this.messages=[],this.target=null,this.c=null,this.clear=function(){this.messages=[],t.c&&(t.c.innerHTML="")},this.hide=function(){DayPilot.de(t.c),t.c=null},this.show=function(){t.c&&t.hide();var n=e.nav.top,i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.style.backgroundColor="black",i.style.color="#ccc",i.style.overflow="auto",i.style.webkitUserSelect="auto",i.style.MozUserSelect="all",i.onclick=function(){t.hide()};for(var a=0;a<this.messages.length;a++){var r=t.messages[a],o=r.f();i.appendChild(o)}this.c=i,n.appendChild(i)},this.log=function(){if(t.target){for(var e=[],n=0;n<arguments.length;n++){var i=arguments[n];e.push(i)}var a=e.join(" ");t.target.style.whiteSpace="pre",t.target.innerText+=a+"\n"}},this.message=function(e,t){if(this.enabled){var n={};n.time=new DayPilot.Date,n.level=t||"debug",n.text=DayPilot.Util.escapeHtml(e),n.f=function(){var e=document.createElement("div");switch(e.innerHTML=n.time+" ("+n.level+"): "+n.text,n.level){case"error":e.style.color="red";break;case"warning":e.style.color="orange";break;case"info":e.style.color="white";break;case"debug":}return e},this.messages.push(n),this.printToBrowserConsole&&"undefined"!=typeof console&&console.log(n)}}},DayPilot.re=function(e,t,n){n&&e&&e.addEventListener(t,n,!1)},DayPilot.ue=function(e,t,n){e.removeEventListener(t,n,!1)},DayPilot.ds=function(e){return DayPilot.Date.toStringSortable(e)},DayPilot.gs=function(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)||""},DayPilot.StyleReader=function(e){this.get=function(t){return e?DayPilot.gs(e,t):null},this.getPx=function(e){var t=this.get(e);return t.indexOf("px")===-1?void 0:parseInt(t,10)},this.getFont=function(){var e=this.get("font-weight"),t="italic"===this.get("font-style")?"italic":"";return{"family":this.get("font-family"),"size":this.get("font-size"),"style":t+" "+e,"asString":function(){return DayPilot.Util.fontString(this)}}},this.getBackColor=function(e){"undefined"==typeof e&&(e="white");var t=this.get("background-color");return DayPilot.Util.isTransparentColor(t)?e:t}},DayPilot.he=function(e){var t=e.replace(/&/g,"&amp;");return t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;")},DayPilot.he2=function(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML},DayPilot.us=function(e){if(e){e.setAttribute("unselectable","on"),e.style.userSelect="none",e.style.MozUserSelect="none",e.style.KhtmlUserSelect="none",e.style.webkitUserSelect="none";for(var t=0;t<e.childNodes.length;t++)1===e.childNodes[t].nodeType&&DayPilot.us(e.childNodes[t])}},DayPilot.pu=function(e){var t,n,i,a=e.attributes;if(a)for(n=a.length,t=0;t<n;t+=1)a[t]&&(i=a[t].name,"function"==typeof e[i]&&(e[i]=null));if(a=e.childNodes)for(n=a.length,t=0;t<n;t+=1){DayPilot.pu(e.childNodes[t])}},DayPilot.puc=function(e){var t,n,i=e.childNodes;if(i){var n=i.length;for(t=0;t<n;t+=1)DayPilot.pu(e.childNodes[t])}},DayPilot.de=function(e){if(e)if(DayPilot.isArray(e))for(var t=0;t<e.length;t++)DayPilot.de(e[t]);else e.parentNode&&e.parentNode.removeChild(e)},DayPilot.fade=function(e,t,n){if(e){clearTimeout(e.messageTimeout);var i="none"!==e.style.display,a=t>0,r=t<0;if(0!==t){if(a?e.status="in":r&&(e.status="out"),a&&!i)e.target=parseFloat(e.style.opacity),e.opacity=0,e.style.opacity=0,e.style.display="";else if(r&&!e.target)e.target=e.style.opacity;else{var o=e.opacity,s=Math.floor(10*(o+t))/10;a&&s>e.target&&(s=e.target),r&&s<0&&(s=0);e.opacity=s,e.style.opacity=s}a&&(e.opacity>=e.target||e.opacity>=1)||r&&e.opacity<=0?(e.target=null,r&&(e.style.opacity=e.target,e.opacity=e.target,e.style.display="none"),n&&"function"==typeof n&&(e.status=null,n())):e.messageTimeout=setTimeout(function(){DayPilot.fade(e,t,n)},50)}}},DayPilot.sw=function(e){return e?e.offsetWidth-e.clientWidth:0},DayPilot.swa=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px",e.style.width="200px",e.style.height="100px",e.style.overflow="auto";var t=document.createElement("div");t.style.width="300px",t.style.height="300px",e.appendChild(t),document.body.appendChild(e);var n=DayPilot.sw(e);return document.body.removeChild(e),n},DayPilot.sh=function(e){return e?e.offsetHeight-e.clientHeight:0},DayPilot.guid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},DayPilot.ua=function(e){if(!DayPilot.isArray(e))throw new DayPilot.Error("DayPilot.ua() - array required");var t=[];return e.forEach(function(e){DayPilot.contains(t,e)||t.push(e)}),t},DayPilot.am=function(){return"undefined"==typeof angular?null:(DayPilot.am.cached||(DayPilot.am.cached=angular.module("daypilot",[])),DayPilot.am.cached)},function(){function e(e,i){var a={w:e.offsetWidth,h:e.offsetHeight,x:parseInt(e.style.left),y:parseInt(e.style.top)};a.height=e.style.height,a.width=e.style.width,a.top=e.style.top,a.left=e.style.left,a.toString=function(){return"w: "+this.w+" h:"+this.h};var r={};if(r.finished=null,r.vertical="center",r.horizontal="center",i)for(var o in i)r[o]=i[o];e.style.visibility="hidden",e.style.display="";var s=i.animation||"fast",l=t(s);l.div=e,l.i=0,l.target=a,l.config=r,n(l)}function t(e){var t=function(){var e=[];e.time=10;var t,n=.08;t=.1;for(var i=t;i<1.2;i+=n)e.push(i),t=i;n=.03;for(var i=t;i>.8;i-=n)e.push(i),t=i;for(var i=t;i<=1;i+=n)e.push(i),t=i;return e},n=function(){var e=[];e.time=10;var t,n=.04;t=.1;for(var i=t;i<=1;i+=n)e.push(i),t=i;return e},i=function(){var e=[];e.time=10;var t,n=.08;t=.1;for(var i=t;i<=1;i+=n)e.push(i),t=i;return e},a={"fast":i,"slow":n,"jump":t};return a[e]||(e="fast"),a[e]()}function n(e){var t,i=e.div,a=e[e.i],r=a*e.target.h;switch(e.config.vertical){case"center":t=e.target.y-(r-e.target.h)/2;break;case"top":t=e.target.y;break;case"bottom":t=e.target.y-(r-e.target.h);break;default:throw"Unexpected 'vertical' value."}var o,s=a*e.target.w;switch(e.config.horizontal){case"left":o=e.target.x;break;case"center":o=e.target.x-(s-e.target.w)/2;break;case"right":o=e.target.x-(s-e.target.w);break;default:throw"Unexpected 'horizontal' value."}i.style.height=r+"px",i.style.top=t+"px",i.style.width=s+"px",i.style.left=o+"px",i.style.visibility="visible",e.i++,e.i<e.length-1?setTimeout(function(e){return function(){n(e)}}(e),e.time):(i.style.width=e.target.width,i.style.height=e.target.height,i.style.top=e.target.top,i.style.left=e.target.left,"function"==typeof e.config.finished&&e.config.finished())}DayPilot.pop=e}(),DayPilot.Util={},DayPilot.Util.addClass=function(e,t){if(t&&e)if(DayPilot.isArray(e))for(var n=0;n<e.length;n++)DayPilot.Util.addClass(e[n],t);else{if(!e.className)return void(e.className=t);var i=new RegExp("(^|\\s)"+t+"($|\\s)");i.test(e.className)||(e.className=e.className+" "+t)}},DayPilot.Util.normalizeColor=function(e){function t(e){return e=e.replace(/[^\d,]/g,"").split(","),"#"+((1<<24)+(+e[0]<<16)+(+e[1]<<8)+ +e[2]).toString(16).slice(1)}return 0===e.indexOf("rgb")?t(e):e},DayPilot.Util.addClassToString=function(e,t){return e?new RegExp("(^|\\s)"+t+"($|\\s)").test(e)?e:e+" "+t:t},DayPilot.Util.removeClassFromString=function(e,t){if(!e)return"";var n=new RegExp("(^|\\s)"+t+"($|\\s)");return e.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},DayPilot.Util.removeClass=function(e,t){if(e)if(DayPilot.isArray(e))for(var n=0;n<e.length;n++)DayPilot.Util.removeClass(e[n],t);else if(e.className){var i=new RegExp("(^|\\s)"+t+"($|\\s)");e.className=e.className.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}},DayPilot.Util.props=function(e){var t=[];for(var n in e)t.push(n),t.push(e[n]);return t.join("-")},DayPilot.Util.propArray=function(e,t,n){return DayPilot.list(e).map(function(e){return e[t]?e[t]:n})},DayPilot.Util.updatePropsFromArray=function(e,t,n){for(var i=0;i<n.length;i++)e[i][t]=n[i]},DayPilot.Util.copyProps=function(e,t,n){if(t||(t={}),!e)return t;if("undefined"==typeof n)for(var i in e)e.hasOwnProperty(i)&&"undefined"!=typeof e[i]&&(t[i]=e[i]);else for(var a=0;a<n.length;a++){var i=n[a];"undefined"!=typeof e[i]&&(t[i]=e[i])}return t},DayPilot.Util.ownPropsAsArray=function(e){var t=[];if(!e)return t;for(var n in e)if(e.hasOwnProperty(n)){var i={};i.key=n,i.val=e[n],t.push(i)}return t},DayPilot.Util.firstPropValue=function(e){for(var t in e)return e[t]},DayPilot.Util.isOnlyProperty=function(e,t){if(!e)return!1;for(var n in e)if(e.hasOwnProperty(n)&&n!==t)return!1;return!0},DayPilot.Util.createArrayCopy=function(e,t){if(!DayPilot.isArray(e))return[];for(var n=[],i=0;i<e.length;i++){var a={};DayPilot.Util.copyProps(e[i],a,t),n.push(a)}return n},DayPilot.Util.atLeast=function(e,t){return Math.max(e,t)},DayPilot.Util.avg=function(e,t){return(e+t)/2},DayPilot.Util.div=function(e,t,n,i,a){var r=document.createElement("div");return(t||n||i||a)&&(i<0&&(t+=i,i*=-1),a<0&&(n+=a,a*=-1),r.style.position="absolute","number"==typeof t?r.style.left=t+"px":"string"==typeof t&&(r.style.left=t),"number"==typeof n?r.style.top=n+"px":"string"==typeof n&&(r.style.top=n),"number"==typeof i?r.style.width=i+"px":"string"==typeof i&&(r.style.width=i),"number"==typeof a?r.style.height=a+"px":"string"==typeof a&&(r.style.height=a)),e&&e.appendChild(r),r},DayPilot.Util.overlaps=function(e,t,n,i){return!(t<=n||e>=i)},DayPilot.Util.isMouseEvent=function(e){return!!navigator.msPointerEnabled&&(!!e.pointerType&&("mouse"===e.pointerType||4===e.pointerType))},DayPilot.Util.mouseButton=function(e){var t={};switch(e.button){case 0:t.left=!0;break;case 1:t.middle=!0;break;case 2:t.right=!0}return t},DayPilot.Util.membersPlain=function(e){var t=DayPilot.Util.members(e,2),n=function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.name;n.obsolete&&(i+=" (obsolete)"),n.noCssOnly&&(i+=" (!cssOnly)"),n.aspnet&&(i+=" (ASP.NET)"),n.mvc&&(i+="(MVC)"),e[t]=i}};return n(t.events),n(t.methods),n(t.properties),t},DayPilot.Util.shouldApply=function(e){if(!e)return!1;var t=e.toLowerCase();return!(t.indexOf("before")>=0)&&(!(t.indexOf("after")>=0)&&("onrowfilter"!==t&&"oneventfilter"!==t))},DayPilot.Util.safeApply=function(e,t){var n=e["$root"]["$$phase"];"$apply"===n||"$digest"===n?e["$eval"](t):e["$apply"](t)},DayPilot.Util.members=function(e,t){var n=DayPilot.list(),i=DayPilot.list(),a=DayPilot.list(),r=e&&e.members?e.members.obsolete:[],o=e&&e.members?e.members.noCssOnly:[],s=e&&e.members?e.members.ignore:[],l=e&&e.members&&e.members.ignoreFilter?e.members.ignoreFilter:function(){return!1};for(var d in e)if(0!==d.indexOf("$")&&0!==d.indexOf("_")&&0!==d.indexOf("number")&&0!==d.indexOf("is")&&"v"!==d&&!DayPilot.contains(s,d)&&!l(d))if(0!==d.indexOf("on"))if("function"!=typeof e[d])if("object"!=typeof e[d])a.push(d);else{var c=e[d];if(0===t){a.push(d);continue}if(c&&c.nodeType>0){a.push(d);continue}if(c instanceof DayPilot.Bubble){a.push(d);continue}if(c instanceof DayPilot.Date){a.push(d);continue}if(c instanceof DayPilot.Menu){a.push(d);continue}if(c instanceof DayPilot.Scheduler){a.push(d);continue}if(DayPilot.isArray(c)){a.push(d);continue}null===c&&a.push(d);var u=null;"number"==typeof t&&(u=t-1);for(var h=DayPilot.Util.members(c,u),f=0;f<h.events.length;f++)n.push(d+"."+h.events[f].name);for(var f=0;f<h.methods.length;f++)i.push(d+"."+h.methods[f].name);for(var f=0;f<h.properties.length;f++)a.push(d+"."+h.properties[f].name)}else i.push(d);else n.push(d);n.sort(),i.sort(),a.sort();var v=function(e){for(var t=0;t<e.length;t++){var n=e[t],i={};i.name=n,e[t]=i,DayPilot.contains(r,n)&&(i.obsolete=!0),DayPilot.contains(o,n)&&(i.noCssOnly=!0),n.indexOf("CallBack")!==-1&&(i.aspnet=!0,i.mvc=!0),n.indexOf("PostBack")!==-1&&(i.aspnet=!0),n.indexOf("Notify")!==-1&&(i.aspnet=!0,i.mvc=!0)}};return v(n),v(i),v(a),{"events":n,"methods":i,"properties":a}},DayPilot.Util.replaceCharAt=function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)},DayPilot.Util.evalVariable=function(e,t){if(t=t||["object"],null===e||"undefined"==typeof e)return null;if(DayPilot.indexOf(t,typeof e)!==-1)return e;if("string"!=typeof e)throw"Unable to resolve a variable name (not a string).";if(!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e))throw"Invalid variable name: "+e;return eval(e)},DayPilot.Util.evalFunction=function(e){if(null===e)return null;if("function"==typeof e)return e;if("string"!=typeof e)throw"Unable to resolve a function (not a string).";if(!/^\(?function/.test(e))throw"Invalid function string";return eval("("+e+")")},DayPilot.Util.isNullOrUndefined=function(e){return null===e||"undefined"==typeof e},DayPilot.Util.log=function(e){window.console&&window.console.log&&window.console.log(e)},DayPilot.Util.workerFrom=function(e){var t=e.toString(),n=t.slice(t.indexOf("{")+1,t.lastIndexOf("}")),i=new Blob([n]),a=window.URL.createObjectURL(i);return new Worker(a)},DayPilot.Util.dataUriToBlob=function(e){if("string"!=typeof e)throw"DayPilot.Util.dataUriToBlob(): dataURI string expected";for(var t=e.split(","),n=t[0],i=t[1],a=n.indexOf("base64")!==-1,r=a?atob:decodeURI,o=n.split(":")[1].split(";")[0],s=r(i),l=new window.Uint8Array(s.length),d=0;d<s.length;d++)l[d]=s.charCodeAt(d);return new Blob([l],{"type":o})},DayPilot.Util.downloadDataUri=function(e,t){var n=DayPilot.Util.dataUriToBlob(e);DayPilot.Util.downloadBlob(n,t)},DayPilot.Util.downloadBlob=function(e,t){var t=t||"download";if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(e,t);else{var n=window.URL.createObjectURL(e),i=document.createElement("a");i.download=t,i.href=n,i.style.display="none",document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(n)})}},DayPilot.Util.monitor=function(e,t,n){var i=e[t];e[t]=function(){n.apply(e,arguments),i.apply(e,arguments)}},DayPilot.Util.isTransparentColor=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},DayPilot.Util.stripTags=function(e){if(DayPilot.Util.isNullOrUndefined(e))return e;if("string"==typeof e)return e.replace(/<(?:.|\n)*?>/gm,"");throw new DayPilot.Exception("Unable to strip tags from a non-string")},DayPilot.Util.escapeHtml=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML},DayPilot.Util.escapeTextHtml=function(e,t){return DayPilot.Util.isNullOrUndefined(t)?DayPilot.Util.isNullOrUndefined(e)?"":DayPilot.Util.escapeHtml(e):t},DayPilot.Util.isSameEvent=function(e,t){return!(!e||!t)&&(e=e instanceof DayPilot.Event?e.data:e,t=t instanceof DayPilot.Event?t.data:t,e===t||(!DayPilot.Util.isNullOrUndefined(e.id)&&e.id===t.id||!(!DayPilot.Util.isNullOrUndefined(e.id)||DayPilot.Util.isNullOrUndefined(e.recurrentMasterId))&&(e.recurrentMasterId===t.recurrentMasterId&&new DayPilot.Date(e.start)===new DayPilot.Date(t.start))))},DayPilot.Util.isReactComponent=function(e){return e&&e.$$typeof===("function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103)},DayPilot.Util.fontString=function(e){return(e.style+" "+e.size+" "+e.family).trim()},DayPilot.Util.fontHeight=function(e){var t=DayPilot.Util.fontString(e);if("number"!=typeof DayPilot.Util.fontHeight.cache[t]){var n=document.createElement("div");n.style.position="fixed",n.style.left="-2000px;",n.style.top="-2000px",n.style.padding="0px",n.style.font=t,n.innerText="X",document.body.appendChild(n),DayPilot.Util.fontHeight.cache[t]=new DayPilot.StyleReader(n).getPx("height"),document.body.removeChild(n)}return DayPilot.Util.fontHeight.cache[t]},DayPilot.Util.fontHeight.cache={},DayPilot.Areas={},DayPilot.Areas.attach=function(e,t,n){var n=n||{},a=n.areas,r=n.allowed||function(){return!0},o=n.offsetX||0;a=i(t,a),a&&DayPilot.isArray(a)&&0!==a.length&&(DayPilot.re(e,"mousemove",function(i){e.active||e.areasDisabled||!r()||DayPilot.Areas.showAreas(e,t,i,a,{"offsetX":o,"eventDiv":n.eventDiv})}),DayPilot.re(e,"mouseout",function(t){DayPilot.Areas.hideAreas(e,t)}),DayPilot.list(a).each(function(i){if(DayPilot.Areas.isVisible(i)){var a=DayPilot.Areas.createArea(e,t,i,{"offsetX":o,"eventDiv":n.eventDiv});e.appendChild(a)}}))},DayPilot.Areas.disable=function(e){e.areasDisabled=!0,DayPilot.list(e.childNodes).filter(function(e){return e.isActiveArea&&!e.area.start}).each(function(e){e.style.display="none"})},DayPilot.Areas.enable=function(e){e.areasDisabled=!1,DayPilot.list(e.childNodes).filter(function(e){return e.isActiveArea&&!e.area.start}).each(function(e){e.style.display=""})},DayPilot.Areas.remove=function(e){var t=DayPilot.list(e.childNodes).filter(function(e){return e.isActiveArea});DayPilot.de(t)},DayPilot.Areas.isVisible=function(e){var t=e.visibility||e.v||"Visible";return"Visible"===t||"TouchVisible"===t&&!DayPilot.browser.hover},DayPilot.Areas.copy=function(e){return DayPilot.isArray(e)?e.map(function(e){return DayPilot.Util.copyProps(e,{})}):[]},DayPilot.Areas.resolvePosition=function(e,t,n,i){var a=DayPilot.Areas.copy(e),r=t;return a.forEach(function(e){e.start&&(e.left=r.getPixels(new DayPilot.Date(e.start)).left-n),"number"==typeof e.offsetX&&(e.left+=e.offsetX),e.end&&(e.right=n+i-r.getPixels(new DayPilot.Date(e.end)).left)}),a};var i=function(e,t){return DayPilot.isArray(t)||(t=e.areas,t||(e.cache?t=e.cache.areas:e.data&&(t=e.data.areas))),t};DayPilot.Areas.showAreas=function(e,t,n,i,a){if(!DayPilot.Global.resizing&&!DayPilot.Global.moving&&!DayPilot.Global.selecting&&!e.active&&DayPilot.browser.hover){if(DayPilot.Areas.all&&DayPilot.Areas.all.length>0)for(var r=0;r<DayPilot.Areas.all.length;r++){var o=DayPilot.Areas.all[r];o!==e&&DayPilot.Areas.hideAreas(o,n)}if(e.active={},DayPilot.isArray(i)||(i=t.areas,i||(t.cache?i=t.cache.areas:t.data&&(i=t.data.areas))),i&&0!==i.length&&!(e.areas&&e.areas.length>0)){e.areas=[];for(var r=0;r<i.length;r++){var s=i[r];if(!DayPilot.Areas.isVisible(s)){var l=DayPilot.Areas.createArea(e,t,s,a);e.areas.push(l),e.appendChild(l),DayPilot.Areas.all.push(e)}}e.active.children=DayPilot.ac(e)}}},DayPilot.Areas.createArea=function(e,t,n,i){function a(e,t,n){var i={};return i.area=e,i.source=t,i.originalEvent=n,i.preventDefault=function(){i.preventDefault.value=!0},"function"==typeof e.onClick&&e.onClick(i),i}function r(e,t,n){DayPilot.Bubble&&DayPilot.Bubble.touchPosition(n),e.calendar.bubble&&e.calendar.bubble.showEvent(e,!0)}function o(e,t,n,i){DayPilot.Menu&&DayPilot.Menu.touchPosition(i);var a=n.contextMenu||n.menu;if(a instanceof DayPilot.Menu||("string"==typeof a?a=DayPilot.Util.evalVariable(a):t.isEvent&&t.client.contextMenu()?a=t.client.contextMenu():t.isEvent&&t.calendar.contextMenu?a=DayPilot.Util.evalVariable(t.calendar.contextMenu):t.isRow&&t.calendar.contextMenuResource&&(a=DayPilot.Util.evalVariable(t.calendar.contextMenuResource))),a&&a.show){var r={"type":"area","div":e,"e":t,"area":n,"a":d};a.show(t,{"initiator":r})}}var i=i||{},s=i.offsetX||0,l=i.eventDiv||e,d=document.createElement("div");d.isActiveArea=!0,d.area=n,d.setAttribute("unselectable","on");var c=n.w||n.width,u=n.h||n.height,h=n.cssClass||n.css||n.className;if("undefined"!=typeof n.style&&d.setAttribute("style",n.style),d.style.position="absolute","undefined"!=typeof c&&(d.style.width=c+"px"),"undefined"!=typeof u&&(d.style.height=u+"px"),"undefined"!=typeof n.right&&(d.style.right=n.right+"px"),"undefined"!=typeof n.top&&(d.style.top=n.top+"px"),"undefined"!=typeof n.left&&(d.style.left=n.left+s+"px"),"undefined"!=typeof n.bottom&&(d.style.bottom=n.bottom+"px"),"undefined"!=typeof n.html||"undefined"!=typeof n.text)d.innerHTML=DayPilot.Util.escapeTextHtml(n.text,n.html);else if(n.icon){var f=document.createElement("i");f.className=n.icon,d.appendChild(f)}else if(n.image){var v=document.createElement("img");v.src=n.image,d.appendChild(v)}else if(n.symbol){var p="http://www.w3.org/2000/svg",m=document.createElementNS(p,"svg");m.setAttribute("width","100%"),m.setAttribute("height","100%");var g=document.createElementNS(p,"use");g.setAttribute("href",n.symbol),m.appendChild(g),d.appendChild(m)}if(h&&(d.className=h),n.toolTip&&d.setAttribute("title",n.toolTip),n.backColor&&(d.style.background=n.backColor),
n.background&&(d.style.background=n.background),n.fontColor&&(d.style.color=n.fontColor),n.padding&&(d.style.padding=n.padding+"px",d.style.boxSizing="border-box"),n.verticalAlignment)switch(d.style.display="flex",n.verticalAlignment){case"center":d.style.alignItems="center";break;case"top":d.style.alignItems="flex-start";break;case"bottom":d.style.alignItems="flex-end"}if(n.horizontalAlignment)switch(d.style.display="flex",n.horizontalAlignment){case"right":d.style.justifyContent="flex-end";break;case"left":d.style.justifyContent="flex-start";break;case"center":d.style.justifyContent="center"}if("ResizeEnd"===n.action||"ResizeStart"===n.action||"Move"===n.action){if(t.calendar.isCalendar)switch(n.action){case"ResizeEnd":n.cursor="s-resize",n.dpBorder="bottom";break;case"ResizeStart":n.cursor="n-resize",n.dpBorder="top";break;case"Move":n.cursor="move"}if(t.calendar.isScheduler||t.calendar.isMonth)switch(n.action){case"ResizeEnd":n.cursor="e-resize",n.dpBorder="right";break;case"ResizeStart":n.cursor="w-resize",n.dpBorder="left";break;case"Move":n.cursor="move"}d.onmousemove=function(e,t,n){return function(i){t.calendar.internal&&t.calendar.internal.dragInProgress&&t.calendar.internal.dragInProgress()||(i.cancelBubble=!0,e.style.cursor=n.cursor,n.dpBorder&&(e.dpBorder=n.dpBorder))}}(l,t,n),d.onmouseout=function(e,t,n){return function(t){e.style.cursor=""}}(l,t,n)}if(("ResizeEnd"===n.action||"ResizeStart"===n.action)&&t.isEvent&&t.calendar.internal.touch){var b=function(e,t,n){return function(i){i.cancelBubble=!0;var a=t.calendar.internal.touch,r=i.touches?i.touches[0]:i,o={x:r.pageX,y:r.pageY};t.calendar.coords=a.relativeCoords(i),a.preventEventTap=!0,t.calendar.isScheduler?a.startResizing(e,"ResizeEnd"===n.action?"right":"left"):t.calendar.isCalendar&&a.startResizing(e,"ResizeEnd"===n.action?"bottom":"top",o)}}(l,t,n);DayPilot.re(d,DayPilot.touch.start,b)}if("ContextMenu"===n.action&&t.isEvent&&t.calendar.internal.touch){var b=function(e,t,n){return function(i){i.cancelBubble=!0,i.preventDefault(),o(e,t,n,i),t.calendar.internal.touch.preventEventTap=!0}}(l,t,n),y=function(e,t,n){return function(e){e.cancelBubble=!0,e.preventDefault()}}(l,t,n);DayPilot.re(d,DayPilot.touch.start,b),DayPilot.re(d,DayPilot.touch.end,y)}if("Bubble"===n.action&&t.isEvent&&t.calendar.internal.touch){var b=function(e,t,n){return function(e){e.cancelBubble=!0,e.preventDefault();var i=a(n,t,e);if(!i.preventDefault.value){r(t,n,e);t.calendar.internal.touch.preventEventTap=!0,"function"==typeof n.onClicked&&n.onClicked(i)}}}(l,t,n),y=function(e,t,n){return function(e){e.cancelBubble=!0,e.preventDefault()}}(l,t,n);DayPilot.re(d,DayPilot.touch.start,b),DayPilot.re(d,DayPilot.touch.end,y)}if("Move"===n.action&&t.isEvent&&t.calendar.internal.touch){var b=function(e,t,n){return function(n){n.cancelBubble=!0;var i=t.calendar.internal.touch,a=n.touches?n.touches[0]:n,r={x:a.pageX,y:a.pageY};t.calendar.coords=i.relativeCoords(n),DayPilot.Global&&DayPilot.Global.touch&&(DayPilot.Global.touch.active=!0),i.preventEventTap=!0,i.startMoving(e,r)}}(l,t,n);DayPilot.re(d,DayPilot.touch.start,b)}if("Move"===n.action&&t.isRow&&t.calendar.internal.touch,"Bubble"===n.action&&t.isEvent&&(d.onmousemove=function(e,t,n){return function(e){n.bubble?n.bubble.showEvent(t,!0):t.calendar.bubble&&t.calendar.bubble.showEvent(t,!0)}}(e,t,n),d.onmouseout=function(e,t,n){return function(e){"undefined"!=typeof DayPilot.Bubble&&(n.bubble?n.bubble.hideOnMouseOut():t.calendar.bubble&&t.calendar.bubble.hideOnMouseOut())}}(e,t,n)),"Bubble"===n.action&&t.isRow&&(d.onmousemove=function(e,t,n){return function(e){n.bubble?n.bubble.showResource(t,!0):t.calendar.resourceBubble&&t.calendar.resourceBubble.showResource(t,!0)}}(e,t,n),d.onmouseout=function(e,t,n){return function(e){"undefined"!=typeof DayPilot.Bubble&&(n.bubble?n.bubble.hideOnMouseOut():t.calendar.resourceBubble&&t.calendar.resourceBubble.hideOnMouseOut())}}(e,t,n)),"HoverMenu"===n.action&&(d.onmousemove=function(e,t,n){return function(e){var i=n.menu;"string"==typeof i&&(i=DayPilot.Util.evalVariable(i)),i&&i.show&&(i.visible?i.source&&"undefined"!=typeof i.source.id&&i.source.id!==t.id&&i.show(t):i.show(t),i.cancelHideTimeout())}}(e,t,n),d.onmouseout=function(e,t,n){return function(e){var t=n.menu;"string"==typeof t&&(t=DayPilot.Util.evalVariable(t)),t&&t.hideOnMouseOver&&t.delayedHide()}}(e,t,n)),"JavaScript"===n.action){var b=function(e,t,n){return function(e){if(!DayPilot.Util.isMouseEvent(e)){e.cancelBubble=!0,e.preventDefault();t.calendar.internal.touch.start=!0}}}(l,t,n),y=function(e,t,n){return function(e){if(!DayPilot.Util.isMouseEvent(e)){e.cancelBubble=!0,e.preventDefault();t.calendar.internal.touch.start=!1;var i=n.js;if("string"==typeof i&&(i=DayPilot.Util.evalFunction(n.js)),"function"==typeof i){var a=n.target||t;i.call(this,a)}}}}(l,t,n);DayPilot.re(d,DayPilot.touch.start,b),DayPilot.re(d,DayPilot.touch.end,y)}if("None"===n.action){var b=function(e,t,n){return function(e){var i=a(n,t,e);"function"==typeof n.onClicked&&n.onClicked(i),e.preventDefault(),e.stopPropagation()}}(l,t,n);DayPilot.re(d,DayPilot.touch.start,b)}return d.onmousedown=function(e,t,n){return function(i){if("function"==typeof n.onmousedown&&n.onmousedown(i),"function"==typeof n.mousedown){var a={};a.area=n,a.div=e,a.originalEvent=i,a.source=t,n.mousedown(a)}if("Move"===n.action&&t.isRow){var r=t.$.row;t.calendar.internal.rowtools.startMoving(r)}"undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),"Move"===n.action&&(DayPilot.Global.movingAreaData=n.data),"Move"===n.action&&t.isEvent&&t.calendar.internal&&t.calendar.internal.startMoving&&t.calendar.internal.startMoving(e,i);"Move"!==n.action&&"ResizeEnd"!==n.action&&"ResizeStart"!==n.action&&n.action&&"Default"!==n.action&&(i.preventDefault(),i.cancelBubble=!0)}}(e,t,n),d.onclick=function(e,t,n){return function(i){var r=a(n,t,i);if(!r.preventDefault.value){switch(n.action){case"JavaScript":var s=n.js;if("string"==typeof s&&(s=DayPilot.Util.evalFunction(n.js)),"function"==typeof s){var l=n.target||t;s.call(this,l)}i.cancelBubble=!0;break;case"ContextMenu":o(e,t,n,i),i.cancelBubble=!0;break;case"CallBack":alert("callback not implemented yet, id: "+n.id),i.cancelBubble=!0;break;case"None":i.cancelBubble=!0}"function"==typeof n.onClicked&&n.onClicked(r)}}}(e,t,n),"function"==typeof n.onMouseEnter&&d.addEventListener("mouseenter",function(e,t,n){return function(e){var i={};i.area=n,i.source=t,i.originalEvent=e,n.onMouseEnter(i)}}(e,t,n)),"function"==typeof n.onMouseLeave&&d.addEventListener("mouseleave",function(e,t,n){return function(e){var i={};i.area=n,i.source=t,i.originalEvent=e,n.onMouseLeave(i)}}(e,t,n)),d},DayPilot.Areas.all=[],DayPilot.Areas.hideAreas=function(e,t){if(e&&e&&e.active){var n=e.active,i=e.areas;if(n&&n.children&&t){var a=t.toElement||t.relatedTarget;if(~DayPilot.indexOf(n.children,a))return}if(!i||0===i.length)return void(e.active=null);DayPilot.de(i),e.active=null,e.areas=[],DayPilot.rfa(DayPilot.Areas.all,e),n.children=null}},DayPilot.Areas.hideAll=function(e){if(DayPilot.Areas.all&&0!==DayPilot.Areas.all.length)for(var t=0;t<DayPilot.Areas.all.length;t++)DayPilot.Areas.hideAreas(DayPilot.Areas.all[t],e)},DayPilot.Action=function(e,t,n,i){var a=this;this.calendar=e,this.isAction=!0,this.action=t,this.params=n,this.data=i,this.notify=function(){a.calendar.internal.invokeEvent("Immediate",this.action,this.params,this.data)},this.auto=function(){a.calendar.internal.invokeEvent("Notify",this.action,this.params,this.data)},this.queue=function(){a.calendar.queue.add(this)},this.toJSON=function(){var e={};return e.name=this.action,e.params=this.params,e.data=this.data,e}},DayPilot.Selection=function(e,t,n,i){this.menuType="selection",this.start=new DayPilot.Date(e),this.end=new DayPilot.Date(t),this.resource=n,this.root=i,this.calendar=i,this.toJSON=function(e){var t={};return t.start=this.start,t.end=this.end,t.resource=this.resource,t}},DayPilot.Link=function(e,t){this.isLink=!0,this.data=e,this.calendar=t,this.to=function(){return this.data.to},this.from=function(){return this.data.from},this.type=function(){return this.data.type},this.id=function(){return this.data.id},this.toJSON=function(){var e={};return e.from=this.data.from,e.to=this.data.to,e.id=this.data.id,e.type=this.data.type,e}},DayPilot.Event=function(e,t,n){var i=this;this.calendar=t,this.data=e?e:{},this.part=n?n:{},"undefined"==typeof this.data.id&&(this.data.id=this.data.value);var a={},r=["id","text","start","end","resource"];this.isEvent=!0,DayPilot.Stats.eventObjects+=1,this.temp=function(){if(a.dirty)return a;for(var e=0;e<r.length;e++)a[r[e]]=i.data[r[e]];return a.dirty=!0,a},this.copy=function(){var e={};return DayPilot.Util.copyProps(i.data,e),e},this.commit=function(){if(a.dirty){for(var e=0;e<r.length;e++)i.data[r[e]]=a[r[e]];"function"==typeof i.data.commitCallback&&i.data.commitCallback(),a.dirty=!1}},this.dirty=function(){return a.dirty},this.id=function(e){return"undefined"==typeof e?i.data.id:void(this.temp().id=e)},this.value=function(e){return"undefined"==typeof e?i.id():void i.id(e)},this.text=function(e){if("undefined"==typeof e)return i.data.text;this.temp().text=e;var t=DayPilot.Util.escapeHtml(e);this.client.innerHTML(t)},this.start=function(e){return"undefined"==typeof e?new DayPilot.Date(i.data.start):void(this.temp().start=new DayPilot.Date(e))},this.end=function(e){return"undefined"==typeof e?t&&t.internal.adjustEndNormalize?t.internal.adjustEndNormalize(new DayPilot.Date(i.data.end)):new DayPilot.Date(i.data.end):void(this.temp().end=new DayPilot.Date(e))},this.duration=function(){return new DayPilot.Duration(this.start(),this.end())},this.rawend=function(e){if("undefined"==typeof e)return t&&t.internal.adjustEndIn?t.internal.adjustEndIn(new DayPilot.Date(i.data.end)):new DayPilot.Date(i.data.end);throw new DayPilot.Exception("DayPilot.Event.rawend() is readonly")},this.partStart=function(){return new DayPilot.Date(this.part.start)},this.partEnd=function(){return new DayPilot.Date(this.part.end)},this.row=function(){return this.resource()},this.allday=function(){return"undefined"==typeof val?i.data.allday:void(this.temp().allday=val)},this.isAllDay=this.allday,this.resource=function(e){return"undefined"==typeof e?i.data.resource:void(this.temp().resource=e)},this.recurrent=function(){return i.data.recurrent},this.recurrentMasterId=function(){return i.data.recurrentMasterId},this.useBox=function(){return this.part.box},this.staticBubbleHTML=function(){return this.bubbleHtml()},this.bubbleHtml=function(){return i.cache?i.cache.bubbleHtml||i.data.bubbleHtml:i.data.bubbleHtml},this.tag=function(e){if(i.data.tags)return i.data.tags[e];var t=i.data.tag;if(!t)return null;if("undefined"==typeof e)return i.data.tag;for(var n=i.calendar.tagFields,a=-1,r=0;r<n.length;r++)e===n[r]&&(a=r);if(a===-1)throw"Field name not found.";return t[a]},this.client={},this.client.innerHTML=function(e){if("undefined"==typeof e){var t=i.cache||i.data,n=i.calendar&&i.calendar.internal&&i.calendar.internal.xssTextHtml;return n?n(t.text,t.html):DayPilot.Util.escapeTextHtml(t.text,t.html)}i.data.html=e,i.cache&&(i.cache.html=e)},this.client.html=this.client.innerHTML,this.client.header=function(e){return"undefined"==typeof e?i.data.header:void(i.data.header=e)},this.client.cssClass=function(e){return"undefined"==typeof e?i.data.cssClass:void(i.data.cssClass=e)},this.client.toolTip=function(e){if("undefined"==typeof e){var t=null;return t=i.cache&&"undefined"!=typeof i.cache.toolTip?i.cache.toolTip:"undefined"!=typeof i.data.toolTip?i.data.toolTip:i.data.text,DayPilot.Util.escapeHtml(t)}i.data.toolTip=e},this.client.backColor=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.backColor?i.cache.backColor:"undefined"!=typeof i.data.backColor?i.data.backColor:i.calendar.eventBackColor:void(i.data.backColor=e)},this.client.borderColor=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.borderColor?i.cache.borderColor:"undefined"!=typeof i.data.borderColor?i.data.borderColor:i.calendar.eventBorderColor:void(i.data.borderColor=e)},this.client.barColor=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.barColor?i.cache.barColor:"undefined"!=typeof i.data.barColor?i.data.barColor:i.calendar.durationBarColor:void(i.data.barColor=e)},this.client.barVisible=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.barHidden?!i.cache.barHidden:i.calendar.durationBarVisible&&!i.data.barHidden:void(i.data.barHidden=!e)},this.client.contextMenu=function(e){if("undefined"==typeof e){if(i.oContextMenu)return i.oContextMenu;var t=i.cache?i.cache.contextMenu:i.data.contextMenu;return t?DayPilot.Util.evalVariable(t):null}i.oContextMenu=e},this.client.moveEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.moveDisabled?!i.cache.moveDisabled:"Disabled"!==i.calendar.eventMoveHandling&&!i.data.moveDisabled:void(i.data.moveDisabled=!e)},this.client.resizeEnabled=function(e){return"undefined"==typeof e?"Milestone"!==i.data.type&&(i.cache&&"undefined"!=typeof i.cache.resizeDisabled?!i.cache.resizeDisabled:"Disabled"!==i.calendar.eventResizeHandling&&!i.data.resizeDisabled):void(i.data.resizeDisabled=!e)},this.client.rightClickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.rightClickDisabled?!i.cache.rightClickDisabled:"Disabled"!==i.calendar.eventRightClickHandling&&!i.data.rightClickDisabled:void(i.data.rightClickDisabled=!e)},this.client.clickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.clickDisabled?!i.cache.clickDisabled:"Disabled"!==i.calendar.eventClickHandling&&!i.data.clickDisabled:void(i.data.clickDisabled=!e)},this.client.deleteEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.deleteDisabled?!i.cache.deleteDisabled:"Disabled"!==i.calendar.eventDeleteHandling&&!i.data.deleteDisabled:void(i.data.deleteDisabled=!e)},this.client.doubleClickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.doubleClickDisabled?!i.cache.doubleClickDisabled:"Disabled"!==i.calendar.eventDoubleClickHandling&&!i.data.doubleClickDisabled:void(i.data.doubleClickDisabled=!e)},this.client.deleteClickEnabled=function(e){return"undefined"==typeof e?i.cache&&"undefined"!=typeof i.cache.deleteDisabled?!i.cache.deleteDisabled:"Disabled"!==i.calendar.eventDeleteHandling&&!i.data.deleteDisabled:void(i.data.deleteDisabled=!e)},this.toJSON=function(e){var t={};if(t.value=this.id(),t.id=this.id(),t.text=this.text(),t.start=this.start().toJSON(),t.end=this.end().toJSON(),t.resource=this.resource(),t.isAllDay=!1,t.recurrentMasterId=this.recurrentMasterId(),t.join=this.data.join,t.tag={},i.data.tags)for(var n in i.data.tags)i.data.tags.hasOwnProperty(n)&&(t.tag[n]=""+i.data.tags[n]);else if(i.calendar&&i.calendar.tagFields)for(var a=i.calendar.tagFields,r=0;r<a.length;r++)t.tag[a[r]]=this.tag(a[r]);return t}},DayPilot.Task=function(e,t){if(!e)throw"Trying to initialize DayPilot.Task with null data parameter";var n=this,i=null;if(e instanceof DayPilot.Event)i=e,this.data=e.data.task;else{if(e instanceof DayPilot.Task)return e;e.isTaskWrapper?this.data=e.data:this.data=e}var a={},r=["id","text","start","end","complete","type"];this.isTask=!0,this.calendar=t,this.temp=function(){if(a.dirty)return a;for(var e=0;e<r.length;e++)a[r[e]]=n.data[r[e]];return a.dirty=!0,a},this.copy=function(){var e={};return DayPilot.Util.copyProps(n.data,e),e},this.commit=function(){if(a.dirty){for(var e=0;e<r.length;e++)n.data[r[e]]=a[r[e]];a.dirty=!1}},this.dirty=function(){return a.dirty},this.id=function(e){return"undefined"==typeof e?n.data.id:void(this.temp().id=e)},this.text=function(e){if("undefined"==typeof e)return n.data.text;this.temp().text=e;var t=DayPilot.Util.escapeHtml(e);this.client.innerHTML(t)},this.start=function(e){return"undefined"==typeof e?new DayPilot.Date(n.data.start):void(this.temp().start=new DayPilot.Date(e))},this.duration=function(){return new DayPilot.Duration(this.start(),this.end())},this.end=function(e){return"undefined"==typeof e?t&&"Date"===t.eventEndSpec?new DayPilot.Date(n.data.end).getDatePart().addDays(1):new DayPilot.Date(n.data.end):void(this.temp().end=new DayPilot.Date(e))},this.type=function(e){return"undefined"==typeof e?i?i.data.type||"Task":n.data.type:void(this.temp().type=e)},this.complete=function(e){return"undefined"==typeof e?n.data.complete?n.data.complete:0:void(this.temp().complete=e)},this.children=function(){var e=[];e.add=function(e){var t=new DayPilot.Task(e);this.data.children||(this.data.children=[]),this.children.push(t.data)};for(var n=0;this.data.children&&n<this.data.children.length;n++)e.push(new DayPilot.Task(this.data.children[n],t));return e},this.toJSON=function(e){var t={};return t.id=this.id(),t.text=this.text(),t.start=this.start().toJSON(),t.end=this.end().toJSON(),t.type=this.type(),t.tags={},DayPilot.Util.copyProps(this.data.tags,t.tags),t},this.row={};var o=this.row;o.expanded=function(e){return"undefined"==typeof e?!n.data.row||!n.data.row.collapsed:(n.data.row||(n.data.row={}),!!n.data.row.collapsed!=!e&&t.internal.rowObjectForTaskData(n.data).toggle(),n.data.row.collapsed=!e,void 0)},o.expand=function(){o.expanded(!0)},o.collapse=function(){o.expanded(!1)},o.toggle=function(){o.expanded(!o.expanded())}},DayPilot.request=function(e,t,n,i){var a=DayPilot.createXmlHttp();a&&(a.open("POST",e,!0),a.setRequestHeader("Content-type","text/plain"),a.onreadystatechange=function(){if(4===a.readyState)return 200!==a.status&&304!==a.status?void(i?i(a):window.console&&console.log("HTTP error "+a.status)):void t(a)},4!==a.readyState&&("object"==typeof n&&(n=JSON.stringify(n)),a.send(n)))},DayPilot.ajax=function(e){if(!e)throw new DayPilot.Exception("Parameter object required.");if("string"!=typeof e.url)throw new DayPilot.Exception("The parameter object must have 'url' property.");var t=DayPilot.createXmlHttp();if(!t)throw new DayPilot.Exception("Unable to create XMLHttpRequest object");var n="object"==typeof e.data,i=e.data,a=e.method||(e.data?"POST":"GET"),r=e.success||function(){},o=e.error||function(){},s=e.url,l=e.contentType||(n?"application/json":"text/plain"),d=e.headers||{};t.open(a,s,!0),t.setRequestHeader("Content-type",l),DayPilot.Util.ownPropsAsArray(d).forEach(function(e){t.setRequestHeader(e.key,e.val)}),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status||201===t.status||204===t.status||304===t.status){var e={};e.request=t,t.responseText&&(e.data=JSON.parse(t.responseText)),r(e)}else if(o){var e={};e.request=t,o(e)}else window.console&&console.log("HTTP error "+t.status)},4!==t.readyState&&(n&&(i=JSON.stringify(i)),t.send(i))},DayPilot.createXmlHttp=function(){return new XMLHttpRequest},DayPilot.Http={},DayPilot.Http.ajax=function(e){DayPilot.ajax(e)},DayPilot.Duration=function(e){var t=this,n=864e5,i=36e5,a=6e4,r=1e3;if(2===arguments.length){var o=arguments[0],s=arguments[1];if(!(o instanceof DayPilot.Date)&&"string"!=typeof o)throw"DayPilot.Duration(): Invalid start argument, DayPilot.Date expected";if(!(s instanceof DayPilot.Date)&&"string"!=typeof s)throw"DayPilot.Duration(): Invalid end argument, DayPilot.Date expected";"string"==typeof o&&(o=new DayPilot.Date(o)),"string"==typeof s&&(s=new DayPilot.Date(s)),e=s.getTime()-o.getTime()}return this.ticks=e||0,DayPilot.Date.Cache.DurationCtor[""+e]?DayPilot.Date.Cache.DurationCtor[""+e]:(DayPilot.Date.Cache.DurationCtor[""+e]=this,this.toString=function(e){if(!e)return t.days()+"."+t.hours()+":"+t.minutes()+":"+t.seconds()+"."+t.milliseconds();var n=t.minutes();n=(n<10?"0":"")+n;var i=e;return i=i.replace("mm",n),i=i.replace("m",t.minutes()),i=i.replace("H",t.hours()),i=i.replace("h",t.hours()),i=i.replace("d",t.days()),i=i.replace("s",t.seconds())},this.totalHours=function(){return t.ticks/i},this.totalDays=function(){return t.ticks/n},this.totalMinutes=function(){return t.ticks/a},this.totalSeconds=function(){return t.ticks/r},this.totalMilliseconds=function(){return t.ticks},this.days=function(){return Math.floor(t.totalDays())},this.hours=function(){var e=t.ticks-t.days()*n;return Math.floor(e/i)},this.minutes=function(){var e=t.ticks-Math.floor(t.totalHours())*i;return Math.floor(e/a)},this.seconds=function(){var e=t.ticks-Math.floor(t.totalMinutes())*a;return Math.floor(e/r)},this.milliseconds=function(){return t.ticks%r},void(this.add=function(e){return new DayPilot.Duration(t.ticks+e.ticks)}))},DayPilot.Duration.ofWeeks=function(e){return new DayPilot.Duration(1e3*e*60*60*24*7)},DayPilot.Duration.ofDays=function(e){return new DayPilot.Duration(1e3*e*60*60*24)},DayPilot.Duration.ofHours=function(e){return new DayPilot.Duration(1e3*e*60*60)},DayPilot.Duration.ofMinutes=function(e){return new DayPilot.Duration(1e3*e*60)},DayPilot.Duration.ofSeconds=function(e){return new DayPilot.Duration(1e3*e)},DayPilot.Duration.weeks=function(e){return DayPilot.Duration.ofWeeks(e)},DayPilot.Duration.days=function(e){return DayPilot.Duration.ofDays(e)},DayPilot.Duration.hours=function(e){return DayPilot.Duration.ofHours(e)},DayPilot.Duration.minutes=function(e){return DayPilot.Duration.ofMinutes(e)},DayPilot.Duration.seconds=function(e){return DayPilot.Duration.ofSeconds(e)},DayPilot.TimeSpan=function(){throw"Please use DayPilot.Duration class instead of DayPilot.TimeSpan."};try{DayPilot.TimeSpan.prototype=Object.create(DayPilot.Duration.prototype)}catch(e){}DayPilot.Date=function(t,n){if(t instanceof DayPilot.Date)return t;var i;DayPilot.Util.isNullOrUndefined(t)&&(i=DayPilot.DateUtil.fromLocal().getTime(),t=i);var a=DayPilot.Date.Cache.Ctor;if(a[t])return DayPilot.Stats.cacheHitsCtor+=1,a[t];var r=!1;if("string"==typeof t){try{i=DayPilot.DateUtil.fromStringSortable(t,n).getTime()}catch(e){throw new DayPilot.Exception("DayPilot.Date - Unable to parse ISO8601 date/time string: "+t)}r=!0}else if("number"==typeof t){if(isNaN(t))throw"Cannot create DayPilot.Date from NaN";i=t}else{if(!(t instanceof Date))throw"Unrecognized parameter: use Date, number or string in ISO 8601 format";i=n?DayPilot.DateUtil.fromLocal(t).getTime():t.getTime()}var o=e(i);return a[o]?a[o]:(a[o]=this,a[i]=this,r&&o!==t&&DayPilot.DateUtil.hasTzSpec(t)&&(a[t]=this),Object.defineProperty?(Object.defineProperty(this,"ticks",{get:function(){return i}}),Object.defineProperty(this,"value",{"value":o,"writable":!1,"enumerable":!0})):(this.ticks=i,this.value=o),DayPilot.Date.Config.legacyShowD&&(this.d=new Date(i)),void(DayPilot.Stats.dateObjects+=1))},DayPilot.Date.Config={},DayPilot.Date.Config.legacyShowD=!1,DayPilot.Date.Cache={},DayPilot.Date.Cache.Parsing={},DayPilot.Date.Cache.Ctor={},DayPilot.Date.Cache.Ticks={},DayPilot.Date.Cache.DurationCtor={},DayPilot.Date.Cache.clear=function(){DayPilot.Date.Cache.Parsing={},DayPilot.Date.Cache.Ctor={},DayPilot.Date.Cache.Ticks={},DayPilot.Date.Cache.DurationCtor={}},DayPilot.Date.prototype.addDays=function(e){return e?new DayPilot.Date(this.ticks+24*e*60*60*1e3):this},DayPilot.Date.prototype.addHours=function(e){return e?this.addTime(60*e*60*1e3):this},DayPilot.Date.prototype.addMilliseconds=function(e){return e?this.addTime(e):this},DayPilot.Date.prototype.addMinutes=function(e){return e?this.addTime(60*e*1e3):this},DayPilot.Date.prototype.addMonths=function(e){if(!e)return this;var t=new Date(this.ticks),n=t.getUTCFullYear(),i=t.getUTCMonth()+1;if(e>0){for(;e>=12;)e-=12,n++;e>12-i?(n++,i=e-(12-i)):i+=e}else{for(;e<=-12;)e+=12,n--;i+e<=0?(n--,i=12+i+e):i+=e}var a=new Date(t.getTime());a.setUTCDate(1),a.setUTCFullYear(n),a.setUTCMonth(i-1);var r=new DayPilot.Date(a).daysInMonth();return a.setUTCDate(Math.min(r,t.getUTCDate())),new DayPilot.Date(a)},DayPilot.Date.prototype.addSeconds=function(e){return e?this.addTime(1e3*e):this},DayPilot.Date.prototype.addTime=function(e){return e?(e instanceof DayPilot.Duration&&(e=e.ticks),new DayPilot.Date(this.ticks+e)):this},DayPilot.Date.prototype.addYears=function(e){var t=new Date(this.ticks),n=new Date(this.ticks),i=this.getYear()+e,a=this.getMonth();n.setUTCDate(1),n.setUTCFullYear(i),n.setUTCMonth(a);var r=new DayPilot.Date(n).daysInMonth();return n.setUTCDate(Math.min(r,t.getUTCDate())),new DayPilot.Date(n)},DayPilot.Date.prototype.dayOfWeek=function(){return new Date(this.ticks).getUTCDay()},DayPilot.Date.prototype.dayOfWeekISO=function(){return new Date(this.ticks).getUTCDay()||7},DayPilot.Date.prototype.getDayOfWeek=function(){return new Date(this.ticks).getUTCDay()},DayPilot.Date.prototype.getDayOfYear=function(){var e=this.firstDayOfYear();return DayPilot.DateUtil.daysDiff(e,this)+1},DayPilot.Date.prototype.daysInMonth=function(){var e=new Date(this.ticks),t=e.getUTCMonth()+1,n=e.getUTCFullYear(),i=[31,28,31,30,31,30,31,31,30,31,30,31];return 2!==t?i[t-1]:n%4!==0?i[1]:n%100===0&&n%400!==0?i[1]:i[1]+1},DayPilot.Date.prototype.daysInYear=function(){var e=this.getYear();return e%4!==0?365:e%100===0&&e%400!==0?365:366},DayPilot.Date.prototype.dayOfYear=function(){return Math.ceil((this.getDatePart().getTime()-this.firstDayOfYear().getTime())/864e5)+1},DayPilot.Date.prototype.equals=function(e){if(null===e)return!1;if(e instanceof DayPilot.Date)return this===e;throw"The parameter must be a DayPilot.Date object (DayPilot.Date.equals())"},DayPilot.Date.prototype.firstDayOfMonth=function(){var e=new Date;return e.setUTCFullYear(this.getYear(),this.getMonth(),1),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),new DayPilot.Date(e)},DayPilot.Date.prototype.firstDayOfYear=function(){var e=this.getYear(),t=new Date;return t.setUTCFullYear(e,0,1),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),new DayPilot.Date(t)},DayPilot.Date.prototype.firstDayOfWeek=function(e){var t=this;if(e instanceof DayPilot.Locale)e=e.weekStarts;else if("string"==typeof e&&DayPilot.Locale.find(e)){var n=DayPilot.Locale.find(e);e=n.weekStarts}else e=e||0;for(var i=t.dayOfWeek();i!==e;)t=t.addDays(-1),i=t.dayOfWeek();return new DayPilot.Date(t)},DayPilot.Date.prototype.getDay=function(){return new Date(this.ticks).getUTCDate()},DayPilot.Date.prototype.getDatePart=function(){var e=new Date(this.ticks);return e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),new DayPilot.Date(e)},DayPilot.Date.prototype.getYear=function(){return new Date(this.ticks).getUTCFullYear()},DayPilot.Date.prototype.getHours=function(){return new Date(this.ticks).getUTCHours()},DayPilot.Date.prototype.getMilliseconds=function(){return new Date(this.ticks).getUTCMilliseconds()},DayPilot.Date.prototype.getMinutes=function(){return new Date(this.ticks).getUTCMinutes()},DayPilot.Date.prototype.getMonth=function(){return new Date(this.ticks).getUTCMonth()},DayPilot.Date.prototype.getSeconds=function(){return new Date(this.ticks).getUTCSeconds()},DayPilot.Date.prototype.getTotalTicks=function(){return this.getTime()},DayPilot.Date.prototype.getTime=function(){return this.ticks},DayPilot.Date.prototype.getTimePart=function(){var e=this.getDatePart();return DayPilot.DateUtil.diff(this,e)},DayPilot.Date.prototype.lastDayOfMonth=function(){var e=new Date(this.firstDayOfMonth().getTime()),t=this.daysInMonth();return e.setUTCDate(t),new DayPilot.Date(e)},DayPilot.Date.prototype.weekNumber=function(){var e=this.firstDayOfYear(),t=(this.getTime()-e.getTime())/864e5;return Math.ceil((t+e.dayOfWeek()+1)/7)},DayPilot.Date.prototype.weekNumberISO=function(){var e=!1,t=this.dayOfYear(),n=this.firstDayOfYear().dayOfWeek(),i=this.firstDayOfYear().addYears(1).addDays(-1).dayOfWeek();0===n&&(n=7),0===i&&(i=7);var a=8-n;4!==n&&4!==i||(e=!0);var r=Math.ceil((t-a)/7),o=r;return a>=4&&(o+=1),o>52&&!e&&(o=1),0===o&&(o=this.firstDayOfYear().addDays(-1).weekNumberISO()),o},DayPilot.Date.prototype.toDateLocal=function(){var e=new Date(this.ticks),t=new Date;return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours()),t.setMinutes(e.getUTCMinutes()),t.setSeconds(e.getUTCSeconds()),t.setMilliseconds(e.getUTCMilliseconds()),t},DayPilot.Date.prototype.toDate=function(){return new Date(this.ticks)},DayPilot.Date.prototype.toJSON=function(){return this.value},DayPilot.Date.prototype.toString=function(e,t){return e?new r(e,t).print(this):this.toStringSortable()},DayPilot.Date.prototype.toStringSortable=function(){return e(this.ticks)},DayPilot.Date.parse=function(e,t,n){return new r(t,n).parse(e)};var a=0;DayPilot.Date.today=function(){return new DayPilot.Date(DayPilot.DateUtil.localToday(),!0)},DayPilot.Date.now=function(){return new DayPilot.Date},DayPilot.Date.fromYearMonthDay=function(e,t,n){t=t||1,n=n||1;var i=new Date(0);return i.setUTCFullYear(e),i.setUTCMonth(t-1),i.setUTCDate(n),new DayPilot.Date(i)},DayPilot.DateUtil={},DayPilot.DateUtil.fromStringSortable=function(e,t){var n=new DayPilot.Exception("Invalid string format (use '2010-12-31' or '2010-12-31T23:50:00'): "+e);if(!e)throw"Can't create DayPilot.Date from an empty string";var i=e.length,a=10===i,r=19===i,o=i>19;if(!a&&!r&&!o)throw n;if(DayPilot.Date.Cache.Parsing[e]&&!t)return DayPilot.Stats.cacheHitsParsing+=1,DayPilot.Date.Cache.Parsing[e];var s=e.substring(0,4);if(isNaN(s))throw n;var l=e.substring(5,7);if(isNaN(l))throw n;var d=e.substring(8,10);if(isNaN(d))throw n;var c=new Date(0);if(c.setUTCFullYear(s,l-1,d),a)return DayPilot.Date.Cache.Parsing[e]=c,c;var u=e.substring(11,13);if(isNaN(u))throw n;var h=e.substring(14,16);if(isNaN(h))throw n;var f=e.substring(17,19);if(isNaN(f))throw n;if(c.setUTCHours(u),c.setUTCMinutes(h),c.setUTCSeconds(f),r)return DayPilot.Date.Cache.Parsing[e]=c,c;var v=e[19],p=0;if("."===v){var m=parseInt(e.substring(20,23));if(isNaN(m))throw n;c.setUTCMilliseconds(m),p=DayPilot.DateUtil.getTzOffsetMinutes(e.substring(23))}else p=DayPilot.DateUtil.getTzOffsetMinutes(e.substring(19));var g=new DayPilot.Date(c);return t||(g=g.addMinutes(-p)),c=g.toDate(),DayPilot.Date.Cache.Parsing[e]=c,c},DayPilot.DateUtil.getTzOffsetMinutes=function(e){if(DayPilot.Util.isNullOrUndefined(e)||""===e)return 0;if("Z"===e)return 0;var t=e[0],n=parseInt(e.substring(1,3)),i=parseInt(e.substring(4)),a=60*n+i;if("-"===t)return-a;if("+"===t)return a;throw"Invalid timezone spec: "+e},DayPilot.DateUtil.hasTzSpec=function(e){return!!e.indexOf("+")||!!e.indexOf("-")},DayPilot.DateUtil.daysDiff=function(e,t){if(e&&t||function(){throw"two parameters required"}(),e=new DayPilot.Date(e),t=new DayPilot.Date(t),e.getTime()>t.getTime())return null;for(var n=0,i=e.getDatePart(),a=t.getDatePart();i<a;)i=i.addDays(1),n++;return n},DayPilot.DateUtil.daysSpan=function(e,t){if(e&&t||function(){throw"two parameters required"}(),e=new DayPilot.Date(e),t=new DayPilot.Date(t),e===t)return 0;var n=DayPilot.DateUtil.daysDiff(e,t);return t==t.getDatePart()&&n--,n},DayPilot.DateUtil.diff=function(e,t){if(!(e&&t&&e.getTime&&t.getTime))throw"Both compared objects must be Date objects (DayPilot.Date.diff).";return e.getTime()-t.getTime()},DayPilot.DateUtil.fromLocal=function(e){e||(e=new Date);var t=new Date;return t.setUTCFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t.setUTCHours(e.getHours()),t.setUTCMinutes(e.getMinutes()),t.setUTCSeconds(e.getSeconds()),t.setUTCMilliseconds(e.getMilliseconds()),t},DayPilot.DateUtil.localToday=function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},DayPilot.DateUtil.hours=function(e,t){var n=e.getUTCMinutes();n<10&&(n="0"+n);var i=e.getUTCHours();if(t){var a=i<12,i=i%12;0===i&&(i=12);return i+":"+n+" "+(a?"AM":"PM")}return i+":"+n},DayPilot.DateUtil.max=function(e,t){return e.getTime()>t.getTime()?e:t},DayPilot.DateUtil.min=function(e,t){return e.getTime()<t.getTime()?e:t};var r=function(e,n){"string"==typeof n&&(n=DayPilot.Locale.find(n));var n=n||DayPilot.Locale.US,i=[{"seq":"yyyy","expr":"[0-9]{4,4}","str":function(e){return e.getYear()}},{"seq":"yy","expr":"[0-9]{2,2}","str":function(e){return e.getYear()%100},"transform":function(e){
return parseInt(e)+2e3}},{"seq":"mm","expr":"[0-9]{2,2}","str":function(e){var t=e.getMinutes();return t<10?"0"+t:t}},{"seq":"m","expr":"[0-9]{1,2}","str":function(e){return e.getMinutes()}},{"seq":"HH","expr":"[0-9]{2,2}","str":function(e){var t=e.getHours();return t<10?"0"+t:t}},{"seq":"H","expr":"[0-9]{1,2}","str":function(e){return e.getHours()}},{"seq":"hh","expr":"[0-9]{2,2}","str":function(e){var t=e.getHours(),t=t%12;0===t&&(t=12);var n=t;return n<10?"0"+n:n}},{"seq":"h","expr":"[0-9]{1,2}","str":function(e){var t=e.getHours(),t=t%12;return 0===t&&(t=12),t}},{"seq":"ss","expr":"[0-9]{2,2}","str":function(e){var t=e.getSeconds();return t<10?"0"+t:t}},{"seq":"s","expr":"[0-9]{1,2}","str":function(e){return e.getSeconds()}},{"seq":"MMMM","expr":"[^\\s0-9]*","str":function(e){return n.monthNames[e.getMonth()]},"transform":function(e){var i=DayPilot.indexOf(n.monthNames,e,t);return i<0?null:i+1}},{"seq":"MMM","expr":"[^\\s0-9]*","str":function(e){return n.monthNamesShort[e.getMonth()]},"transform":function(e){var i=DayPilot.indexOf(n.monthNamesShort,e,t);return i<0?null:i+1}},{"seq":"MM","expr":"[0-9]{2,2}","str":function(e){var t=e.getMonth()+1;return t<10?"0"+t:t}},{"seq":"M","expr":"[0-9]{1,2}","str":function(e){return e.getMonth()+1}},{"seq":"dddd","expr":"[^\\s0-9]*","str":function(e){return n.dayNames[e.getDayOfWeek()]}},{"seq":"ddd","expr":"[^\\s0-9]*","str":function(e){return n.dayNamesShort[e.getDayOfWeek()]}},{"seq":"dd","expr":"[0-9]{2,2}","str":function(e){var t=e.getDay();return t<10?"0"+t:t}},{"seq":"%d","expr":"[0-9]{1,2}","str":function(e){return e.getDay()}},{"seq":"d","expr":"[0-9]{1,2}","str":function(e){return e.getDay()}},{"seq":"tt","expr":"(AM|PM|am|pm)","str":function(e){return e.getHours()<12?"AM":"PM"},"transform":function(e){return e.toUpperCase()}}],a=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};this.init=function(){this.year=this.findSequence("yyyy")||this.findSequence("yy"),this.month=this.findSequence("MMMM")||this.findSequence("MMM")||this.findSequence("MM")||this.findSequence("M"),this.day=this.findSequence("dd")||this.findSequence("d"),this.hours=this.findSequence("HH")||this.findSequence("H"),this.minutes=this.findSequence("mm")||this.findSequence("m"),this.seconds=this.findSequence("ss")||this.findSequence("s"),this.ampm=this.findSequence("tt"),this.hours12=this.findSequence("hh")||this.findSequence("h")},this.findSequence=function(t){function n(e){return parseInt(e)}return e.indexOf(t)===-1?null:{"findValue":function(r){for(var o=a(e),s=null,l=0;l<i.length;l++){var d=(i[l].length,t===i[l].seq),c=i[l].expr;d&&(c="("+c+")",s=i[l].transform),o=o.replace(i[l].seq,c)}o="^"+o+"$";try{var u=new RegExp(o),h=u.exec(r);return h?(s=s||n)(h[1]):null}catch(e){throw"unable to create regex from: "+o}}}},this.print=function(t){for(var n=function(e){for(var t=0;t<i.length;t++)if(i[t]&&i[t].seq===e)return i[t];return null},a=e.length<=0,r=0,o=[];!a;){var s=e.substring(r),l=/%?(.)\1*/.exec(s);if(l&&l.length>0){var d=l[0],c=n(d);c?o.push(c):o.push(d),r+=d.length,a=e.length<=r}else a=!0}for(var u=0;u<o.length;u++){var h=o[u];"string"!=typeof h&&(o[u]=h.str(t))}return o.join("")},this.parse=function(e){var t=this.year.findValue(e);if(!t)return null;var n=this.month.findValue(e);if(DayPilot.Util.isNullOrUndefined(n))return null;if(n>12||n<1)return null;var i=this.day.findValue(e),a=DayPilot.Date.fromYearMonthDay(t,n).daysInMonth();if(i<1||i>a)return null;var r=this.hours?this.hours.findValue(e):0,o=this.minutes?this.minutes.findValue(e):0,s=this.seconds?this.seconds.findValue(e):0,l=this.ampm?this.ampm.findValue(e):null;if(this.ampm&&this.hours12){var d=this.hours12.findValue(e);if(d<1||d>12)return null;r="PM"===l?12===d?12:d+12:12===d?0:d}if(r<0||r>23)return null;if(o<0||o>59)return null;if(s<0||s>59)return null;var c=new Date;return c.setUTCFullYear(t,n-1,i),c.setUTCHours(r),c.setUTCMinutes(o),c.setUTCSeconds(s),c.setUTCMilliseconds(0),new DayPilot.Date(c)},this.init()};DayPilot.ColorUtil={},DayPilot.ColorUtil.hexToRgb=function(e){if(!/^#[0-9a-f]{6}$/i.test(e))throw new DayPilot.Exception("Invalid color, only full hex color string accepted, eg. '#ffaaff'.");return e=e.replace("#",""),{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},DayPilot.ColorUtil.rgbToHex=function(e){return"#"+n(e.r)+n(e.g)+n(e.b)},DayPilot.ColorUtil.adjustLuminance=function(e,t){return{r:e.r+t,g:e.g+t,b:e.b+t}},DayPilot.ColorUtil.darker=function(e,t){var n=DayPilot.ColorUtil.hexToRgb(e);t=t||1;var i=17,a=t*i,r=DayPilot.ColorUtil.adjustLuminance(n,-a);return DayPilot.ColorUtil.rgbToHex(r)},DayPilot.Canvas=function(e,t,n,i,a){function r(e,t,n){for(var i=t.split(" "),a=[],r=i[0],o=1;o<i.length;o++){var s=i[o];e.measureText(r+" "+s).width<n?r+=" "+s:(a.push(r),r=s)}return a.push(r),a}var i=i||1,s=document.createElement("canvas");s.width=e*i,s.height=t*i;var l=s.getContext("2d");l.scale(i,i),this.defaultFileName="image.png","image/jpeg"===n&&(this.defaultFileName="image.jpg",a=a||.92),this.groupStart=function(e){},this.groupEnd=function(){},this.fillRect=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.fillRect(e.x,e.y,e.w,e.h),l.restore()},this.rect=function(e,t){l.save(),l.strokeStyle=t,l.beginPath(),l.rect(e.x+.5,e.y+.5,e.w-1,e.h-1),l.stroke(),l.restore()},this.diamond=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),l.moveTo(e.x+e.w/2,e.y+.5),l.lineTo(e.x+e.w-.5,e.y+e.h/2),l.lineTo(e.x+e.w/2,e.y+e.h-.5),l.lineTo(e.x+.5,e.y+e.h/2),l.closePath(),l.fill(),l.restore()},this.triangle=function(e,t,n){for(n=n||0;n<0;)n+=360;for(;n>=360;)n-=360;switch(l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),n){case 0:l.moveTo(e.x+e.w/3,e.y+.5),l.lineTo(e.x+e.w+.5,e.y+e.h/2),l.lineTo(e.x+e.w/3,e.y+e.h-.5);break;case 90:l.moveTo(e.x-.5,e.y+e.h/3),l.lineTo(e.x+e.w+.5,e.y+e.h/3),l.lineTo(e.x+e.w/2,e.y+e.h+.5);break;case 180:l.moveTo(e.x+2*e.w/3,e.y+.5),l.lineTo(e.x+2*e.w/3,e.y+e.h),l.lineTo(e.x,e.y+e.h/2);break;case 270:l.moveTo(e.x+e.w/2,e.y+e.w/2+.5),l.lineTo(e.x+e.w-.5,e.y+2*e.h/3),l.lineTo(e.x,e.y+2*e.h/3);break;default:throw new DayPilot.Exception("Unsupported rotation angle")}l.closePath(),l.fill(),l.restore()},this.upperLeftCorner=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x,e.y+e.h),l.closePath(),l.fill(),l.restore()},this.upperRightCorner=function(e,t){l.save(),l.strokeStyle="rgb(0,0,0,0)",l.fillStyle=t,l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x+e.w,e.y+e.h),l.closePath(),l.fill(),l.restore()},this.textWidth=function(e,t){l.save(),l.font=t.style+" "+t.size+" "+t.family;var n=l.measureText(e).width+1;return l.restore(),n},this.text=function(e,t,n,i,a,o,s){if(t){if("number"==typeof t&&(t=""+t),"string"!=typeof t)throw"String expected, supplied: "+typeof t;a=a||"left",o=o||0,i=i||"#000",s=s||"top",l.save();var d=DayPilot.Util.fontHeight(n),c=DayPilot.browser.ff?3:0;c+=.2*d,c+=DayPilot.browser.chrome?1:0,c+=DayPilot.browser.ie?1:0,l.beginPath(),l.rect(e.x+.5+o,e.y+.5+o,e.w-1-o,e.h-1-o),l.clip(),l.fillStyle=i,l.font=n.style+" "+n.size+" "+n.family,l.textBaseline="top",l.textAlign=a;var u=e.x;switch(a){case"left":u+=o;break;case"center":u+=e.w/2;break;case"right":u+=e.w-o}var h=1.2*d,f=t.split("\n"),v=[];DayPilot.list(f).each(function(t){var n=r(l,t,e.w);DayPilot.list(n).each(function(e){v.push(e)})});var p=h-d,m=h*v.length-p,g=e.h-2*o,b=e.y+o;switch(s){case"top":b+=c;break;case"center":b+=(g-m)/2+.1*d;break;case"bottom":b+=g-m}for(var y=0;y<v.length;y++){var w=v[y];l.fillText(w,u,b),b+=h}l.restore()}},this.line=function(e,t,n,i,a){l.save(),l.lineWidth=1,l.strokeStyle=a,l.beginPath(),l.moveTo(e+.5,t+.5),l.lineTo(n+.5,i+.5),l.stroke(),l.restore()},this.image=function(e,t){if(t){if("string"==typeof t){var n=t,t=document.createElement("img");if(0!==n.indexOf("data:"),!0)return t.onload=function(){l.save(),l.drawImage(t,e.x,e.y),l.restore()},void(t.src=n);t.src=n}l.save(),l.drawImage(t,e.x,e.y),l.restore()}},this.symbol=function(e,t,n){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),r=this;n=n||{};var s=n.color;new o(t).j().then(function(t){if(s){var n=document.createElementNS(i,"style");n.innerHTML="svg { color: "+s+"; }",a.appendChild(n)}a.setAttribute("viewBox",t.getAttribute("viewBox")),a.setAttribute("width",e.w),a.setAttribute("height",e.h);var o=document.createElementNS(i,"g");o.innerHTML=t.innerHTML,a.appendChild(o);var l=(new XMLSerializer).serializeToString(a),d="data:image/svg+xml;base64,"+btoa(l);r.image(e,d)})},this.getWidth=function(){return s.width},this.getHeight=function(){return s.height},this.getElement=function(){return s},this.getSource=function(){return"<img src='"+s.toDataURL(n,a)+"' />"},this.getDataUri=function(){return s.toDataURL(n,a)},this.getDefaultFileName=function(){return this.defaultFileName},this.getBlob=function(){return s.msToBlob?s.msToBlob():DayPilot.Util.dataUriToBlob(this.getDataUri())}},DayPilot.Svg=function(e,t){function n(e,t){var n=document.createElementNS(a,"clipPath");n.id="clip"+DayPilot.guid();var i=document.createElementNS(a,"rect");i.setAttribute("x",0),i.setAttribute("y",0),i.setAttribute("width",e),i.setAttribute("height",t),n.appendChild(i),s.defs.appendChild(n);var o=document.createElementNS(a,"g");o.setAttribute("clip-path","url(#"+n.id+")"),r.appendChild(o),r=o}function i(e,t){var n=null;if(e){if("string"==typeof e){if(0===e.indexOf("data:")){var i={};i.dataUri=e,t(i)}n=e}else n=e.src;var e=document.createElement("img");e.onload=function(){var e=document.createElement("canvas");e.width=this.naturalWidth,e.height=this.naturalHeight,e.getContext("2d").drawImage(this,0,0);var n={};n.dataUri=e.toDataURL("image/png"),t(n)},e.src=n}}var a="http://www.w3.org/2000/svg",r=document.createElementNS(a,"svg"),s=this;this.k=r,this.groups=[],r.outerHTML&&r.setAttribute("xmlns",a),r.setAttribute("viewBox","0 0 "+e+" "+t);var l=document.createElementNS(a,"defs");r.appendChild(l),s.defs=l,n(e,t),this.defaultFileName="image.svg",this.groupStart=function(e){var t=document.createElementNS(a,"g");for(var n in e)t.setAttribute("data-"+n,e[n]);r=t,this.group&&this.groups.push(this.group),this.group=t},this.groupEnd=function(){if(!this.group)throw new DayPilot.Error("SVG export = group not open");var e=this.group;this.group=this.groups.pop(),r=this.group,r||(r=this.k),r.appendChild(e)},this.fillRect=function(e,t){var n=document.createElementNS(a,"rect");n.setAttribute("x",e.x),n.setAttribute("y",e.y),n.setAttribute("width",e.w),n.setAttribute("height",e.h),n.setAttribute("fill",t),r.appendChild(n)},this.diamond=function(e,t){var n=document.createElementNS(a,"path"),i="";i+="M "+(e.x+e.w/2)+" "+e.y,i+=" ",i+="L "+(e.x+e.w)+" "+(e.y+e.h/2),i+=" ",i+="L "+(e.x+e.w/2)+" "+(e.y+e.h),i+=" ",i+="L "+e.x+" "+(e.y+e.h/2),i+=" Z",n.setAttribute("d",i),n.setAttribute("fill",t),r.appendChild(n)},this.triangle=function(e,t,n){var i=document.createElementNS(a,"path"),o="";o+="M "+(e.x+e.w/3)+" "+e.y,o+=" ",o+="L "+(e.x+e.w)+" "+(e.y+e.h/2),o+=" ",o+="L "+(e.x+e.w/3)+" "+(e.y+e.h),o+=" Z",i.setAttribute("d",o),i.setAttribute("fill",t),"number"==typeof n&&i.setAttribute("transform","rotate("+n+","+(e.x+e.w/2)+","+(e.y+e.h/2)+")"),r.appendChild(i)},this.upperLeftCorner=function(e,t){var n=document.createElementNS(a,"path"),i="";i+="M "+e.x+" "+e.y,i+=" ",i+="L "+(e.x+e.w)+" "+e.y,i+=" ",i+="L "+e.x+" "+(e.y+e.h),i+=" Z",n.setAttribute("d",i),n.setAttribute("fill",t),r.appendChild(n)},this.upperRightCorner=function(e,t){var n=document.createElementNS(a,"path"),i="";i+="M "+e.x+" "+e.y,i+=" ",i+="L "+(e.x+e.w)+" "+e.y,i+=" ",i+="L "+(e.x+e.w)+" "+(e.y+e.h),i+=" Z",n.setAttribute("d",i),n.setAttribute("fill",t),r.appendChild(n)},this.rect=function(e,t){var n=document.createElementNS(a,"rect");n.setAttribute("x",e.x+.5),n.setAttribute("y",e.y+.5),n.setAttribute("width",e.w-1),n.setAttribute("height",e.h-1),n.setAttribute("stroke",t),n.setAttribute("stroke-width","1"),n.setAttribute("fill","transparent"),r.appendChild(n)},this.text=function(e,t,n,i,o,l,d){function c(e,t,o){var s=document.createElementNS(a,"text");s.setAttribute("fill",i),s.setAttribute("font-family",n.family),s.setAttribute("font-size",n.size),s.setAttribute("font-style",u),s.setAttribute("font-weight",h),s.setAttribute("x",t),s.setAttribute("y",o),s.setAttribute("dy","0.8em"),s.setAttribute("text-anchor",p),s.setAttribute("clip-path","url(#"+m.id+")");var l=document.createTextNode(e);s.appendChild(l),r.appendChild(s)}if(t){if("number"==typeof t&&(t=""+t),"string"!=typeof t)throw"String expected, supplied: "+typeof t;o=o||"left",l=l||0,d=d||"top";var u=n.style;u.indexOf("italic")!==-1&&(u="bold");var h=n.style;if(n.style)var f=3;var v=e.x,p="start";switch(o){case"center":v+=e.w/2,p="middle";break;case"right":v+=e.w,p="end"}var m=document.createElementNS(a,"clipPath");m.id="clip"+DayPilot.guid();var g=document.createElementNS(a,"rect");g.setAttribute("x",e.x),g.setAttribute("y",e.y),g.setAttribute("width",e.w),g.setAttribute("height",e.h),m.appendChild(g),s.defs.appendChild(m);var b=DayPilot.Util.fontHeight(n),y=1.2*b,w=t.split("\n"),x=y-b,k=y*w.length-x,C=e.h-2*l,S=e.y+l;switch(d){case"top":S+=f;break;case"center":S+=(C-k)/2+.1*b;break;case"bottom":S+=C-k}for(var E=0;E<w.length;E++){c(w[E],v+l,S),S+=y}}},this.line=function(e,t,n,i,o){var s=document.createElementNS(a,"line");s.setAttribute("x1",e+.5),s.setAttribute("y1",t+.5),s.setAttribute("x2",n+.5),s.setAttribute("y2",i+.5),s.setAttribute("stroke",o),r.appendChild(s)},this.image=function(e,t){function n(t){var n=document.createElementNS(a,"image");n.setAttribute("href",t.dataUri),n.setAttribute("x",e.x),n.setAttribute("y",e.y),n.setAttribute("width",e.w),n.setAttribute("height",e.h),o.appendChild(n)}var o=document.createElementNS(a,"g");r.appendChild(o),i(t,n)},this.symbol=function(e,t,n){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"symbol"),s=this;n=n||{};var l=n.color;new o(t).j().then(function(t){if(l){var n=document.createElementNS(i,"style");n.innerHTML="svg { color: "+l+"; }",a.appendChild(n)}var o=DayPilot.guid();a.setAttribute("viewBox",t.getAttribute("viewBox")),a.setAttribute("width",e.w),a.setAttribute("height",e.h),a.setAttribute("id",o);var d=document.createElementNS(i,"g");d.innerHTML=t.innerHTML,a.appendChild(d),s.k.appendChild(a);var c=document.createElementNS(i,"use");c.setAttribute("href","#"+o),c.setAttribute("x",e.x),c.setAttribute("y",e.y),r.appendChild(c)})},this.l={},this.textWidth=function(e,t){var n="#"+e+"#"+JSON.stringify(t),i=this.l[n];if("number"==typeof i)return i;var a="http://www.w3.org/2000/svg",r=document.createElementNS(a,"svg");r.style.position="absolute",r.style.left="-10000px",r.style.width="100px",r.outerHTML&&r.setAttribute("xmlns",a),r.setAttribute("viewBox","0 0 100 100");var o=document.createElementNS(a,"text");o.setAttribute("font-family",t.family),o.setAttribute("font-size",t.size),o.setAttribute("font-style",t.style),o.setAttribute("x",0),o.setAttribute("y",0),o.setAttribute("dy","1em");var s=document.createTextNode(e);o.appendChild(s),r.appendChild(o),document.body.appendChild(r);var l=o.getComputedTextLength();return this.l[n]=l,document.body.removeChild(r),l},this.getWidth=function(){return e},this.getHeight=function(){return t},this.getElement=function(){return this.k},this.getSource=function(){if(this.k.outerHTML)return this.k.outerHTML;var e=document.createElement("div"),t=this.k.cloneNode(!0);return e.appendChild(t),e.innerHTML},this.getDataUri=function(){return"data:application/octet-stream,"+encodeURIComponent(this.getSource())},this.getDefaultFileName=function(){return this.defaultFileName},this.getBlob=function(){return new Blob([this.getSource()])}},DayPilot.Excel=function(){var e=this,t=null,n=null,i=null,a={};a.xmlns="urn:schemas-microsoft-com:office:spreadsheet",a.o="urn:schemas-microsoft-com:office:office",a.x="urn:schemas-microsoft-com:office:excel",a.ss="urn:schemas-microsoft-com:office:spreadsheet",a.html="http://www.w3.org/TR/REC-html40",this.init=function(){t=document.implementation.createDocument(a.xmlns,"Workbook",null),t.documentElement.setAttribute("xmlns:o",a.o),t.documentElement.setAttribute("xmlns:x",a.x),t.documentElement.setAttribute("xmlns:ss",a.ss),t.documentElement.setAttribute("xmlns:html",a.html);var r=t.createElement("x:ExcelWorkbook");t.documentElement.appendChild(r),n=t.createElement("ss:Styles"),t.documentElement.appendChild(n),i=e.styles.create(),i.setId("Default"),i.setName("Normal")},this.worksheets=[],this.worksheets.create=function(t){var n=e.el(a.ss,"Worksheet"),i=new r(n);return i.setName(t),this.push(i),i},this.styles=[],this.styles.create=function(e){var i=t.createElement("ss:Style");n.appendChild(i);var a=new o(i);return this.push(a),a},this.styles.getDefault=function(){return i},this.el=function(e,n){var i=t.createElementNS(e,n);return t.documentElement.appendChild(i),i},this.getSource=function(){return'<?xml version="1.0"?>'+(new XMLSerializer).serializeToString(t)},this.getDataUri=function(){return"data:application/vnd.ms-excel,"+encodeURIComponent(this.getSource())},this.getElement=function(){return t},this.getDefaultFileName=function(){return"spreadsheet.xls"},this.getBlob=function(){return new Blob([this.getSource()])};var r=function(e){var n=t.createElement("Table");e.appendChild(n);var i=t.createElement("x:WorksheetOptions");e.appendChild(i),this.rows=[],this.setName=function(t){e.setAttribute("ss:Name",t)},this.cell=function(e,i){for(;i>=this.rows.length;){var r=t.createElement("Row");n.appendChild(r),this.rows.push(new a(r))}return this.rows[i].cell(e)},this.enableGridlines=function(e){var n=DayPilot.list(i.childNodes).find(function(e){return"x:DoNotDisplayGridlines"===e.tagName});if(!n&&!e){var a=t.createElement("x:DoNotDisplayGridlines");i.appendChild(a)}n&&e&&i.removeChild(n)};var a=function(e){this.cells=[],this.getElement=function(){return e},this.cell=function(i){for(;i>=this.cells.length;){var a=t.createElement("Cell");e.appendChild(a),this.cells.push(new n(a))}return this.cells[i]};var n=function(e){this.setText=function(n){var i=t.createElement("Data");i.setAttribute("ss:Type","String");var a=t.createTextNode(n);for(i.appendChild(a);e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(i),this},this.setColspan=function(t){return t>1?e.setAttribute("ss:MergeAcross",t-1):e.removeAttribute("ss:MergeAcross"),this},this.setRowspan=function(t){return t>1?e.setAttribute("ss:MergeDown",t-1):e.removeAttribute("ss:MergeDown"),this},this.setStyle=function(t){if(!(t instanceof o))throw"Invalid argument, Style expected";return e.setAttribute("ss:StyleID",t.getId()),this}}}},o=function(e){var n=DayPilot.guid();e.setAttribute("ss:ID",n);var i=t.createElement("ss:Alignment");e.appendChild(i);var a=t.createElement("ss:Interior");e.appendChild(a);var r=t.createElement("ss:Borders");e.appendChild(r),this.setHorizontalAlignment=function(e){i.setAttribute("ss:Horizontal",e)},this.setVerticalAlignment=function(e){i.setAttribute("ss:Vertical",e)},this.setBackColor=function(e){var t=DayPilot.Util.normalizeColor(e);a.setAttribute("ss:Color",t),a.setAttribute("ss:Pattern","Solid")},this.setBorderColor=function(e){function n(e,n){var i=t.createElement("ss:Border");return i.setAttribute("ss:Position",e),i.setAttribute("ss:LineStyle","Continuous"),i.setAttribute("ss:Color",DayPilot.Util.normalizeColor(n)),i}this.clearBorders();var i=n("Left",e);r.appendChild(i);var a=n("Right",e);r.appendChild(a);var o=n("Top",e);r.appendChild(o);var s=n("Bottom",e);r.appendChild(s)},this.clearBorders=function(){for(;r.firstChild;)r.removeChild(r.firstChild)},this.getId=function(){return n},this.setId=function(t){n=t,e.setAttribute("ss:ID",n)},this.setName=function(t){e.setAttribute("ss:Name",t)}};this.init()},DayPilot.Export=function(e){this.toElement=function(){return e.getElement()},this.dimensions=function(){return{"width":e.getWidth(),"height":e.getHeight()}},this.toHtml=function(){return e.getSource()},this.toDataUri=function(){return e.getDataUri()},this.toBlob=function(){return e.getBlob()},this.print=function(t){t=t||{},t.orientation=t.orientation||"portrait";var n=document.createElement("iframe");n.setAttribute("width",0),n.setAttribute("height",0),n.setAttribute("frameborder",0),n.setAttribute("src","about:blank"),n.onload=function(){var i=n.contentWindow.document;if(i.body.appendChild(e.getElement()),"landscape"===t.orientation){var a=DayPilot.sheet(i);a.add("@page","size: landscape;"),a.commit()}n.contentWindow.document.execCommand("print",!1,null)||(n.contentWindow.focus(),n.contentWindow.print()),setTimeout(function(){document.body.removeChild(n)},10)},document.body.appendChild(n)},this.download=function(t){var t=t||e.getDefaultFileName(),n=e.getBlob();DayPilot.Util.downloadBlob(n,t)}},DayPilot.Exception=function(e){return new Error(e)},DayPilot.Locale=function(e,t){if(this.id=e,this.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.dayNamesShort=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.monthNamesShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.datePattern="M/d/yyyy",this.timePattern="H:mm",this.dateTimePattern="M/d/yyyy H:mm",this.timeFormat="Clock12Hours",this.weekStarts=0,t)for(var n in t)this[n]=t[n]},DayPilot.Locale.all={},DayPilot.Locale.find=function(e){if(!e)return null;var t=e.toLowerCase();return t.length>2&&(t=DayPilot.Util.replaceCharAt(t,2,"-")),DayPilot.Locale.all[t]},DayPilot.Locale.register=function(e){DayPilot.Locale.all[e.id]=e},DayPilot.Locale.register(new DayPilot.Locale("ca-es",{"dayNames":["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],"dayNamesShort":["dg","dl","dt","dc","dj","dv","ds"],"monthNames":["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre",""],"monthNamesShort":["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des.",""],"timePattern":"H:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("cs-cz",{"dayNames":["nedle","pondl","ter","steda","tvrtek","ptek","sobota"],"dayNamesShort":["ne","po","t","st","t","p","so"],"monthNames":["leden","nor","bezen","duben","kvten","erven","ervenec","srpen","z","jen","listopad","prosinec",""],"monthNamesShort":["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII",""],"timePattern":"H:mm","datePattern":"d. M. yyyy","dateTimePattern":"d. M. yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("da-dk",{"dayNames":["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],"dayNamesShort":["s","ma","ti","on","to","fr","l"],"monthNames":["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december",""],"monthNamesShort":["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""],"timePattern":"HH:mm","datePattern":"dd-MM-yyyy","dateTimePattern":"dd-MM-yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("de-at",{"dayNames":["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"dayNamesShort":["So","Mo","Di","Mi","Do","Fr","Sa"],"monthNames":["Jnner","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],"monthNamesShort":["Jn","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("de-ch",{"dayNames":["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"dayNamesShort":["So","Mo","Di","Mi","Do","Fr","Sa"],"monthNames":["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],"monthNamesShort":["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("de-de",{"dayNames":["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"dayNamesShort":["So","Mo","Di","Mi","Do","Fr","Sa"],"monthNames":["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],"monthNamesShort":["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("de-lu",{"dayNames":["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],"dayNamesShort":["So","Mo","Di","Mi","Do","Fr","Sa"],"monthNames":["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],"monthNamesShort":["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("en-au",{"dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Su","Mo","Tu","We","Th","Fr","Sa"],"monthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"monthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"timePattern":"h:mm tt","datePattern":"d/MM/yyyy","dateTimePattern":"d/MM/yyyy h:mm tt","timeFormat":"Clock12Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("en-ca",{"dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Su","Mo","Tu","We","Th","Fr","Sa"],"monthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"monthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"timePattern":"h:mm tt","datePattern":"yyyy-MM-dd","dateTimePattern":"yyyy-MM-dd h:mm tt","timeFormat":"Clock12Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("en-gb",{"dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Su","Mo","Tu","We","Th","Fr","Sa"],"monthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"monthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"timePattern":"HH:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("en-us",{"dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Su","Mo","Tu","We","Th","Fr","Sa"],"monthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"monthNamesShort":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"timePattern":"h:mm tt","datePattern":"M/d/yyyy","dateTimePattern":"M/d/yyyy h:mm tt","timeFormat":"Clock12Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("es-es",{"dayNames":["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],"dayNamesShort":["D","L","M","X","J","V","S"],"monthNames":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],"monthNamesShort":["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic.",""],"timePattern":"H:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("es-mx",{"dayNames":["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],"dayNamesShort":["do.","lu.","ma.","mi.","ju.","vi.","s."],"monthNames":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],"monthNamesShort":["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic.",""],"timePattern":"hh:mm tt","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy hh:mm tt","timeFormat":"Clock12Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("eu-es",{"dayNames":["igandea","astelehena","asteartea","asteazkena","osteguna","ostirala","larunbata"],"dayNamesShort":["ig","al","as","az","og","or","lr"],"monthNames":["urtarrila","otsaila","martxoa","apirila","maiatza","ekaina","uztaila","abuztua","iraila","urria","azaroa","abendua",""],"monthNamesShort":["urt.","ots.","mar.","api.","mai.","eka.","uzt.","abu.","ira.","urr.","aza.","abe.",""],"timePattern":"H:mm","datePattern":"yyyy/MM/dd","dateTimePattern":"yyyy/MM/dd H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("fi-fi",{"dayNames":["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],"dayNamesShort":["su","ma","ti","ke","to","pe","la"],"monthNames":["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu",""],"monthNamesShort":["tammi","helmi","maalis","huhti","touko","kes","hein","elo","syys","loka","marras","joulu",""],"timePattern":"H:mm","datePattern":"d.M.yyyy","dateTimePattern":"d.M.yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("fr-be",{"dayNames":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"dayNamesShort":["di","lu","ma","me","je","ve","sa"],"monthNames":["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],"monthNamesShort":["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""],"timePattern":"HH:mm","datePattern":"dd-MM-yy","dateTimePattern":"dd-MM-yy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("fr-ca",{"dayNames":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"dayNamesShort":["di","lu","ma","me","je","ve","sa"],"monthNames":["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],"monthNamesShort":["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""],"timePattern":"HH:mm","datePattern":"yyyy-MM-dd","dateTimePattern":"yyyy-MM-dd HH:mm","timeFormat":"Clock24Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("fr-ch",{"dayNames":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"dayNamesShort":["di","lu","ma","me","je","ve","sa"],"monthNames":["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],"monthNamesShort":["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("fr-fr",{"dayNames":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"dayNamesShort":["di","lu","ma","me","je","ve","sa"],"monthNames":["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],"monthNamesShort":["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""],
"timePattern":"HH:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("fr-lu",{"dayNames":["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],"dayNamesShort":["di","lu","ma","me","je","ve","sa"],"monthNames":["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],"monthNamesShort":["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""],"timePattern":"HH:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("gl-es",{"dayNames":["domingo","luns","martes","mrcores","xoves","venres","sbado"],"dayNamesShort":["do","lu","ma","m","xo","ve","s"],"monthNames":["xaneiro","febreiro","marzo","abril","maio","xuo","xullo","agosto","setembro","outubro","novembro","decembro",""],"monthNamesShort":["xan","feb","mar","abr","maio","xuo","xul","ago","set","out","nov","dec",""],"timePattern":"H:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("it-it",{"dayNames":["domenica","luned","marted","mercoled","gioved","venerd","sabato"],"dayNamesShort":["do","lu","ma","me","gi","ve","sa"],"monthNames":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],"monthNamesShort":["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""],"timePattern":"HH:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("it-ch",{"dayNames":["domenica","luned","marted","mercoled","gioved","venerd","sabato"],"dayNamesShort":["do","lu","ma","me","gi","ve","sa"],"monthNames":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],"monthNamesShort":["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("ja-jp",{"dayNames":["","","","","","",""],"dayNamesShort":["","","","","","",""],"monthNames":["1","2","3","4","5","6","7","8","9","10","11","12",""],"monthNamesShort":["1","2","3","4","5","6","7","8","9","10","11","12",""],"timePattern":"H:mm","datePattern":"yyyy/MM/dd","dateTimePattern":"yyyy/MM/dd H:mm","timeFormat":"Clock24Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("ko-kr",{"dayNames":["","","","","","",""],"dayNamesShort":["","","","","","",""],"monthNames":["1","2","3","4","5","6","7","8","9","10","11","12",""],"monthNamesShort":["1","2","3","4","5","6","7","8","9","10","11","12",""],"timePattern":"tt h:mm","datePattern":"yyyy-MM-dd","dateTimePattern":"yyyy-MM-dd tt h:mm","timeFormat":"Clock12Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("nb-no",{"dayNames":["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],"dayNamesShort":["s","ma","ti","on","to","fr","l"],"monthNames":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],"monthNamesShort":["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("nl-nl",{"dayNames":["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],"dayNamesShort":["zo","ma","di","wo","do","vr","za"],"monthNames":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],"monthNamesShort":["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""],"timePattern":"HH:mm","datePattern":"d-M-yyyy","dateTimePattern":"d-M-yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("nl-be",{"dayNames":["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],"dayNamesShort":["zo","ma","di","wo","do","vr","za"],"monthNames":["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],"monthNamesShort":["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""],"timePattern":"H:mm","datePattern":"d/MM/yyyy","dateTimePattern":"d/MM/yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("nn-no",{"dayNames":["sndag","mndag","tysdag","onsdag","torsdag","fredag","laurdag"],"dayNamesShort":["s","m","ty","on","to","fr","la"],"monthNames":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],"monthNamesShort":["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""],"timePattern":"HH:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("pt-br",{"dayNames":["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"],"dayNamesShort":["D","S","T","Q","Q","S","S"],"monthNames":["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],"monthNamesShort":["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""],"timePattern":"HH:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("pl-pl",{"dayNames":["niedziela","poniedziaek","wtorek","roda","czwartek","pitek","sobota"],"dayNamesShort":["N","Pn","Wt","r","Cz","Pt","So"],"monthNames":["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie",""],"monthNamesShort":["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa","lis","gru",""],"timePattern":"HH:mm","datePattern":"yyyy-MM-dd","dateTimePattern":"yyyy-MM-dd HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("pt-pt",{"dayNames":["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"],"dayNamesShort":["D","S","T","Q","Q","S","S"],"monthNames":["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],"monthNamesShort":["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""],"timePattern":"HH:mm","datePattern":"dd/MM/yyyy","dateTimePattern":"dd/MM/yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":0})),DayPilot.Locale.register(new DayPilot.Locale("ro-ro",{"dayNames":["duminic","luni","mari","miercuri","joi","vineri","smbt"],"dayNamesShort":["D","L","Ma","Mi","J","V","S"],"monthNames":["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie",""],"monthNamesShort":["ian.","feb.","mar.","apr.","mai.","iun.","iul.","aug.","sep.","oct.","nov.","dec.",""],"timePattern":"H:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("ru-ru",{"dayNames":["","","","","","",""],"dayNamesShort":["","","","","","",""],"monthNames":["","","","","","","","","","","","",""],"monthNamesShort":["","","","","","","","","","","","",""],"timePattern":"H:mm","datePattern":"dd.MM.yyyy","dateTimePattern":"dd.MM.yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("sk-sk",{"dayNames":["nedea","pondelok","utorok","streda","tvrtok","piatok","sobota"],"dayNamesShort":["ne","po","ut","st","t","pi","so"],"monthNames":["janur","februr","marec","aprl","mj","jn","jl","august","september","oktber","november","december",""],"monthNamesShort":["1","2","3","4","5","6","7","8","9","10","11","12",""],"timePattern":"H:mm","datePattern":"d.M.yyyy","dateTimePattern":"d.M.yyyy H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("sv-se",{"dayNames":["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"],"dayNamesShort":["s","m","ti","on","to","fr","l"],"monthNames":["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december",""],"monthNamesShort":["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""],"timePattern":"HH:mm","datePattern":"yyyy-MM-dd","dateTimePattern":"yyyy-MM-dd HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("tr-tr",{"dayNames":["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],"dayNamesShort":["Pz","Pt","Sa","a","Pe","Cu","Ct"],"monthNames":["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk",""],"monthNamesShort":["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara",""],"timePattern":"HH:mm","datePattern":"d.M.yyyy","dateTimePattern":"d.M.yyyy HH:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.register(new DayPilot.Locale("zh-cn",{"dayNames":["","","","","","",""],"dayNamesShort":["","","","","","",""],"monthNames":["","","","","","","","","","","","",""],"monthNamesShort":["1","2","3","4","5","6","7","8","9","10","11","12",""],"timePattern":"H:mm","datePattern":"yyyy/M/d","dateTimePattern":"yyyy/M/d H:mm","timeFormat":"Clock24Hours","weekStarts":1})),DayPilot.Locale.US=DayPilot.Locale.find("en-us"),DayPilot.Switcher=function(e){function t(e,t,i){var a={};a.start=e,a.end=t,a.day=i,a.target=n.active.control,a.preventDefault=function(){this.preventDefault.value=!0};var r=n.s;r&&r.start===a.start&&r.end===a.end&&r.day===a.day&&r.target===a.target||(n.s=a,"function"==typeof n.onChange&&(n.onChange(a),a.preventDefault.value)||"function"==typeof n.onTimeRangeSelect&&(n.onTimeRangeSelect(a),a.preventDefault.value)||(n.active.sendNavigate(n.day),"function"==typeof n.onChanged&&n.onChanged(a),"function"==typeof n.onTimeRangeSelected&&n.onTimeRangeSelected(a)))}var n=this;this.views=[],this.triggers=[],this.navigator={},this.selectedClass=null,this.active=null,this.day=DayPilot.Date.today(),this.onChange=null,this.onChanged=null,this.navigator.updateMode=function(e){var t=n.navigator.control;t&&(t.selectMode=e,t.select(n.day))},this.addView=function(e,t){var i;if("string"==typeof e){if(i=document.getElementById(e),!i)throw"Element not found: "+e}else i=e;var a=i,r={};return r.isView=!0,r.id=a.id,r.control=a,r.options=t||{},r.hide=function(){a.hide?a.hide():a.nav&&a.nav.top?a.nav.top.style.display="none":a.style.display="none"},r.sendNavigate=function(e){(function(){return!!a.backendUrl||!("function"!=typeof WebForm_DoCallback||!a.uniqueID)})()?a.commandCallBack&&a.commandCallBack("navigate",{"day":e}):(a.startDate=e,a.update())},r.show=function(){n.m(),a.show?a.show():a.nav&&a.nav.top?a.nav.top.style.display="":a.style.display=""},r.selectMode=function(){if(r.options.navigatorSelectMode)return r.options.navigatorSelectMode;if(a.isCalendar)switch(a.viewType){case"Day":return"day";case"Week":return"week";case"WorkWeek":return"week";default:return"day"}else if(a.isMonth)switch(a.viewType){case"Month":return"month";case"Weeks":return"week";default:return"day"}return"day"},this.views.push(r),r},this.addTrigger=function(e,t){var i;if("string"==typeof e){if(i=document.getElementById(e),!i)throw"Element not found: "+e}else i=e;var a=this.n(t);a||(a=this.addView(t));var r={};return r.isTrigger=!0,r.element=i,r.id=i.id,r.view=a,r.onClick=function(e){n.show(r),n.p(r),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},DayPilot.re(i,"click",r.onClick),this.triggers.push(r),r},this.addButton=this.addTrigger,this.select=function(e){var t=this.q(e);t?t.onClick():this.triggers.length>0&&this.triggers[0].onClick()},this.q=function(e){for(var t=0;t<this.triggers.length;t++){var n=this.triggers[t];if(n.id===e)return n}return null},this.p=function(e){if(this.selectedClass){for(var t=0;t<this.triggers.length;t++){var n=this.triggers[t];DayPilot.Util.removeClass(n.element,this.selectedClass)}DayPilot.Util.addClass(e.element,this.selectedClass)}},this.addNavigator=function(e){n.navigator.control=e,e.timeRangeSelectedHandling="JavaScript",e.onTimeRangeSelected=function(){var i,a,r;if(1===e.api)i=arguments[0],a=arguments[1],r=arguments[2];else{var o=arguments[0];i=o.start,a=o.end,r=o.day}n.day=r,t(i,a,r)}},this.show=function(e){var i,a;if(e.isTrigger)a=e,i=a.view;else if(i=e.isView?e:this.n(e),this.active===i)return;if(n.onSelect){var r={};r.source=a?a.element:null,r.target=i.control,n.onSelect(r)}this.active=i,i.show();var o=i.selectMode();n.navigator.updateMode(o),t(n.navigator.control.selectionStart,n.navigator.control.selectionEnd.addDays(1),n.navigator.control.selectionDay)},this.n=function(e){for(var t=0;t<this.views.length;t++)if(this.views[t].control===e)return this.views[t];return null},this.m=function(){for(var e=0;e<this.views.length;e++)this.views[e].hide()},this.events={},this.events.load=function(e,t,i){if(!n.active||!n.active.control)throw"DayPilot.Switcher.events.load(): Active view not found";n.active.control.events.load(e,t,i)},this.s=null,this.t=function(){if(e)for(var t in e)"triggers"===t?DayPilot.list(e.triggers).each(function(e){n.addTrigger(e.id,e.view)}):"navigator"===t?n.addNavigator(e.navigator):n[t]=e[t]},this.t()},function(){if(!DayPilot.Global.defaultCss){var e=DayPilot.sheet();e.add(".bubble_default_main","cursor: default;"),e.add(".bubble_default_main_inner",'border-radius: 5px;font-size: 12px;padding: 4px;color: #666;background: #eeeeee; background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");border: 1px solid #ccc;-moz-border-radius: 5px;-webkit-border-radius: 5px;border-radius: 5px;-moz-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);-webkit-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);'),e.add(".calendar_default_main","border: 1px solid #c0c0c0; font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 12px;"),e.add(".calendar_default_main *, .calendar_default_main *:before, .calendar_default_main *:after","box-sizing: content-box;"),e.add(".calendar_default_rowheader_inner,.calendar_default_cornerright_inner,.calendar_default_corner_inner,.calendar_default_colheader_inner,.calendar_default_alldayheader_inner","color: #333;background: #f3f3f3;"),e.add(".calendar_default_cornerright_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;\tborder-bottom: 1px solid #c0c0c0;"),e.add(".calendar_default_direction_rtl .calendar_default_cornerright_inner","border-right: 1px solid #c0c0c0;"),e.add(".calendar_default_rowheader_inner","font-size: 16pt;text-align: right; position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; padding: 3px;"),e.add(".calendar_default_direction_rtl .calendar_default_rowheader_inner","border-right: none;"),e.add(".calendar_default_corner_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"),e.add(".calendar_default_direction_rtl .calendar_default_corner_inner","border-right: none;"),e.add(".calendar_default_rowheader_minutes","font-size:10px;vertical-align: super;padding-left: 2px;padding-right: 2px;"),e.add(".calendar_default_colheader_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0; display: flex; align-items: center; justify-content: center;"),e.add(".calendar_default_cell_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #ddd;border-bottom: 1px solid #ddd; background: #f9f9f9;"),e.add(".calendar_default_cell_business .calendar_default_cell_inner","background: #fff"),e.add(".calendar_default_alldayheader_inner","text-align: center;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;"),e.add(".calendar_default_message","opacity: 0.9; padding: 10px; color: #ffffff;background: #ffa216;"),e.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner","color: #666; border: 1px solid #999;"),e.add(".calendar_default_event_bar","top: 0px;bottom: 0px;left: 0px;width: 4px;background-color: #9dc8e8;"),e.add(".calendar_default_event_bar_inner","position: absolute;width: 4px;background-color: #1066a8;"),e.add(".calendar_default_alldayevent_inner,.calendar_default_event_inner",'background: #fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".calendar_default_selected .calendar_default_event_inner","background: #ddd;"),e.add(".calendar_default_alldayevent_inner","position: absolute;top: 2px;bottom: 2px;left: 2px;right: 2px;overflow:hidden;padding: 2px;margin-right: 1px;font-size: 12px;"),e.add(".calendar_default_event_withheader .calendar_default_event_inner","padding-top: 15px;"),e.add(".calendar_default_event","cursor: default;"),e.add(".calendar_default_event_inner","position: absolute;overflow: hidden;top: 0px;bottom: 0px;left: 0px;right: 0px;padding: 2px 2px 2px 6px;font-size: 12px;"),e.add(".calendar_default_shadow_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;background-color: #666666; opacity: 0.5;"),e.add(".calendar_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".calendar_default_event_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".calendar_default_scroll_up","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAB3RJTUUH2wESDiYcrhwCiQAAAAlwSFlzAAAuIwAALiMBeKU/dgAAAARnQU1BAACxjwv8YQUAAACcSURBVHjaY2AgF9wWsTW6yGMlhi7OhC7AyMDQzMnBXIpFHAFuCtuaMTP+P8nA8P/b1x//FfW/HHuF1UQmxv+NUP1c3OxMVVhNvCVi683E8H8LXOY/w9+fTH81tF8fv4NiIpBRj+YoZtZ/LDUoJmKYhsVUpv0MDiyMDP96sIYV0FS2/8z9ICaLlOhvS4b/jC//MzC8xBG0vJeF7GQBlK0xdiUzCtsAAAAASUVORK5CYII=);"),e.add(".calendar_default_scroll_down","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAACqSURBVChTY7wpam3L9J+xmQEP+PGPKZZxP4MDi4zI78uMDIwa2NT+Z2DYovrmiC+TI8OBP/8ZmEqwGvif4e8vxr+FIDkmEKH25vBWBgbG0+iK/zEwLtF+ffwOXCGI8Y+BoRFFIdC030x/WmBiYBNhpgLdswNJ8RSYaSgmgk39z1gPUfj/29ef/9rwhQTDHRHbrbdEbLvRFcGthkkAra/9/uMvhkK8piNLAgCRpTnNn4AEmAAAAABJRU5ErkJggg==);"),e.add(".calendar_default_now","background-color: red;"),e.add(".calendar_default_now:before","content: ''; top: -5px; border-width: 5px; border-color: transparent transparent transparent red; border-style: solid; width: 0px; height:0px; position: absolute; -moz-transform: scale(.9999);"),e.add(".calendar_default_shadow_forbidden .calendar_default_shadow_inner","background-color: red;"),e.add(".calendar_default_shadow_top",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".calendar_default_shadow_bottom",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".calendar_default_crosshair_vertical, .calendar_default_crosshair_horizontal, .calendar_default_crosshair_left, .calendar_default_crosshair_top","background-color: gray; opacity: 0.2;"),e.add(".calendar_default_loading","background-color: orange; color: white; padding: 2px;"),e.add(".calendar_default_scroll","background-color: #f3f3f3;"),e.add(".menu_default_main","user-select:none; font-family: Tahoma, Arial, Helvetica, Sans-Serif;font-size: 12px;border: 1px solid #dddddd;background-color: white;padding: 0px;cursor: default;background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAABCAIAAABG0om7AAAAKXRFWHRDcmVhdGlvbiBUaW1lAHBvIDEwIDUgMjAxMCAyMjozMzo1OSArMDEwMGzy7+IAAAAHdElNRQfaBQoUJAesj4VUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAABGdBTUEAALGPC/xhBQAAABVJREFUeNpj/P//PwO1weMnT2RlZAAYuwX/4oA3BgAAAABJRU5ErkJggg==);background-repeat: repeat-y;xborder-radius: 5px;-moz-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);-webkit-box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);box-shadow:0px 2px 3px rgba(000,000,000,0.3),inset 0px 0px 2px rgba(255,255,255,0.8);"),e.add(".menu_default_main, .menu_default_main *, .menu_default_main *:before, .menu_default_main *:after","box-sizing: content-box;"),e.add(".menu_default_title","background-color: #f2f2f2;border-bottom: 1px solid gray;padding: 4px 4px 4px 37px;"),e.add(".menu_default_main a","padding: 2px 2px 2px 35px;color: black;text-decoration: none;cursor: default;"),e.add(".menu_default_main a img","margin-left: 6px;margin-top: 2px;"),e.add(".menu_default_item_text","display: block;height: 20px;line-height: 20px; overflow:hidden;padding-left: 2px;padding-right: 20px; white-space: nowrap;"),e.add(".menu_default_main a:hover","background-color: #f3f3f3;"),e.add(".menu_default_main div div","border-top: 1px solid #dddddd;margin-top: 2px;margin-bottom: 2px;margin-left: 28px;"),e.add(".menu_default_main a.menu_default_item_disabled","color: #ccc"),e.add(".menu_default_item_haschildren.menu_default_item_haschildren_active",'background: #eeeeee;background: -webkit-gradient(linear, left top, left bottom, from(#efefef), to(#e6e6e6));background: -webkit-linear-gradient(top, #efefef 0%, #e6e6e6);background: -moz-linear-gradient(top, #efefef 0%, #e6e6e6);background: -ms-linear-gradient(top, #efefef 0%, #e6e6e6);background: -o-linear-gradient(top, #efefef 0%, #e6e6e6);background: linear-gradient(top, #efefef 0%, #e6e6e6);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#efefef", endColorStr="#e6e6e6");'),e.add(".menu_default_item_haschildren a:before","content: ''; border-width: 6px; border-color: transparent transparent transparent black; border-style: solid; width: 0px; height:0px; position: absolute; right: 5px; margin-top: 4px;"),e.add(".menu_default_item_icon","position: absolute; top:0px; left: 0px; padding: 2px 2px 2px 8px;"),e.add(".menu_default_item a i","height: 20px;line-height: 20px;"),e.add(".menubar_default_main","border-bottom: 1px solid #ccc; font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 12px; user-select:none;"),e.add(".menubar_default_item","display: inline-block;  padding: 6px 10px; cursor: default;"),e.add(".menubar_default_item:hover","background-color: #f2f2f2;"),e.add(".menubar_default_item_active","background-color: #f2f2f2;"),e.add(".month_default_main","border: 1px solid #c0c0c0;font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 12px;color: #333;"),e.add(".month_default_main *, .month_default_main *:before, .month_default_main *:after","box-sizing: content-box;"),e.add(".month_default_cell_inner","border-right: 1px solid #ddd;border-bottom: 1px solid #ddd;position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;background-color: #f9f9f9;"),e.add(".month_default_cell_business .month_default_cell_inner","background-color: #fff;"),e.add(".month_default_cell_header","text-align: right; padding: 4px; box-sizing: border-box;"),e.add(".month_default_header_inner","position: absolute;top: 0px;left: 0px;bottom: 0px;right: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;cursor: default;color: #333;background: #f3f3f3; overflow:hidden; display: flex; align-items: center; justify-content: center;"),e.add(".month_default_message","padding: 10px;opacity: 0.9; color: #ffffff;background: #ffa216;"),e.add(".month_default_event_inner","position: absolute;top: 0px;bottom: 0px;left: 1px;right: 1px;overflow:hidden;padding: 2px;padding-left: 5px;font-size: 12px;color: #333;background: #fff;background: linear-gradient(to bottom, #ffffff 0%, #eeeeee);border: 1px solid #999;border-radius: 0px;display: flex; align-items: center;"),e.add(".month_default_event_continueright .month_default_event_inner","border-top-right-radius: 0px;border-bottom-right-radius: 0px;border-right-style: dotted;"),e.add(".month_default_event_continueleft .month_default_event_inner","border-top-left-radius: 0px;border-bottom-left-radius: 0px;border-left-style: dotted;"),e.add(".month_default_selected .month_default_event_inner","background: #ddd;"),e.add(".month_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),e.add(".month_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".month_default_event_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".month_default_event_timeleft","color: #ccc; font-size: 8pt"),e.add(".month_default_event_timeright","color: #ccc; font-size: 8pt; text-align: right;"),e.add(".month_default_loading","background-color: orange; color: white; padding: 2px;"),e.add(".navigator_default_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"),e.add(".navigator_default_main *, .navigator_default_main *:before, .navigator_default_main *:after","box-sizing: content-box;"),e.add(".navigator_default_month","font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 11px;"),e.add(".navigator_default_day","color: black;"),e.add(".navigator_default_weekend","background-color: #f0f0f0;"),e.add(".navigator_default_dayheader","color: black;"),e.add(".navigator_default_line","border-bottom: 1px solid #c0c0c0;"),e.add(".navigator_default_dayother","color: gray;"),e.add(".navigator_default_todaybox","border: 1px solid red;"),e.add(".navigator_default_title, .navigator_default_titleleft, .navigator_default_titleright","border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"),e.add(".navigator_default_busy","font-weight: bold;"),e.add(".navigator_default_cell","text-align: center;"),e.add(".navigator_default_select .navigator_default_cell_box","background-color: #FFE794; opacity: 0.5;"),e.add(".navigator_default_title","text-align: center;"),e.add(".navigator_default_titleleft, .navigator_default_titleright","text-align: center;"),e.add(".navigator_default_dayheader","text-align: center;"),e.add(".navigator_default_weeknumber","text-align: center;"),e.add(".navigator_default_cell_text","cursor: pointer;"),e.add(".scheduler_default_main *, .scheduler_default_main *:before, .scheduler_default_main *:after","box-sizing: content-box;"),e.add(".scheduler_default_main","box-sizing: content-box; border: 1px solid #c0c0c0;font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 12px;"),e.add(".scheduler_default_selected .scheduler_default_event_inner","background: #ddd;"),e.add(".scheduler_default_timeheader_scroll","background: #f3f3f3;"),e.add(".scheduler_default_message","opacity: 0.9; padding: 10px; color: #ffffff; background: #ffa216;"),e.add(".scheduler_default_timeheadergroup,.scheduler_default_timeheadercol","color: #333;background: #f3f3f3;"),e.add(".scheduler_default_rowheader,.scheduler_default_corner","color: #333;background: #f3f3f3;"),e.add(".scheduler_default_rowheader.scheduler_default_rowheader_selected","background-color: #aaa; background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent); background-size: 20px 20px;"),e.add(".scheduler_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e0e0e0;padding: 7px;display: flex; align-items: center;"),e.add(".scheduler_default_timeheadergroup_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".scheduler_default_timeheadercol_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".scheduler_default_timeheader_float","display: flex; align-items: center; justify-content: center;"),e.add(".scheduler_default_divider, .scheduler_default_splitter","background-color: #c0c0c0;"),e.add(".scheduler_default_divider_horizontal","background-color: #c0c0c0;"),e.add(".scheduler_default_matrix_vertical_line","background-color: #eee;"),e.add(".scheduler_default_matrix_vertical_break","background-color: #999;"),e.add(".scheduler_default_matrix_horizontal_line","background-color: #eee;"),e.add(".scheduler_default_resourcedivider","background-color: #c0c0c0;"),e.add(".scheduler_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),
e.add(".scheduler_default_event","font-size:12px;color:#333;"),e.add(".scheduler_default_event_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 2px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"),e.add(".scheduler_default_event_bar","top:0px;left:0px;right:0px;height:4px;background-color:#9dc8e8;"),e.add(".scheduler_default_event_bar_inner","position:absolute;height:4px;background-color:#1066a8;"),e.add(".scheduler_default_event_inner",'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".scheduler_default_event_float","display: flex; align-items: center;"),e.add(".scheduler_default_event_float_inner","padding:2px 2px 2px 8px; position: relative;"),e.add(".scheduler_default_event_float_inner:after",'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:4px;left:-4px;'),e.add(".scheduler_default_event_focus","outline: red 2px solid; z-index: 100; opacity: 0.5;"),e.add(".scheduler_default_columnheader_inner","font-weight: bold;"),e.add(".scheduler_default_columnheader_splitter","box-sizing: border-box; border-right: 1px solid #c0c0c0;"),e.add(".scheduler_default_columnheader_splitter:hover","background-color: #c0c0c0;"),e.add(".scheduler_default_columnheader_cell_inner","position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; padding: 2px; display: flex; align-items: center;"),e.add(".scheduler_default_cell","background-color: #f9f9f9;"),e.add(".scheduler_default_cell.scheduler_default_cell_business","background-color: #fff;"),e.add(".scheduler_default_cell.scheduler_default_cell_business.scheduler_default_cell_selected,.scheduler_default_cell.scheduler_default_cell_selected","background-color: #ccc; background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent); background-size: 20px 20px;"),e.add(".scheduler_default_tree_image_no_children",""),e.add(".scheduler_default_tree_image_expand","background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J00gMS41IDAuNSBMIDYuNSA1IEwgMS41IDkuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6Izk5OTk5OTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=);"),e.add(".scheduler_default_tree_image_collapse","background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMS41IEwgNSA2LjUgTCA5LjUgMS41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==);"),e.add(".scheduler_default_event_delete","background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTInIGhlaWdodD0nMTInIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgMTEuNSAxMS41IE0gMC41IDExLjUgTCAxMS41IDAuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6IzQ2NDY0NjtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=) no-repeat center center; opacity: 0.6; cursor: pointer;"),e.add(".scheduler_default_event_delete:hover","opacity: 1;"),e.add(".scheduler_default_rowmove_handle","background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".scheduler_default_rowmove_source","background-color: black; opacity: 0.2;"),e.add(".scheduler_default_rowmove_position_before, .scheduler_default_rowmove_position_after","background-color: #999; height: 2px;"),e.add(".scheduler_default_rowmove_position_child","margin-left: 10px; background-color: #999; height: 2px;"),e.add(".scheduler_default_rowmove_position_child:before","content: '+'; color: #999; position: absolute; top: -8px; left: -10px;"),e.add(".scheduler_default_rowmove_position_forbidden","background-color: red; height: 2px; margin-left: 10px;"),e.add(".scheduler_default_rowmove_position_forbidden:before","content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"),e.add(".scheduler_default_link_horizontal","border-bottom-style: solid; border-bottom-color: #cc0000"),e.add(".scheduler_default_link_vertical","border-right-style: solid; border-right-color: #cc0000"),e.add(".scheduler_default_link_arrow_right:before","content: ''; border-width: 6px; border-color: transparent transparent transparent #cc0000; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_link_arrow_left:before","content: ''; border-width: 6px; border-color: transparent #cc0000 transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_link_arrow_down:before","content: ''; border-width: 6px; border-color: #cc0000 transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_link_arrow_up:before","content: ''; border-width: 6px; border-color: transparent transparent #cc0000 transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".scheduler_default_shadow_overlap .scheduler_default_shadow_inner","background-color: red;"),e.add(".scheduler_default_block","background-color: #808080; opacity: 0.5;"),e.add(".scheduler_default_main .scheduler_default_event_group","box-sizing: border-box; font-size:12px; color:#666; padding:2px; overflow:hidden; border:1px solid #ccc; background-color: #fff; display: flex; align-items: center; white-space: nowrap;"),e.add(".scheduler_default_main .scheduler_default_header_icon","box-sizing: border-box; border: 1px solid #c0c0c0; background-color: #f5f5f5; color: #000;"),e.add(".scheduler_default_header_icon:hover","background-color: #ccc;"),e.add(".scheduler_default_header_icon_hide:before","content: '\\00AB';"),e.add(".scheduler_default_header_icon_show:before","content: '\\00BB';"),e.add(".scheduler_default_row_new .scheduler_default_rowheader_inner","padding-left: 10px; color: #666; cursor: text; background-position: 0px 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"),e.add(".scheduler_default_row_new .scheduler_default_rowheader_inner:hover","background: white; color: white;"),e.add(".scheduler_default_rowheader textarea","padding: 3px;"),e.add(".scheduler_default_rowheader_scroll","cursor: default; background: #f3f3f3;"),e.add(".scheduler_default_shadow_forbidden .scheduler_default_shadow_inner","background-color: red;"),e.add(".scheduler_default_shadow_invalid .scheduler_default_shadow_inner","background-color: red;"),e.add(".scheduler_default_event_moving_source","opacity: 0.5;"),e.add(".scheduler_default_linkpoint","background-color: white; border: 1px solid gray; border-radius: 5px;"),e.add(".scheduler_default_linkpoint.scheduler_default_linkpoint_hover","background-color: black;"),e.add(".scheduler_default_event.scheduler_default_event_version .scheduler_default_event_inner","overflow:hidden; background-color: #cfdde8;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".scheduler_default_crosshair_vertical, .scheduler_default_crosshair_horizontal, .scheduler_default_crosshair_left, .scheduler_default_crosshair_top","background-color: gray; opacity: 0.2;"),e.add(".scheduler_default_link_dot","border-radius: 10px; background-color: #cc0000"),e.add(".scheduler_default_task_milestone .scheduler_default_event_inner","position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: #38761d; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"),e.add(".scheduler_default_event_left","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;"),e.add(".scheduler_default_event_right","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;"),e.add(".scheduler_default_main:focus","outline: none;"),e.add(".scheduler_default_cell_focus","outline: red 2px solid; outline-offset: -2px; z-index: 100; opacity: 0.5;"),e.add(".scheduler_default_cell_focus.scheduler_default_cell_focus_top","border-top: 4px solid red;"),e.add(".scheduler_default_cell_focus.scheduler_default_cell_focus_bottom","border-bottom: 4px solid red;"),e.add(".scheduler_default_selectionrectangle","background-color: #0000ff; border: 1px solid #000033; opacity: 0.4;"),e.add(".scheduler_default_link_shadow","border:1px solid black;"),e.add(".scheduler_default_link_shadow_circle","background-color:black;"),e.add(".scheduler_default_event_move_left","box-sizing: border-box; padding: 2px; border: 1px solid #ccc; background: #fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee); display: flex; align-items: center;"),e.add(".scheduler_default_event_move_right","box-sizing: border-box; padding: 2px; border: 1px solid #ccc; background: #fff; background: linear-gradient(to bottom, #ffffff 0%, #eeeeee); display: flex; align-items: center;"),e.add(".scheduler_default_link_hover","box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"),e.add(".scheduler_default_sorticon","opacity: 0.2;background-position: center center; background-repeat: no-repeat; cursor: pointer;"),e.add(".scheduler_default_sorticon.scheduler_default_sorticon_asc","background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBvbHlnb24gcG9pbnRzPSI1IDEuNSwgMTAgMTAsIDAgMTAiLz48L3N2Zz4=');"),e.add(".scheduler_default_sorticon.scheduler_default_sorticon_desc","background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBvbHlnb24gcG9pbnRzPSI1IDguNSwgMCAwLCAxMCAwIi8+PC9zdmc+');"),e.add(".scheduler_default_sorticon.scheduler_default_sorticon_active","opacity: 1;"),e.add(".scheduler_default_loading","background-color: orange; color: white; padding: 2px;"),e.add(".gantt_default_selected .gantt_default_event_inner","background: #ddd;"),e.add(".gantt_default_main","border: 1px solid #c0c0c0;font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 12px;"),e.add(".gantt_default_main *, .gantt_default_main *:before, .gantt_default_main *:after","box-sizing: content-box;"),e.add(".gantt_default_timeheader","cursor: default;color: #666;"),e.add(".gantt_default_message","opacity: 0.9;padding: 10px; color: #ffffff;background: #ffa216;"),e.add(".gantt_default_timeheadergroup,.gantt_default_timeheadercol","color: #333;background: #f3f3f3;"),e.add(".gantt_default_rowheader,.gantt_default_corner","color: #333;background: #f3f3f3;"),e.add(".gantt_default_rowheader.gantt_default_rowheader_selected","background-color: #aaa;background-image: -webkit-gradient(linear, 0 100%, 100% 0,color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".gantt_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #e0e0e0;padding: 7px;display: flex; align-items: center;"),e.add(".gantt_default_timeheadergroup_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".gantt_default_timeheadercol_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;display: flex; align-items: center; justify-content: center;"),e.add(".gantt_default_timeheader_float","display: flex; align-items: center; justify-content: center;"),e.add(".gantt_default_divider, .gantt_default_splitter","background-color: #c0c0c0;"),e.add(".gantt_default_divider_horizontal","background-color: #c0c0c0;"),e.add(".gantt_default_matrix_vertical_line","background-color: #eee;"),e.add(".gantt_default_matrix_vertical_break","background-color: #000;"),e.add(".gantt_default_matrix_horizontal_line","background-color: #eee;"),e.add(".gantt_default_resourcedivider","background-color: #c0c0c0;"),e.add(".gantt_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;");e.add(".gantt_default_event","font-size:12px;color:#666;");e.add(".gantt_default_event_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:2px 2px 2px 2px;overflow:hidden;border:1px solid #ccc; display: flex; align-items: center;"),e.add(".gantt_default_event_bar","top:0px;left:0px;right:0px;height:4px;background-color:#9dc8e8;"),e.add(".gantt_default_event_bar_inner","position:absolute;height:4px;background-color:#1066a8;"),e.add(".gantt_default_event_inner",'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".gantt_default_event_float_inner","padding:6px 2px 2px 8px;"),e.add(".gantt_default_event_float_inner:after",'content:"";border-color: transparent #666 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:8px;left:-4px;'),e.add(".gantt_default_columnheader_inner","font-weight: bold;"),e.add(".gantt_default_columnheader_splitter","background-color: #666;opacity: 0.5;"),e.add(".gantt_default_columnheader_cell_inner","position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; padding: 2px; display: flex; align-items: center;"),e.add(".gantt_default_cell","background-color: #f9f9f9;"),e.add(".gantt_default_cell.gantt_default_cell_business","background-color: #fff;"),e.add(".gantt_default_cell.gantt_default_cell_business.gantt_default_cell_selected,.gantt_default_cell.gantt_default_cell_selected","background-color: #ccc;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".gantt_default_tree_image_no_children",""),e.add(".gantt_default_tree_image_expand","background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnPjxwYXRoIGQ9J00gMS41IDAuNSBMIDYuNSA1IEwgMS41IDkuNScgc3R5bGU9J2ZpbGw6bm9uZTtzdHJva2U6Izk5OTk5OTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLWxpbmVjYXA6YnV0dCcgLz48L3N2Zz4=);"),e.add(".gantt_default_tree_image_collapse","background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMS41IEwgNSA2LjUgTCA5LjUgMS41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==);"),e.add(".gantt_default_event_move_left",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".gantt_default_event_move_right",'box-sizing: border-box; padding:2px;border:1px solid #ccc;background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".gantt_default_event_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".gantt_default_event_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".gantt_default_rowmove_handle","background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".gantt_default_rowmove_source","background-color: black; opacity: 0.2;"),e.add(".gantt_default_rowmove_position_before, .gantt_default_rowmove_position_after","background-color: #999; height: 2px;"),e.add(".gantt_default_rowmove_position_child","margin-left: 10px; background-color: #999; height: 2px;"),e.add(".gantt_default_rowmove_position_child:before","content: '+'; color: #999; position: absolute; top: -8px; left: -10px;"),e.add(".gantt_default_rowmove_position_forbidden","background-color: red; height: 2px; margin-left: 10px;"),e.add(".gantt_default_rowmove_position_forbidden:before","content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"),e.add(".gantt_default_task_group .gantt_default_event_inner","position:absolute;top:5px;left:0px;right:0px;bottom:6px;overflow:hidden; background: #0b5394; filter: none; border: 0px none;"),e.add(".gantt_default_task_group.gantt_default_event:before","content:''; border-color: transparent transparent transparent #0b5394; border-style: solid; border-width: 6px; position: absolute; bottom: 0px;"),e.add(".gantt_default_task_group.gantt_default_event:after","content:''; border-color: transparent #0b5394 transparent transparent; border-style: solid; border-width: 6px; position: absolute; bottom: 0px; right: 0px;"),e.add(".gantt_default_task_milestone .gantt_default_event_inner","position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: #38761d; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"),e.add(".gantt_default_browser_ie8 .gantt_default_task_milestone .gantt_default_event_inner","-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476);\""),e.add(".gantt_default_event_left","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;  display: flex; align-items: center;"),e.add(".gantt_default_event_right","white-space: nowrap; padding-top: 5px; color: #666; cursor: default;  display: flex; align-items: center;"),e.add(".gantt_default_link_horizontal","border-bottom-style: solid; border-bottom-color: #cc0000;"),e.add(".gantt_default_link_vertical","border-right-style: solid; border-right-color: #cc0000;"),e.add(".gantt_default_link_arrow_right:before","content: ''; border-width: 6px; border-color: transparent transparent transparent #cc0000; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_link_arrow_left:before","content: ''; border-width: 6px; border-color: transparent #cc0000 transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_link_arrow_down:before","content: ''; border-width: 6px; border-color: #cc0000 transparent transparent transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_link_arrow_up:before","content: ''; border-width: 6px; border-color: transparent transparent #cc0000 transparent; border-style: solid; width: 0px; height:0px; position: absolute;"),e.add(".gantt_default_shadow_overlap .gantt_default_shadow_inner","background-color: red;"),e.add(".gantt_default_block","background-color: gray; opacity: 0.5;"),e.add(".gantt_default_link_hover","box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"),e.add(".gantt_default_main .gantt_default_header_icon","box-sizing: border-box; border: 1px solid #aaa; background-color: #f5f5f5; color: #000;"),e.add(".gantt_default_header_icon:hover","background-color: #ccc;"),e.add(".gantt_default_header_icon_hide:before","content: '\\00AB';"),e.add(".gantt_default_header_icon_show:before","content: '\\00BB';"),e.add(".gantt_default_row_new .gantt_default_rowheader_inner","cursor: text; background-position: 0 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"),e.add(".gantt_default_row_new .gantt_default_rowheader_inner:hover","background: white;"),e.add(".gantt_default_rowheader textarea","padding: 5px;"),e.add(".gantt_default_rowheader_scroll","cursor: default;"),e.add(".gantt_default_shadow_forbidden .gantt_default_shadow_inner","background-color: red;"),e.add(".gantt_default_event_moving_source","opacity: 0.5;"),e.add(".gantt_default_event.gantt_default_event_version .gantt_default_event_inner","background-color: #cfdde8;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".gantt_default_task_group.gantt_default_event_continueleft.gantt_default_event:before","border:0;"),e.add(".gantt_default_task_group.gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner:before",'content:"";border-color: transparent #fff transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:2px;left:-4px;'),e.add(".gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner","padding-left: 8px;"),e.add(".gantt_default_event_continueleft.gantt_default_event .gantt_default_event_inner:before",'content:"";border-color: transparent #000 transparent transparent;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:7px;left:-4px;'),e.add(".gantt_default_task_group.gantt_default_event_continueright.gantt_default_event:after","border:0;"),e.add(".gantt_default_task_group.gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner:after",'content:"";border-color: transparent transparent transparent #fff;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:2px;right:-2px;'),e.add(".gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner","padding-right: 8px;"),e.add(".gantt_default_event_continueright.gantt_default_event .gantt_default_event_inner:after",'content:"";border-color: transparent transparent transparent #000;border-style:solid;border-width:5px;width:0;height:0;position:absolute;top:7px;right:-2px;'),e.add(".gantt_default_linkpoint","background-color: white; border: 1px solid gray; border-radius: 5px;"),e.add(".gantt_default_linkpoint.gantt_default_linkpoint_hover","background-color: black;"),e.add(".gantt_default_crosshair_vertical, .gantt_default_crosshair_horizontal, .gantt_default_crosshair_left, .gantt_default_crosshair_top","background-color: gray; opacity: 0.2; "),e.add(".gantt_default_selectionrectangle","background-color: #0000ff; border: 1px solid #000033; opacity: 0.4;"),e.add(".gantt_default_link_shadow","border:1px solid black;"),e.add(".gantt_default_link_shadow_circle","background-color:black;"),e.add(".gantt_default_link_hover","box-shadow: 0px 0px 2px 2px rgba(255, 0, 0, 0.3)"),e.add(".kanban_default_main *, .kanban_default_main *:before, .kanban_default_main *:after","box-sizing: content-box;"),e.add(".kanban_default_main","box-sizing: content-box; border: 1px solid #c0c0c0;font-family: Tahoma, Arial, Helvetica, sans-serif; font-size: 12px;"),e.add(".kanban_default_selected .kanban_default_event_inner","background: #ddd;"),e.add(".kanban_default_timeheader","cursor: default;color: #333;"),e.add(".kanban_default_message","opacity: 0.9;padding: 10px; color: #ffffff;background: #ffa216;"),e.add(".kanban_default_colheadercell","color: #333;background: #f3f3f3;"),e.add(".kanban_default_rowheader,.kanban_default_corner","color: #333;background: #f3f3f3;"),e.add(".kanban_default_rowheader.kanban_default_rowheader_selected","background-color: #aaa;background-image: -webkit-gradient(linear, 0 100%, 100% 0,color-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),
e.add(".kanban_default_rowheader_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #f3f3f3;padding: 2px;"),e.add(".kanban_default_colheadercell","text-align: center;"),e.add(".kanban_default_colheadercell_inner","position: absolute;left: 0px;right: 0px;top: 0px;bottom: 0px;border-right: 1px solid #c0c0c0;"),e.add(".kanban_default_divider, .kanban_default_splitter","background-color: #c0c0c0;"),e.add(".kanban_default_divider_horizontal","background-color: #c0c0c0;"),e.add(".kanban_default_matrix_vertical_line","background-color: #eee;"),e.add(".kanban_default_matrix_vertical_break","background-color: #000;"),e.add(".kanban_default_matrix_horizontal_line","background-color: #eee;"),e.add(".kanban_default_rowheaderdivider","background-color: #c0c0c0;"),e.add(".kanban_default_shadow_inner","background-color: #666666;opacity: 0.5;height: 100%;"),e.add(".kanban_default_card","font-size:12px;color:#333;"),e.add(".kanban_default_card_inner","position:absolute;top:0px;left:0px;right:0px;bottom:0px;padding:5px 2px 2px 2px;overflow:hidden;border:1px solid #ccc;"),e.add(".kanban_default_card_inner",'background:#fff;background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#eeeeee));background: -webkit-linear-gradient(top, #ffffff 0%, #eeeeee);background: -moz-linear-gradient(top, #ffffff 0%, #eeeeee);background: -ms-linear-gradient(top, #ffffff 0%, #eeeeee);background: -o-linear-gradient(top, #ffffff 0%, #eeeeee);background: linear-gradient(top, #ffffff 0%, #eeeeee);filter: progid:DXImageTransform.Microsoft.Gradient(startColorStr="#ffffff", endColorStr="#eeeeee");'),e.add(".kanban_default_cell","background-color: #fff;"),e.add(".kanban_default_cell.kanban_default_cell_selected","background-color: #ccc;background-image: -webkit-gradient(linear, 0 100%, 100% 0,\tcolor-stop(.25, rgba(255, 255, 255, .2)), color-stop(.25, transparent),\tcolor-stop(.5, transparent), color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.75, rgba(255, 255, 255, .2)), color-stop(.75, transparent), to(transparent));background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -moz-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -ms-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);-webkit-background-size: 20px 20px;-moz-background-size: 20px 20px;background-size: 20px 20px;"),e.add(".kanban_default_tree_image_no_children","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLzEyzsCJAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAADBJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOL31MeLxHwCeXUT0WkFMKAAAAABJRU5ErkJggg==);"),e.add(".kanban_default_tree_image_expand","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLyUoFBT0AAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAFJJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeRhgJGREc4GijMBtTNgA0BxFog+uA4IA2gmUJwFog/IgUhAGBB9KPYhA3T74Jog+hjx+A8A1KRQ+AN5vcwAAAAASUVORK5CYII=);"),e.add(".kanban_default_tree_image_collapse","background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAIAAABv85FHAAAAKXRFWHRDcmVhdGlvbiBUaW1lAHDhIDMwIEkgMjAwOSAwODo0NjozMSArMDEwMClDkt4AAAAHdElNRQfZAR4HLxB+p9DXAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABGdBTUEAALGPC/xhBQAAAENJREFUeNpjrK6s5uTl/P75OybJ0NLW8h8bAIozgeSxAaA4E1A7VjmgOAtEHyMjI7IE0EygOAtEH5CDqY9c+xjx+A8ANndK9WaZlP4AAAAASUVORK5CYII=);"),e.add(".kanban_default_card_delete","background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAI5JREFUKFNtkLERgCAMRbmzdK8s4gAUlhYOYEHJEJYOYOEwDmGBPxC4kOPfvePy84MGR0RJ2N1A8H3N6DATwSQ57m2ql8NBG+AEM7D+UW+wjdfUPgerYNgB5gOLRHqhcasg84C2QxPMtrUhSqQIhg7ypy9VM2EUZPI/4rQ7rGxqo9sadTegw+UdjeDLAKUfhbaQUVPIfJYAAAAASUVORK5CYII=) center center no-repeat; opacity: 0.6; cursor: pointer;"),e.add(".kanban_default_card_delete:hover","opacity: 1;-ms-filter: none;"),e.add(".kanban_default_rowmove_source","background-color: black; opacity: 0.2;"),e.add(".kanban_default_rowmove_position_before, .kanban_default_rowmove_position_after","background-color: #999; height: 2px;"),e.add(".kanban_default_rowmove_position_forbidden","background-color: red; height: 2px; margin-left: 10px;"),e.add(".kanban_default_rowmove_position_forbidden:before","content: 'x'; color: red; position: absolute; top: -8px; left: -10px;"),e.add(".kanban_default_block","background-color: gray; opacity: 0.5;"),e.add(".kanban_default_main .kanban_default_header_icon","box-sizing: border-box; border: 1px solid #aaa; background-color: #f5f5f5; color: #000;"),e.add(".kanban_default_header_icon:hover","background-color: #ccc;"),e.add(".kanban_default_header_icon_hide:before","content: '\\00AB';"),e.add(".kanban_default_header_icon_show:before","content: '\\00BB';"),e.add(".kanban_default_row_new .kanban_default_rowheader_inner","cursor: text; background-position: 0px 50%; background-repeat: no-repeat; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABUSURBVChTY0ACslAaK2CC0iCQDMSlECYmQFYIAl1AjFUxukIQwKoYm0IQwFCMSyEIaEJpMMClcD4Qp0CYEIBNIUzRPzAPCtAVYlWEDgyAGIdTGBgAbqEJYyjqa3oAAAAASUVORK5CYII=);"),e.add(".kanban_default_row_new .kanban_default_rowheader_inner:hover","background: white;"),e.add(".kanban_default_rowheader textarea","padding: 3px;"),e.add(".kanban_default_rowheader_scroll","cursor: default;"),e.add(".kanban_default_card_moving_source","opacity: 0.5;"),e.add(".kanban_default_card .kanban_default_card_inner","padding: 5px 5px 5px 10px;"),e.add(".kanban_default_cell","background-color: #fff;"),e.add(".kanban_default_rowmove_handle","opacity: 0.5; background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".kanban_default_card_header","font-size: 120%; font-weight: bold;"),e.add(".kanban_default_card_bar","background-color: #cc0000; cursor:move;"),e.add(".kanban_default_cell.kanban_default_collapsed","background-color: #eee;"),e.add(".kanban_default_swimlane_collapse","cursor:pointer; border: 1px solid #ccc; text-align:center;"),e.add(".kanban_default_swimlane_collapse:before","content: '^';"),e.add(".kanban_default_swimlane_expand","cursor:pointer; border: 1px solid #ccc; text-align:center;"),e.add(".kanban_default_swimlane_expand:before","content: '>';"),e.add(".kanban_default_columnmove_handle","opacity: 0.5; background-repeat: no-repeat; background-position: center center; background-color: #ccc; background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAKCAYAAACT+/8OAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAClJREFUGFdj+P//P4O9vX2Bg4NDP4gNFgBytgPxebgAMsYuQGMz/jMAAFsTZDPYJlDHAAAAAElFTkSuQmCC); cursor: move;"),e.add(".kanban_default_columnmove_position","background-color: #333;"),e.add(".kanban_default_crosshair_vertical, .kanban_default_crosshair_horizontal, .kanban_default_crosshair_left, .kanban_default_crosshair_top","background-color: gray; opacity: 0.2;"),e.commit(),DayPilot.Global.defaultCss=!0}}();var o=function(e){function t(){var t=new URL(e,location.href);return t.origin+t.pathname!==location.origin+location.pathname}var n=this;this.j=function(){return t()?fetch(e).then(function(e){return e.text()}).then(function(e){var t=document.createElement("div");return t.innerHTML=e,new Promise(function(e,i){e(t.querySelector(n.u()))})}):new Promise(function(e,t){e(document.querySelector(n.u()))})},this.u=function(){return new URL(e,location.href).hash}},s=function(e){var t=this;this.id=e,this.widths=[],this.titles=[],this.data=[],this.height=null,this.splitterWidth=3,this.css={},this.css.title=null,this.css.titleInner=null,this.css.splitter=null,this.enabled=!0,this.blocks=[],this.drag={},this.updated=function(){},this.updating=function(){};var n={};n.splitterWidth=function(){return t.enabled?t.splitterWidth:1},this.init=function(){var i;if(!e)throw"error: id not provided";if("string"==typeof e)i=document.getElementById(e);else{if(!e.appendChild)throw"error: invalid object provided";i=e}this.div=i,this.blocks=[];for(var a=0;a<this.widths.length;a++){var r=document.createElement("div");r.style.display="inline-block",null!==t.height?r.style.height=t.height+"px":r.style.height="100%",r.style.width=this.widths[a]-n.splitterWidth()+"px",r.style.overflow="hidden",r.style.position="relative",r.setAttribute("unselectable","on"),r.className=this.css.title,i.appendChild(r);var o=this.titles[a],s=null,l=[];"object"==typeof o&&(s=o.html,l=o.areas);var d=document.createElement("div");d.innerHTML=s,d.setAttribute("unselectable","on"),d.className=this.css.titleInner,r.appendChild(d),DayPilot.Areas.attach(r,t.data[a],{"areas":l});var c=document.createElement("div");c.style.display="inline-block",null!==t.height?c.style.height=t.height+"px":c.style.height="100%",c.style.width=n.splitterWidth()+"px",c.style.position="relative",c.appendChild(document.createElement("div")),t.enabled&&(c.style.cursor="col-resize"),c.setAttribute("unselectable","on"),c.className=this.css.splitter;var u={};u.index=a,u.width=this.widths[a],c.data=u,c.onmousedown=function(e){if(t.enabled){var n=DayPilot.page(e);n&&(t.drag.start=n,t.drag.data=this.data,t.div.style.cursor="col-resize",e.preventDefault?e.preventDefault():e.returnValue=!1)}},i.appendChild(c);var h={};h.section=r,h.handle=c,this.blocks.push(h)}this.registerGlobalHandlers()},this.updateWidths=function(){for(var e=0;e<this.blocks.length;e++){var t=this.blocks[e],n=this.widths[e];t.handle.data.width=n,this.z(e)}},this.z=function(e){var t=this.blocks[e],i=this.widths[e];t.section.style.width=i-n.splitterWidth()+"px"},this.totalWidth=function(){for(var e=0,t=0;t<this.widths.length;t++)e+=this.widths[t];return e},this.gMouseMove=function(e){if(t.drag.start){var n=t.drag.data,i=DayPilot.page(e);if(i){var a=i.x-t.drag.start.x,r=n.index;t.widths[r]=Math.max(5,n.width+a),t.z(r);var o={};o.widths=this.widths,o.index=n.index,t.updating(o)}}},this.gMouseUp=function(e){if(t.drag.start){t.drag.start=null,document.body.style.cursor="",t.div.style.cursor="";var n=t.drag.data;n.width=t.widths[n.index];var i={};i.widths=this.widths,i.index=n.index,t.updated(i)}},this.dispose=function(){DayPilot.list(this.blocks).each(function(e){e.handle.onmousedown=null,DayPilot.de(e.section),DayPilot.de(e.handle)}),this.unregisterGlobalHandlers()},this.registerGlobalHandlers=function(){DayPilot.re(document,"mousemove",this.gMouseMove),DayPilot.re(document,"mouseup",this.gMouseUp)},this.unregisterGlobalHandlers=function(){DayPilot.ue(document,"mousemove",this.gMouseMove),DayPilot.ue(document,"mouseup",this.gMouseUp)}};DayPilot.Splitter=s}}(DayPilot),function(){"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}(),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){if("undefined"==typeof DayPilot.Bubble){var e={};e.mouseMove=function(t){if("undefined"!=typeof e){e.mouse=e.mousePosition(t);var n=e.active;if(n&&n.A.showPosition){var i=n.A.showPosition,a=e.mouse;i.clientX!==a.clientX||i.clientY!==a.clientY}}},e.touchPosition=function(e){if(!e||!e.touches)return null;var t=e.touches[0],n={};return n.x=t.pageX,n.y=t.pageY,n.clientX=t.clientX,n.clientY=t.clientY,n},e.mousePosition=function(e){var t=DayPilot.mo3(null,e);return e&&(t.clientY=e.clientY,t.clientX=e.clientX),t},DayPilot.Bubble=function(t){this.v="2021.1.4880";var n=this,i={};if(this.hideAfter=500,this.loadingText="Loading...",this.animated=!0,this.animation="fast",this.position="Above",this.hideOnClick=!0,this.hideOnHover=!1,this.showAfter=500,this.showLoadingLabel=!0,this.zIndex=10,this.theme="bubble_default",this.onLoad=null,this.onBeforeDomAdd=null,this.onBeforeDomRemove=null,this.A=function(){},this.callBack=function(e){this.aspnet()?WebForm_DoCallback(this.uniqueID,JSON.stringify(e),this.updateView,this,this.callbackError,!0):e.calendar.internal.bubbleCallBack?e.calendar.internal.bubbleCallBack(e,this):e.calendar.bubbleCallBack(e,this)},this.callbackError=function(e,t){alert(e)},this.updateView=function(t,a){if(n!==a)throw"Callback object mismatch (internal error)";if(!t)return void n.B();var r=null,o=null,s=null;if("string"==typeof t?o=t:"object"==typeof t&&(r=t,o=t.html,s=t.element),e.active=n,n){var l=!1;if(i.div){if(s){i.div.firstChild.innerHTML="";if(DayPilot.Util.isReactComponent(s)){var d=n.C.calendar&&n.C.calendar.internal.reactRefs().reactDOM;if(!d)throw new DayPilot.Exception("Can't reach ReactDOM");d.render(s,i.div.firstChild)}else i.div.firstChild.appendChild(s);l=!0}else o&&(i.div.firstChild.innerHTML=o,l=!0);i.div.domArgs=r}l&&n.D()}},this.init=function(){},this.aspnet=function(){return"undefined"!=typeof WebForm_DoCallback},this.showEvent=function(t,n){var i=new e.CallBackArgs(t.calendar||t.root,"Event",t,t.bubbleHtml?t.bubbleHtml():null);n?this.show(i):this.showOnMouseOver(i)},this.showCell=function(t){e.cancelShowing();var n=new e.CallBackArgs(t.calendar||t.root,"Cell",t,t.staticBubbleHTML?t.staticBubbleHTML():null);this.showOnMouseOver(n)},this.showLink=function(t){e.cancelShowing();var n=new e.CallBackArgs(t.calendar||t.root,"Cell",t,t.data&&t.data.bubbleHtml);this.showOnMouseOver(n)},this.showTime=function(t){var n=new e.CallBackArgs(t.calendar||t.root,"Time",t,t.staticBubbleHTML?t.staticBubbleHTML():null);this.showOnMouseOver(n)},this.showResource=function(t,n){var i={};i.calendar=t.calendar,i.id=t.id,i.name=t.name,i.start=t.start,t.bubbleHtml?i.bubbleHtml=function(){return t.bubbleHtml}:t.data&&t.data.bubbleHtml&&(i.bubbleHtml=function(){return t.data.bubbleHtml}),i.toJSON=function(){var e={};return e.id=this.id,e};var a=new e.CallBackArgs(i.calendar||i.root,"Resource",i,i.bubbleHtml?i.bubbleHtml():null);a.div=t.div,n?this.show(a):this.showOnMouseOver(a)},this.showHtml=function(t,n){var i=new e.CallBackArgs(null,"Html",null,t);i.div=n,this.show(i)},this.hide=function(){e.active===this&&DayPilot.Bubble.hide()},this.toJSON=function(){return null},this.show=function(t){if(n.E(t)){var a=this.animated;if(this.A.showPosition=e.mouse,e.showing=null,!e.mouse)return void setTimeout(function(){n.show(t)},100);var r=this.getDiv(t);if("Above"===n.F()&&r){var o=2,s=DayPilot.abs(r,!0);if(!s)return;this.A.mouse=e.mouse,this.A.mouse.x=s.x,this.A.mouse.y=s.y,this.A.mouse.h=s.h+o,this.A.mouse.w=s.w}else this.A.mouse=e.mouse;var l;try{l=JSON.stringify(t.object)}catch(e){return}if(!(e.active===this&&this.A.sourceId===l||"undefined"!=typeof DayPilot.Menu&&DayPilot.Menu.active)){e.hideActive(),e.active=this,this.A.sourceId=l;var d=document.createElement("div");d.setAttribute("unselectable","on"),d.style.position="absolute",this.showLoadingLabel||(d.style.display="none"),d.className=this.G("_main"),d.style.top="-3000px",d.style.left="-3000px",d.style.zIndex=this.zIndex+1,a&&(d.style.visibility="hidden"),this.hideOnClick&&(d.onclick=function(){e.hideActive()}),d.onmousemove=function(t){n.hideOnHover&&e.hideActive(),e.cancelShowing(),e.cancelHiding();var t=t||window.event;t.cancelBubble=!0},d.oncontextmenu=function(){return!1},d.onmouseout=function(){n.delayedHide()};var c=document.createElement("div");d.appendChild(c),c.className=this.G("_main_inner"),c.innerHTML=this.loadingText,document.body.appendChild(d),i.div=d,n.C=function(){},n.C.calendar=t.calendar;var u={};u.source=t.object,u.async=!1,u.html=t.staticHTML,u.loaded=function(){this.async&&n.H(u)},this.showLoadingLabel&&!a&&this.D(),t.staticHTML&&"function"!=typeof this.onLoad?n.H(u):"function"==typeof this.onLoad?(this.onLoad(u),u.async||n.H(u)):"function"==typeof n.onDomAdd||"function"==typeof n.onBeforeDomAdd?n.H(u):this.I(t)&&this.callBack(t)}}},this.E=function(e){return!!e.staticHTML||("function"==typeof this.onLoad||("function"==typeof n.onDomAdd||"function"==typeof n.onBeforeDomAdd||!!this.I(e)))},this.H=function(e){var t={};t.source=e.source,t.html=e.html,t.element=null,"function"==typeof n.onDomAdd&&n.onDomAdd(t),"function"==typeof n.onBeforeDomAdd&&n.onBeforeDomAdd(t),n.updateView(t,n)},this.getDiv=function(e){return e.div?e.div:"Event"===e.type&&e.calendar&&e.calendar.internal.findEventDiv?e.calendar.internal.findEventDiv(e.object):void 0},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.F=function(){var e=n.position;if(!e)return"Above";if("eventtop"===e.toLowerCase())return"Above";if("above"===e.toLowerCase())return"Above";if("mouse"===e.toLowerCase())return"Mouse";throw new DayPilot.Error("Unrecognized DayPilot.Bubble.position value: "+e)},this.D=function(){var t=this.animated,a=n.F(),r=10;if(i.div&&this.A.mouse){if(!this.A.mouse.x||!this.A.mouse.y)return void e.hideActive();var o=i.div;o.style.display="";var s=o.offsetHeight,l=o.offsetWidth;o.style.display="none";var d=DayPilot.wd(),c=d.width,u=d.height,h="bottom",f="left";if("Mouse"===a){var v=0;if(this.A.mouse.clientY>u-s+r){this.A.mouse.clientY-(u-s)+r;v=this.A.mouse.y-s-10}else v=this.A.mouse.y+22;if("number"==typeof v&&(o.style.top=Math.max(v,0)+"px"),this.A.mouse.clientX>c-l+r){var p=this.A.mouse.clientX-(c-l)+r;o.style.left=this.A.mouse.x-p+"px"}else o.style.left=this.A.mouse.x+"px"}else if("Above"===a){var m=2,v=this.A.mouse.y-s-m,g=d.scrollTop;v<g&&(v=this.A.mouse.y+this.A.mouse.h+m,h="top"),"number"==typeof v&&(o.style.top=Math.max(v,0)+"px");var b=this.A.mouse.x;this.A.mouse.x+l+r>c&&(b=c-l-r,f="right"),o.style.left=b+"px"}if(o.style.display="",t){o.style.display="";var y={};y.color=o.firstChild.style.color,y.overflow=o.style.overflow,o.firstChild.style.color="transparent",o.style.overflow="hidden",DayPilot.pop(o,{"finished":function(){o.firstChild.style.color=y.color,o.style.overflow=y.overflow},"vertical":h,"horizontal":f,"animation":n.animation})}}},this.delayedHide=function(){e.showing===this&&e.cancelShowing();var t=e.active;if(t===this&&(e.cancelHiding(),t.hideAfter>0)){var n=t.hideAfter;e.timeoutHide=window.setTimeout(e.hideActive,n)}},this.showOnMouseOver=function(t){e.active===this&&e.cancelHiding();var i=function(e){return function(){n.show(e)}};clearTimeout(e.timeoutShow),e.timeoutShow=window.setTimeout(i(t),this.showAfter),e.showing=this},this.hideOnMouseOut=function(){this.delayedHide()},this.I=function(e){return!!e.calendar.backendUrl||!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.B=function(){if(i.div){var e=i.div.domArgs;if(i.div.domArgs=null,e&&("function"==typeof n.onDomRemove&&n.onDomRemove(e),"function"==typeof n.onBeforeDomRemove&&n.onBeforeDomRemove(e),"function"==typeof n.onDomAdd||"function"==typeof n.onBeforeDomAdd)){var t=i.div.firstChild;if(t){if(DayPilot.Util.isReactComponent(e.element)){var a=n.C.calendar&&n.C.calendar.internal.reactRefs().reactDOM;if(!a)throw new DayPilot.Exception("Can't reach ReactDOM");a.unmountComponentAtNode(t)}}}document.body.removeChild(i.div),i.div=null}},t)for(var a in t)this[a]=t[a];this.init()},DayPilot.Bubble.touchPosition=function(t){t.touches&&(e.mouse=e.touchPosition(t))},e.cancelShowing=function(){e.showing=null,e.timeoutShow&&(window.clearTimeout(e.timeoutShow),e.timeoutShow=null)},e.cancelHiding=function(){e.timeoutHide&&window.clearTimeout(e.timeoutHide)},e.hideActive=function(){e.cancelHiding();var t=e.active;t&&t.B(),e.active=null},e.CallBackArgs=function(e,t,n,i){this.calendar=e,this.type=t,this.object=n,this.staticHTML=i,this.toJSON=function(){var e={};return e.uid=this.calendar.uniqueID,e.type=this.type,e.object=n,e}},DayPilot.re(document,"mousemove",e.mouseMove),DayPilot.Bubble.hideActive=e.hideActive,DayPilot.Bubble.cancelShowing=e.cancelShowing,DayPilot.Bubble.hide=function(t){if(t=t||{},t.calendar){var n=e.active;n&&n.C.calendar===t.calendar&&DayPilot.Bubble.hide()}else e.hideActive()},DayPilot.Bubble.getActive=function(){return e.active},"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){if("undefined"==typeof DayPilot.Calendar){var e=10;DayPilot.Calendar=function(n,i){this.v="2021.1.4880";var a=!1;if(this instanceof DayPilot.Calendar&&!this.J&&(a=!0,this.J=!0),!a)throw new DayPilot.Exception("DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'");var r=this;this.uniqueID=null,this.clientName=n,this.id=n,this.isCalendar=!0,this.allDayEnd="DateTime",this.allDayEventHeight=25,this.allowEventOverlap=!0,this.allowMultiSelect=!0,this.api=2,this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.backendUrl=null,"function"==typeof DayPilot.Bubble?this.bubble=new DayPilot.Bubble:this.bubble=null,this.cellBubble=null,this.columnBubble=null,this.businessBeginsHour=9,this.businessEndsHour=18,this.cellHeight=30,this.cellDuration=30,this.clientState={},this.columnMarginRight=5,this.columnWidth=200,this.columnWidthSpec="Auto",this.columnsLoadMethod="GET",this.contextMenu=null,this.contextMenuSelection=null,this.cornerText="",this.cornerHtml=null,this.crosshairType="Header",this.cssOnly=!0,this.dayBeginsHour=0,this.dayEndsHour=24,this.days=1,this.doubleClickTimeout=300,this.durationBarVisible=!0,this.dynamicEventRendering="Disabled",this.dynamicEventRenderingMarginX=0,this.dynamicEventRenderingMarginY=0,this.eventArrangement="Cascade",this.eventsLoadMethod="GET",this.headerHeight=30,this.headerLevels=1,this.height=300,this.heightSpec="BusinessHours",this.hideFreeCells=!1,this.hideUntilInit=!0,this.headerDateFormat=null,this.hourWidth=60,this.initEventEnabled=!1,this.initScrollPos=null,this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.loadingLabelVisible=!0,this.locale="en-us",this.messageHideAfter=5e3,this.moveBy="Full",this.notifyCommit="Immediate",this.rtl=!1,this.scrollDelayCells=0,this.scrollDelayEvents=10,this.scrollLabelsVisible=!1,this.showToolTip=!0,this.showAllDayEvents=!1,this.showEventStartEnd=!1,this.showHeader=!0,this.showHours=!0,this.showCurrentTime=!0,this.showCurrentTimeMode="Day",this.showCurrentTimeOffset=0,this.startDate=DayPilot.Date.today(),this.cssClassPrefix="calendar_default",this.tapAndHoldTimeout=300,this.theme=null,this.timeFormat="Auto",this.timeHeaderCellDuration=60,this.timeRangeSelectingStartEndEnabled=!1,this.timeRangeSelectingStartEndFormat="Auto",this.eventMovingStartEndEnabled=!1,this.eventMovingStartEndFormat="Auto",this.eventResizingStartEndEnabled=!1,this.eventResizingStartEndFormat="Auto",this.useEventBoxes="Always",this.viewType="Days",this.visible=!0,this.watchWidthChanges=!0,this.weekStarts="Auto",this.width=null,this.xssProtection="Enabled",this.eventClickHandling="Enabled",this.eventDoubleClickHandling="Disabled",this.eventRightClickHandling="ContextMenu",this.eventDeleteHandling="Disabled",this.eventEditHandling="Update",this.eventHoverHandling="Bubble",this.eventResizeHandling="Update",this.eventMoveHandling="Update",this.eventSelectHandling="Update",this.eventTapAndHoldHandling="Move",this.headerClickHandling="Enabled",this.timeRangeTapAndHoldHandling="Select",this.timeRangeSelectedHandling="Enabled",this.timeRangeDoubleClickHandling="Disabled",this.timeRangeRightClickHandling="ContextMenu",this.onAutoRefresh=null,this.onColumnFilter=null,this.onTimeRangeRightClick=null,this.onTimeRangeRightClicked=null,this.onTimeRangeDoubleClick=null,this.onTimeRangeDoubleClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.onTimeRangeSelecting=null,this.onEventFilter=null,this.onEventMove=null,this.onEventMoved=null,this.onEventMoving=null,this.onEventResize=null,this.onEventResized=null,this.onEventResizing=null,this.onEventSelect=null,this.onEventSelected=null,this.onEventEdit=null,this.onEventEdited=null,this.onEventDelete=null,this.onEventDeleted=null,this.onHeaderClick=null,this.onHeaderClicked=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onEventDoubleClick=null,this.onEventDoubleClicked=null,this.onEventClick=null,this.onEventClicked=null,this.onBeforeEventRender=null,this.onBeforeEventExport=null,this.onBeforeEventDomAdd=null,this.onBeforeEventDomRemove=null,this.onAfterEventRender=null,this.onBeforeCellRender=null,this.onBeforeCellExport=null,this.onBeforeCornerDomAdd=null,this.onBeforeCornerDomRemove=null,this.onBeforeCornerRender=null,this.onBeforeHeaderRender=null,this.onBeforeHeaderExport=null,this.onBeforeTimeHeaderRender=null,this.K=!0,this.L=e,this.M=!0,this.N=!0,this.O=!0,this.P={},this.P.pixels={},this.P.events=[],this.P.drawArea=null,this.P.Q=null,this.elements={},this.elements.events=[],this.elements.separators=[],this.elements.selection=[],this.elements.cells={},this.elements.crosshair=[],this.elements.timeHeaders=[],this.events={},this.events.list=[],this.nav={},this.R=0,this.S=!1,this.T=!1,this.members={},this.members.obsolete=["Init","cleanSelection","cssClassPrefix","cssOnly","clientName","uniqueID"],this.members.ignore=["internal","nav","debug","temp","elements","members","onCallbackError"],this.members.noCssOnly=[],this.U="javasc",this.V={},this.V.ie=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1,this.V.ff=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1,this.clearSelection=function(){return this.selectedCells?(t.topSelectedCell=null,t.bottomSelectedCell=null,DayPilot.Global.selecting=null,this.W(),void(this.selectedCells=[])):void(this.selectedCells=[])},this.W=function(){this.selectedCells&&(DayPilot.de(r.elements.selection),r.elements.selection=[],r.nav.activeSelection=null)},this.cleanSelection=this.clearSelection,this.X=function(){if(r.P.drawArea)return r.P.drawArea;var e=r.Y();if(!e)return null;var t={};t.pixels={},t.pixels.left=e.scrollLeft,t.pixels.right=e.scrollLeft+e.clientWidth,t.pixels.top=e.scrollTop,t.pixels.bottom=e.scrollTop+e.clientHeight,t.pixels.width=e.scrollWidth;var n=r.dynamicEventRenderingMarginX;n&&(t.pixels.left-=n,t.pixels.right+=n,t.pixels.left<0&&(t.pixels.left=0),t.pixels.right>t.pixels.width&&(t.pixels.right=t.pixels.width));var i=r.dynamicEventRenderingMarginY;if(i){t.pixels.top-=i,t.pixels.bottom+=i;var a=r.Z();t.pixels.top<0&&(t.pixels.top=0),t.pixels.bottom>a&&(t.pixels.bottom=a)}for(var o=r._(),s=null,l=null,d=0;d<o.length;d++){var c=o[d],u=c.left+c.width;if(null===s&&u>t.pixels.left&&(s=d),null!==s&&null===l&&(u>=t.pixels.right||d===o.length-1)){l=d;break}}var h=Math.floor(t.pixels.top/r.cellHeight),f=Math.ceil(t.pixels.bottom/r.cellHeight);return t.xStart=s,t.xEnd=l,t.yStart=h,t.yEnd=f,r.P.drawArea=t,t},this.aa=function(e){return r.P.Q||(r.P.Q=r._()),r.P.Q[e]},this.ba=function(){r.P.drawArea=null,r.P.Q=null},this.ca=function(e,t){return r.ea.da()?DayPilot.Util.escapeTextHtml(e,t):DayPilot.Util.isNullOrUndefined(t)?DayPilot.Util.isNullOrUndefined(e)?"":e:t},this.fa=function(e,t,n){var i={};i.action=e,i.parameters=n,i.data=t,i.header=this.ga();var a="JSON"+JSON.stringify(i);__doPostBack(r.uniqueID,a)},this.ha=function(e,t,n,i){if(!this.I())return void r.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning");"undefined"==typeof i&&(i="CallBack"),r.ia();var a={};a.action=e,a.type=i,a.parameters=t,a.data=n,a.header=this.ga();var o="JSON"+JSON.stringify(a);this.backendUrl?DayPilot.request(this.backendUrl,this.ja,o,this.ka):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,o,this.la,this.clientName,this.onCallbackError,!0)},this.I=function(){return"javasc"!==r.U&&r.U.indexOf("DCODE")===-1||r.devsb},this.ma=function(){return!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.ka=function(e){if("function"==typeof r.onAjaxError){var t={};t.request=e,r.onAjaxError(t)}else"function"==typeof r.ajaxError&&r.ajaxError(e)},this.dispose=function(){var e=r;if(e.S&&!e.T){e.T=!0,e.na&&e.na.disconnect(),e.oa(),e.pa(),e.nav.messageClose&&(e.nav.messageClose.onclick=null),e.nav.hourTable&&(e.nav.hourTable.oncontextmenu=null,e.nav.hourTable.onmousemove=null),e.nav.header&&(e.nav.header.oncontextmenu=null),e.nav.corner&&(e.nav.corner.oncontextmenu=null),e.nav.zoom&&(e.nav.zoom.onmousemove=null,e.nav.zoom.oncontextmenu=null),e.nav.scroll&&(e.nav.scroll.onscroll=null,e.nav.scroll.root=null),DayPilot.pu(e.nav.loading),e.qa(),e.ra(),e.sa(),e.ta(),e.nav.select=null,e.nav.cornerRight=null,e.nav.scrollable=null,e.nav.bottomLeft=null,e.nav.bottomRight=null,e.nav.allday=null,e.nav.zoom=null,e.nav.loading=null,e.nav.events=null,e.nav.header=null,e.nav.hourTable=null,e.nav.scrolltop=null,e.nav.scroll=null,e.nav.vsph=null,e.nav.main=null,e.nav.message=null,e.nav.messageClose=null,e.nav.top.removeAttribute("style"),e.nav.top.removeAttribute("class"),e.nav.top.removeEventListener("mouseleave",r.va);!(r.wa.reactDOM&&DayPilot.browser.ie)&&(e.nav.top.innerHTML=""),e.nav.top.dp=null,e.nav.top=null,DayPilot.ue(window,"resize",e.xa),t.unregister(e),"undefined"!=typeof DayPilot.Bubble&&(DayPilot.Bubble.cancelShowing(),DayPilot.Bubble.hide({"calendar":e})),"undefined"!=typeof DayPilot.Menu&&DayPilot.Menu.hide({"calendar":e})}},this.ya=function(){this.nav.top.dispose=this.dispose},this.ja=function(e){r.la(e.responseText)},this.ga=function(){var e={};return e.v=this.v,e.control="dpc",e.id=this.id,e.clientState=r.clientState,e.columns=this.za(),e.days=r.days,e.startDate=r.startDate,e.cellDuration=r.cellDuration,e.cssClassPrefix=r.cssClassPrefix,e.heightSpec=r.heightSpec,e.businessBeginsHour=r.businessBeginsHour,e.businessEndsHour=r.businessEndsHour,e.viewType=r.viewType,e.dayBeginsHour=r.dayBeginsHour,e.dayEndsHour=r.dayEndsHour,e.headerLevels=r.headerLevels,e.eventHeaderVisible=r.eventHeaderVisible,e.timeFormat=r.timeFormat,e.timeHeaderCellDuration=r.timeHeaderCellDuration,e.locale=r.locale,e.scrollY=r.scrollPos,e.showAllDayEvents=r.showAllDayEvents,e.tagFields=r.tagFields,e.weekStarts=r.weekStarts,e.selected=r.multiselect.events(),e.hashes=r.hashes,e},this.Aa=function(){r.Ba(),DayPilot.Areas.hideAll(),r.Ca=null},this.za=function(){var e=[];if(e.ignoreToJSON=!0,!this.Da)return e;for(var t=0;t<this.Da.length;t++){var n=this.Da[t],i=this.Ea(n);e.push(i)}return e},this.Ea=function(e){var t={};return t.Value=e.id,t.Name=e.name,t.ToolTip=e.toolTip,t.Date=e.start,t.Children=this.Fa(e.children),t},this.Fa=function(e){var t=[];if(t.ignoreToJSON=!0,!e)return t;for(var n=0;n<e.length;n++)t.push(this.Ea(e[n]));return t},this.la=function(e,t){var e=JSON.parse(e);if(e.BubbleGuid){var n=e.BubbleGuid,i=this.bubbles[n];return delete this.bubbles[n],r.Ga(),void("undefined"!=typeof e.Result.BubbleHTML&&i.updateView(e.Result.BubbleHTML,i));
}if(e.CallBackRedirect)return void(document.location.href=e.CallBackRedirect);if("undefined"!=typeof e.ClientState&&(r.clientState=e.ClientState),"None"===e.UpdateType)return r.Ga(),r.Ha(e.CallBackData,!0),void(e.Message&&r.message(e.Message));if(r.ba(),e.VsUpdate){var a=document.createElement("input");a.type="hidden",a.name=r.id+"_vsupdate",a.id=a.name,a.value=e.VsUpdate,r.nav.vsph.innerHTML="",r.nav.vsph.appendChild(a)}if(r.pa(),r.multiselect.clear(!0),r.multiselect.Ia=e.SelectedEvents,"undefined"!=typeof e.TagFields&&(r.tagFields=e.TagFields),"undefined"!=typeof e.SortDirections&&(r.sortDirections=e.SortDirections),"Full"===e.UpdateType&&(r.colors=e.Colors,r.palette=e.Palette,r.dirtyColors=e.DirtyColors,r.cellProperties=e.CellProperties,r.cellConfig=e.CellConfig,r.Ja()===r.columns?r.columns=e.Columns:r.columns.list=e.Columns,r.days=e.Days,r.startDate=new DayPilot.Date(e.StartDate).getDatePart(),r.cellDuration=e.CellDuration,r.heightSpec=e.HeightSpec?e.HeightSpec:r.heightSpec,r.businessBeginsHour=e.BusinessBeginsHour?e.BusinessBeginsHour:r.businessBeginsHour,r.businessEndsHour=e.BusinessEndsHour?e.BusinessEndsHour:r.businessEndsHour,r.viewType=e.ViewType,r.headerLevels=e.HeaderLevels,r.backColor=e.BackColor?e.BackColor:r.backColor,r.nonBusinessBackColor=e.NonBusinessBackColor?e.NonBusinessBackColor:r.nonBusinessBackColor,r.eventHeaderVisible=e.EventHeaderVisible?e.EventHeaderVisible:r.eventHeaderVisible,r.timeFormat=e.TimeFormat?e.TimeFormat:r.timeFormat,r.timeHeaderCellDuration="undefined"!=typeof e.TimeHeaderCellDuration?e.TimeHeaderCellDuration:r.timeHeaderCellDuration,r.locale=e.Locale?e.Locale:r.locale,r.dayBeginsHour="undefined"!=typeof e.DayBeginsHour?e.DayBeginsHour:r.dayBeginsHour,r.dayEndsHour="undefined"!=typeof e.DayEndsHour?e.DayEndsHour:r.dayEndsHour,r.cornerHtml=e.CornerHTML,r.hours=e.Hours,r.Ka(),r.La()),e.Hashes)for(var o in e.Hashes)r.hashes[o]=e.Hashes[o];if(r.Ma(e.Events),r.Na(),("Full"===e.UpdateType||r.hideFreeCells)&&(r.Oa(),r.Pa(),r.Qa(),r.Ra(),r.Sa(),r.Ta(),r.Ua(),r.Va(),r.clearSelection(),r.Wa(),"undefined"!=typeof e.ScrollY?r.scrollToY(e.ScrollY):r.scrollToY(r.initScrollPos)),r.Xa(),r.Ya(),r.Za(),r.$a(),"Parent100Pct"===r.heightSpec&&r._a(),"HoldForever"!==r.timeRangeSelectedHandling&&r.clearSelection(),r.ab(),r.todo&&r.todo.del){var s=r.todo.del;s.parentNode.removeChild(s),r.todo.del=null}r.Ha(e.CallBackData,!0),r.Ga(),r.bb(),e.Message&&r.message(e.Message)};this.Ha=function(e,t){var n=function(e,t){return function(){if(r.cb()){if("function"==typeof r.onAfterRender){var n={};n.isCallBack=t,n.data=e,r.onAfterRender(n)}}else r.afterRender&&r.afterRender(e,t)}};window.setTimeout(n(e,t),0)};this.db=function(e,t){var n=r.nav.events,i=n.rows[0].cells.length,a=n.clientWidth/i,o=Math.floor(r.coords.x/a);o<0&&(o=0),o>=i&&(o=i-1),r.rtl&&(o=r.eb.length-o-1);var s=n.rows[0].cells[o],l=0,d=0,c=0;if("undefined"!=typeof e.duration){var u=e.duration;c=Math.floor((r.coords.y-l+r.cellHeight/2)/r.cellHeight)*r.cellHeight+l,d=u*r.cellHeight/(60*r.cellDuration),d=Math.max(d,r.cellHeight)}else{var h=e.event;d=h.part.height,c=h.part.top}var f=document.createElement("div");f.setAttribute("unselectable","on"),f.style.position="absolute",f.style.width="100%",f.style.height=d+"px",f.style.left="0px",f.style.top=c+"px",f.style.zIndex=r.L,f.exclude=!0;var v=document.createElement("div");return f.appendChild(v),f.className=r.G("_shadow"),v.className=this.G("_shadow_inner"),s.events.appendChild(f),f},this.fb=function(){return this.gb()/36e5},this.hb=function(){return this.businessBeginsHour>this.businessEndsHour?24-this.businessBeginsHour+this.businessEndsHour:this.businessEndsHour-this.businessBeginsHour},this.ib=function(){return this.dayBeginsHour>=this.dayEndsHour?24-this.dayBeginsHour+this.dayEndsHour:this.dayEndsHour-this.dayBeginsHour},this.gb=function(e){var t=0;if("BusinessHoursNoScroll"===this.heightSpec)t=this.hb();else if(this.hideFreeCells&&!e){var n=(this.jb-1)*this.cellDuration/this.cellHeight,i=Math.ceil(n/60),a=this.businessBeginsHour>this.businessEndsHour?this.businessEndsHour+24:this.businessEndsHour;t=Math.max(this.dayBeginsHour+i,a)-this.kb()}else t=this.ib();return 60*t*60*1e3},this.message=function(e,t){if(null!==e&&r.S){var n,i={};"object"==typeof arguments[1]?(i=arguments[1],n=i.delay):n=t;var a="";a=i.rawHtml?e:DayPilot.Util.escapeHtml(e),n=n||this.messageHideAfter||2e3;var o,s=this.lb(),l=this.showHours?this.hourWidth:0,d=DayPilot.sw(r.mb());if(r.rtl){var c=l;l=d,d=c}if(this.nav.message)o=r.nav.message,this.nav.message.style.top=s+"px";else{o=document.createElement("div"),o.style.position="absolute",o.style.left=l+"px",o.style.top=s+"px",o.style.right="0px",o.style.display="none",o.onmousemove=function(){o.messageTimeout&&!o.status&&clearTimeout(o.messageTimeout)},o.onmouseout=function(){"none"!==r.nav.message.style.display&&(o.messageTimeout=setTimeout(r.nb,500))};var u=document.createElement("div");u.onclick=function(){r.nav.message.style.display="none"},u.className=this.G("_message"),o.appendChild(u);var h=document.createElement("div");h.style.position="absolute",h.className=this.G("_message_close"),h.onclick=function(){r.nav.message.style.display="none"},o.appendChild(h),this.nav.top.insertBefore(o,this.nav.loading),this.nav.message=o,this.nav.messageClose=h}this.nav.cornerRight?this.nav.message.style.right=d+"px":this.nav.message.style.right="0px";var f=function(){if(r.nav.message){r.nav.message.firstChild.innerHTML=a;var e=function(){o.messageTimeout=setTimeout(r.nb,n)};DayPilot.fade(r.nav.message,.2,e)}};clearTimeout(o.messageTimeout),"none"!==this.nav.message.style.display?DayPilot.fade(r.nav.message,-.2,f):f()}},this.message.show=function(e){r.message(e)},this.message.hide=function(){r.nb()},this.nb=function(){var e=function(){r.nav.message.style.display="none"};DayPilot.fade(r.nav.message,-.2,e)},this.Ra=function(){this.nav.message&&(this.nav.message.style.top=this.lb()+"px")},this.ob=function(){return this.gb()/(6e4*this.cellDuration)},this.eventClickPostBack=function(e,t){this.fa("EventClick",t,e)},this.eventClickCallBack=function(e,t){this.ha("EventClick",e,t)},this.pb=function(e){var t=this,e=e||window.event,n=e.ctrlKey,i=e.metaKey;if("undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),"Disabled"===r.eventDoubleClickHandling)return void r.qb(t,n,i,e);if(r.timeouts){for(var a in r.timeouts)window.clearTimeout(r.timeouts[a]);r.timeouts=[]}else r.timeouts=[];var o=function(e,t,n,i){return function(){r.qb(e,t,n,i)}};r.timeouts.push(window.setTimeout(o(this,n,i,e),r.doubleClickTimeout))},this.qb=function(e,t,n,i){var a=e.event;if(a.client.clickEnabled())if(r.cb()){var o={};if(o.e=a,o.ctrl=t,o.meta=n,o.originalEvent=i,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventClick&&(r.onEventClick(o),o.preventDefault.value))return;switch(r.eventClickHandling){case"PostBack":r.eventClickPostBack(a);break;case"CallBack":r.eventClickCallBack(a);break;case"Edit":r.rb(e);break;case"Select":r.sb(e,a,t,n);break;case"Bubble":r.bubble&&r.bubble.showEvent(a);break;case"ContextMenu":var s=a.client.contextMenu();s?s.show(a):r.contextMenu&&r.contextMenu.show(a)}"function"==typeof r.onEventClicked&&r.onEventClicked(o)}else switch(r.eventClickHandling){case"PostBack":r.eventClickPostBack(a);break;case"CallBack":r.eventClickCallBack(a);break;case"JavaScript":r.onEventClick(a);break;case"Edit":r.rb(e);break;case"Select":r.sb(e,a,t,n);break;case"Bubble":r.bubble&&r.bubble.showEvent(a);break;case"ContextMenu":var s=a.client.contextMenu();s?s.show(a):r.contextMenu&&r.contextMenu.show(a)}},this.eventDoubleClickPostBack=function(e,t){this.fa("EventDoubleClick",t,e)},this.eventDoubleClickCallBack=function(e,t){this.ha("EventDoubleClick",e,t)},this.tb=function(e){if("undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),r.timeouts){for(var t in r.timeouts)window.clearTimeout(r.timeouts[t]);r.timeouts=null}var n=this.event,e=e||window.event;if(r.cb()){var i={};if(i.e=n,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventDoubleClick&&(r.onEventDoubleClick(i),i.preventDefault.value))return;switch(r.eventDoubleClickHandling){case"PostBack":r.eventDoubleClickPostBack(n);break;case"CallBack":r.eventDoubleClickCallBack(n);break;case"Edit":n.allday()||r.rb(this);break;case"Select":n.allday()||r.sb(this,n,e.ctrlKey);break;case"Bubble":r.bubble&&r.bubble.showEvent(n)}"function"==typeof r.onEventDoubleClicked&&r.onEventDoubleClicked(i)}else switch(r.eventDoubleClickHandling){case"PostBack":r.eventDoubleClickPostBack(n);break;case"CallBack":r.eventDoubleClickCallBack(n);break;case"JavaScript":r.onEventDoubleClick(n);break;case"Edit":n.allday()||r.rb(this);break;case"Select":n.allday()||r.sb(this,n,e.ctrlKey);break;case"Bubble":r.bubble&&r.bubble.showEvent(n)}},this.eventRightClickPostBack=function(e,t){this.fa("EventRightClick",t,e)},this.eventRightClickCallBack=function(e,t){this.ha("EventRightClick",e,t)},this.ub=function(e){var t=this.event;if(e.stopPropagation&&e.stopPropagation(),!t.client.rightClickEnabled())return!1;if(r.cb()){var n={};if(n.e=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventRightClick&&(r.onEventRightClick(n),n.preventDefault.value))return!1;switch(r.eventRightClickHandling){case"PostBack":r.eventRightClickPostBack(t);break;case"CallBack":r.eventRightClickCallBack(t);break;case"ContextMenu":var i=t.client.contextMenu();i?i.show(t):r.contextMenu&&r.contextMenu.show(this.event);break;case"Bubble":r.bubble&&r.bubble.showEvent(t)}"function"==typeof r.onEventRightClicked&&r.onEventRightClicked(n)}else switch(r.eventRightClickHandling){case"PostBack":r.eventRightClickPostBack(t);break;case"CallBack":r.eventRightClickCallBack(t);break;case"JavaScript":r.onEventRightClick(t);break;case"ContextMenu":var i=t.client.contextMenu();i?i.show(t):r.contextMenu&&r.contextMenu.show(this.event);break;case"Bubble":r.bubble&&r.bubble.showEvent(t)}return e.preventDefault&&e.preventDefault(),!1},this.vb=function(e){return new DayPilot.Column(e,r)},this.headerClickPostBack=function(e,t){this.fa("HeaderClick",t,e)},this.headerClickCallBack=function(e,t){this.ha("HeaderClick",e,t)},this.wb=function(e){var t=this.data,n=r.vb(t);if(r.cb()){var i={};if(i.header={},i.header.id=t.id,i.header.name=t.name,i.header.start=t.start,i.column=n,i.originalEvent=e,i.shift=e.shiftKey,i.ctrl=e.ctrlKey,i.meta=e.metaKey,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onHeaderClick&&(r.onHeaderClick(i),i.preventDefault.value))return;switch(r.headerClickHandling){case"PostBack":r.headerClickPostBack(n);break;case"CallBack":r.headerClickCallBack(n)}"function"==typeof r.onHeaderClicked&&r.onHeaderClicked(i)}else switch(r.headerClickHandling){case"PostBack":r.headerClickPostBack(n);break;case"CallBack":r.headerClickCallBack(n);break;case"JavaScript":r.onHeaderClick(n)}},this.xb=function(){if("undefined"!=typeof DayPilot.Bubble&&r.columnBubble)if("Resources"===r.viewType){var e={};e.calendar=r,e.start=this.data.start,e.name=this.data.name,e.id=this.data.id,e.toJSON=function(){var e={};return e.id=this.id,e.start=this.start,e.name=this.name,e},r.columnBubble.showResource(e)}else{var t=new DayPilot.Date(this.data.start),n=t.addDays(1),i={};i.calendar=r,i.start=t,i.end=n,i.toJSON=function(){var e={};return e.start=this.start,e.end=this.end,e},r.columnBubble.showTime(i)}var a=this,o=a.firstChild;if(!o.active){var s=a.data,l=r.vb(s);l.areas=a.data.areas,DayPilot.Areas.showAreas(o,l)}},this.yb=function(e){"undefined"!=typeof DayPilot.Bubble&&r.columnBubble&&r.columnBubble.hideOnMouseOut(),DayPilot.Areas.hideAreas(this.firstChild,e)},this.eventDeletePostBack=function(e,t){this.fa("EventDelete",t,e)},this.eventDeleteCallBack=function(e,t){this.ha("EventDelete",e,t)},this.zb=function(e){var t;if(t=e&&e.isEvent?e:e.parentNode.parentNode.event,"undefined"!=typeof DayPilot.Bubble&&(DayPilot.Bubble.hideActive(),DayPilot.Bubble.cancelShowing()),r.cb()){var n={};if(n.e=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventDelete&&(r.onEventDelete(n),n.preventDefault.value))return;switch(r.eventDeleteHandling){case"PostBack":r.eventDeletePostBack(t);break;case"CallBack":r.eventDeleteCallBack(t);break;case"Update":r.events.remove(t)}"function"==typeof r.onEventDeleted&&r.onEventDeleted(n)}else switch(r.eventDeleteHandling){case"PostBack":r.eventDeletePostBack(t);break;case"CallBack":r.eventDeleteCallBack(t);break;case"JavaScript":r.onEventDelete(t)}},this.eventResizePostBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var a={};a.e=e,a.newStart=t,a.newEnd=n,this.fa("EventResize",i,a)},this.eventResizeCallBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var a={};a.e=e,a.newStart=t,a.newEnd=n,this.ha("EventResize",a,i)},this.Ab=function(e,t,n,i){if("PostBack"===e)r.postBack2(t,n,i);else if("CallBack"===e)r.ha(t,n,i,"CallBack");else if("Immediate"===e)r.ha(t,n,i,"Notify");else if("Queue"===e)r.queue.add(new DayPilot.Action(this,t,n,i));else{if("Notify"!==e)throw new DayPilot.Exception("Invalid event invocation type");"Notify"===s.notifyType()?r.ha(t,n,i,"Notify"):r.queue.add(new DayPilot.Action(r,t,n,i))}},this.kb=function(e){if("BusinessHoursNoScroll"===this.heightSpec)return this.businessBeginsHour;if(this.hideFreeCells&&!e){var t=this.Bb*this.cellDuration/this.cellHeight,n=Math.floor(t/60);return n=Math.max(0,n),Math.min(this.dayBeginsHour+n,this.businessBeginsHour)}return this.dayBeginsHour},this.visibleStart=function(){if("Resources"===r.viewType){if(r.eb.isEmpty())return DayPilot.Date.today();var e=DayPilot.list(r.eb).map(function(e){return e.start.getTime()}),t=Math.min.apply(null,e);return new DayPilot.Date(t)}return this.eb[0].start},this.visibleEnd=function(){if("Resources"===r.viewType){if(r.eb.isEmpty())return DayPilot.Date.today().addDays(1);var e=DayPilot.list(r.eb).map(function(e){return e.start.getTime()}),t=Math.max.apply(null,e);return new DayPilot.Date(t).addDays(1)}var n=this.eb,t=n.length-1;return n[t].start.addDays(1)},this.cb=function(){return 2===r.api},this.Cb=function(e,t){var n=(e.start(),r.eb[e.part.dayIndex].start),i=Math.floor(t/r.cellHeight),a=i*r.cellDuration,o=60*a*1e3,s=60*r.kb()*60*1e3;return n.addTime(o+s)},this.Db=function(e,t){var n=Math.floor(t/r.cellHeight),i=n*r.cellDuration,a=60*i*1e3,o=60*r.kb()*60*1e3;return r.eb[e.part.dayIndex].start.addTime(a+o)},this.Eb=function(e,t,n,i){if("Disabled"!==this.eventResizeHandling){var a,o;if("top"===i?(a=r.Cb(e,n),o=e.end()):"bottom"===i&&(a=e.start(),o=r.Db(e,n+t)),r.cb()){var s={},l=function(){if(s.loaded=function(){},r.Fb(),!s.preventDefault.value){switch(r.eventResizeHandling){case"PostBack":r.eventResizePostBack(e,a,o);break;case"CallBack":r.eventResizeCallBack(e,a,o);break;case"Notify":r.eventResizeNotify(e,a,o);break;case"Update":e.start(a),e.end(o),r.events.update(e)}"function"==typeof r.onEventResized&&r.onEventResized(s)}};if(s.e=e,s.newStart=a,s.newEnd=o,s.preventDefault=function(){this.preventDefault.value=!0},s.async=!1,s.hideShadow=function(){r.Fb()},s.loaded=function(){l()},"function"==typeof r.onEventResize&&(r.onEventResize(s),s.preventDefault.value))return void r.Fb();s.async||l()}else switch(r.Fb(),r.eventResizeHandling){case"PostBack":r.eventResizePostBack(e,a,o);break;case"CallBack":r.eventResizeCallBack(e,a,o);break;case"JavaScript":r.onEventResize(e,a,o);break;case"Notify":r.eventResizeNotify(e,a,o)}}},this.eventResizeNotify=function(e,t,n,i){var a=new DayPilot.Event(e.copy(),this);e.start(t),e.end(n),e.commit(),r.update(),this.Gb("Notify",a,t,n,i)},this.Gb=function(e,t,n,i,a){var r={};r.e=t,r.newStart=n,r.newEnd=i,this.Ab(e,"EventResize",r,a)},this.eventMovePostBack=function(e,t,n,i,a){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.newResource=i,this.fa("EventMove",a,r)},this.eventMoveCallBack=function(e,t,n,i,a){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.newResource=i,this.ha("EventMove",r,a)},this.Hb=function(e,t,n){var i=0,a=Math.floor((n-i)/r.cellHeight),o=r.cellDuration,s=a*o*60*1e3,l=e.start(),d=e.end(),c=new Date;l instanceof DayPilot.Date&&(l=l.toDate()),c.setTime(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()));var u="Never"!==r.useEventBoxes?l.getTime()-(c.getTime()+3600*l.getUTCHours()*1e3+Math.floor(l.getUTCMinutes()/o)*o*60*1e3):0,h=d.getTime()-l.getTime(),f=3600*r.kb()*1e3;"undefined"==typeof t&&(t=e.part.dayIndex);var v=this.eb[t],p=v.start.getTime(),m=new Date;m.setTime(p+s+u+f);var g=new DayPilot.Date(m);return{"start":g,"end":g.addTime(h),"resource":v.id}},this.Ib=function(e,t,n,i,a){if("Disabled"!==r.eventMoveHandling){var o=r.Hb(e,t,n),s=o.start,l=o.end,d=o.resource,c=!!a;if(r.cb()){var u={},h=function(){if(u.loaded=function(){},r.Jb(),!u.preventDefault.value){switch(r.eventMoveHandling){case"PostBack":r.eventMovePostBack(e,s,l,d);break;case"CallBack":r.eventMoveCallBack(e,s,l,d);break;case"Notify":r.eventMoveNotify(e,s,l,d);break;case"Update":e.start(s),e.end(l),e.resource(d),c?(e.commit(),r.events.add(e)):r.events.update(e),r.Kb()}"function"==typeof r.onEventMoved&&r.onEventMoved(u)}};if(u.e=e,u.newStart=o.start,u.newEnd=o.end,u.newResource=o.resource,u.external=c,u.ctrl=!1,i&&(u.ctrl=i.ctrlKey),u.shift=!1,i&&(u.shift=i.shiftKey),u.preventDefault=function(){this.preventDefault.value=!0},u.async=!1,u.hideShadow=function(){r.Jb()},u.loaded=function(){h()},"function"==typeof r.onEventMove&&(r.onEventMove(u),u.preventDefault.value))return void r.Jb();u.async||h()}else switch(r.Jb(),r.eventMoveHandling){case"PostBack":r.eventMovePostBack(e,s,l,d);break;case"CallBack":r.eventMoveCallBack(e,s,l,d);break;case"JavaScript":r.onEventMove(e,s,l,d,c,!!i&&i.ctrlKey,!!i&&i.shiftKey);break;case"Notify":r.eventMoveNotify(e,s,l,d,null)}}},this.eventMoveNotify=function(e,t,n,i,a){var o=new DayPilot.Event(e.copy(),this);e.start(t),e.end(n),e.resource(i),e.commit(),r.update(),this.Lb("Notify",o,t,n,i,a)},this.Lb=function(e,t,n,i,a,r){var o={};o.e=t,o.newStart=n,o.newEnd=i,o.newResource=a,this.Ab(e,"EventMove",o,r)},this.Kb=function(){if(r.todo&&r.todo.del){var e=r.todo.del;e.parentNode.removeChild(e),r.todo.del=null}},this.Mb=function(e,t){var n=r.Nb(t),i={};i.args=e,i.guid=n,r.ha("Bubble",i)},this.Nb=function(e){var t=DayPilot.guid();return this.bubbles||(this.bubbles=[]),this.bubbles[t]=e,t},this.eventMenuClickPostBack=function(e,t,n){var i={};i.e=e,i.command=t,this.fa("EventMenuClick",n,i)},this.eventMenuClickCallBack=function(e,t,n){var i={};i.e=e,i.command=t,this.ha("EventMenuClick",i,n)},this.Ob=function(e,t,n){switch(n){case"PostBack":r.eventMenuClickPostBack(t,e);break;case"CallBack":r.eventMenuClickCallBack(t,e)}},this.timeRangeMenuClickPostBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.fa("TimeRangeMenuClick",n,i)},this.timeRangeMenuClickCallBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.ha("TimeRangeMenuClick",i,n)},this.Pb=function(e,t,n){switch(n){case"PostBack":r.timeRangeMenuClickPostBack(t,e);break;case"CallBack":r.timeRangeMenuClickCallBack(t,e)}},this.timeRangeSelectedPostBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.fa("TimeRangeSelected",i,a)},this.timeRangeSelectedCallBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.ha("TimeRangeSelected",a,i)},this.Qb=function(e,t,n){e=new DayPilot.Date(e),t=new DayPilot.Date(t);var i=n;if(r.cb()){var a={};if(a.start=e,a.end=t,a.resource=i,a.control=r,a.preventDefault=function(){this.preventDefault.value=!0},a.toJSON=function(){return DayPilot.Util.copyProps(a,{},["start","end","resource"])},"function"==typeof r.onTimeRangeSelect&&(r.onTimeRangeSelect(a),a.preventDefault.value))return;switch(r.timeRangeSelectedHandling){case"PostBack":r.timeRangeSelectedPostBack(e,t,i);break;case"CallBack":r.timeRangeSelectedCallBack(e,t,i)}"function"==typeof r.onTimeRangeSelected&&r.onTimeRangeSelected(a)}else switch(r.timeRangeSelectedHandling){case"PostBack":r.timeRangeSelectedPostBack(e,t,n);break;case"CallBack":r.timeRangeSelectedCallBack(e,t,n);break;case"JavaScript":r.onTimeRangeSelected(e,t,n)}},this.timeRangeDoubleClickPostBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.fa("TimeRangeDoubleClick",i,a)},this.timeRangeDoubleClickCallBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.ha("TimeRangeDoubleClick",a,i)},this.Rb=function(e,t,n){if(r.cb()){var i=n,a={};if(a.start=e,a.end=t,a.resource=i,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onTimeRangeDoubleClick&&(r.onTimeRangeDoubleClick(a),a.preventDefault.value))return;switch(r.timeRangeDoubleClickHandling){case"PostBack":r.timeRangeDoubleClickPostBack(e,t,i);break;case"CallBack":r.timeRangeDoubleClickCallBack(e,t,i)}"function"==typeof r.onTimeRangeDoubleClicked&&r.onTimeRangeDoubleClicked(a)}else switch(r.timeRangeDoubleClickHandling){case"PostBack":r.timeRangeDoubleClickPostBack(e,t,n);break;case"CallBack":r.timeRangeDoubleClickCallBack(e,t,n);break;case"JavaScript":r.onTimeRangeDoubleClick(e,t,n)}},this.eventEditPostBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.fa("EventEdit",n,i)},this.eventEditCallBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.ha("EventEdit",i,n)},this.Sb=function(e,t){if(r.cb()){var n={};if(n.e=e,n.newText=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventEdit&&(r.onEventEdit(n),n.preventDefault.value))return;switch(r.eventEditHandling){case"PostBack":r.eventEditPostBack(e,n.newText);break;case"CallBack":r.eventEditCallBack(e,n.newText);break;case"Update":e.text(n.newText),r.events.update(e)}if("function"==typeof r.onEventEdited&&(r.onEventEdited(n),n.preventDefault.value))return}else switch(r.eventEditHandling){case"PostBack":r.eventEditPostBack(e,t);break;case"CallBack":r.eventEditCallBack(e,t);break;case"JavaScript":r.onEventEdit(e,t)}},this.eventSelectPostBack=function(e,t,n){var i={};i.e=e,i.change=t,this.fa("EventSelect",n,i)},this.eventSelectCallBack=function(e,t,n){var i={};i.e=e,i.change=t,this.ha("EventSelect",i,n)},this.Tb=function(e,t,n,i){var a=r.multiselect,o=a.isSelected(t);if(n||i||!o||1!==a.Ub.length)if(r.cb()){a.previous=a.events();var s={};if(s.e=t,s.selected=a.isSelected(t),s.ctrl=n,s.meta=i,s.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onEventSelect&&(r.onEventSelect(s),s.preventDefault.value))return;switch(r.eventSelectHandling){case"PostBack":r.eventSelectPostBack(t,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),r.eventSelectCallBack(t,l);break;case"Update":a.Xb(e,n)}"function"==typeof r.onEventSelected&&(s.change=a.isSelected(t)?"selected":"deselected",s.selected=a.isSelected(t),r.onEventSelected(s))}else{a.previous=a.events(),a.Xb(e,n);var l=a.isSelected(t)?"selected":"deselected";switch(r.eventSelectHandling){case"PostBack":r.eventSelectPostBack(t,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),r.eventSelectCallBack(t,l);break;case"JavaScript":r.onEventSelect(t,l)}}},this.commandCallBack=function(e,t){this.oa();var n={};n.command=e,this.ha("Command",n,t)},this.Yb=function(e){if(!o.active&&!o.using&&(clearTimeout(t.selectedTimeout),!DayPilot.Global.selecting)){if(t.editing)return void t.editing.blur();if(r.selectedCells&&"Disabled"!==r.timeRangeDoubleClickHandling)for(var n=0;n<r.selectedCells.length;n++)if(this===r.selectedCells[n])return;if("Disabled"!==r.timeRangeSelectedHandling){DayPilot.Util.mouseButton(e).left&&(t.firstMousePos=r.coords,t.firstMousePos.calendar=r,r.clearSelection(),t.topSelectedCell=this,t.bottomSelectedCell=this,t.column=t.getColumn(this),r.selectedCells.push(this),t.firstSelected=this,DayPilot.Global.selecting={"calendar":r},r.Zb())}}},this.Zb=function(){this.getSelection()&&r.selectedCells&&!function(){var e=t.topSelectedCell,n=t.bottomSelectedCell,i=function(){if(e.data)return e.data.x;for(var t=e.parentNode.cells,n=0;n<t.length;n++)if(t[n]===e)return n;return-1}(),a=r.timeRangeSelectingStartEndFormat;"Auto"===a&&(a="Clock24Hours"===s.timeFormat()?"H:mm":"h:mm tt");var o=r.eb[i];if(o){var l={};l.start=e.start,l.end=n.end,l.duration=new DayPilot.Duration(l.start,l.end),l.resource=o.id,l.allowed=!0,l.html=null,l.cssClass=null,l.top={},l.top.width=null,l.top.space=5,l.top.html=l.start.toString(a,s.locale()),l.top.enabled=r.timeRangeSelectingStartEndEnabled,l.bottom={},l.bottom.width=null,l.bottom.space=5,l.bottom.html=l.end.toString(a,s.locale()),l.bottom.enabled=r.timeRangeSelectingStartEndEnabled;var d=DayPilot.Global.selecting&&DayPilot.Global.selecting.args;if(!d||d.start!==l.start||d.end!==l.end||d.resource!=l.resource){if(!r.allowEventOverlap){var c={"id":null,"start":l.start,"end":l.end,"resource":l.resource};r.events.$b(c)&&(l.allowed=!1)}r._b(l.start,l.end,l.resource)&&(l.allowed=!1),"function"==typeof r.onTimeRangeSelecting&&l.allowed&&r.onTimeRangeSelecting(l),DayPilot.Global.selecting&&(DayPilot.Global.selecting.args=l);var u=r.bc(e.start,o.start).boxTop-r.cc(),h=r.bc(n.end,o.start).boxBottom-r.cc(),f=h-u,v=function(){if(r.nav.activeSelection)return r.nav.activeSelection;var e=document.createElement("div");e.setAttribute("unselectable","on"),e.style.zIndex=r.L,e.style.position="absolute",e.style.left="0px",e.style.width="100%",e.ondblclick=function(e){if("Disabled"!==r.timeRangeDoubleClickHandling){clearTimeout(r.dc);var t=r.getSelection();t&&r.Rb(t.start,t.end,t.resource)}};var t=document.createElement("div");return t.setAttribute("unselectable","on"),t.className=r.G("_shadow_inner"),e.appendChild(t),r.nav.events.rows[0].cells[i].selection.appendChild(e),r.elements.selection.push(e),r.nav.activeSelection=e,e}();v.className=r.G("_shadow"),v.firstChild.innerHTML="",v.style.top=u+"px",v.style.height=f+"px";var p=v.firstChild;l.html&&(p.innerHTML=l.html),l.cssClass&&DayPilot.Util.addClass(v,l.cssClass),l.allowed||DayPilot.Util.addClass(v,r.G("_shadow_forbidden")),r.ec(v,i,l)}}}()},this.Jb=function(){r.fc(t.movingShadow),t.movingShadow=null},this.Fb=function(){r.fc(t.resizingShadow),t.resizingShadow=null},this.fc=function(e){DayPilot.de(e),DayPilot.de(r.nav.indicatorTop),DayPilot.de(r.nav.indicatorBottom)},this.ec=function(e,t,n){var i=r.nav.events.rows[0].cells,a=i[t].events,o=t===i.length-1;if(DayPilot.de(r.nav.indicatorTop),DayPilot.de(r.nav.indicatorBottom),n.top.enabled){var s=document.createElement("div");s.style.zIndex=r.L,s.style.position="absolute",s.style.top=e.offsetTop+"px",o?s.style.right="0px":s.style.left=e.offsetWidth+n.top.space+"px",n.top.width?s.style.width=n.top.width+"px":s.style.whiteSpace="nowrap",n.top.html&&(s.innerHTML=n.top.html),s.className=r.G("_shadow_top"),a.appendChild(s),r.elements.selection.push(s),r.nav.indicatorTop=s}if(n.bottom.enabled){var l=document.createElement("div");l.style.zIndex=r.L,l.style.position="absolute",l.style.top=e.offsetTop+e.offsetHeight+"px",o?l.style.right="0px":l.style.left=e.offsetWidth+n.bottom.space+"px",n.bottom.width?l.style.width=n.bottom.width+"px":l.style.whiteSpace="nowrap",n.bottom.html&&(l.innerHTML=n.bottom.html),l.className=r.G("_shadow_bottom"),a.appendChild(l);var d=l.offsetHeight;l.style.top=e.offsetTop+e.offsetHeight-d+"px",r.elements.selection.push(l),r.nav.indicatorBottom=l}},this.gc=function(e){"undefined"!=typeof DayPilot.Bubble&&r.cellBubble&&r.cellBubble.hideOnMouseOut()},this.hc=function(e){if("undefined"!=typeof t&&!o.active&&!o.using&&"undefined"!=typeof DayPilot.Bubble&&r.cellBubble){var n=t.getColumn(this),i=r.eb[n].id,a={};a.calendar=r,a.start=this.start,a.end=this.end,a.resource=i,a.toJSON=function(){var e={};return e.start=this.start,e.end=this.end,e.resource=this.resource,e},r.cellBubble.showCell(a)}},this.getSelection=function(){if(!t.topSelectedCell)return null;if(!t.bottomSelectedCell)return null;var e=t.topSelectedCell.start,n=t.bottomSelectedCell.end,i=t.topSelectedCell.resource;return new DayPilot.Selection(e,n,i,r)},this.ic=function(e){},this.jc=function(e){if("Fixed"===r.columnWidthSpec||r.M){if(!r.nav.bottomLeft)return;r.nav.bottomLeft.scrollTop=r.nav.bottomRight.scrollTop,r.nav.upperRight&&(r.nav.upperRight.scrollLeft=r.nav.bottomRight.scrollLeft),r.nav.scrollLayer.scrollLeft=r.nav.bottomRight.scrollLeft}var t=r.Y();r.scrollPos=t.scrollTop,r.kc=t.clientHeight,r.nav.scrollpos.value=r.scrollPos,r.ab(),r.ba(),"Progressive"===r.dynamicEventRendering&&(clearTimeout(r.lc),0===r.scrollDelayEvents?r.nc():r.lc=setTimeout(function(){r.nc()},r.scrollDelayEvents)),"Fixed"===r.columnWidthSpec&&(clearTimeout(r.oc),0===r.scrollDelayCells?r.pc():r.oc=setTimeout(function(){r.pc()},r.scrollDelayCells))},this.ab=function(){if(this.scrollLabelsVisible&&this.qc){if(this.nav&&this.nav.main&&this.nav.main.rows&&this.nav.main.rows.length>0&&this.nav.main.rows[0].cells.length>0){for(var e=(this.eb,this.showHours?this.hourWidth:0),t=this.nav.main.rows[0].cells[0].clientWidth,n=1,i=0;i<this.nav.scrollUp.length;i++){var a=this.nav.scrollUp[i],o=this.nav.scrollDown[i],s=Math.floor(e+i*t+t/2-5+n);s<0&&(s=0),s-=r.nav.bottomRight.scrollLeft,a&&a.style&&(a.style.left=s+"px"),o&&o.style&&(o.style.left=s+"px")}for(var l=this.cc(),i=0;i<this.nav.scrollUp.length;i++){var d=this.nav.scrollUp[i],c=this.nav.scrollDown[i],u=this.qc[i].minEnd-l,h=this.qc[i].maxStart-l;d&&c&&(u<=r.scrollPos&&parseInt(d.style.left)>=r.hourWidth?(d.style.top=this.lb()+"px",d.style.display=""):d.style.display="none",h>=r.scrollPos+r.kc&&parseInt(c.style.left)>=r.hourWidth?(c.style.top=this.lb()+this.kc-10+"px",c.style.display=""):c.style.display="none")}}}},this.rc=function(e){var t=e.parentNode,n=0,i=e.offsetTop,a=e.parentNode.offsetWidth,r=e.offsetHeight;e.event.allday()&&(n=e.offsetLeft,a=e.offsetWidth);var o=document.createElement("textarea");o.style.boxSizing="border-box",o.style.position="absolute",o.style.width=a+"px",o.style.height=r+"px";var s=DayPilot.gs(e,"fontFamily");s||(s=DayPilot.gs(e,"font-family")),o.style.fontFamily=s;var l=DayPilot.gs(e,"fontSize");return l||(l=DayPilot.gs(e,"font-size")),o.style.fontSize=l,o.style.left=n+"px",o.style.top=i+"px",o.style.border="1px solid black",o.style.padding="0px",o.style.marginTop="0px",o.style.backgroundColor="white",o.value=(e.event.text()||"").trim(),o.event=e.event,t.appendChild(o),o},this.sb=function(e,t,n,i){r.Tb(e,t,n,i)},this.multiselect={},this.multiselect.Ia=[],this.multiselect.Ub=[],this.multiselect.sc=[],this.multiselect.tc=[],this.multiselect.uc=function(){var e=r.multiselect;return JSON.stringify(e.events())},this.multiselect.events=function(){var e=r.multiselect,t=[];t.ignoreToJSON=!0;for(var n=0;n<e.Ub.length;n++)t.push(e.Ub[n]);return t},this.multiselect.vc=function(){r.nav.select.value=r.multiselect.uc()},this.multiselect.Xb=function(e,t){var n=r.multiselect;if(n.isSelected(e.event))if(r.allowMultiSelect)if(t)n.remove(e.event,!0);else{var i=n.Ub.length;n.clear(!0),i>1&&n.add(e.event,!0)}else n.clear(!0);else r.allowMultiSelect&&t?n.add(e.event,!0):(n.clear(!0),n.add(e.event,!0));n.redraw(),n.vc()},this.multiselect.wc=function(e){var t=r.multiselect;return t.xc(e,t.Ia)},this.multiselect.yc=function(){for(var e=r.multiselect,t=[],n=0;n<e.Ub.length;n++){var i=e.Ub[n];t.push(i.value())}alert(t.join("\n"))},this.multiselect.add=function(e,t){var n=r.multiselect;n.zc(e)===-1&&n.Ub.push(e),n.vc(),t||n.redraw()},this.multiselect.remove=function(e,t){var n=r.multiselect,i=n.zc(e);i!==-1&&n.Ub.splice(i,1),n.vc(),t||n.redraw()},this.multiselect.clear=function(e){var t=r.multiselect;t.Ub=[],t.vc(),e||t.redraw()},this.multiselect.redraw=function(){for(var e=r.multiselect,t=0;t<r.elements.events.length;t++){var n=r.elements.events[t];e.isSelected(n.event)?e.Ac(n):e.Bc(n)}},this.multiselect.Ac=function(e){var t=r.multiselect,n=r.G("_selected"),i=t.Cc(e);DayPilot.Util.addClass(i,n),t.sc.push(e)},this.multiselect.Cc=function(e){return e;
},this.multiselect.Dc=function(){for(var e=r.multiselect,t=0;t<e.sc.length;t++){var n=e.sc[t];e.Bc(n,!0)}e.sc=[]},this.multiselect.Bc=function(e,t){var n=r.multiselect,i=r.G("_selected"),a=n.Cc(e);if(DayPilot.Util.removeClass(a,i),!t){var o=DayPilot.indexOf(n.sc,e);o!==-1&&n.sc.splice(o,1)}},this.multiselect.isSelected=function(e){return r.multiselect.xc(e,r.multiselect.Ub)},this.multiselect.zc=function(e){for(var t=e.data,n=0;n<r.multiselect.Ub.length;n++){var i=r.multiselect.Ub[n];if(r.Ec(i.data,t))return n}return-1},this.multiselect.xc=function(e,t){if(!t)return!1;for(var n=0;n<t.length;n++){var i=t[n];if(r.Ec(e,i))return!0}return!1},this.rb=function(e){if(t.editing)return void t.editing.blur();var n=this.rc(e);t.editing=n,DayPilot.re(n,DayPilot.touch.start,function(e){e.stopPropagation()}),n.onblur=function(){if(e.event){var i=e.event.text(),a=n.value;t.editing=null,n.onblur=null,DayPilot.de(n),i!==a&&(e.style.display="none",r.Sb(e.event,a))}},n.onkeypress=function(e){if(13===(window.event?event.keyCode:e.keyCode))return this.onblur(),e.preventDefault(),!1},n.onkeyup=function(e){return 27===(window.event?event.keyCode:e.keyCode)&&(n.onblur=null,n.parentNode&&n.parentNode.removeChild(n),t.editing=!1),!0},n.select(),n.focus()},this.Fc=function(){return"Resources"!==r.viewType&&(!r.Ja()||!r.I())},this.Ja=function(){return DayPilot.isArray(r.columns)?r.columns:r.columns.list},this.columns={},this.columns.list=[],this.columns.Gc=!1,this.columns.filter=function(e){r.Hc.params=e,r.S&&r.Ic()},this.columns.find=function(e,t){var n="Resources"===r.viewType;e=new DayPilot.Date(e);var i=r.eb.find(function(i){var a=!n||i.id===t,r=i.start.addDays(1);return!!(a&&i.start<=e&&e<r)});return i?r.vb(i,r):null},this.columns.load=function(e,t,n){if(!e)throw new DayPilot.Exception("columns.load(): 'url' parameter required");var i=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof n&&n(t)},a=function(e){var n,a=e.request;try{n=JSON.parse(a.responseText)}catch(e){var o={};return o.exception=e,void i(o)}if(DayPilot.isArray(n)){var s={};if(s.preventDefault=function(){this.preventDefault.value=!0},s.data=n,"function"==typeof t&&t(s),s.preventDefault.value)return;r.columns.list=n,r.S&&r.update()}};r.columnsLoadMethod&&"POST"===r.columnsLoadMethod.toUpperCase()?DayPilot.ajax({"method":"POST","url":e,"success":a,"error":i}):DayPilot.ajax({"method":"GET","url":e,"success":a,"error":i})},this.Ka=function(){if(r.Fc()){var e=this.Jc();this.eb=this.Kc(e)}else this.Da=this.Kc(this.Ja()||[]),this.eb=this.Lc(this.headerLevels,!0)},this.Mc=function(){var e=this.startDate.getDatePart(),t=this.days;switch(this.viewType){case"Day":t=1;break;case"Week":t=7,e=e.firstDayOfWeek(s.weekStarts());break;case"WorkWeek":for(t=5,e=e.firstDayOfWeek(s.weekStarts());1!==e.dayOfWeek();)e=e.addDays(1)}var n=e.addDays(t),i={};return i.start=e,i.end=n,i.days=t,i},this.Jc=function(){for(var e=[],t=this.Mc(),n=t.start,i=t.days,a=0;a<i;a++){var o={};o.start=n.addDays(a);var l=s.locale().datePattern;r.headerDateFormat&&(l=r.headerDateFormat),o.name=o.start.toString(l,s.locale()),o.html=o.name,e.push(o)}return e},this.Hc={},this.Nc=function(e,t){var n={};n.id=e.id,n.start=new DayPilot.Date(e.start||r.startDate).getDatePart(),n.name=e.name,n.html=e.html||e.name,n.toolTip=e.toolTip,n.backColor=e.backColor,n.areas=e.areas,n.parent=t;var i=!e.children||0===e.children.length;if("function"==typeof r.onColumnFilter&&r.Hc.params)if(i){var t=n.parent,a={};a.visible=!0,a.column={"id":e.id,"name":e.name,"start":e.start,"data":e},a.filter=r.Hc.params,r.onColumnFilter(a),a.visible?t&&t.Oc():n.hidden=!0}else n.hidden=!0;return n.Oc=function(){n.hidden=!1,n.parent&&n.parent.Oc()},n.getChildren=function(e,t){var n=[];if(e<=1)return this.hidden||n.push(this),n;if(!this.children||0===this.children.length)return t?this.hidden||n.push(this):n.push("empty"),n;for(var i=0;i<this.children.length;i++)for(var a=this.children[i],r=a.getChildren(e-1,t),o=0;o<r.length;o++)n.push(r[o]);return n},n.getChildrenCount=function(e){var t=0;if(!this.children||this.children.length<=0||e<=1){return!this.hidden?1:0}for(var n=0;n<this.children.length;n++)t+=this.children[n].getChildrenCount(e-1);return t},n.putIntoBlock=function(e){for(var t=0;t<this.blocks.length;t++){var n=this.blocks[t];if(n.overlapsWith(e.part.top,e.part.height))return n.events.push(e),n.min=Math.min(n.min,e.part.top),n.max=Math.max(n.max,e.part.top+e.part.height),t}var n=[];return n.lines=[],n.events=[],n.overlapsWith=function(e,t){return!(e+t-1<this.min||e>this.max-1)},n.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var n=this.lines[t];if(n.isFree(e.part.top,e.part.height))return n.push(e),t}var n=[];return n.isFree=function(e,t){for(var n=e+t-1,i=this.length,a=0;a<i;a++){var r=this[a];if(!(n<r.part.top||e>r.part.top+r.part.height-1))return!1}return!0},n.push(e),this.lines.push(n),this.lines.length-1},n.events.push(e),n.min=e.part.top,n.max=e.part.top+e.part.height,this.blocks.push(n),this.blocks.length-1},n.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var n=this.lines[t];if(n.isFree(e.part.top,e.part.height))return n.push(e),t}var n=[];return n.isFree=function(e,t){for(var n=e+t-1,i=this.length,a=0;a<i;a++){var r=this[a];if(!(n<r.part.top||e>r.part.top+r.part.height-1))return!1}return!0},n.push(e),this.lines.push(n),this.lines.length-1},n.visibleStart=function(){return n.start.addHours(r.kb(!0))},n.visibleEnd=function(){var e=r.gb(!0);return n.visibleStart().addTime(e)},e.children&&(n.children=this.Kc(e.children,n)),n},this.Kc=function(e,t){var n=DayPilot.list();return DayPilot.list(e).each(function(e){var i=r.Nc(e,t);n.push(i)}),n},this.Lc=function(e,t){for(var n=this.Fc()?this.eb:this.Da,i=DayPilot.list(),a=0;a<n.length;a++)for(var r=n[a].getChildren(e,t),o=0;o<r.length;o++)i.push(r[o]);return i},this.$a=function(){if(this.showAllDayEvents){var e=this.nav.header;if(e){e.style.display="none";for(var t=this.eb.length,n=0;n<this.Pc.lines.length;n++)for(var i=this.Pc.lines[n],a=0;a<i.length;a++){var o=i[a],l=o.cache||o.data,d=document.createElement("div");d.event=o,d.setAttribute("unselectable","on"),d.style.position="absolute",r.rtl?d.style.right=100*o.part.colStart/t+"%":d.style.left=100*o.part.colStart/t+"%",d.style.width=100*o.part.colWidth/t+"%",d.style.height=s.allDayEventHeight()+"px",d.className=this.G("_alldayevent"),d.style.top=this.headerLevels*s.headerHeight()+n*s.allDayEventHeight()+"px",l.cssClass&&DayPilot.Util.addClass(d,l.cssClass),d.style.textAlign="left",d.style.lineHeight="1.2",o.client.clickEnabled()&&(d.onclick=this.pb),o.client.doubleClickEnabled()&&(d.ondblclick=this.tb),o.client.clickEnabled()||o.client.doubleClickEnabled()?d.style.cursor="pointer":d.style.cursor="default",DayPilot.re(d,"contextmenu",this.ub),d.onmousemove=function(e){var t=this;if(!t.active){var n=[];o.client.deleteEnabled()&&n.push({"action":"JavaScript","v":"Hover","w":17,"h":17,"top":3,"right":3,"css":r.G("_event_delete"),"js":function(e){r.zb(e)}});var i=l.areas;i&&i.length>0&&(n=n.concat(i)),DayPilot.Areas.showAreas(t,t.event,null,n),DayPilot.Util.addClass(t,r.G("_alldayevent_hover"))}"undefined"!=typeof DayPilot.Bubble&&r.bubble&&"Disabled"!==r.eventHoverHandling&&r.bubble.showEvent(this.event)},d.onmouseout=function(e){var t=this;DayPilot.Util.removeClass(t,r.G("_alldayevent_hover")),DayPilot.Areas.hideAreas(this,e),r.bubble&&r.bubble.hideOnMouseOut()},this.showToolTip&&!this.bubble&&d.setAttribute("title",o.client.toolTip());var c=o.start().getTime()===o.part.start.getTime(),u=o.end().getTime()===o.part.end.getTime(),h=l.backColor,f=document.createElement("div");if(f.setAttribute("unselectable","on"),f.className=this.G("_alldayevent_inner"),h&&(f.style.background=h),l.fontColor&&(f.style.color=l.fontColor),"darker"===l.borderColor&&l.backColor?f.style.borderColor=DayPilot.ColorUtil.darker(l.backColor,2):f.style.borderColor=l.borderColor,r.rtl?(c||DayPilot.Util.addClass(d,this.G("_alldayevent_continueright")),u||DayPilot.Util.addClass(d,this.G("_alldayevent_continueleft"))):(c||DayPilot.Util.addClass(d,this.G("_alldayevent_continueleft")),u||DayPilot.Util.addClass(d,this.G("_alldayevent_continueright"))),d.appendChild(f),r.cb()){if("function"==typeof r.onAfterEventRender){var v={};v.e=d.event,v.div=d,r.onAfterEventRender(v)}}else r.afterEventRender&&r.afterEventRender(d.event,d);!function(){var e={};if(e.control=r,e.e=o,e.element=null,d.domArgs=e,"function"==typeof r.onBeforeEventDomAdd&&r.onBeforeEventDomAdd(e),e.element){var t=f;if(t){e.Qc=t;if(DayPilot.Util.isReactComponent(e.element)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(e.element,t)}else t.appendChild(e.element)}}else f.innerHTML=o.client.innerHTML()}(),this.nav.allday.appendChild(d),this.elements.events.push(d)}e.style.display=""}}},this.pa=function(e){if(r.multiselect.Dc(),this.elements.events)for(var t=0;t<this.elements.events.length;t++){var n=this.elements.events[t],i=n.event;i&&e&&!i.allday()||r.Rc(n)}this.elements.events=[]},this.Rc=function(e){var t=e.event,n=e.domArgs;if(e.domArgs=null,n&&"function"==typeof r.onBeforeEventDomRemove&&r.onBeforeEventDomRemove(n),n&&"function"==typeof r.onBeforeEventDomAdd&&r.wa.reactDOM){var i=n&&n.Qc;if(i){if(DayPilot.Util.isReactComponent(n.element)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(i)}}}if(t&&(t.div=null,t.root=null,t.rendered=!1),e.onclick=null,e.onclickSave=null,e.ondblclick=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onmousemove=null,e.onmousedown=null,e.firstChild&&e.firstChild.firstChild&&e.firstChild.firstChild.tagName&&"IMG"===e.firstChild.firstChild.tagName.toUpperCase()){var a=e.firstChild.firstChild;a.onmousedown=null,a.onmousemove=null,a.onclick=null}e.helper=null,e.event=null,DayPilot.de(e)},this.Sc=function(e){var t=r.aa(e.part.dayIndex),n=this.X(),i=n.pixels.left,a=n.pixels.right,o=n.pixels.top,s=n.pixels.bottom,l=e.part.width/100*t.width,d=e.part.left+t.left,c=d+l,u=e.part.top-this.cc(),h=u+e.part.height,f=a<=d||i>=c,v=s<=u||o>=h;return!f&&!v},this.Tc=function(e){var t=this.nav.events,n=e.cache||e.data;if(!e.rendered){var i=r.multiselect.wc(e),a=r.Sc(e),o="Progressive"===r.dynamicEventRendering&&"Fixed"===r.columnWidthSpec;if(i||!o||a){var s=document.createElement("div");s.setAttribute("unselectable","on"),s.style.MozUserSelect="none",s.style.KhtmlUserSelect="none",s.style.WebkitUserSelect="none",s.style.position="absolute",s.className=this.G("_event"),s.style.left=e.part.left+"%",s.style.top=e.part.top-this.cc()+"px",s.style.width=e.part.width+"%",s.style.height=Math.max(e.part.height,2)+"px",s.style.overflow="hidden",s.isFirst=e.part.start.getTime()===e.start().getTime(),s.isLast=e.part.end.getTime()===e.end().getTime(),e.client.clickEnabled()&&(s.onclick=this.pb),e.client.doubleClickEnabled()&&(s.ondblclick=this.tb),DayPilot.re(s,"contextmenu",this.ub),s.onmousemove=this.Uc,s.onmouseout=this.Vc,s.onmousedown=this.Wc,DayPilot.re(s,DayPilot.touch.start,this.Xc.onEventTouchStart),DayPilot.re(s,DayPilot.touch.move,this.Xc.onEventTouchMove),DayPilot.re(s,DayPilot.touch.end,this.Xc.onEventTouchEnd),n.cssClass&&DayPilot.Util.addClass(s,n.cssClass),this.showToolTip&&!this.bubble&&s.setAttribute("title",e.client.toolTip());var l=document.createElement("div");if(l.setAttribute("unselectable","on"),l.className=r.G("_event_inner"),n.fontColor&&(l.style.color=n.fontColor),n.backColor&&(l.style.background=n.backColor),n.borderColor&&("darker"===n.borderColor&&n.backColor?l.style.borderColor=DayPilot.ColorUtil.darker(n.backColor,2):l.style.borderColor=n.borderColor),n.backgroundImage&&(l.style.backgroundImage="url("+n.backgroundImage+")",n.backgroundRepeat&&(l.style.backgroundRepeat=n.backgroundRepeat)),s.appendChild(l),e.client.barVisible()){var d=e.part.height-2,c=100*e.part.barTop/d,u=Math.ceil(100*e.part.barHeight/d);"PercentComplete"===this.durationBarMode&&(c=0,u=n.complete);var h=document.createElement("div");h.setAttribute("unselectable","on"),h.className=this.G("_event_bar"),h.style.position="absolute",n.barBackColor&&(h.style.backgroundColor=n.barBackColor);var f=document.createElement("div");f.setAttribute("unselectable","on"),f.className=this.G("_event_bar_inner"),f.style.top=c+"%",0<u&&u<=1?f.style.height="1px":f.style.height=u+"%",n.barColor&&(f.style.backgroundColor=n.barColor),h.appendChild(f),s.appendChild(h)}var v=n.areas?DayPilot.Areas.copy(n.areas):[],p=r.eb[e.part.dayIndex];if(v.forEach(function(t){t.start&&(t.top=r.bc(new DayPilot.Date(t.start),p.start).top-e.part.top-r.cc()),t.end&&(t.bottom=e.part.top+e.part.height-r.bc(new DayPilot.Date(t.end),p.start).top-r.cc())}),e.client.deleteEnabled()&&v.push({"action":"JavaScript","v":"Hover","w":17,"h":17,"top":2,"right":2,"css":r.G("_event_delete"),"js":function(e){r.zb(e)}}),DayPilot.Areas.attach(s,e,{"areas":v}),function(){var t={};if(t.control=r,t.e=e,t.element=null,s.domArgs=t,"function"==typeof r.onBeforeEventDomAdd&&r.onBeforeEventDomAdd(t),t.element){var n=l;if(n){t.Qc=n;if(DayPilot.Util.isReactComponent(t.element)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(t.element,n)}else n.appendChild(t.element)}}else l.innerHTML=e.client.innerHTML()}(),t.rows[0].cells[e.part.dayIndex]){if(t.rows[0].cells[e.part.dayIndex].events.appendChild(s),r.Yc(s),s.event=e,r.multiselect.wc(e)&&r.multiselect.add(s.event,!0),e.rendered=!0,r.cb()){if("function"==typeof r.onAfterEventRender){var m={};m.e=s.event,m.div=s,r.onAfterEventRender(m)}}else r.afterEventRender&&r.afterEventRender(s.event,s);r.elements.events.push(s)}}}},this.Yc=function(e){for(var t=e&&e.childNodes?e.childNodes.length:0,n=0;n<t;n++)try{var i=e.childNodes[n];1===i.nodeType&&(i.setAttribute("unselectable","on"),this.Yc(i))}catch(e){}},this.Za=function(){for(var e=new Date,t=0;t<this.eb.length;t++){var n=this.eb[t];if(n.blocks)for(var i=0;i<n.blocks.length;i++)for(var a=n.blocks[i],r=0;r<a.lines.length;r++)for(var o=a.lines[r],s=0;s<o.length;s++){var l=o[s];if(l.part.width=100/a.lines.length,l.part.left=l.part.width*r,"Cascade"===this.eventArrangement){var d=r===a.lines.length-1;d||(l.part.width=1.5*l.part.width)}"Full"===this.eventArrangement&&(l.part.left=l.part.left/2,l.part.width=100-l.part.left),l.allday()||this.Tc(l)}}this.multiselect.redraw();var c=new Date;c.getTime()-e.getTime()},this.nc=function(){r.elements.events.forEach(function(e){e.event&&!r.Sc(e.event)&&r.Rc(e)}),r.P.Zc.forEach(function(e){r.Tc(e)}),r.elements.events=r.elements.events.filter(function(e){return!!e.event})},this.pc=function(){for(var e=r.X(),t=e.xStart;t<=e.xEnd;t++)for(var n=e.yStart;n<=e.yEnd;n++)r.$c(t,n);r._c()},r._c=function(){for(var e=r.X(),t=this.ob(),n=r.eb.length,i=0;i<n;i++){var a=!0;e.xStart<=i&&i<=e.xEnd&&(a=!1);for(var o=0;o<t;o++){var s=!0;e.yStart<=o&&o<=e.yEnd&&(s=!1);var l=r.elements.cells[i+"_"+o];l&&(s||a)&&(l.remove(),r.elements.cells[i+"_"+o]=null)}}},this.ad=function(){this.multiselect.Ub=[];for(var e=0;e<this.eb.length;e++)for(var t=this.eb[e],n=0;n<t.lines.length;n++)for(var i=t.lines[n],a=0;a<i.length;a++){var r=i[a];r.part.width=100/t.lines.length,r.part.left=r.Width*n,r.allday()||this.Tc(r)}},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.bd=function(){switch(r.U){case"aspnet":if(!this.ma())throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");break;case"netmvc":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");break;case"javaxx":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/")}},this.Ya=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.cd=function(){var e=this.lb()+this.dd();return r.debug.message("Getting totalHeight, headerHeight: "+this.lb()+" scrollable: "+this.dd()),e<0?0:e},this.va=function(){r.Aa()},this.ed=function(){if(this.nav.top.dp=this,this.nav.top.innerHTML="",this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.WebkitUserSelect="none",this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)",this.nav.top.style.WebkitTouchCallout="none",this.nav.top.style.position="relative",this.width&&(this.nav.top.style.width=this.width),this.rtl&&(this.nav.top.style.direction="rtl"),"Parent100Pct"===this.heightSpec?this.nav.top.style.height="100%":this.nav.top.style.height=this.cd()+"px",this.hideUntilInit&&(this.nav.top.style.visibility="hidden"),this.visible||(this.nav.top.style.display="none"),this.nav.top.addEventListener("mouseleave",r.va),this.nav.scroll=document.createElement("div"),this.nav.scroll.style.height=this.dd()+"px",DayPilot.Util.addClass(this.nav.top,this.G("_main")),r.rtl&&DayPilot.Util.addClass(this.nav.top,this.G("_direction_rtl")),this.nav.scroll.style.position="relative",this.showHeader){var e=this.fd();this.nav.top.appendChild(e)}this.nav.scroll.style.zoom=1,this.nav.scroll.style.position="absolute",this.nav.scroll.style.left="0px",this.nav.scroll.style.right="0px",this.nav.scroll.style.top=this.lb()+"px",this.nav.scroll.className=r.G("_scroll");var t=this.gd();this.nav.scrollable=t.firstChild,this.nav.scroll.appendChild(t),this.nav.top.appendChild(this.nav.scroll),this.nav.vsph=document.createElement("div"),this.nav.vsph.style.display="none",this.nav.top.appendChild(this.nav.vsph),this.nav.scrollpos=document.createElement("input"),this.nav.scrollpos.type="hidden",this.nav.scrollpos.id=r.id+"_scrollpos",this.nav.scrollpos.name=this.nav.scrollpos.id,this.nav.top.appendChild(this.nav.scrollpos),this.nav.select=document.createElement("input"),this.nav.select.type="hidden",this.nav.select.id=r.id+"_select",this.nav.select.name=this.nav.select.id,this.nav.select.value=null,this.nav.top.appendChild(this.nav.select),this.nav.scrollLayer=document.createElement("div"),this.nav.scrollLayer.style.position="absolute",this.nav.scrollLayer.style.top="0px",this.nav.scrollLayer.style.left="0px",this.nav.top.appendChild(this.nav.scrollLayer),this.nav.scrollUp=[],this.nav.scrollDown=[],this.nav.loading=document.createElement("div"),this.nav.loading.style.position="absolute",this.nav.loading.style.top="0px",this.nav.loading.style.left=this.hourWidth+5+"px",this.nav.loading.className=r.G("_loading"),this.nav.loading.innerHTML=r.ca(this.loadingLabelText,this.loadingLabelHtml),this.nav.loading.style.display="none",this.nav.top.appendChild(this.nav.loading)},this.hd=function(){for(var e="Fixed"===this.columnWidthSpec,t=this.nav.header&&this.nav.header.rows[this.nav.header.rows.length-1],n=this.nav.events.rows[0],i=0;i<r.eb.length;i++){var a=t&&t.cells[i],o=n.cells[i],s=a&&a.firstChild,l=r.eb[i];if(e){var d=l.width?l.width:r.columnWidth;s&&(s.style.width=d+"px"),o&&(o.style.width=d+"px")}else r.N||(s&&(s.style.width=null),o&&(o.style.width=null))}},this.mb=function(){return this.M?r.nav.bottomRight:r.nav.scroll},this.Wa=function(){var e="Fixed"===this.columnWidthSpec;if(!e){var t=r.mb();"Fixed"===this.heightSpec?t.style.overflowY="scroll":"BusinessHours"===this.heightSpec&&this.fb()<=this.businessEndsHour-this.businessBeginsHour?t.style.overflow="hidden":"Full"!==this.heightSpec&&"BusinessHoursNoScroll"!==this.heightSpec?t.style.overflow="auto":t.style.overflow="hidden"}if(e){var n=0,i=this.eb.length*this.columnWidth;i>r.Y().clientWidth&&(n=DayPilot.sw(r.nav.bottomRight)),r.nav.headerParent&&(r.nav.headerParent.style.width=i+n+"px"),r.nav.main.style.width=i+"px",r.nav.events.style.width=i+"px",r.nav.crosshair.style.width=i+"px"}else r.nav.headerParent&&(r.nav.headerParent.style.width="100%"),r.nav.main.style.width="100%",r.nav.events.style.width="100%",r.nav.crosshair.style.width="100%";this.hd()},this.Ta=function(){this.O?this.qa():DayPilot.pu(this.nav.hourTable),this.nav.hoursPlaceholder&&(this.nav.hoursPlaceholder.innerHTML="",this.nav.hourTable=this.jd(),this.nav.hoursPlaceholder.appendChild(this.nav.hourTable))},this.qa=function(){if(this.nav.hourTable){r.elements.timeHeaders.forEach(function(e){var t=e.domArgs;if(e.domArgs=null,"function"==typeof r.onBeforeTimeHeaderDomRemove&&r.onBeforeTimeHeaderDomRemove(t),"function"==typeof r.onBeforeTimeHeaderDomAdd&&r.wa.reactDOM){var n=t&&t.Qc;if(n){if(DayPilot.Util.isReactComponent(t.element)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(n)}}}});for(var e=0;e<this.nav.hourTable.rows.length;e++){var t=this.nav.hourTable.rows[e],n=t.cells[0].firstChild;n.data=null,n.onmousemove=null,n.onmouseout=null}r.elements.timeHeaders=[]}},this.gd=function(){var e=document.createElement("div");e.style.zoom=1,e.style.position="relative",e.onmousemove=this.kd,e.oncontextmenu=this.ld,DayPilot.re(e,DayPilot.touch.start,this.Xc.onMainTouchStart),DayPilot.re(e,DayPilot.touch.move,this.Xc.onMainTouchMove),DayPilot.re(e,DayPilot.touch.end,this.Xc.onMainTouchEnd),DayPilot.re(e,"contextmenu",function(e){var e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=!1}),navigator.msPointerEnabled&&(e.style.msTouchAction="none",e.style.touchAction="none"),e.daypilotMainD=!0,e.calendar=this;var t=null,n=null;if(this.showHours){var i=document.createElement("div");i.style.cssFloat="left",r.rtl&&(i.style.cssFloat="right"),i.style.width=this.hourWidth+"px",i.style.height=this.dd()+"px",i.style.overflow="hidden",i.style.position="relative",e.appendChild(i),t=i;var a=30,o=r.Z()+a;n=document.createElement("div"),n.style.height=o+"px",i.appendChild(n)}var s=document.createElement("div");s.style.height=this.dd()+"px",this.showHours&&(r.rtl?s.style.marginRight=this.hourWidth+"px":s.style.marginLeft=this.hourWidth+"px"),s.style.position="relative",s.style.overflow="auto",e.appendChild(s),n&&(this.nav.hourTable=this.jd(),n.appendChild(this.nav.hourTable));var l=document.createElement("div");l.style.height="0px",l.style.position="relative",l.appendChild(this.md());var d=document.createElement("div");return d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.width="100%",d.style.height="0px",l.appendChild(d),this.nav.crosshair=d,l.appendChild(this.nd()),s.appendChild(l),this.nav.grid=l,this.nav.zoom=e,this.nav.bottomLeft=t,this.nav.bottomRight=s,this.nav.hoursPlaceholder=n,e},this.md=function(){if(r.N){var e=document.createElement("div");return r.nav.main=e,e}var t=document.createElement("table");return t.cellPadding="0",t.cellSpacing="0",t.border="0","Fixed"===this.columnWidthSpec||(t.style.width="100%"),t.style.border="0px none",t.style.margin="0px",t.style.tableLayout="fixed",this.nav.main=t,t},this.od=function(){if("Fixed"===this.columnWidthSpec){for(var e=0,t=0;t<r.eb.length;t++){var n=r.eb[t];e+=n.width?n.width:r.columnWidth}return e+"px"}return"100%"},this.nd=function(){if(r.N){var e=document.createElement("div");return e.style.userSelect="none",e.style.position="absolute",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.height="0px",r.nav.events=e,e}var t=document.createElement("table");t.style.position="absolute",t.style.top="0px",t.cellPadding="0",t.cellSpacing="0",t.border="0",t.style.width=r.od(),t.style.border="0px none",t.style.margin="0px",t.style.tableLayout="fixed",this.nav.events=t;for(var n=this.eb,i=n.length,a=t.insertRow(-1),o=0;o<i;o++){var s=a.insertCell(-1);s.style.padding="0px",s.style.border="0px none",s.style.height="0px",s.style.overflow="visible",r.rtl||(s.style.textAlign="left"),r.pd(s)}return t},this.jd=function(){var e=document.createElement("table");e.cellSpacing="0",e.cellPadding="0",e.border="0",e.style.margin="0px",e.style.border="0px none",e.style.width=this.hourWidth+"px",e.oncontextmenu=function(){return!1},e.onmousemove=function(){r.Ba()};for(var t=r.qd(),n=0;n<t;n++)this.rd(e,n);return e},this.qd=function(){return this.gb()/(60*this.timeHeaderCellDuration*1e3)},this.sd=function(){return 60*this.cellHeight/this.cellDuration/(60/this.timeHeaderCellDuration)},this.td=function(){return(this.kb()-this.kb(!0))*(60/this.cellDuration)},this.ud=function(){return this.kb()-this.kb(!0)},this.cc=function(){return this.td()*this.cellHeight},this.rd=function(e,t){var n=r.sd(),i=e.insertRow(-1);i.style.height=n+"px";var a=i.insertCell(-1);a.valign="bottom",a.setAttribute("unselectable","on"),a.style.padding="0px",a.style.border="0px none";var o=document.createElement("div");o.className=this.G("_rowheader"),o.style.position="relative",o.style.width=this.hourWidth+"px",o.style.height=n+"px",o.style.overflow="hidden",o.setAttribute("unselectable","on");var s=document.createElement("div");s.className=this.G("_rowheader_inner"),s.setAttribute("unselectable","on");var l=r.vd(t),d=l.html,c=l.data;c&&(o.data=c,o.onmousemove=r.xd,o.onmouseout=r.yd);var u=null,h={};if(h.header=c,"function"==typeof r.onBeforeTimeHeaderDomAdd&&(h.element=null,r.onBeforeTimeHeaderDomAdd(h),u=h.element),o.domArgs=h,u){var f=s;h.Qc=f;if(DayPilot.Util.isReactComponent(u)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(u,f)}else f.appendChild(u)}else s.innerHTML=d;o.appendChild(s),r.elements.timeHeaders.push(o),a.appendChild(o)},this.vd=function(e){var t,n;if(this.hours){var i=e+this.ud();n=this.hours[i],t=n.html}var a,o=this.timeHeaderCellDuration,s=this.startDate.addMinutes(o*e+60*this.kb()),l=s.getHours(),d=l<12;if(a="Clock12Hours"===this.ea.timeFormat()?d?"AM":"PM":"00",!t){var c=document.createElement("div");c.setAttribute("unselectable","on"),"Clock12Hours"===this.ea.timeFormat()&&(l%=12,0===l&&(l=12)),60!==this.timeHeaderCellDuration&&(l+=":"+s.toString("mm")),c.innerHTML=l;var u=document.createElement("span");u.setAttribute("unselectable","on"),u.className=this.G("_rowheader_minutes"),u.innerHTML=a,c.appendChild(u),t=c.outerHTML}var h={};h.header={},h.header.hours=l,h.header.minutes=s.getMinutes(),h.header.start=s.toString("HH:mm"),h.header.html=t,h.header.areas=n?n.areas:null,h.header.time=new DayPilot.Duration(s.getTimePart()),"function"==typeof r.onBeforeTimeHeaderRender&&(r.onBeforeTimeHeaderRender(h),null!==h.header.html&&(t=h.header.html)),n=h.header;var f={};return f.start=s,f.hour=l,f.html=t,f.data=n,f.sup=a,f},this.xd=function(e){r.Ba();var t=this;t.active||DayPilot.Areas.showAreas(t,t.data)},this.yd=function(e){DayPilot.Areas.hideAreas(this,e)},this.dd=function(){switch(this.heightSpec){case"Fixed":return this.height;case"Parent100Pct":return this.height;case"Full":return this.Z();case"BusinessHours":case"BusinessHoursNoScroll":return this.hb()*this.cellHeight*60/this.cellDuration;default:throw new DayPilot.Exception("DayPilot.Calendar: Unexpected 'heightSpec' value.")}},this.Z=function(){return r.gb()*this.cellHeight/(6e4*r.cellDuration)},this.lb=function(){if(!this.showHeader)return 0;var e=this.headerLevels*s.headerHeight();return this.showAllDayEvents&&s.allDayHeaderHeight()?e+s.allDayHeaderHeight():e},this.Pa=function(){if(this.headerHeightAutoFit){for(var e=0,t=0;t<this.nav.header.rows.length;t++)for(var n=this.nav.header.rows[t],i=0;i<n.cells.length;i++){var a=n.cells[i],r=a.firstChild,o=r.firstChild,s=r.style.height;r.style.height="auto",o.style.position="static";var l=r.offsetHeight;r.style.height=s,o.style.position="",e=Math.max(e,l)}e>this.headerHeight&&(this.P.headerHeight=e,this.Na(),this.Oa())}},this.zd=function(){var e=this.M?r.nav.bottomRight:r.nav.scroll;return DayPilot.sw(e)>0},this.fd=function(){var e=document.createElement("div"),t="Fixed"===this.columnWidthSpec;t||(e.style.overflow="auto"),e.style.position="absolute",e.style.left="0px",e.style.right="0px";var n=document.createElement("div");n.style.position="relative",n.style.zoom="1";var i=null,t="Fixed"===this.columnWidthSpec;if(t||this.M){var a=document.createElement("div");if(a.style.cssFloat="left",r.rtl&&(a.style.cssFloat="right"),a.style.width=this.hourWidth+"px",this.showHours){var o=this.Ad();this.nav.corner=o,a.appendChild(o),n.appendChild(a),this.nav.upperLeft=a}var s=document.createElement("div");this.showHours&&(r.rtl?s.style.marginRight=this.hourWidth+"px":s.style.marginLeft=this.hourWidth+"px"),s.style.position="relative",s.style.overflow="hidden",s.style.height=this.lb()+"px",n.appendChild(s),this.nav.upperRight=s,i=document.createElement("div"),i.style.position="relative",s.appendChild(i)}else{var l=document.createElement("table");l.cellPadding="0",l.cellSpacing="0",l.border="0",l.style.margin="0px",l.style.width="100%",l.style.borderCollapse="separate",l.style.border="0px none";var d=l.insertRow(-1);if(this.nav.fullHeader=l,this.showHours){var c=d.insertCell(-1);c.style.padding="0px",c.style.border="0px none";var o=this.Ad();c.appendChild(o),this.nav.corner=o}c=d.insertCell(-1),c.style.width="100%",c.valign="top",c.style.position="relative",c.style.padding="0px",c.style.border="0px none",i=document.createElement("div"),i.style.position="relative",i.style.height=this.lb()+"px",i.style.overflow="hidden",c.appendChild(i),this.nav.mid=i,n.appendChild(l)}this.nav.headerParent=i,this.nav.headerParent.onmousemove=function(e){e.insideMainD=!0},this.Bd();var u=this.zd(),t="Fixed"===this.columnWidthSpec;return u&&!t&&this.Cd(),e.appendChild(n),e},this.Bd=function(){if(this.nav.unifiedCornerRight=null,r.N)this.nav.header=document.createElement("div"),this.nav.header.style.position="relative";else{this.nav.header=document.createElement("table"),this.nav.header.style.margin="0px",this.nav.header.cellPadding="0",this.nav.header.cellSpacing="0";"Fixed"===this.columnWidthSpec||(this.nav.header.width="100%"),this.nav.header.style.tableLayout="fixed",this.nav.header.oncontextmenu=function(){return!1}}this.nav.header.setAttribute("dp-id","header"),this.nav.headerParent.appendChild(this.nav.header),this.nav.header.onmousemove=function(){r.Ba()},this.nav.allday&&DayPilot.de(this.nav.allday);var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.height="0px",e.setAttribute("dp-id","allday"),"Fixed"===this.columnWidthSpec?e.style.width=this.eb.length*this.columnWidth+"px":(e.style.left="0px",e.style.right="0px"),this.nav.allday=e,this.nav.headerParent.appendChild(e)},this.Cd=function(){if(this.nav.fullHeader){var e=this.nav.fullHeader.rows[0],t=e.insertCell(-1);t.style.padding="0px",t.style.verticalAlign="top",t.setAttribute("unselectable","on");var n=document.createElement("div");n.setAttribute("unselectable","on"),n.className=this.G("_cornerright"),n.style.overflow="hidden",n.style.position="relative",n.style.width="16px",n.style.height=this.lb()+"px";var i=document.createElement("div");i.className=this.G("_cornerright_inner"),n.appendChild(i),t.appendChild(n),this.nav.cornerRight=n}},this.Ad=function(){var e=document.createElement("div");e.style.position="relative",e.className=this.G("_corner"),e.style.width=this.hourWidth+"px",e.style.height=this.lb()+"px",e.style.overflow="hidden",e.oncontextmenu=function(){return!1};var t=document.createElement("div");t.className=this.G("_corner_inner"),t.setAttribute("unselectable","on"),e.appendChild(t);var n=document.createElement("div");return n.style.position="absolute",n.style.padding="2px",n.style.top="0px",n.style.left="1px",n.style.backgroundColor="#FF6600",n.style.color="white",n.innerHTML="\u0044\u0045"+"\u004D\u004F",n.setAttribute("unselectable","on"),DayPilot.Util.isNullOrUndefined(undefined)&&e.appendChild(n),e},this.ta=function(){if(r.nav.corner&&r.nav.corner.firstChild){var e=r.nav.corner.firstChild,t=e.domArgs;if(e.domArgs=null,t&&("function"==typeof r.onBeforeCornerDomRemove&&r.onBeforeCornerDomRemove(t),"function"==typeof r.onBeforeCornerDomAdd&&r.wa.reactDOM&&e)){if(DayPilot.Util.isReactComponent(t.element)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(e)}}}},this.ra=function(){var e=this.nav.main;e.root=null,e.onmouseup=null;for(var t=0;t<e.rows.length;t++)for(var n=e.rows[t],i=0;i<n.cells.length;i++){
var a=n.cells[i];a.root=null,a.onmousedown=null,a.onmousemove=null,a.onmouseout=null,a.onmouseup=null,a.onclick=null,a.ondblclick=null,a.oncontextmenu=null}this.O||DayPilot.pu(e)},this.Qa=function(){for(var e=0;this.nav.scrollUp&&e<this.nav.scrollUp.length;e++)this.nav.scrollLayer.removeChild(this.nav.scrollUp[e]);for(var e=0;this.nav.scrollDown&&e<this.nav.scrollDown.length;e++)this.nav.scrollLayer.removeChild(this.nav.scrollDown[e]);this.nav.scrollUp=[],this.nav.scrollDown=[]},this.pd=function(e){var t=document.createElement("div");t.style.marginRight=r.columnMarginRight+"px",t.style.position="relative",t.style.height="1px",t.style.marginTop="-1px",e.events=t;var n=document.createElement("div");n.style.position="relative",n.style.height="1px",n.style.marginTop="-1px",e.separators=n;var i=document.createElement("div");i.style.position="relative",i.style.height="1px",i.style.marginTop="-1px",e.selection=i,e.appendChild(n),e.appendChild(i),e.appendChild(t)},this.Sa=function(){r.N?r.Dd():r.Ed()},this.Fd=function(){if(this.scrollLabelsVisible)for(var e=this.eb,t=this.showHours?this.hourWidth:0,n=(this.nav.scroll.clientWidth-t)/e.length,i=0;i<e.length;i++){var a=document.createElement("div");a.style.position="absolute",a.style.top="0px",a.style.left=t+2+i*n+n/2+"px",a.style.display="none";var r=document.createElement("div");r.style.height="10px",r.style.width="10px",r.className=this.G("_scroll_up"),a.appendChild(r),this.nav.scrollLayer.appendChild(a),this.nav.scrollUp.push(a);var o=document.createElement("div");o.style.position="absolute",o.style.top="0px",o.style.left=t+2+i*n+n/2+"px",o.style.display="none";var r=document.createElement("div");r.style.height="10px",r.style.width="10px",r.className=this.G("_scroll_down"),o.appendChild(r),this.nav.scrollLayer.appendChild(o),this.nav.scrollDown.push(o)}},this.Gd=function(){var e=this.nav.events;e.innerHTML="",e.rows=[{"cells":[]}],r._().forEach(function(t,n){var i=document.createElement("div");i.style.height="1px",i.style.overflow="visible",i.style.position="absolute",i.style.left=t.left+t.unit,i.style.right=t.left+t.unit,i.style.width=t.width+t.unit,r.pd(i),e.appendChild(i),e.rows[0].cells.push(i)})},this._=function(){function e(e){return DayPilot.browser.ie||DayPilot.browser.edge?Math.floor(100*e)/100:e}var t=r.eb,n="Fixed"===this.columnWidthSpec,i=0;return DayPilot.list.for(t.length,function(a){var o={},s=0,l="";return n?(l="px",s=t[a].width?t[a].width:r.columnWidth):(l="%",s=e(100/t.length)),o.left=i,o.width=s,o.unit=l,i+=s,o})},this.Dd=function(){var e=this.nav.main,t=this.ob(),n=(this.ud()*(60/this.cellDuration),r.eb);!function(){r.elements.cells={},r.nav.main.innerHTML="",r.nav.main.rows=[]}(),this.nav.scrollable.daypilotMainD=!0,this.nav.scrollable.calendar=this,r.Fd(),r.Gd();for(var i=0;i<t;i++)if(r.nav.main.rows.push({"cells":[]}),DayPilot.browser.ie)for(var a=n.length-1;a>=0;a--)r.$c(a,i);else for(var a=0;a<n.length;a++)r.$c(a,i);e.style.height=t*r.cellHeight+"px"},r.Hd=function(e,t){var n={},i=r.aa(e),a=t*r.cellHeight;return n.left=i.left,n.width=i.width,n.right=n.left+n.width,n.top=a,n.height=r.cellHeight,n.bottom=n.top+n.height,n},r.$c=function(e,n){var i="Fixed"===r.columnWidthSpec&&!DayPilot.browser.ie;if(!r.elements.cells[e+"_"+n]){if(i){var a=r.Hd(e,n),o=r.X(),s=o.pixels.right<=a.left||o.pixels.left>=a.right,l=o.pixels.bottom<=a.top||o.pixels.top>=a.bottom;if(!(!s&&!l))return}var d=r.aa(e),c=60*this.cellDuration*1e3,u=n*r.cellHeight,h=r.eb[e],f=document.createElement("div");f.style.position="absolute",f.style.left=d.left+d.unit,f.style.right=d.left+d.unit,f.style.width=d.width+d.unit,f.style.top=u+"px",f.start=h.start.addTime(n*c).addHours(r.kb()),f.end=f.start.addTime(c),f.resource=h.id,f.data={},f.data.x=e,f.data.y=n,f.data.start=f.start,f.data.end=f.end,f.data.resource=f.resource,f.data.calendar=r,r.cellProperties||(r.cellProperties={});var v={};v.resource=f.resource,v.start=f.start,v.end=f.end;var p=e+"_"+n;if(v.cssClass=null,v.html=null,v.backImage=null,v.backRepeat=null,v.backColor=null,v.business=r.Id(f.start,f.end),r.cellProperties[p]&&DayPilot.Util.copyProps(r.cellProperties[p],v,["cssClass","html","backImage","backRepeat","backColor","business","areas","disabled"]),"function"==typeof r.onBeforeCellRender){var m={};m.cell=v,r.onBeforeCellRender(m)}r.cellProperties[p]=v;var g,b=r.Jd(e,n);f.root=r,f.setAttribute("unselectable","on"),g=document.createElement("div"),g.className=r.G("_cell"),g.style.position="relative",g.style.height=r.cellHeight+"px",g.style.overflow="hidden",g.setAttribute("unselectable","on");var y=document.createElement("div");y.className=r.G("_cell_inner"),g.appendChild(y),f.appendChild(g),f.onmousedown=r.Yb,f.onmousemove=r.hc,f.onmouseout=r.gc,DayPilot.re(f,DayPilot.touch.end,r.Xc.onCellTouchEnd),f.oncontextmenu=function(){return this.selected||(r.clearSelection(),t.column=t.getColumn(this),r.selectedCells.push(this),t.firstSelected=this,t.topSelectedCell=this,t.bottomSelectedCell=this,r.Zb()),"Disabled"===r.timeRangeRightClickHandling,!1};var w=r.Kd(e,n);g=f.firstChild;"Fixed"===r.columnWidthSpec&&(h.width?g.style.width=h.width+"px":g.style.width=r.columnWidth+"px"),w&&(g.firstChild.style.background=w);(b?b.business:r.Id(f.start,f.end))&&DayPilot.Util.addClass(g,r.G("_cell_business"));var x=g.firstChild;if(x&&(x.innerHTML=""),g.style.backgroundImage="",g.style.backgroundRepeat="",b&&(b.html&&(x.innerHTML=b.html),b.cssClass&&DayPilot.Util.addClass(g,b.cssClass),b.backImage&&(g.style.backgroundImage="url('"+b.backImage+"')"),b.backRepeat&&(g.style.backgroundRepeat=b.backRepeat),b.areas)){var k={};k.start=f.start,k.end=f.end,k.resource=f.resource;var C=DayPilot.list(b.areas).filter(function(e){return!(e.end&&new DayPilot.Date(e.end)<=f.start)&&!(e.start&&new DayPilot.Date(e.start)>=f.end)});C.forEach(function(e){if(e.start||e.end){if(e.start){var t=new DayPilot.Date(e.start).getTime()-f.start.getTime();e.top=r.Ld(t)}if(e.end){var n=new DayPilot.Date(e.end).getTime()-f.start.getTime();e.height=r.Ld(n)-e.top}}}),DayPilot.Areas.attach(g,k,{"areas":C})}r.nav.main.appendChild(f),r.nav.main.rows[n].cells[e]=f,r.elements.cells[e+"_"+n]=f}},this.Ed=function(){var e=this.nav.main,n=60*this.cellDuration*1e3,i=this.ob(),a=(this.ud()*(60/this.cellDuration),r.eb),o=0;for(e&&(o=r.Y().scrollTop,this.ra()),this.nav.scrollable.daypilotMainD=!0,this.nav.scrollable.calendar=this;e&&e.rows&&e.rows.length>0;)this.O||DayPilot.pu(e.rows[0]),e.deleteRow(0);if(this.Md=!0,this.scrollLabelsVisible)for(var a=this.eb,s=this.showHours?this.hourWidth:0,l=(this.nav.scroll.clientWidth-s)/a.length,d=0;d<a.length;d++){var c=document.createElement("div");c.style.position="absolute",c.style.top="0px",c.style.left=s+2+d*l+l/2+"px",c.style.display="none";var u=document.createElement("div");u.style.height="10px",u.style.width="10px",u.className=this.G("_scroll_up"),c.appendChild(u),this.nav.scrollLayer.appendChild(c),this.nav.scrollUp.push(c);var h=document.createElement("div");h.style.position="absolute",h.style.top="0px",h.style.left=s+2+d*l+l/2+"px",h.style.display="none";var u=document.createElement("div");u.style.height="10px",u.style.width="10px",u.className=this.G("_scroll_down"),h.appendChild(u),this.nav.scrollLayer.appendChild(h),this.nav.scrollDown.push(h)}var f=a.length;if(this.cssOnly||this.K){for(var v=this.nav.events;v&&v.rows&&v.rows.length>0;)this.O||DayPilot.pu(v.rows[0]),v.deleteRow(0);for(var p=v.insertRow(-1),m=0;m<f;m++){var g=p.insertCell(-1);g.style.padding="0px",g.style.border="0px none",g.style.height="1px",g.style.overflow="visible";var b="Fixed"===this.columnWidthSpec;b&&(a[m].width?g.style.width=a[m].width+"px":g.style.width=this.columnWidth+"px"),r.rtl||(g.style.textAlign="left"),r.pd(g)}}for(var d=0;d<i;d++){var p=e.insertRow(-1),y=d;p.style.MozUserSelect="none",p.style.KhtmlUserSelect="none",p.style.WebkitUserSelect="none";for(var m=0;m<f;m++){var w=this.eb[m],g=p.insertCell(-1);g.start=w.start.addTime(y*n).addHours(this.kb()),g.end=g.start.addTime(n),g.resource=w.id,this.cellProperties||(this.cellProperties={});var x={};x.resource=g.resource,x.start=g.start,x.end=g.end;var k=m+"_"+y;if(x.cssClass=null,x.html=null,x.backImage=null,x.backRepeat=null,x.backColor=null,x.business=this.Id(g.start,g.end),this.cellProperties[k]&&DayPilot.Util.copyProps(this.cellProperties[k],x,["cssClass","html","backImage","backRepeat","backColor","business","areas","disabled"]),"function"==typeof this.onBeforeCellRender){var C={};C.cell=x,this.onBeforeCellRender(C)}this.cellProperties[k]=x;var S,E=r.Jd(m,y);g.root=this,g.setAttribute("unselectable","on"),S=document.createElement("div"),S.className=r.G("_cell"),S.style.position="relative",S.style.height=r.cellHeight+"px",S.style.overflow="hidden",S.setAttribute("unselectable","on");var D=document.createElement("div");D.className=r.G("_cell_inner"),S.appendChild(D),g.appendChild(S),g.onmousedown=this.Yb,g.onmousemove=this.hc,g.onmouseout=this.gc,DayPilot.re(g,DayPilot.touch.end,this.Xc.onCellTouchEnd),g.oncontextmenu=function(){return this.selected||(r.clearSelection(),t.column=t.getColumn(this),r.selectedCells.push(this),t.firstSelected=this,t.topSelectedCell=this,t.bottomSelectedCell=this,r.Zb()),"Disabled"===r.timeRangeRightClickHandling,!1};var T=r.Kd(m,y);S=g.firstChild;var b="Fixed"===this.columnWidthSpec;b&&(w.width?S.style.width=w.width+"px":S.style.width=this.columnWidth+"px"),T&&(S.firstChild.style.background=T);(E?E.business:this.Id(g.start,g.end))&&DayPilot.Util.addClass(S,r.G("_cell_business"));var A=S.firstChild;if(A&&(A.innerHTML=""),S.style.backgroundImage="",S.style.backgroundRepeat="",E&&(E.html&&(A.innerHTML=E.html),E.cssClass&&DayPilot.Util.addClass(S,E.cssClass),E.backImage&&(S.style.backgroundImage="url('"+E.backImage+"')"),E.backRepeat&&(S.style.backgroundRepeat=E.backRepeat),E.areas)){var _={};_.start=g.start,_.end=g.end,_.resource=g.resource;var M=DayPilot.list(E.areas).filter(function(e){return!(e.end&&new DayPilot.Date(e.end)<=g.start)&&!(e.start&&new DayPilot.Date(e.start)>=g.end)});M.forEach(function(e){if(e.start||e.end){if(e.start){var t=new DayPilot.Date(e.start).getTime()-g.start.getTime();e.top=r.Ld(t)}if(e.end){var n=new DayPilot.Date(e.end).getTime()-g.start.getTime();e.height=r.Ld(n)-e.top}}}),DayPilot.Areas.attach(S,_,{"areas":M})}}}e.onmouseup=this.ic,e.root=this,e.style.height=i*r.cellHeight+"px",r.nav.scrollable.style.display="",r.Y().scrollTop=o},this.ld=function(e){if(!o.detected){var t=r.getSelection();if(t){var n={};if(n.start=t.start,n.end=t.end,n.resource=t.resource,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof r.onTimeRangeRightClick&&(r.onTimeRangeRightClick(n),n.preventDefault.value))return!1;"ContextMenu"===r.timeRangeRightClickHandling&&r.contextMenuSelection&&r.contextMenuSelection.show(r.getSelection()),"function"==typeof r.onTimeRangeRightClicked&&r.onTimeRangeRightClicked(n)}}},this.Id=function(e,t){return this.businessBeginsHour<this.businessEndsHour?!(e.getHours()<this.businessBeginsHour||e.getHours()>=this.businessEndsHour||6===e.getDayOfWeek()||0===e.getDayOfWeek()):e.getHours()>=this.businessBeginsHour||e.getHours()<this.businessEndsHour},this.kd=function(e){e=e||window.event,e.insideMainD=!0,window.event&&window.event.srcElement&&(window.event.srcElement.inside=!0);for(var n=0;n<t.registered.length;n++){var i=t.registered[n];i!==this&&i.Aa&&i.Aa()}t.activeCalendar=this;var a=r.nav.main;r.coords=DayPilot.mo3(a,e);var o=DayPilot.mc(e),l=r.crosshairType&&"Disabled"!==r.crosshairType;if(DayPilot.Global.moving||DayPilot.Global.resizing||DayPilot.Global.selecting?r.Ba():l&&r.Nd(),DayPilot.Global.resizing)r.Od(o);else if(DayPilot.Global.moving){if(!DayPilot.Global.moving.helper)return void(t.movingShadow=null);if(!t.movingShadow){var d=3;if(!(DayPilot.distance(o,t.originalMouse)>d))return;t.movingShadow=r.db(DayPilot.Global.moving,!r.V.ie),t.movingShadow.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"}if(!r.coords)return;var c=r.cellHeight,u=0,h=t.moveOffsetY;h||(h=c/2),"Top"===this.moveBy&&(h=0);var f=Math.floor((r.coords.y-h-u+c/2)/c)*c+u;f<u&&(f=u);var v=r.nav.main,p=r.N?r.ob()*r.cellHeight:v.clientHeight,m=parseInt(t.movingShadow.style.height);f+m>p&&(f=p-m);var g=v.clientWidth/v.rows[0].cells.length,b=Math.floor(r.coords.x/g);b<0&&(b=0),b>=r.eb.length&&(b=r.eb.length-1),r.rtl&&(b=r.eb.length-b-1);var y=t.movingShadow,w=DayPilot.Global.moving.event,x=r.Hb(w,b,f),k=r.eventMovingStartEndFormat;"Auto"===k&&(k="Clock24Hours"===s.timeFormat()?"H:mm":"h:mm tt");var C={};C.e=w,C.start=x.start,C.end=x.end,C.resource=x.resource,C.html=null,C.cssClass=null,C.allowed=!0,C.top={},C.top.width=null,C.top.space=5,C.top.html=C.start.toString(k,s.locale()),C.top.enabled=r.eventMovingStartEndEnabled,C.bottom={},C.bottom.width=null,C.bottom.space=5,C.bottom.html=C.end.toString(k,s.locale()),C.bottom.enabled=r.eventMovingStartEndEnabled,C.external=!!t.drag,function(){var e=r.Ca;if(!(e&&e.start.getTime()===x.start.getTime()&&e.end.getTime()===x.end.getTime()&&e.resource===x.resource)){if(y.className=r.G("_shadow"),y.firstChild.innerHTML="",r.Ca=C,y.args=C,!r.allowEventOverlap){var n={"id":w.id(),"start":C.start,"end":C.end,"resource":C.resource};r.events.$b(n)&&(DayPilot.Util.addClass(y,r.G("_shadow_forbidden")),C.allowed=!1)}r._b(C.start,C.end,C.resource)&&(DayPilot.Util.addClass(y,r.G("_shadow_forbidden")),C.allowed=!1),DayPilot.Util.removeClass(y,r.G("_shadow_forbidden")),"function"==typeof r.onEventMoving&&C.allowed&&r.onEventMoving(C),C.html&&(y.firstChild.innerHTML=C.html),C.cssClass&&DayPilot.Util.addClass(y,C.cssClass),C.allowed||DayPilot.Util.addClass(y,r.G("_shadow_forbidden")),t.movingShadow.style.top=f+"px";var i=r.nav.events;b<i.rows[0].cells.length&&b>=0&&t.movingShadow.column!==b&&(t.movingShadow.column=b,t.moveShadow(i.rows[0].cells[b]));var a=b,o=y;r.ec(o,a,C)}}()}else if(t.firstMousePos){var S=r.Pd(r.coords.x,!0),E=Math.floor(r.coords.y/r.cellHeight),D=r.nav.main.rows[E].cells[S];if(!DayPilot.Global.selecting){var T=t.firstMousePos,A=r.coords;T.x===A.x&&T.y===A.y||(DayPilot.Global.selecting={"calendar":r})}if(!DayPilot.Global.selecting)return;var o=r.coords,_=t.getColumn(D);_!==t.column&&(D=r.nav.main.rows[E].cells[t.column]);var M=DayPilot.Global.selecting;if(M.last&&M.last.x===S&&M.last.y===E)return;M.last={"x":S,"y":E},o.y<t.firstMousePos.y?(r.selectedCells=t.getCellsBelow(D),t.topSelectedCell=r.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(r.selectedCells=t.getCellsAbove(D),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=r.selectedCells[0]),r.Zb()}if(t.drag){if(t.gShadow&&document.body.removeChild(t.gShadow),t.gShadow=null,!t.movingShadow&&r.coords){var y=r.db(t.drag,!1);if(y){t.movingShadow=y;var A=DayPilot.Date.today(),e={"id":t.drag.id,"start":A,"end":A.addSeconds(t.drag.duration),"text":t.drag.text},H=t.drag.data;if(H){var R=["duration","element","remove","id","text"];for(var B in H)DayPilot.contains(R,B)||(e[B]=H[B])}var P=new DayPilot.Event(e,r);P.external=!0,DayPilot.Global.moving={},DayPilot.Global.moving.event=P,DayPilot.Global.moving.helper={}}}e.cancelBubble=!0}},this.Qd=function(e){t.movingShadow.offsetTop,DayPilot.Global.moving.event,t.movingShadow.column},this._b=function(e,t,n){return r.Rd(e,t,n).some(function(e){return e.disabled})},this.Rd=function(e,t,n){var i=[];for(var a in r.cellProperties){var o=r.cellProperties[a];(!n||n===o.resource)&&DayPilot.Util.overlaps(e,t,o.start,o.end)&&i.push(o)}return i},this.Od=function(e){if(!DayPilot.Global.resizing.event)return DayPilot.Global.resizing=null,DayPilot.de(t.resizingShadow),void(t.resizingShadow=null);t.resizingShadow||(t.resizingShadow=r.db(DayPilot.Global.resizing,!1));var n=DayPilot.Global.resizing.event.calendar.cellHeight,i=0,a=e.y-t.originalMouse.y,o=DayPilot.Global.resizing.event,l=o.start(),d=o.end();if("bottom"===DayPilot.Global.resizing.dpBorder){var c=Math.floor((t.originalHeight+t.originalTop+a+n/2)/n)*n-t.originalTop+i;c<n&&(c=n);var u=r.N?r.ob()*r.cellHeight:r.nav.main.clientHeight;t.originalTop+c>u&&(c=u-t.originalTop),t.resizingShadow.style.height=c+"px",d=r.Db(o,t.originalTop+c)}else if("top"===DayPilot.Global.resizing.dpBorder){var h=Math.floor((t.originalTop+a-i+n/2)/n)*n+i;h<i&&(h=i),h>t.originalTop+t.originalHeight-n&&(h=t.originalTop+t.originalHeight-n);var c=t.originalHeight-(h-t.originalTop);c<n?c=n:t.resizingShadow.style.top=h+"px",t.resizingShadow.style.height=c+"px",l=r.Cb(o,h)}var f=t.resizingShadow,v=r.eventResizingStartEndFormat;"Auto"===v&&(v="Clock24Hours"===s.timeFormat()?"H:mm":"h:mm tt");var p={};if(p.e=o,p.start=l,p.end=d,p.resource=o.resource(),p.allowed=!0,p.html=null,p.cssClass=null,p.top={},p.top.width=null,p.top.space=5,p.top.html=p.start.toString(v,s.locale()),p.top.enabled=r.eventResizingStartEndEnabled,p.bottom={},p.bottom.width=null,p.bottom.space=5,p.bottom.html=p.end.toString(v,s.locale()),p.bottom.enabled=r.eventResizingStartEndEnabled,f.args=p,f.firstChild.innerHTML="",f.className=r.G("_shadow"),!r.allowEventOverlap){var m={"id":o.id(),"start":p.start,"end":p.end,"resource":p.resource};r.events.$b(m)&&(DayPilot.Util.addClass(f,r.G("_shadow_forbidden")),p.allowed=!1)}r._b(p.start,p.end,p.resource)&&(DayPilot.Util.addClass(f,r.G("_shadow_forbidden")),p.allowed=!1),"function"==typeof r.onEventResizing&&p.allowed&&r.onEventResizing(p),p.html&&(f.firstChild.innerHTML=p.html),p.cssClass&&DayPilot.Util.addClass(f,p.cssClass),p.allowed||DayPilot.Util.addClass(f,r.G("_shadow_forbidden"));var g=o.part.dayIndex,b=f;r.ec(b,g,p)},this.temp={},this.temp.getPosition=function(){var e=r.Sd.getCellCoords();if(!e)return null;var t=r.eb[e.x],n={};return n.resource=t.id,n.start=new DayPilot.Date(t.start).addHours(r.kb(!0)).addMinutes(e.y*r.cellDuration),n.end=n.start.addMinutes(r.cellDuration),n},this.Sd={},this.Sd.getCellCoords=function(){var e={};if(e.x=0,e.y=0,!r.coords)return null;e.x=r.Pd(r.coords.x);var t=0,n=Math.floor((r.coords.y-t)/r.cellHeight);return e.y=n,e.x<0?null:e},this.Sd.col=function(e,t){var n={};if(n.left=0,n.width=0,!e)return null;if(!e.rows)return null;if(0===e.rows.length)return null;if(0==e.rows[0].cells.length)return null;var i=e.rows[0].cells[t];if(!i)return null;var a=DayPilot.abs(e),r=DayPilot.abs(i);return n.left=r.x-a.x,n.width=i.offsetWidth,n},this.Nd=function(){this.Ba(),this.elements.crosshair||(this.elements.crosshair=[]);var e=this.Sd.getCellCoords();if(e){var t=e.x;if(null!==t){var n=Math.floor(e.y/(60/r.cellDuration)*(60/r.timeHeaderCellDuration));if(!(n<0)){if(this.nav.hourTable){if(n>=this.nav.hourTable.rows.length)return;var i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.top="0px",i.style.bottom="0px",i.className=r.G("_crosshair_left"),this.nav.hourTable.rows[n].cells[0].firstChild.appendChild(i),this.elements.crosshair.push(i)}if(this.nav.header){var a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.right="0px",a.style.top="0px",a.style.bottom="0px",a.className=r.G("_crosshair_top");var o=this.nav.header.rows[this.headerLevels-1];o.cells[t]&&(o.cells[t].firstChild.appendChild(a),this.elements.crosshair.push(a))}if("Header"!==this.crosshairType){var s=this.nav.crosshair,l=0,d=Math.floor((r.coords.y-l)/r.cellHeight)*r.cellHeight+l,c=r.cellHeight,u=document.createElement("div");u.style.position="absolute",u.style.left="0px",u.style.right="0px",u.style.top=d+"px",u.style.height=c+"px",u.className=r.G("_crosshair_horizontal"),u.onmousedown=this.Td,s.appendChild(u),this.elements.crosshair.push(u);var h=this.Sd.col(this.nav.main,t);if(c=r.Z(),h){var f=document.createElement("div");f.style.position="absolute",f.style.left=h.left+"px",f.style.width=h.width+"px",f.style.top="0px",f.style.height=c+"px",f.className=r.G("_crosshair_vertical"),f.onmousedown=this.Td,s.appendChild(f),this.elements.crosshair.push(f)}}}}}},this.Td=function(e){r.Ba();var t=r.Sd.getCellCoords(),n=0,i=r.nav.main.rows[t.y+n].cells[t.x];r.Yb.apply(i,[e])},this.Ba=function(){if(this.elements.crosshair&&0!==this.elements.crosshair.length){for(var e=0;e<this.elements.crosshair.length;e++){var t=this.elements.crosshair[e];t&&t.parentNode&&t.parentNode.removeChild(t)}this.elements.crosshair=[]}},this.La=function(){if(this.cellConfig){var e=this.cellConfig;if(e.vertical)for(var t=0;t<e.x;t++)for(var n=this.cellProperties[t+"_0"],i=1;i<e.y;i++)this.cellProperties[t+"_"+i]=n;if(e.horizontal)for(var i=0;i<e.y;i++)for(var n=this.cellProperties["0_"+i],t=1;t<e.x;t++)this.cellProperties[t+"_"+i]=n;if(e["default"])for(var n=e["default"],i=0;i<e.y;i++)for(var t=0;t<e.x;t++)this.cellProperties[t+"_"+i]||(this.cellProperties[t+"_"+i]=n)}},this.Jd=function(e,t){return this.cellProperties?this.cellProperties[e+"_"+t]:null},this.Ud=function(e,t){var n=e+"_"+t;return!(!this.cellProperties||!this.cellProperties[n])&&this.cellProperties[n].business},this.Kd=function(e,t){var n=e+"_"+t;return this.cellProperties&&this.cellProperties[n]?this.cellProperties[n].backColor:null},this.sa=function(){var e=this.nav.header;if(e&&e.rows)for(var t=0;t<e.rows.length;t++)for(var n=e.rows[t],i=0;i<n.cells.length;i++){var a=n.cells[i];a.onclick=null,a.onmousemove=null,a.onmouseout=null;var o=a,s=o.domArgs;if(o.domArgs=null,"function"==typeof r.onBeforeHeaderDomRemove&&r.onBeforeHeaderDomRemove(s),"function"==typeof r.onBeforeHeaderDomAdd&&r.wa.reactDOM){var l=s&&s.Qc;if(l){var d=DayPilot.Util.isReactComponent(s.element);if(d){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.unmountComponentAtNode(l)}}}}this.O||DayPilot.pu(e),e.innerHTML="",e.rows=[]},this.Vd=function(e){var t=e+1,n=t===r.headerLevels,i=this.Lc(t),a=0,o=0,s=r._(),l=[];if(!n)for(var d=0;d<i.length;d++){var c=i[d],u=s[d],h=!!c.getChildren,f=h?c.getChildrenCount(r.headerLevels-t+1):1,v=u.width;DayPilot.list.for(f-1,function(){v+=s[d+a].width,a+=1}),l.push({"left":o,"width":v}),o+=v}return l};this.Wd=function(e){function t(e){var t=i[e],n=l[e],a={};a.header={},a.column=r.vb(t,r);var h=null;r.cb()&&"function"==typeof r.onBeforeHeaderRender&&(DayPilot.Util.copyProps(t,a.header,["id","start","name","html","backColor","toolTip","areas","children"]),r.onBeforeHeaderRender(a),DayPilot.Util.copyProps(a.header,t,["html","backColor","toolTip","areas"]));var f=!!t.getChildren,v=n.width,p=n.left;o||(p=u[e].left,v=u[e].width);var m=document.createElement("div");m.style.position="absolute",m.style.top=d+"px",m.style.left=p+n.unit,m.style.right=p+n.unit,m.style.width=v+n.unit,m.data=t,c.push(m),f&&(m.onclick=r.wb,m.onmousemove=r.xb,m.onmouseout=r.yb,t.toolTip&&(m.title=t.toolTip)),m.style.overflow="hidden",m.style.height=s.headerHeight()+"px";var g=document.createElement("div");g.setAttribute("unselectable","on"),g.style.userSelect="none",g.style.position="relative",g.style.height=s.headerHeight()+"px",g.className=r.G("_colheader");var b=document.createElement("div");if(b.className=r.G("_colheader_inner"),t.backColor&&(b.style.background=t.backColor),g.appendChild(b),m.appendChild(g),r.Xd(g,t),"function"==typeof r.onBeforeHeaderDomAdd&&(a.element=null,r.onBeforeHeaderDomAdd(a),h=a.element),m.domArgs=a,h){var y=b;a.Qc=y;if(DayPilot.Util.isReactComponent(h)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(h,y)}else y.appendChild(h)}else f&&(g.firstChild.innerHTML=t.html||"");r.nav.header.appendChild(m)}var n=e+1,i=this.Lc(n),a=i.length,o=n===r.headerLevels,l=r._(),d=e*r.headerHeight,c=[];r.nav.header.rows.push({"cells":c});var u=r.Vd(e);if(DayPilot.browser.ie)for(var h=a-1;h>=0;h--)t(h);else for(var h=0;h<a;h++)t(h)};this.Yd=function(e,t){for(var n=t?this.nav.header.insertRow(-1):this.nav.header.rows[e-1],i=this.Lc(e),a=i.length,o=e===r.headerLevels,l=0;l<a;l++){var d=i[l];if(r.cb()&&"function"==typeof r.onBeforeHeaderRender){var c={};c.header={},DayPilot.Util.copyProps(d,c.header,["id","start","name","html","backColor","toolTip","areas","children"]),this.onBeforeHeaderRender(c),DayPilot.Util.copyProps(c.header,d,["html","backColor","toolTip","areas"])}var u=!!d.getChildren,h=t?n.insertCell(-1):n.cells[l];if(h.data=d,o);else{var f=1;u&&(f=d.getChildrenCount(r.headerLevels-e+1)),h.colSpan=f}u&&(h.onclick=this.wb,h.onmousemove=this.xb,h.onmouseout=this.yb,d.toolTip&&(h.title=d.toolTip)),h.style.overflow="hidden",h.style.padding="0px",h.style.border="0px none",h.style.height=s.headerHeight()+"px";var v=t?document.createElement("div"):h.firstChild;if(t){v.setAttribute("unselectable","on"),v.style.MozUserSelect="none",v.style.KhtmlUserSelect="none",v.style.WebkitUserSelect="none",v.style.position="relative",v.style.height=s.headerHeight()+"px",v.className=r.G("_colheader");var p=document.createElement("div");p.className=r.G("_colheader_inner"),d.backColor&&(p.style.background=d.backColor),v.appendChild(p),h.appendChild(v)}else v.style.height=s.headerHeight()+"px";this.Xd(v,d),u&&(v.firstChild.innerHTML=d.html)}},this.Xd=function(e,t){for(var n=[],i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];a.isActiveArea&&n.push(a)}for(var i=0;i<n.length;i++){var a=n[i];DayPilot.de(a)}if(t.areas)for(var o=t.areas,i=0;i<o.length;i++){var s=o[i];if(DayPilot.Areas.isVisible(s)){var l=r.vb(t),d=DayPilot.Areas.createArea(e,l,s);e.appendChild(d)}}},this.Oa=function(){r.N?r.Zd():r.$d()},this.Zd=function(){var e=r.nav.header;if(r.sa(),this.showHeader){var t=this.Lc(r.headerLevels,!0),n=t.length;this._d=!0;var i=r.nav.corner;if(i){this.O||DayPilot.pu(i.firstChild);var a={};a.html=r.ca(r.cornerText,r.cornerHtml);var o=null;if(r.ta(),"function"==typeof r.onBeforeCornerRender&&r.onBeforeCornerRender(a),"function"==typeof r.onBeforeCornerDomAdd&&(a.element=null,r.onBeforeCornerDomAdd(a),o=a.element),o){var l=i.firstChild;l.domArgs=a;if(DayPilot.Util.isReactComponent(o)){if(!r.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");r.wa.reactDOM.render(o,l)}else l.appendChild(o)}else i.firstChild.innerHTML=a.html||""}for(var d=0;d<r.headerLevels;d++)this.Wd(d);if(this.showAllDayEvents){var c=[];r.nav.header.rows.push({"cells":c});for(var u=r._(),h=r.headerLevels*r.headerHeight,f=0;f<n;f++){var v=t[f],p=u[f],m=document.createElement("div");m.data=v,m.style.overflow="hidden",m.style.position="absolute",m.style.left=p.left+p.unit,m.style.right=p.left+p.unit,m.style.width=p.width+p.unit,m.style.top=h+"px";var g=document.createElement("div");g.setAttribute("unselectable","on"),g.style.userSelect="none",g.style.overflow="hidden",g.style.position="relative",g.style.height=s.allDayHeaderHeight()+"px",g.className=this.G("_alldayheader");var b=document.createElement("div");b.className=this.G("_alldayheader_inner"),g.appendChild(b),m.appendChild(g),g.style.height=s.allDayHeaderHeight()+"px",c.push(m),e.appendChild(m)}}}},this.$d=function(){if(this.showHeader){var e=this.nav.header,t=!0,n=this.Lc(r.headerLevels,!0),i=n.length;for(DayPilot.de(this.nav.header),this.Bd();this._d&&e&&e.rows&&e.rows.length>0;)this.O||DayPilot.pu(e.rows[0]),e.deleteRow(0);this._d=!0;var a=r.nav.corner;if(a){this.O||DayPilot.pu(a.firstChild);var o={};o.html=r.ca(r.cornerText,r.cornerHtml),"function"==typeof r.onBeforeCornerRender&&r.onBeforeCornerRender(o),a.firstChild.innerHTML=o.html?o.html:""}for(var l=0;l<r.headerLevels;l++)this.Yd(l+1,t);if(this.showAllDayEvents)for(var d=this.nav.header.insertRow(-1),l=0;l<i;l++){var c=n[l],u=d.insertCell(-1);u.data=c,u.style.padding="0px",u.style.border="0px none",u.style.overflow="hidden";var h=document.createElement("div");h.setAttribute("unselectable","on"),h.style.MozUserSelect="none",h.style.KhtmlUserSelect="none",h.style.WebkitUserSelect="none",h.style.overflow="hidden",h.style.position="relative",h.style.height=s.allDayHeaderHeight()+"px",h.className=this.G("_alldayheader");var f=document.createElement("div");f.className=this.G("_alldayheader_inner"),h.appendChild(f),u.appendChild(h),h.style.height=s.allDayHeaderHeight()+"px"}}},this.ia=function(e){var t=e?0:100;this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.callbackTimeout=window.setTimeout(function(){r.loadingLabelVisible&&r.nav.loading&&(r.nav.loading.innerHTML=r.ca(this.loadingLabelText,this.loadingLabelHtml),r.nav.loading.style.top=r.lb()+5+"px",r.nav.loading.style.display="")},t)},this.Ga=function(){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.nav.loading&&(this.nav.loading.style.display="none")},this.ae=function(e){var t=r.kb(!0);return e<t&&(e+=24),(e-t)*(60/r.cellDuration)*r.cellHeight},this.be=function(){var e=this.Y(),t=this.initScrollPos;if(!t){var n=this.businessBeginsHour;t=r.ae(n)}e.root=this,e.onscroll=this.jc,r.ba(),0===e.scrollTop?e.scrollTop=t-this.cc():this.jc()},this.ce=function(){var e=r.nav.top;return!!e&&(e.offsetWidth>0&&e.offsetHeight>0)},this.ee=function(){var e=r.ce;return e()?void r.fe():void(r.ge||(r.ge=setInterval(function(){e()&&(clearInterval(r.ge),r.be(),r.Va(),r.fe())},100)))},this.scrollToY=function(e){this.Y().scrollTop=e},this.scrollToHour=function(e){var t=r.ae(e);this.Y().scrollTop=t-this.cc()},this.Y=function(){return"Fixed"===this.columnWidthSpec||this.M?this.nav.bottomRight:this.nav.scroll},this.onCallbackError=function(e,t){alert("Error!\r\nResult: "+e+"\r\nContext:"+t)},this.Va=function(){if(r.showHeader){var e=this.zd(),t=!!this.nav.cornerRight;if(this.M){this.nav.unifiedCornerRight&&DayPilot.de(this.nav.unifiedCornerRight);var n=(r.Y(),r.nav.main.getBoundingClientRect().width),i=r.od();if("100%"!=i&&parseInt(i)<n)return;var a,o=DayPilot.sw(this.nav.bottomRight);r.N?(a=document.createElement("div"),a.style.position="absolute",a.style.left=n+"px",a.style.right=n+"px",a.style.height=r.lb()+"px",r.nav.headerParent.appendChild(a),r.nav.unifiedCornerRight=a,r.nav.header.style.width=n+"px"):(this.nav.unifiedCornerRight=this.nav.header.rows[0].insertCell(-1),a=this.nav.unifiedCornerRight,a.rowSpan=this.nav.header.rows.length),a.style.width=o+"px";var s=document.createElement("div");s.className=r.G("_cornerright"),s.setAttribute("unselectable","on"),s.style.overflow="hidden",s.style.height=this.lb()+"px",s.style.position="relative";var l=document.createElement("div");l.className=r.G("_cornerright_inner"),s.appendChild(l),a.appendChild(s);return void(!("Fixed"===this.columnWidthSpec)&&this.nav.allday&&(r.rtl?this.nav.allday.style.left=o+"px":this.nav.allday.style.right=o+"px"))}if(e!==t)if(e)this.Cd();else{if(this.nav.fullHeader&&3===this.nav.fullHeader.rows[0].cells.length){var a=this.nav.fullHeader.rows[0].cells[2];a.parentNode&&a.parentNode.removeChild(a)}this.nav.cornerRight=null}var d=this.nav.cornerRight;if(d){var o=DayPilot.sw(r.mb());return d&&(d.style.width=o+"px"),o}}},this.bb=function(e){if(e&&(this.autoRefreshEnabled=!0),this.autoRefreshEnabled&&!(this.R>=this.autoRefreshMaxCount)){this.oa();var t=this.autoRefreshInterval;if(!t||t<10)throw new DayPilot.Exception("The minimum autoRefreshInterval is 10 seconds");this.autoRefreshTimeout=window.setTimeout(function(){r.je()},1e3*this.autoRefreshInterval)}},this.oa=function(){this.autoRefreshTimeout&&window.clearTimeout(this.autoRefreshTimeout)},this.je=function(){if(!(DayPilot.Global.resizing||DayPilot.Global.moving||t.drag||DayPilot.Global.selecting)){var e=!1;if("function"==typeof this.onAutoRefresh){var n={};n.i=this.R,n.preventDefault=function(){this.preventDefault.value=!0},r.onAutoRefresh(n),n.preventDefault.value&&(e=!0)}!e&&this.I()&&this.commandCallBack(this.autoRefreshCommand),this.R++}this.R<this.autoRefreshMaxCount&&(this.autoRefreshTimeout=window.setTimeout(function(){r.je()},1e3*this.autoRefreshInterval))},this.xa=function(){r._a()},this._a=function(){r.Ua(),"Parent100Pct"===r.heightSpec&&r.setHeight(parseInt(r.nav.top.clientHeight,10)),r.Va(),r.ab(),r.ba()},this.ke=null,this.le=null,r.na=null,this.fe=function(){var e=function(){r._a(),r.jc()};if(r.watchWidthChanges){if("function"==typeof ResizeObserver){if(r.na)return;var t=new ResizeObserver(e);return t.observe(r.nav.top),void(r.na=t)}if(!r.le){var n=function(){return r.nav&&r.nav.top?r.ke?(r.ke.width!==r.nav.top.offsetWidth&&(r.ke.changed=!0,
r.ke.counter=0,r.ke.width=r.nav.top.offsetWidth),r.ke.changed&&(r.ke.counter+=1),void(r.ke.changed&&r.ke.counter>0&&(r.ke.changed=!1,e()))):(r.ke={},r.ke.counter=0,r.ke.changed=!1,void(r.ke.width=r.nav.top.offsetWidth)):void clearInterval(r.le)};this.le=setInterval(n,200),n()}}},this.me=function(){t.globalHandlers||(t.globalHandlers=!0,DayPilot.re(document,"mousemove",t.gMouseMove),DayPilot.re(document,"mouseup",t.gMouseUp),DayPilot.re(document,DayPilot.touch.move,t.gTouchMove),DayPilot.re(document,DayPilot.touch.end,t.gTouchEnd)),DayPilot.re(window,"resize",this.xa)},this.Wc=function(e){if(!o.active&&!o.using){e=e||window.event;var n=DayPilot.Util.mouseButton(e);if(t.editing)return void t.editing.blur();if("undefined"!=typeof DayPilot.Bubble&&(DayPilot.Bubble.hideActive(),DayPilot.Bubble.cancelShowing()),"n-resize"!==this.style.cursor&&"s-resize"!==this.style.cursor||!n.left){if(("move"===this.style.cursor||"Full"===r.moveBy&&this.event.client.moveEnabled())&&n.left){DayPilot.Global.moving=this;var i=DayPilot.Global.moving.helper={};i.oldColumn=r.eb[this.event.part.dayIndex].id,t.originalMouse=DayPilot.mc(e),t.originalTop=this.offsetTop;var a=DayPilot.mo3(this,e);a?t.moveOffsetY=a.y:t.moveOffsetY=0,r.nav.top.style.cursor=this.style.cursor}}else DayPilot.Global.resizing=this,t.originalMouse=DayPilot.mc(e),t.originalHeight=this.offsetHeight,t.originalTop=this.offsetTop,r.nav.top.style.cursor=this.style.cursor;return!1}},this.ne=function(e){var t=this.P.events,n=this.events.list[e],i={};for(var a in n)i[a]=n[a];if(r.showEventStartEnd){var o=n.start.getDatePart().getTime()===n.end.getDatePart().getTime(),l=o?s.locale().timePattern:s.locale().dateTimePattern,d=n.start.toString(l),c=n.end.toString(l);i.html=r.ca(i.text)+" ("+d+" - "+c+")"}if("function"==typeof this.onBeforeEventRender){var u={};u.e=i,u.data=i,this.onBeforeEventRender(u)}t[e]=i},this.Xc={};var o=r.Xc;o.active=!1,o.start=null,o.timeout=null,o.startcell=null,this.Xc.getCellCoords=function(e){var t,n;e.touches?(t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.pageX,n=e.pageY);var i=DayPilot.abs(r.nav.main),a={x:t-i.x,y:n-i.y},o=r.nav.main.clientWidth/r.eb.length;return{"pageX":t,"pageY":n,"x":Math.floor(a.x/o),"y":Math.floor(a.y/r.cellHeight),"toString":function(){return"x: "+this.x+" y:"+this.y}}},this.Xc.startSelecting=function(e){var n=r.nav.main.rows[e.y].cells[e.x];o.startcell=e,r.clearSelection(),t.column=t.getColumn(n),r.selectedCells.push(n),t.firstSelected=n,t.topSelectedCell=n,t.bottomSelectedCell=n,DayPilot.Global.selecting={"calendar":r},r.Zb()},this.Xc.extendSelection=function(e){var n=r.nav.main.rows[e.y].cells[e.x];r.clearSelection(),DayPilot.Global.selecting={"calendar":r},e.y<o.startcell.y?(r.selectedCells=t.getCellsBelow(n),t.topSelectedCell=r.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(r.selectedCells=t.getCellsAbove(n),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=r.selectedCells[0]),r.Zb()},this.Xc.detected=!1,this.Xc.onMainTouchStart=function(e){if(!(DayPilot.Util.isMouseEvent(e)||(o.start=!0,o.detected=!0,o.active||e.touches.length>1))){o.using=!0;var t=o.getCellCoords(e);o.startCoords=t;var n=r.tapAndHoldTimeout;o.timeout=window.setTimeout(function(){switch(e.preventDefault(),o.active=!0,o.start=!1,r.timeRangeTapAndHoldHandling){case"Select":o.startSelecting(t);break;case"ContextMenu":o.startSelecting(t),o.active=!1,r.contextMenuSelection&&r.contextMenuSelection.show(r.getSelection())}},n)}},this.Xc.onCellTouchMove=function(e){},this.Xc.onCellTouchEnd=function(e){if(!o.active)return window.clearTimeout(o.timeout),void(o.start&&!function(e){if("Disabled"!==r.timeRangeSelectedHandling){r.clearSelection(),r.selectedCells=[e],t.topSelectedCell=e,t.bottomSelectedCell=e,r.Zb();var n=r.getSelection();n.toString=function(){return"start: "+this.start+"\nend: "+this.end},setTimeout(function(){r.Qb(n.start,n.end,n.resource)},10)}}(this));e.preventDefault(),e.stopPropagation(),o.startcell=null,o.start=!1;var n=r.getSelection();n.toString=function(){return"start: "+this.start+"\nend: "+this.end},r.Qb(n.start,n.end,n.resource),window.setTimeout(function(){o.active=!1},500)},this.Xc.startMoving=function(e,n){DayPilot.Global.moving=e,(DayPilot.Global.moving.helper={}).oldColumn=r.eb[e.event.part.dayIndex].id,t.originalMouse=n,t.originalTop=this.offsetTop;var i=DayPilot.abs(e);t.moveOffsetY=n.y-i.y,t.movingShadow||(t.movingShadow=r.db(DayPilot.Global.moving,!r.V.ie),t.movingShadow.style.width=t.movingShadow.parentNode.offsetWidth+1+"px")},this.Xc.startResizing=function(e,n,i){DayPilot.Global.resizing=e,e.dpBorder=n,t.originalMouse=i,t.originalHeight=e.offsetHeight,t.originalTop=e.offsetTop},this.Xc.updateResizing=function(e){r.Od(e)},this.Xc.updateMoving=function(){var e=r.coords,n=r.cellHeight,i=0,a=t.moveOffsetY;a||(a=n/2);var o=Math.floor((e.y-a-i+n/2)/n)*n+i;o<i&&(o=i);var s=r.nav.main,l=r.Z(),d=parseInt(t.movingShadow.style.height);o+d>l&&(o=l-d),t.movingShadow.style.top=o+"px",t.movingShadow.allowed=!0;var c=s.clientWidth/s.rows[0].cells.length,u=Math.floor(e.x/c);u<0&&(u=0);var h=r.nav.events;u<h.rows[0].cells.length&&u>=0&&t.movingShadow.column!==u&&(t.movingShadow.column=u,t.moveShadow(h.rows[0].cells[u]))},this.Xc.onEventTouchStart=function(e){if(!o.active&&!DayPilot.Util.isMouseEvent(e)){e.stopPropagation(),o.preventEventTap=!1,o.using=!0,o.startCoords=o.getCellCoords(e);var t=this,n=e.touches?e.touches[0].pageX:e.pageX,i=e.touches?e.touches[0].pageY:e.pageY,a={x:n,y:i,div:this};r.coords=o.relativeCoords(e);var s=r.tapAndHoldTimeout;o.timeout=window.setTimeout(function(){var n=t.event;switch(o.active=!0,r.eventTapAndHoldHandling){case"Move":n.client.moveEnabled()&&o.startMoving(t,a);break;case"ContextMenu":var i=n.client.contextMenu();DayPilot.Menu&&DayPilot.Menu.touchPosition(e),i?i.show(n):r.contextMenu&&r.contextMenu.show(n)}},s)}},this.Xc.onMainTouchMove=function(e){if(!DayPilot.Util.isMouseEvent(e)){if(o.start=!1,o.timeout){var n=o.getCellCoords(e);n&&o.startCoords&&(n.pageX===o.startCoords.pageX&&n.pageY===o.startCoords.pageY||window.clearTimeout(r.Xc.timeout))}if(DayPilot.Global.moving&&t.movingShadow)return e.preventDefault(),r.coords=o.relativeCoords(e),void o.updateMoving();if(DayPilot.Global.resizing){e.preventDefault();var i=e.touches?e.touches[0]:e,n={x:i.pageX,y:i.pageY};return void o.updateResizing(n)}if(o.startcell){if(e.preventDefault(),!o.active)return void window.clearTimeout(o.timeout);var n=o.getCellCoords(e);o.extendSelection(n)}o.preventEventTap=!0}},this.Xc.relativeCoords=function(e){var t=r.nav.main,n=e.touches?e.touches[0].pageX:e.pageX,i=e.touches?e.touches[0].pageY:e.pageY,a=DayPilot.abs(t);return{x:n-a.x,y:i-a.y,"toString":function(){return"x: "+this.x+", y:"+this.y}}},this.Xc.onMainTouchEnd=function(e){if(!DayPilot.Util.isMouseEvent(e))if(DayPilot.Global.moving){o.active=!1,e.preventDefault(),e.stopPropagation();var n=t.movingShadow.offsetTop,i=DayPilot.Global.moving.event,a=i.calendar;a.fc(t.movingShadow);var r=t.movingShadow.column,s=t.movingShadow;if(DayPilot.Global.moving=null,t.movingShadow=null,!s.allowed)return void a.Jb();i.calendar.Ib(i,r,n,e,t.drag)}else if(o.startcell){if(!o.active)return void window.clearTimeout(o.timeout);e.preventDefault(),o.startcell=null;var l=a.getSelection();l.toString=function(){return"start: "+this.start+"\nend: "+this.end},a.Qb(l.start,l.end,l.resource),window.setTimeout(function(){o.active=!1},500)}},this.Xc.onEventTouchMove=function(e){o.preventEventTap=!0},this.Xc.onEventTouchEnd=function(e){if(!DayPilot.Util.isMouseEvent(e)){if(!o.active){if(o.preventEventTap)return;return window.clearTimeout(o.timeout),void r.qb(this,!1,!1,e)}return o.active=!1,o.timeout?void window.clearTimeout(o.timeout):void 0}},this.Uc=function(e){var n=5,i=10,a="Top"===r.moveBy;if("undefined"!=typeof t){var o=DayPilot.mo3(this,e);if(o){r.eventOffset=o;var s=this;if(s.active||DayPilot.Util.addClass(s,r.G("_event_hover")),!DayPilot.Global.resizing&&!DayPilot.Global.moving){var l=this.isFirst,d=this.isLast;if("Disabled"!==r.moveBy&&"None"!==r.moveBy&&(!a&&o.x<=i&&this.event.client.moveEnabled()?l?this.style.cursor="move":this.style.cursor="not-allowed":!a&&o.y<=n&&this.event.client.resizeEnabled()?l?(this.style.cursor="n-resize",this.dpBorder="top"):this.style.cursor="not-allowed":a&&o.y<=i&&this.event.client.moveEnabled()?this.style.cursor="move":this.offsetHeight-o.y<=n&&this.event.client.resizeEnabled()?d?(this.style.cursor="s-resize",this.dpBorder="bottom"):this.style.cursor="not-allowed":DayPilot.Global.resizing||DayPilot.Global.moving||(this.event.client.clickEnabled()?this.style.cursor="pointer":this.style.cursor="default"),"undefined"!=typeof DayPilot.Bubble&&r.bubble&&"Disabled"!==r.eventHoverHandling&&("default"===this.style.cursor||"pointer"===this.style.cursor))){this.oe&&o.x===this.oe.x&&o.y===this.oe.y||(this.oe=o,r.bubble.showEvent(this.event))}}}}},this.Vc=function(e){DayPilot.Util.removeClass(this,r.G("_event_hover")),r.bubble&&r.bubble.hideOnMouseOut(),DayPilot.Areas.hideAreas(this,e)},this.pe=null,this.Xa=function(){if(this.showCurrentTime){this.qe();var e=(new DayPilot.Date).addMinutes(r.showCurrentTimeOffset);if("Full"===r.showCurrentTimeMode)this.se(e);else{if("Day"!==r.showCurrentTimeMode)throw new DayPilot.Exception("Invalid DayPilot.Calendar.showCurrentTimeMode value: "+r.showCurrentTimeMode);this.te(e)}if(this.nav.events&&!this.pe){this.pe=setTimeout(function(){r.pe=null,r.Xa()},3e4)}}},this.qe=function(){DayPilot.de(r.elements.separators),r.elements.separators=[]},this.te=function(e){var t=e.getTime(),n=r.nav.events;if(n)for(var i=0;i<r.eb.length;i++){var a=r.eb[i],o=r.gb(!0),s=new DayPilot.Date(a.start).addHours(this.kb(!0)),l=s.getTime(),d=s.addTime(o),c=d.getTime();if(l<=t&&t<=c){var u=this.bc(e,a.start).top-1-r.cc(),h=n.rows[0].cells[i],f=h.separators,v=document.createElement("div");v.style.position="absolute",v.style.top=u+"px",v.style.height="1px",v.style.left="0px",v.style.right="0px",v.className=r.G("_now"),f.insertBefore(v,f.firstChild),r.elements.separators.push(v)}}},this.se=function(e){var t=e.getTime();if(r.nav.events){var n=r.eb[0];if(n)for(var i=n.start.getDatePart().addTime(e.getTimePart()),a=this.bc(i,n.start).top-1,o=0;o<r.eb.length;o++){var n=r.eb[o],s=r.gb(!0),l=new DayPilot.Date(n.start).addHours(this.kb(!0)),d=l.getTime(),c=l.addTime(s),u=c.getTime();if(d<=t&&t<=u){var h=document.createElement("div");return h.style.position="absolute",h.style.top=a+"px",h.style.height="1px",h.style.left="0px",h.style.right="0px",h.className=r.G("_now"),r.nav.events.appendChild(h),void r.elements.separators.push(h)}}}},this.Ma=function(e){if(e?this.events.list=e:e=this.events.list,e){this.Pc={},this.Pc.events=[],this.Pc.lines=[];var t=e.length,n=this.gb(!0);this.P.pixels={},this.P.Zc=[];var i=[];this.qc=[],this.Bb=1e4,this.jb=0,this.startDate=new DayPilot.Date(this.startDate);for(var a=0;a<t;a++){var o=e[a];if("object"!=typeof o)throw new DayPilot.Exception("Event data item must be an object");if(!o.start)throw new DayPilot.Exception("Event data item must specify 'start' property");o.start=new DayPilot.Date(o.start),o.end=new DayPilot.Date(o.end)}if("function"==typeof this.onBeforeEventRender||r.showEventStartEnd)for(var a=0;a<t;a++)this.ne(a);for(var l="Resources"===this.viewType,d=this.Mc(),c=d.start,u=d.end,a=0;a<this.eb.length;a++){var h={};h.minEnd=1e6,h.maxStart=-1,this.qc.push(h);var f=this.eb[a];f.events=[],f.lines=[],f.blocks=[];var v=new DayPilot.Date(f.start).addHours(this.kb(!0)),p=v.getTime(),m=v.addTime(n),g=m.getTime();l&&(c=v.getDatePart(),u=v.addDays(1));for(var b=0;b<t;b++)if(!i[b]){var o=e[b],y=null;if("function"==typeof r.onBeforeEventRender&&(y=r.P.events[b]),y){if(y.hidden)continue}else if(o.hidden)continue;var w=o.start,x=o.end,k=w.getTime(),C=x.getTime();if(!(C<k))if(o.allday){var S=!1;if(S=k===C?!(C<c.getTime()||k>=u.getTime()):"Date"===r.allDayEnd?!(C<c.getTime()||k>=u.getTime()):!(C<=c.getTime()||k>=u.getTime()),l&&(S=S&&(o.resource===f.id||"*"===f.id)),S){var E=new DayPilot.Event(o,this);if(E.part.start=c.getTime()<k?w:c,E.part.end=u.getTime()>C?x:u,E.part.colStart=DayPilot.DateUtil.daysDiff(c,E.part.start),E.part.colWidth=DayPilot.DateUtil.daysSpan(E.part.start,E.part.end)+1,l&&(E.part.colStart=a,E.part.colWidth=1),"function"==typeof r.onEventFilter&&r.events.ve){var D={};if(D.filter=r.events.ve,D.visible=!0,D.e=E,r.onEventFilter(D),!D.visible)continue}this.Pc.events.push(E),("function"==typeof this.onBeforeEventRender||r.showEventStartEnd)&&(E.cache=this.P.events[b]),i[b]=!0,!l||E.part.start.getTime()===k&&E.part.end.getTime()===C||(i[b]=!1)}}else{var y=null;if("function"==typeof r.onBeforeEventRender&&(y=r.P.events[b]),y){if(y.hidden)continue}else if(o.hidden)continue;var S=!1;if(S=l?f.id===o.resource&&!(C<=p||k>=g):!(C<=p||k>=g)||C===k&&k===p){var E=new DayPilot.Event(o,r);E.part.dayIndex=a,E.part.start=p<k?w:v,E.part.end=g>C?x:m;var T=this.bc(E.part.start,f.start),A=this.bc(E.part.end,f.start),_=T.top,M=A.top;if(_===M&&(T.cut||A.cut))continue;E.part.box=s.useBox(C-k);var H=0;if(E.part.box){var R=A.boxBottom;E.part.top=Math.floor(_/this.cellHeight)*this.cellHeight+H,E.part.height=Math.max(Math.ceil(R/this.cellHeight)*this.cellHeight-E.part.top,this.cellHeight-1),E.part.barTop=Math.max(_-E.part.top-1,0),E.part.barHeight=Math.max(M-_-2,1)}else E.part.top=_+H,E.part.height=Math.max(M-_,0),E.part.barTop=0,E.part.barHeight=Math.max(M-_-2,1);if("function"==typeof r.onEventFilter&&r.events.ve){var D={};if(D.filter=r.events.ve,D.visible=!0,D.e=E,r.onEventFilter(D),!D.visible)continue}var w=E.part.top,x=E.part.top+E.part.height;w>h.maxStart&&(h.maxStart=w),x<h.minEnd&&(h.minEnd=x),w<this.Bb&&(this.Bb=w),x>this.jb&&(this.jb=x),f.events.push(E),("function"==typeof this.onBeforeEventRender||r.showEventStartEnd)&&(E.cache=this.P.events[b]),E.part.start.getTime()===k&&E.part.end.getTime()===C&&(i[b]=!0),r.P.Zc.push(E)}}}}for(var a=0;a<this.eb.length;a++){var f=this.eb[a];f.events.sort(this.we);for(var b=0;b<f.events.length;b++){var o=f.events[b];f.putIntoBlock(o)}for(var b=0;b<f.blocks.length;b++){var B=f.blocks[b];B.events.sort(this.xe);for(var P=0;P<B.events.length;P++){var o=B.events[P];B.putIntoLine(o)}}}this.Pc.events.sort(this.xe),this.Pc.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var n=this.lines[t];if(n.isFree(e.part.colStart,e.part.colWidth))return n.push(e),t}var n=[];return n.isFree=function(e,t){for(var n=e+t-1,i=this.length,a=0;a<i;a++){var r=this[a];if(!(n<r.part.colStart||e>r.part.colStart+r.part.colWidth-1))return!1}return!0},n.push(e),this.lines.push(n),this.lines.length-1};for(var a=0;a<this.Pc.events.length;a++){var o=this.Pc.events[a];this.Pc.putIntoLine(o)}var N=Math.max(this.Pc.lines.length,1);this.P.allDayHeaderHeight=N*(s.allDayEventHeight()+2)+2}},this.we=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var n=e.start().ticks-t.start().ticks;return 0!==n?n:t.end().ticks-e.end().ticks},this.xe=function(e,t){if(!e||!t)return 0;if(!(e.data&&t.data&&e.data.sort&&t.data.sort&&0!==e.data.sort.length&&0!==t.data.sort.length))return r.we(e,t);for(var n=0,i=0;0===n&&"undefined"!=typeof e.data.sort[i]&&"undefined"!=typeof t.data.sort[i];)n=e.data.sort[i]===t.data.sort[i]?0:"number"==typeof e.data.sort[i]&&"number"==typeof t.data.sort[i]?e.data.sort[i]-t.data.sort[i]:r.ye(e.data.sort[i],t.data.sort[i],r.sortDirections[i]),i++;return n},this.ye=function(e,t,n){var i="desc"!==n,a=i?-1:1,r=-a;if(null===e&&null===t)return 0;if(null===t)return r;if(null===e)return a;var o=[];return o[0]=e,o[1]=t,o.sort(),e===o[0]?a:r},this.ze=function(e){for(var t=0;t<r.elements.events.length;t++){var n=r.elements.events[t];if(n.event===e||n.event.data===e.data)return n}return null},this.events.find=function(e){if(!r.events.list||"undefined"==typeof r.events.list.length)return null;for(var t=r.events.list.length,n=0;n<t;n++)if(r.events.list[n].id===e)return new DayPilot.Event(r.events.list[n],r);return null},this.events.findRecurrent=function(e,t){if(!r.events.list||"undefined"==typeof r.events.list.length)return null;for(var n=r.events.list.length,i=0;i<n;i++)if(r.events.list[i].recurrentMasterId===e&&r.events.list[i].start.getTime()===t.getTime())return new DayPilot.Event(r.events.list[i],r);return null},this.events.all=function(){for(var e=[],t=0;t<r.events.list.length;t++){var n=new DayPilot.Event(r.events.list[t],r);e.push(n)}return DayPilot.list(e)},this.events.edit=function(e){function t(){var t=r.ze(e);t&&r.rb(t)}t()},this.events.update=function(e,t){if("object"==typeof e&&!(e instanceof DayPilot.Event)){var n=r.events.find(e.id);if(!n)throw new DayPilot.Exception("The event to be updated was not found");return r.events.remove(n),void r.events.add(e)}var i={};i.oldEvent=new DayPilot.Event(e.copy(),r),i.newEvent=new DayPilot.Event(e.temp(),r);var a=new DayPilot.Action(r,"EventUpdate",i,t);return e.commit(),r.S&&r.Ic({"eventsOnly":!0}),r.Ae.notify(),a},this.events.remove=function(e,t){if("string"==typeof e||"number"==typeof e){var n=e,i=r.events.find(n);if(!i)throw new DayPilot.Exception("The event to be removed was not found");return void r.events.remove(i)}var a={};a.e=new DayPilot.Event(e.data,r);var o=new DayPilot.Action(r,"EventRemove",a,t),s=DayPilot.indexOf(r.events.list,e.data);return r.events.list.splice(s,1),r.S&&r.Ic({"eventsOnly":!0}),r.Ae.notify(),o},this.events.add=function(e,t){e instanceof DayPilot.Event||(e=new DayPilot.Event(e)),e.calendar=r,r.events.list||(r.events.list=[]),r.events.list.push(e.data);var n={};n.e=e;var i=new DayPilot.Action(r,"EventAdd",n,t);return r.S&&r.Ic({"eventsOnly":!0}),r.Ae.notify(),i},this.events.filter=function(e){r.events.ve=e,r.Ic({"eventsOnly":!0})},this.events.load=function(e,t,n){var i=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof n&&n(t)},a=function(e){var n,a=e.request;try{n=JSON.parse(a.responseText)}catch(e){var o={};return o.exception=e,void i(o)}if(DayPilot.isArray(n)){var s={};if(s.preventDefault=function(){this.preventDefault.value=!0},s.data=n,"function"==typeof t&&t(s),s.preventDefault.value)return;r.events.list=n,r.S&&r.Ic({"eventsOnly":!0})}};if(r.eventsLoadMethod&&"POST"===r.eventsLoadMethod.toUpperCase())DayPilot.ajax({"method":"POST","data":{"start":r.visibleStart().toString(),"end":r.visibleEnd().toString()},"url":e,"success":a,"error":i});else{var o=e,s="start="+r.visibleStart().toString()+"&end="+r.visibleEnd().toString();o+=o.indexOf("?")>-1?"&"+s:"?"+s,DayPilot.ajax({"method":"GET","url":o,"success":a,"error":i})}},this.events.forRange=function(e,t){return e=new DayPilot.Date(e),t=new DayPilot.Date(t),DayPilot.list(r.events.list).filter(function(n){var i=new DayPilot.Date(n.start),a=new DayPilot.Date(n.end);return DayPilot.Util.overlaps(e,t,i,a)}).map(function(e){return new DayPilot.Event(e,r)})},this.events.$b=function(e){if(!e)throw new DayPilot.Exception("Error checking overlap for null (internal error)");var t=e instanceof DayPilot.Event?e.data:e,n=new DayPilot.Date(t.start),i=new DayPilot.Date(t.end);return!!DayPilot.list(r.events.list).find(function(e){if(r.Ec(t,e))return!1;if("Resources"==r.viewType&&t.resource!==e.resource)return!1;if(e.allday)return!1;var a=new DayPilot.Date(e.start),o=new DayPilot.Date(e.end);return DayPilot.Util.overlaps(n,i,a,o)})},this.Ec=function(e,t){return DayPilot.Util.isSameEvent(e,t)},this.wa={},this.wa.reactDOM=null,this.wa.react=null,this.queue={},this.queue.list=[],this.queue.list.ignoreToJSON=!0,this.queue.add=function(e){if(e){if(!e.isAction)throw new DayPilot.Exception("DayPilot.Action object required for queue.add()");r.queue.list.push(e)}},this.queue.notify=function(e){var t={};t.actions=r.queue.list,r.ha("Notify",t,e,"Notify"),r.queue.list=[]},this.queue.clear=function(){r.queue.list=[]},this.queue.pop=function(){return r.queue.list.pop()},this.Ic=function(e){if(this.S&&this.eb){var e=e||{},t=!e.eventsOnly;r.cssOnly||(r.cssOnly=!0),r.ba(),t?(this.I()||(r.cellProperties={}),r.ea.clearCache(),r.pa(),r.Be(),r.Ka(),r.Ma(),r.Oa(),r.Pa(),r.Na(),r.Qa(),r.Ra(),r.W(),r.Sa(),r.Zb(),r.Ta(),r.Ua(),r.Va(),r.Wa(),r.Ce(),r.Za(),r.$a(),r.Xa(),r.ab()):(r.pa(),r.Ma(),r.Na(),r.Za(),r.$a(),r.ab()),this.visible?this.show():this.hide()}},this.update=function(e){if(!r.S)throw new DayPilot.Exception("You are trying to update a DayPilot.Calendar instance that hasn't been initialized yet.");if(r.T)throw new DayPilot.Exception("You are trying to update a DayPilot.Calendar instance that has been disposed.");if(!r.S)return void r.De(e);if(DayPilot.Util.isOnlyProperty(e,"events"))return r.events.list=e.events,void r.Ic({"eventsOnly":!0});if(this.De(e),this.Ic(),"function"==typeof r.onAfterRender){var t={};t.isUpdate=!0,t.data=null,r.onAfterRender(t)}},this.Ce=function(){if(r.nav.top.className!==r.G("_main")){r.nav.top.className=r.G("_main");var e=r.nav.corner;e.className=r.G("_corner"),e.firstChild.className=r.G("_corner_inner");var t=r.nav.unifiedCornerRight;t&&(t.firstChild.className=r.G("_cornerright"),t.firstChild.firstChild.className=r.G("_cornerright_inner"))}},this.show=function(){r.visible=!0,r.nav.top.style.display="",r._a(),r.jc()},this.hide=function(){r.visible=!1,r.nav.top.style.display="none"},this.Ae={},this.Ae.scope=null,this.Ae.notify=function(){r.Ae.scope&&r.Ae.scope["$apply"]()},this.debug=new DayPilot.Debug(this),this.Pd=function(e,t){if(e<0)return null;r.rtl&&(e=r.nav.main.offsetWidth-e);var n=0,i=r.nav.events.rows[0].cells;if(DayPilot.browser.ie&&!t)for(var a=i.length-1;a>=0;a--){var o=i[a],s=o.offsetWidth;if(n+=s,e<n)return a}else for(var a=0;a<i.length;a++){var o=i[a],s=o.offsetWidth;if(n+=s,e<n)return a}return null},this.bc=function(e,t){t||(t=this.startDate);var n=t.getTime(),i=e.getTime(),a=this.P.pixels[i+"_"+n];if(a)return a;this.kb(!0);n=t.addHours(this.kb(!0)).getTime();var r=60*this.cellDuration*1e3,o=i-n,s=o%r,l=o-s,d=l+r;0===s&&(d=l);var c={};return c.cut=!1,c.top=this.Ld(o),c.boxTop=this.Ld(l),c.boxBottom=this.Ld(d),this.P.pixels[i+"_"+n]=c,c},this.Ld=function(e){return Math.floor(this.cellHeight*e/(6e4*this.cellDuration))},this.Be=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart(),this.Ee=s.allDayEventHeight()+4},this.Na=function(){var e=this.lb(),t=this.cd();if(this.nav.corner&&(this.nav.corner.style.height=e+"px"),this.nav.cornerRight&&(this.nav.cornerRight.style.height=e+"px"),this.nav.mid&&(this.nav.mid.style.height=e+"px"),this.showAllDayEvents&&this.nav.header)for(var n=this.nav.header.rows[this.nav.header.rows.length-1],i=0;i<n.cells.length;i++){var a=n.cells[i];a.firstChild.style.height=s.allDayHeaderHeight()+"px"}this.nav.upperRight&&(this.nav.upperRight.style.height=e+"px"),this.nav.scroll.style.top=e+"px",this.nav.top.style.height=t+"px"},this.Ua=function(){var e=this.dd();this.nav.scroll&&e>0&&(this.nav.scroll.style.height=e+"px",this.kc=r.nav.scroll.clientHeight,this.nav.bottomLeft&&(this.nav.bottomLeft.style.height=e+"px"),this.nav.bottomRight&&(this.nav.bottomRight.style.height=e+"px")),"Parent100Pct"===this.heightSpec?this.nav.top.style.height="100%":this.nav.top.style.height=this.cd()+"px"},this.setHeight=function(e){"Parent100Pct"!==this.heightSpec&&(this.heightSpec="Fixed"),this.height=e-this.lb(),this.Ua()},this.Fe=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e),document.body.appendChild(t);var n=t.offsetHeight,i=t.offsetWidth;document.body.removeChild(t);var a={};return a.height=n,a.width=i,a},this.ea={};var s=this.ea;s.da=function(){return"Disabled"!==r.xssProtection},s.locale=function(){return DayPilot.Locale.find(r.locale)},s.weekStarts=function(){return"number"==typeof r.weekStarts?r.weekStarts:s.locale().weekStarts},s.timeFormat=function(){return"Auto"!==r.timeFormat?r.timeFormat:this.locale().timeFormat},s.useBox=function(e){return"Always"===r.useEventBoxes||"Never"!==r.useEventBoxes&&e<60*r.cellDuration*1e3},s.notifyType=function(){var e;if("Immediate"===r.notifyCommit)e="Notify";else{if("Queue"!==r.notifyCommit)throw new DayPilot.Exception("Invalid notifyCommit value: "+r.notifyCommit);e="Queue"}return e},s.clearCache=function(){delete r.P.allDayEventHeight,delete r.P.allDayHeaderHeight,delete r.P.headerHeight},s.allDayEventHeight=function(){if(r.P.allDayEventHeight)return r.P.allDayEventHeight;var e=r.Fe("_alldayevent_height").height;return e||(e=r.allDayEventHeight),r.P.allDayEventHeight=e,e},s.allDayHeaderHeight=function(){if(r.P.allDayHeaderHeight)return r.P.allDayHeaderHeight;var e=r.Ee;return r.P.allDayHeaderHeight=e,e},s.headerHeight=function(){if(r.P.headerHeight)return r.P.headerHeight;var e=r.Fe("_header_height").height;return e||(e=r.headerHeight),r.P.headerHeight=e,e},this.exportAs=function(e,t){if(!r.ce())throw new DayPilot.Exception("DayPilot.Calendar.exportAs(): The instance must be visible during export.");var n=l.generate(e,t);return new DayPilot.Export(n)},this.Ge={};var l=this.Ge;l.He=null,l.Ie=null,l.generate=function(e,t){"object"==typeof e&&(t=e,e=null);var t=t||{},e=e||t.format||"svg",n=t.scale||1;if("config"!==e){"jpg"===e.toLowerCase()&&(e="jpeg");var i=t.area||"viewport";l.He=t,l.Ie=i;var a,o=l.getWidth(),d=l.getHeight();switch(e.toLowerCase()){case"svg":a=new DayPilot.Svg(o,d);break;case"png":a=new DayPilot.Canvas(o,d,"image/png",n);break;case"jpeg":a=new DayPilot.Canvas(o,d,"image/jpeg",n,t.quality);break;default:throw new DayPilot.Exception("Export format not supported: "+e)}var c=l.getRectangles(),u=new DayPilot.StyleReader(r.nav.top).getBackColor(),h=new DayPilot.StyleReader(r.nav.top).get("border-top-color");"0px"!==new DayPilot.StyleReader(r.nav.top).get("border-top-width")||(h="white");var f=new DayPilot.StyleReader(r.nav.corner.firstChild).getBackColor(u),v=r.nav.hourTable.rows[0].cells[0].firstChild.firstChild,p=new DayPilot.StyleReader(v).get("border-right-color"),m=new DayPilot.StyleReader(v).getBackColor(u),g=new DayPilot.StyleReader(v).getFont(),b=new DayPilot.StyleReader(v.firstChild.childNodes[1]).getFont(),y=new DayPilot.StyleReader(v.firstChild.childNodes[1]).getPx("padding-right"),w=new DayPilot.StyleReader(v).get("color"),x=r.nav.header.rows[0].cells[0].firstChild.firstChild,k=new DayPilot.StyleReader(x).getBackColor(u),C=new DayPilot.StyleReader(x).getFont(),S=new DayPilot.StyleReader(x).get("color"),E=new DayPilot.StyleReader(x).get("border-right-color"),D=r.nav.header.rows[r.nav.header.rows.length-1].cells[0].firstChild,T=D.firstChild,A=new DayPilot.StyleReader(D).getBackColor(u),_=new DayPilot.StyleReader(T).getBackColor(A),M=r.nav.main.rows[0].cells[0].firstChild.firstChild,H=new DayPilot.StyleReader(M).get("border-right-color"),M=l.fakeCell(),R=new DayPilot.StyleReader(M.firstChild).getBackColor();DayPilot.Util.addClass(M,r.G("_cell_business"));var B=new DayPilot.StyleReader(M.firstChild).getBackColor();DayPilot.de(M);var P=l.getViewportOffsetTop(),N=0;N="Fixed"===r.columnWidthSpec?r.columnWidth:c.gridContent.w/r.eb.length,a.fillRect(c.main,"white"),a.fillRect(c.main,u);var U=c.corner.h-P;DayPilot.list.for(r.qd(),function(e){return r.vd(e)}).each(function(e){var t=r.sd(),n=e.hour,i=e.sup,o=n,s=20,l={"x":0,"y":U,"w":c.grid.x+1,"h":t+1},d={"x":0,"y":U,"w":c.grid.x+1-s,"h":t+1},u={"x":d.w,"y":U,"w":s-y-1,"h":t+1},h=m;a.fillRect(l,h),a.text(d,o,g,w,"right"),a.text(u,i,b,w,"right"),a.rect(l,p),U+=t});var I=60*r.cellDuration*1e3,L=c.grid.x;DayPilot.list(r.eb).each(function(e,t){var n=N,i=c.grid.y-P;DayPilot.list.for(r.ob()).each(function(o,s){var d=r.Jd(t,s)||{},c=null;if(d.cssClass){var u=l.fakeCell();DayPilot.Util.addClass(u,d.cssClass),c=new DayPilot.StyleReader(u.firstChild).getBackColor(),DayPilot.de(u)}var h=r.cellHeight,f={"x":L,"y":i,"w":n+1,"h":h+1},v=d.business,p={};p.cell={},p.cell.start=e.start.addTime(s*I).addHours(r.kb()),p.cell.end=p.cell.start.addTime(I),p.cell.resource=e.id,DayPilot.Util.copyProps(d,p.cell,["cssClass","html","backImage","backRepeat","backColor","business"]),p.backColor=c||(v?B:R),"function"==typeof r.onBeforeCellExport&&r.onBeforeCellExport(p),a.fillRect(f,p.backColor),a.rect(f,H),i+=h}),L+=n});var z=c.grid.x;DayPilot.list(r.eb).each(function(e){DayPilot.list(e.events).each(function(e){var t=e.cache||e.data,n=l.fakeEvent();n.className+=" "+t.cssClass;var i=n.firstChild,o=n.childNodes[1],s=new DayPilot.StyleReader(i).getBackColor(),d=new DayPilot.StyleReader(i.firstChild).getBackColor(),u=new DayPilot.StyleReader(i.firstChild).getPx("width"),h=new DayPilot.StyleReader(o).get("border-right-color"),f=new DayPilot.StyleReader(o).getFont(),v=new DayPilot.StyleReader(o).get("color"),p=new DayPilot.StyleReader(o).getBackColor(),m={};m.left=new DayPilot.StyleReader(o).getPx("padding-left"),m.right=new DayPilot.StyleReader(o).getPx("padding-right"),m.top=new DayPilot.StyleReader(o).getPx("padding-top"),m.bottom=new DayPilot.StyleReader(o).getPx("padding-bottom"),DayPilot.de(n);var g=z+N*e.part.left/100,b=(N-r.columnMarginRight)*e.part.width/100,y=e.part.top+c.grid.y-r.cc()-P,w=e.part.height,x=t.backColor||p,k=t.barColor||d,C=t.barBackColor||s,S={};S.e=e,S.text=e.text?e.text():e.client.html(),S.fontSize=f.size,S.fontFamily=f.family,S.fontStyle=f.style,S.fontColor=v,S.backColor=x,S.borderColor=h,S.horizontalAlignment="left",S.barWidth=u,S.barColor=k,S.barBackColor=C,"function"==typeof r.onBeforeEventExport&&r.onBeforeEventExport(S);var E={"x":g,"y":y,"w":b+1,"h":w+1},D=DayPilot.Util.copyProps(E);e.client.barVisible()&&(D.x+=u,D.w-=u);var T=DayPilot.Util.copyProps(D);if(T.x+=m.left,T.w-=m.left+m.right,T.y+=m.top,T.h-=m.top+m.bottom,a.fillRect(E,S.backColor),e.client.barVisible()){var A={"x":E.x,"y":E.y,"w":S.barWidth,"h":E.h},_={"x":E.x,"y":E.y+1+e.part.barTop,"w":S.barWidth,"h":e.part.barHeight+1};a.fillRect(A,S.barBackColor),a.fillRect(_,S.barColor)}a.text(T,S.text,{"size":S.fontSize,"family":S.fontFamily,"style":S.fontStyle},S.fontColor,S.horizontalAlignment),a.rect(E,S.borderColor);var g=E.x,M=E.x+E.w-2,y=E.y;DayPilot.list(t.areas).each(function(t){if(DayPilot.Areas.isVisible(t)){var n=t.left;t.start&&(n=r.getPixels(new DayPilot.Date(t.start)).left-e.part.left);var i=t.width||t.w,o=t.height||t.h;n||(n=M-i-g),t.right?i=e.part.width-t.right-n:t.end&&(i=r.getPixels(new DayPilot.Date(t.end)).left-t.left-e.part.left+1);var s=t.top;"number"==typeof t.bottom&&(o=e.part.height-t.bottom-s);var l={"x":g+n,"y":y+s,"w":i,"h":o};if(t.backColor&&a.fillRect(l,t.backColor),t.image){var d=new Image;d.src=t.image,a.image(l,d)}else t.html&&a.text(l,t.html,{"size":S.fontSize,"family":S.fontFamily,"style":S.fontStyle},t.fontColor||S.fontColor,null,t.padding)}})}),z+=N}),a.fillRect(c.corner,f);var O=1;return"Fixed"!==r.columnWidthSpec&&(O=c.gridContent.w/100),DayPilot.list.for(r.headerLevels).each(function(e){var t=c.gridContent.x,n=r.headerHeight*e,i=r.Lc(e+1),o=r.Vd(e);DayPilot.list(i).forEach(function(i,s){var l={};l.text=DayPilot.Util.stripTags(i.html),l.horizontalAlignment="center",l.verticalAlignment="center",l.backColor=i.backColor||k,l.fontSize=C.size,l.fontFamily=C.family,l.fontStyle=C.style,l.fontColor=S,l.header={},l.header.level=e,DayPilot.Util.copyProps(i,l.header,["id","start","name","html","backColor"]),"function"==typeof r.onBeforeHeaderExport&&r.onBeforeHeaderExport(l);var d=0===o.length,c=d?N:o[s].width*O,u=d?t:t+o[s].left*O,h=r.headerHeight,f={"x":u,"y":n,"w":c+1,"h":h+1};a.fillRect(f,l.backColor),a.rect(f,E),a.text(f,l.text,{"size":l.fontSize,"family":l.fontFamily,"style":l.fontStyle},l.fontColor,l.horizontalAlignment,0,l.verticalAlignment),d&&(t+=N)})}),function(){if(r.showAllDayEvents){var e=r.headerHeight*r.headerLevels,t=c.gridContent.x;DayPilot.list(r.eb).each(function(n){var i=N,r=s.allDayHeaderHeight(),o={"x":t,"y":e,"w":i+1,"h":r+1};a.fillRect(o,_),a.rect(o,E),t+=N}),DayPilot.list(r.Pc.lines).each(function(e,t){DayPilot.list(e).each(function(e){var n=l.fakeEvent("alldayevent");n.className+=" "+e.data.cssClass;var i=n.firstChild,o=new DayPilot.StyleReader(i).get("border-right-color"),d=new DayPilot.StyleReader(i).getFont(),u=new DayPilot.StyleReader(i).get("color"),h=new DayPilot.StyleReader(i).getBackColor(),f={};
f.left=new DayPilot.StyleReader(i).getPx("padding-left"),f.right=new DayPilot.StyleReader(i).getPx("padding-right"),f.top=new DayPilot.StyleReader(i).getPx("padding-top"),f.bottom=new DayPilot.StyleReader(i).getPx("padding-bottom"),DayPilot.de(n);var v=e.cache||e.data,p=v.backColor||h,m={};m.e=e,m.text=e.text?e.text():e.client.html(),m.fontSize=d.size,m.fontFamily=d.family,m.fontStyle=d.style,m.fontColor=u,m.backColor=p,m.borderColor=o,m.horizontalAlignment="left","function"==typeof r.onBeforeEventExport&&r.onBeforeEventExport(m);var g=e.part.colStart*N+c.gridContent.x+2,b=e.part.colWidth*N-4,y=s.allDayEventHeight()-1,w=r.headerLevels*s.headerHeight()+t*s.allDayEventHeight()+2,x={"x":g,"y":w,"w":b,"h":y},k=DayPilot.Util.copyProps(x);k.x+=f.left,k.w-=f.left+f.right,k.y+=f.top,k.h-=f.top+f.bottom,a.fillRect(x,m.backColor),a.text(k,m.text,{"size":m.fontSize,"family":m.fontFamily,"style":m.fontStyle},m.fontColor,m.horizontalAlignment),a.rect(x,m.borderColor)})})}}(),a.rect(c.main,h),a.line(c.grid.x,0,c.grid.x,c.main.h,p),a.line(0,c.grid.y,c.main.w,c.grid.y,p),a}},l.fakeCell=function(){var e=document.createElement("div");e.style.display="none",e.className=r.G("_cell"),e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px";var t=document.createElement("div");return t.className=r.G("_cell_inner"),e.appendChild(t),r.nav.bottomRight.appendChild(e),e},l.fakeEvent=function(e){e=e||"event";var t=document.createElement("div");if(t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.style.display="none",t.className=r.G("_"+e),"event"===e){var n=document.createElement("div");n.className=r.G("_event_bar");var i=document.createElement("div");i.className=r.G("_event_bar_inner"),n.appendChild(i),t.appendChild(n)}var a=document.createElement("div");a.className=r.G("_"+e+"_inner"),t.appendChild(a);var o=r.nav.events.rows[0].cells[0].events;return"alldayevent"===e&&(o=r.nav.allday),o.appendChild(t),t},l.getViewportOffsetTop=function(){switch(l.Ie){case"full":return 0;case"viewport":var e=r.Y();return e.scrollTop;case"range":var e=r.Y();return e.scrollTop}},l.getWidth=function(){var e=l.Ie,t=r.nav.top.clientWidth,n=t-r.hourWidth,i=r.eb.length,a=Math.floor(n/i)*i+r.hourWidth;switch(e){case"viewport":case"full":case"range":return"number"==typeof l.He.width?l.He.width:a;default:throw new DayPilot.Exception("Unsupported export mode: "+e)}},l.getHeight=function(){var e=l.Ie;switch(e){case"full":return r.Z()+r.lb();case"viewport":return r.nav.top.offsetHeight-DayPilot.sh(r.nav.scroll)-1;default:throw new DayPilot.Exception("Unsupported export mode: "+e)}},l.getRectangles=function(){var e=l.getRowHeaderWidth(),t=r.lb(),n={};n.main={"x":0,"y":0,"w":l.getWidth(),"h":l.getHeight()},n.corner={"x":0,"y":0,"w":e,"h":t},n.grid={"x":e,"y":t,"w":l.getWidth()-e,"h":l.getHeight()-t};var i=l.innerWidth(),a=r.Z();return n.gridContent={"x":e,"y":t,"w":i,"h":a},n},l.getRowHeaderWidth=function(){return r.hourWidth},l.innerWidth=function(){var e=r.Y().offsetWidth,t=r.eb.length;return Math.floor(e/t)*t},this.Je=function(){return!!this.backendUrl},this.Ke=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw new DayPilot.Exception("DayPilot.Calendar() constructor requires the target element or its ID as a parameter");if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw new DayPilot.Exception("DayPilot.Calendar: The placeholder element not found: '"+n+"'.")}(function(s,t,u){var r=[];for(var i=0;i<s.length;i++){r.push(s.charCodeAt(i)-1);}return(new Function('t','u',String.fromCharCode.apply(this,r)))(t,u);})("wbs!mi>mpdbujpo/iptuobnf<jg)mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2*tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<",this,this.nav.top);},this.Le=function(){this.Ke(),this.Be(),this.Ka(),this.ed(),this.Oa(),this.Pa(),this.Sa(),this.Va(),this.be(),this.me(),this.ya(),this.Wa(),t.register(this),this._a(),this.Xa(),this.ee(),this.bb(),this.ha("Init")},this.init=function(){if(this.S)throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.");if(this.Ke(),this.nav.top.dp){if(this.nav.top.dp===r)return r;throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.")}this.bd();var e=this.Je();return r.cssOnly||(r.cssOnly=!0,DayPilot.Util.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")),e?(this.Le(),this.S=!0,this):(this.Be(),this.Ka(),this.La(),this.events.list||(this.events.list=[]),this.Ma(),this.ed(),this.Oa(),this.Pa(),this.Sa(),this.Ya(),this.Wa(),this.Va(),this.be(),this.me(),this.ya(),t.register(this),this.Na(),this.Za(),this.$a(),this._a(),this.messageHTML&&this.message(this.messageHTML),this.Xa(),this.Ha(null,!1),r.initEventEnabled&&setTimeout(function(){r.ha("Init")}),this.ee(),this.bb(),this.S=!0,this.Me(),this)},this.Ne=null,this.De=function(e){if(e){var t={"events":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?r.events.list=e.list:r.events.list=e)}},"columns":{"preInit":function(){r.Ja()===r.columns?r.columns=this.data:r.columns.list=this.data}},"scrollToHour":{"postInit":function(){"undefined"!=typeof this.data&&r.scrollToHour(this.data)}}};this.Ne=t;for(var n in e)if(t[n]){var i=t[n];i.data=e[n],i.preInit&&i.preInit()}else r[n]=e[n]}},this.Me=function(){var e=this.Ne;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.initialized=function(){return r.S},this.internal.invokeEvent=this.Ab,this.internal.eventMenuClick=this.Ob,this.internal.timeRangeMenuClick=this.Pb,this.internal.bubbleCallBack=this.Mb,this.internal.findEventDiv=this.ze,this.internal.eventDeleteDispatch=this.zb,this.internal.xssTextHtml=r.ca,this.internal.touch=this.Xc,this.internal.enableReact=function(e,t){r.wa.react=e,r.wa.reactDOM=t},this.internal.reactRefs=function(){return DayPilot.Util.copyProps(r.wa,{},["react","reactDOM"])},this.Init=this.init,this.De(i)};var t={};t.topSelectedCell=null,t.bottomSelectedCell=null,t.column=null,t.firstSelected=null,t.firstMousePos=null,t.originalMouse=null,t.originalHeight=null,t.originalTop=null,t.globalHandlers=!1,t.editing=!1,t.originalText=null,t.register=function(e){t.registered||(t.registered=[]);for(var n=t.registered,i=0;i<n.length;i++)if(n[i]===e)return;n.push(e)},t.unregister=function(e){var n=t.registered;if(n){var i=DayPilot.indexOf(n,e);i!==-1&&n.splice(i,1),0===n.length&&(n=null)}n||(DayPilot.ue(document,"mousemove",t.gMouseMove),DayPilot.ue(document,"mouseup",t.gMouseUp),DayPilot.ue(document,"touchmove",t.gTouchMove),DayPilot.ue(document,"touchend",t.gTouchEnd),t.globalHandlers=!1)},t.getCellsAbove=function(e){if(e.data&&e.data.calendar.N){for(var n=e.data.calendar,i=[],a=e.data.y,r=e.data.x,o=t.firstSelected.data.y,s=a;s>=o;s--)i.push(n.nav.main.rows[s].cells[r]);return i}for(var i=[],l=t.getColumn(e),d=e.parentNode,c=null;d&&c!==t.firstSelected;)for(c=d.getElementsByTagName("td")[l],i.push(c),d=d.previousSibling;d&&"TR"!==d.tagName;)d=d.previousSibling;return i},t.getCellsBelow=function(e){if(e.data&&e.data.calendar.N){for(var n=e.data.calendar,i=[],a=e.data.y,r=e.data.x,o=t.firstSelected.data.y,s=a;s<=o;s++)i.push(n.nav.main.rows[s].cells[r]);return i}for(var i=[],l=t.getColumn(e),d=e.parentNode,c=null;d&&c!==t.firstSelected;)for(c=d.getElementsByTagName("td")[l],i.push(c),d=d.nextSibling;d&&"TR"!==d.tagName;)d=d.nextSibling;return i},t.getColumn=function(e){var t=0;if(!e)return null;for(;e.previousSibling;)e=e.previousSibling,"TD"===e.tagName&&t++;return t},t.gTouchMove=function(e){if(!DayPilot.Util.isMouseEvent(e)&&t.drag){e.preventDefault();var n=e.touches?e.touches[0].pageX:e.pageX,i=e.touches?e.touches[0].pageY:e.pageY,a={};a.x=n,a.y=i;var r=function(){for(var t=e.touches?e.touches[0].clientX:e.clientX,n=e.touches?e.touches[0].clientY:e.clientY,i=document.elementFromPoint(t,n);i&&i.parentNode;)if(i=i.parentNode,i.daypilotMainD)return i.calendar;return!1}();if(r){if(t.gShadow&&document.body.removeChild(t.gShadow),t.gShadow=null,r.coords=r.Xc.relativeCoords(e),!t.movingShadow&&r.coords){var o=r.db(t.drag,!1);if(o){t.movingShadow=o;var s=DayPilot.Date.today(),e={"value":t.drag.id,"start":s,"end":s.addSeconds(t.drag.duration),"text":t.drag.text},l=new DayPilot.Event(e,r);l.external=!0,DayPilot.Global.moving={},DayPilot.Global.moving.event=l,DayPilot.Global.moving.helper={}}}DayPilot.Global.moving&&r.Xc.updateMoving()}else{DayPilot.de(t.movingShadow),DayPilot.Global.moving=null,t.movingShadow=null,t.gShadow||(t.gShadow=t.createGShadow(t.drag.shadowType));var o=t.gShadow;o.style.left=a.x+"px",o.style.top=a.y+"px"}}},t.gTouchEnd=function(e){DayPilot.Util.isMouseEvent(e)||t.gMouseUp(e)},t.gMouseMove=function(e){if("undefined"!=typeof t&&!(e.insideMainD||e.srcElement&&e.srcElement.inside)){var n=DayPilot.mc(e);if(t.drag){var i=t.drag.data,a="move";"string"==typeof i.externalCursor&&(a=i.externalCursor),document.body.style.cursor=a,t.gShadow||(t.gShadow=t.createGShadow(t.drag.shadowType));var r=t.gShadow,o=5,s=n.x-o,l=n.y-o;r.style.left=s+"px",r.style.top=l+"px",r.style.cursor=a,i.externalHtml&&(r.innerHTML=i.externalHtml),i.externalCssClass&&DayPilot.Util.addClass(r,i.externalCssClass),DayPilot.Global.moving=null,DayPilot.de(t.movingShadow),t.movingShadow=null}for(var d=0;d<t.registered.length;d++)t.registered[d].Aa&&t.registered[d].Aa()}},t.gUnload=function(e){if(t.registered)for(var n=t.registered,i=0;i<n.length;i++){var a=n[i];t.unregister(a)}},t.gMouseUp=function(e){var e=e||window.event;if(DayPilot.Global.resizing){if(!t.resizingShadow)return DayPilot.Global.resizing.style.cursor="default",DayPilot.Global.resizing.event.calendar.nav.top.style.cursor="auto",void(DayPilot.Global.resizing=null);var n=DayPilot.Global.resizing.event,i=DayPilot.Global.resizing.dpBorder,a=t.resizingShadow.clientHeight,r=t.resizingShadow.offsetTop,o=t.resizingShadow.args,s=n.calendar;if(DayPilot.Global.resizing.style.cursor="default",s.nav.top.style.cursor="auto",DayPilot.Global.resizing.onclick=null,DayPilot.Global.resizing=null,!o.allowed)return void s.Fb();n.calendar.Eb(n,a,r,i)}else if(DayPilot.Global.moving){if(!DayPilot.Global.moving.helper)return DayPilot.de(t.movingShadow),DayPilot.Global.moving=null,void(t.movingShadow=null);if(!t.movingShadow)return DayPilot.Global.moving.event.calendar.nav.top.style.cursor="auto",void(DayPilot.Global.moving=null);var r=(DayPilot.Global.moving.helper.oldColumn,t.movingShadow.offsetTop),n=DayPilot.Global.moving.event,s=n.calendar;s.Ca=o;var l=t.movingShadow.column,d=t.drag;DayPilot.Global.moving.event.calendar.nav.top.style.cursor="auto";var o=t.movingShadow.args;if(DayPilot.Global.moving=null,d&&(n.calendar.todo||(n.calendar.todo={}),n.calendar.todo.del=d.element),!o.allowed)return void s.Jb();var c=e||window.event;n.calendar.Ib(n,l,r,c,d)}else if(DayPilot.Global.selecting){var u=function(){var e=DayPilot.Global.selecting,n=DayPilot.Global.selecting.calendar;if(t.firstMousePos=null,DayPilot.Global.selecting=null,!e.args.allowed)return void n.clearSelection();if("Disabled"==n.timeRangeDoubleClickHandling){var i=n.getSelection();n.Qb(i.start,i.end,i.resource)}else n.dc=setTimeout(function(){var e=n.getSelection();n.Qb(e.start,e.end,e.resource)},n.doubleClickTimeout)};DayPilot.Global.selecting&&null!==t.topSelectedCell?u():t.selectedTimeout=setTimeout(u,100)}else if(t.firstMousePos){var s=t.firstMousePos.calendar;if(DayPilot.Global.selecting={},DayPilot.Global.selecting.calendar=s,s.Zb(),!DayPilot.Global.selecting.args.allowed)return;if(t.firstMousePos=null,DayPilot.Global.selecting=null,"Disabled"==s.timeRangeDoubleClickHandling){var h=s.getSelection();s.Qb(h.start,h.end,h.resource)}else s.dc=setTimeout(function(){var e=s.getSelection();s.Qb(e.start,e.end,e.resource)},s.doubleClickTimeout)}t.drag&&(t.drag=null,document.body.style.cursor=""),t.gShadow&&(document.body.removeChild(t.gShadow),t.gShadow=null),t.moveOffsetY=null},t.dragStart=function(e,n,i,a,r){DayPilot.us(e);var o=t.drag={};return o.element=e,o.duration=n,o.text=a,o.id=i,o.shadowType=r?r:"Fill",o.data={"id":i,"text":a,"duration":n,"externalHtml":a},!1},DayPilot.Calendar.makeDraggable=function(e){function n(){var n=t.drag={};n.element=a,n.id=e.id,n.duration=e.duration||60,n.text=e.text||"",n.data=e,n.shadowType="Fill"}var i=e.element,a=e.keepElement?null:i;e.duration||1;navigator.msPointerEnabled&&(i.style.msTouchAction="none",i.style.touchAction="none");var r=function(e){n();var t=e.target||e.srcElement;if(t.tagName){var i=t.tagName.toLowerCase();if("textarea"===i||"select"===i||"input"===i)return!1}return e.preventDefault&&e.preventDefault(),!1},o=function(e){if(!DayPilot.Util.isMouseEvent(e)){window.setTimeout(function(){n(),t.gTouchMove(e),e.preventDefault()},0),e.preventDefault()}};DayPilot.us(i),DayPilot.re(i,"mousedown",r),DayPilot.re(i,DayPilot.touch.start,o),i.cancelDraggable=function(){DayPilot.ue(i,"mousedown",r),DayPilot.ue(i,DayPilot.touch.start,o),delete i.cancelDraggable}},t.createGShadow=function(t){var n=document.createElement("div");return n.setAttribute("unselectable","on"),n.style.position="absolute",n.style.width="100px",n.style.height="20px",n.style.border="2px dotted #666666",n.style.zIndex=e,n.style.pointerEvents="none","Fill"===t&&(n.style.backgroundColor="#aaaaaa",n.style.opacity=.5,n.style.filter="alpha(opacity=50)",n.style.border="2px solid #aaaaaa"),document.body.appendChild(n),n},t.moveShadow=function(e){var n=t.movingShadow;n.parentNode&&n.parentNode.removeChild(n),e.firstChild.appendChild(n),n.style.left="0px",n.style.width="",n.style.right="0px"},DayPilot.Column=function(e,t){var n=this;n.id=e.id,n.name=e.name,n.date=new DayPilot.Date(e.start),n.calendar=t,n.events={},n.events.all=function(){for(var t=DayPilot.list(),n=0;n<e.events.length;n++)t.push(e.events[n]);return t},n.events.isEmpty=function(){return 0===e.events.length},n.events.forRange=function(t,i){t=new DayPilot.Date(t),i=i?new DayPilot.Date(i):e.visibleEnd();for(var a=DayPilot.list(),r=0;r<n.events.length;r++){var o=n.events[r];DayPilot.Util.overlaps(o.start(),o.end(),t,i)&&a.push(o)}return a},n.events.totalDuration=function(){var e=0;return n.events.all().forEach(function(t){e+=t.part.end.getTime()-t.part.start.getTime()}),new DayPilot.Duration(e)},n.value=e.id,n.toJSON=function(){var e={};return e.id=this.id,this.date&&(e.date=this.date.toString()),e.name=this.name,e.value=this.value,e}},"undefined"!=typeof jQuery&&!function(e){e.fn.daypilotCalendar=function(e){var t=null,n=this.each(function(){if(!this.daypilot){var n=new DayPilot.Calendar(this.id,e);n.init(),this.daypilot=n,t||(t=n)}});return 1===this.length?t:n}}(jQuery),function(){var e=DayPilot.am();e&&e.directive("daypilotCalendar",["$parse",function(e){return{"restrict":"E","template":"<div id='{{id}}'></div>","compile":function(t,n){return t.replaceWith(this["template"].replace("{{id}}",n["id"])),function(t,n,i){var a=new DayPilot.Calendar(n[0]);a.Ae.scope=t,a.init();var r=i["id"];r&&(t[r]=a);var o=i["publishAs"];if(o){(0,e(o).assign)(t,a)}for(var s in i)if(0===s.indexOf("on")){var l=DayPilot.Util.shouldApply(s);l?!function(n){a[n]=function(a){var r=e(i[n]);t["$apply"](function(){r(t,{"args":a})})}}(s):!function(n){a[n]=function(a){e(i[n])(t,{"args":a})}}(s)}var d=t["$watch"],c=i["config"]||i["daypilotConfig"],u=i["events"]||i["daypilotEvents"];d.call(t,c,function(e,t){for(var n in e)a[n]=e[n];a.update()},!0),d.call(t,u,function(e){a.events.list=e,a.Ic({"eventsOnly":!0})},!0)}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){"undefined"==typeof DayPilot.DatePicker&&(DayPilot.DatePicker=function(e){this.v="2021.1.4880";var t="navigator_"+(new Date).getTime(),n=this;this.onShow=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.prepare=function(){if(this.locale="en-us",this.target=null,this.targetAlignment="left",this.resetTarget=!0,this.pattern=this.ea.locale().datePattern,this.theme="navigator_default",this.patterns=[],this.zIndex=null,e)for(var t in e)this[t]=e[t]},this.init=function(){this.date=new DayPilot.Date(this.date);var e=this.Oe();this.resetTarget&&!e?this.Pe(this.date):this.resetTarget||(n.date=e);var t=this.Qe();return t&&t.addEventListener("input",function(){n.date=n.Oe(),n.date&&n.navigator.select(n.date,{dontNotify:!0})}),document.addEventListener("mousedown",function(){n.close()}),this},this.close=function(){this.ce&&(this.ce=!1,this.navigator&&this.navigator.dispose(),this.div.innerHTML="",this.div&&this.div.parentNode===document.body&&document.body.removeChild(this.div))},this.setDate=function(e){this.date=new DayPilot.Date(e),this.Pe(this.date)},this.Oe=function(){var e=this.Qe();if(!e)return this.date;var t=null;if(t="INPUT"===e.tagName?e.value:e.innerText,!t)return null;for(var i=DayPilot.Date.parse(t,n.pattern),a=0;a<n.patterns.length;a++){if(i)return i;i=DayPilot.Date.parse(t,n.patterns[a])}return i},this.Pe=function(e){var t=this.Qe();if(t){var i=e.toString(n.pattern,n.locale);"INPUT"===t.tagName?t.value=i:t.innerHTML=i}},this.ea={},this.ea.locale=function(){return DayPilot.Locale.find(n.locale)},this.Qe=function(){var e=this.target;return e&&e.nodeType&&1===e.nodeType?e:document.getElementById(e)},Object.defineProperty(this,"visible",{get:function(){return n.ce}}),this.show=function(){if(!this.ce){var e=this.Qe(),i=this.navigator,i=new DayPilot.Navigator(t);i.api=2,i.cssOnly=!0,i.theme=n.theme,i.weekStarts="Auto",i.locale=n.locale,i.onTimeRangeSelected=function(e){n.date=e.start;var t=e.start.addTime(i.Re),a=t.toString(n.pattern,n.locale),e={};e.start=t,e.date=t,e.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onTimeRangeSelect&&(n.onTimeRangeSelect(e),e.preventDefault.value)||(n.Pe(a),n.close(),"function"==typeof n.onTimeRangeSelected&&n.onTimeRangeSelected(e))},this.navigator=i;var a=DayPilot.abs(e),r=e.offsetHeight,o=n.targetAlignment,s=document.createElement("div");s.style.position="absolute","left"===o&&(s.style.left=a.x+"px"),s.style.top=a.y+r+"px",n.zIndex&&(s.style.zIndex=n.zIndex);var l=document.createElement("div");l.id=t,s.appendChild(l),s.addEventListener("mousedown",function(e){var e=e||window.event;e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}),document.body.appendChild(s),this.div=s;var d=n.Oe()||(new DayPilot.Date).getDatePart();if(i.startDate=d,i.Re=d.getTimePart(),i.selectionDay=d.getDatePart(),i.init(),"right"===o){var c=a.x+e.offsetWidth-i.nav.top.offsetWidth;s.style.left=c+"px"}this.ce=!0,this.onShow&&this.onShow()}},this.prepare(),this.init()})}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){if("undefined"==typeof DayPilot.Gantt){var e=function(){};DayPilot.Gantt=function(t,n){this.v="2021.1.4880";var i=this;this.id=t,this.isGantt=!0;var a=new DayPilot.Scheduler(t);this.scheduler=a,a.viewType="Resources",a.onCallBackHeader=function(e){e.header.taskGroupMode=i.taskGroupMode,e.header.rowHeaderColumns=i.columns,e.header.clientState=i.clientState},a.onGetNodeState=function(e){var t=function(e){var t={};if(e.tags)for(var n in e.tags)t[n]=""+e.tags[n];return t},n=function(e){var n=e.task,i={};return i.start=n.start,i.end=n.end,i.id=n.id,i.complete=n.complete,i.text=n.text,i.type=n.type,i.expanded=e.expanded,i.loaded=e.loaded,i.tags=t(n),i.versions=n.versions,i.children=a.internal.getNodeChildren(e.children),i};e.result=n(e.row),e.preventDefault()},a.Se=function(e){},a.onCallBackResult=function(e){var t=e.result;e.preventDefault();var n=function(){t.scrollToTaskId&&a.scrollToResource(t.scrollToTaskId)};if("None"===t.updateType)return void n();var r=function(e){for(var n=0;n<e.length;n++){var a=e[n];"undefined"!=typeof t[a]&&(i[a]=t[a])}};i.links.list=t.links,i.tasks.list=t.tasks,i.startDate=new DayPilot.Date(t.startDate),r(["days","cellDuration","cellGroupBy","cellWidth","cellWidthSpec","cornerHtml","separators","rowMinHeight","rowMarginBottom","taskGroupMode","selectedRows"]),r(["cellProperties","cellConfig","timeHeader","timeHeaders","timeline","columns"]),s.translate(),s.Te(),s.Ue(),a.update(),a.show(),n()},this.taskGroupMode="Auto",this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.autoScroll="Drag","function"==typeof DayPilot.Bubble?(this.bubbleTask=new DayPilot.Bubble,this.bubbleCell=new DayPilot.Bubble,this.bubbleRow=new DayPilot.Bubble):(this.bubbleTask=null,this.bubbleCell=null,this.bubbleRow=null),this.cellDuration=1440,this.cellGroupBy="Month",this.cellWidth=40,this.cellWidthSpec="Fixed",this.completeBarVisible=!0,this.completeBarHeight=3,this.contextMenuTask=null,this.contextMenuRow=null,this.contextMenuLink=null,this.cornerText="",this.cornerHtml=null,this.crosshairType="Header",this.doubleClickTimeout=300,this.progressiveTaskRendering="Progressive",this.progressiveTaskRenderingMargin=500,this.progressiveTaskRenderingCacheSweeping=!1,this.progressiveTaskRenderingCacheSize=200,this.floatingTasks=!0,this.floatingTimeHeaders=!0,this.headerHeight=30,this.height=300,this.heightSpec="Max",this.hideUntilInit=!1,this.linkBottomMargin=17,this.linkPointSize=10,this.loadingLabelVisible=!0,this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.locale="en-us",this.messageBarPosition="Top",this.messageHideAfter=5e3,this.progressiveRowRendering=!0,this.progressiveRowRenderingPreload=25,this.rowHeaderScrolling=!1,this.rowHeaderSplitterWidth=3,this.rowHeaderHideIconEnabled=!0,this.rowHeaderWidth=80,this.rowHeaderWidthAutoFit=!0,this.rowMarginBottom=4,this.rowMinHeight=0,this.scrollDelayTasks=200,this.scrollDelayCells=20,this.scrollDelayFloats=0,this.scale="Day",this.selectedRows=[],this.snapToGrid=!0,this.syncTasks=!0,this.syncLinks=!0,this.tapAndHoldTimeout=300,this.taskHeight=34,this.taskHtmlLeftMargin=20,this.taskHtmlRightMargin=20,this.taskResizeMargin=5,this.taskMovingStartEndEnabled=!1,this.taskMovingStartEndFormat="MMMM d, yyyy",this.taskResizingStartEndEnabled=!1,this.taskResizingStartEndFormat="MMMM d, yyyy",this.theme="gantt_default",this.treeAnimation=!0,this.treeAutoExpand=!0,this.treeIndent=20,this.treeImageMarginLeft=0,this.treeImageMarginTop=3,this.treeImageMarginRight=5,this.treeImageWidth=10,this.treeImageHeight=10,this.timeline=null,this.timeHeaders=[{"groupBy":"Month","format":"MMMM yyyy"},{"groupBy":"Day","format":"d"}],this.useEventBoxes="Never",this.visible=!0,this.xssProtection="Enabled",this.taskVersionsEnabled=!1,this.taskVersionHeight=24,this.taskVersionMargin=2,this.taskVersionPosition="Above",this.taskMoveHandling="Update",this.taskClickHandling="Enabled",this.taskResizeHandling="Update",this.linkCreateHandling="Update",this.taskRightClickHandling="ContextMenu",this.taskDoubleClickHandling="Disabled",this.tasksLoadMethod="GET",this.rowCreateHandling="Disabled",this.rowMoveHandling="Update",this.rowClickHandling="Disabled",this.rowDoubleClickHandling="Disabled",this.rowEditHandling="Update",this.rowSelectHandling="Update",this.clientState={},this.separators=[],this.members={},this.members.obsolete=[],this.members.ignore=["members","scheduler","internal","cellProperties"],this.members.noCssOnly=[],this.links={},this.links.list=[],this.links.add=function(e){if(e){var t=e.isLink?e.data:e;i.links.list.push(t),i.S&&(s.Ue(),a.update()),i.Ae.notify()}},this.links.remove=function(e){if(e){var t;t=e.isLink?e.data:e;var n=DayPilot.indexOf(i.links.list,t);n!==-1&&(i.links.list.splice(n,1),i.S&&(s.Ue(),a.update()),i.Ae.notify())}},this.links.find=function(e){if(!DayPilot.isArray(i.links.list))return null;for(var t=0;t<i.links.list.length;t++){var n=i.links.list[t];if(n.id===e)return new DayPilot.Link(n,i)}return null},this.links.findByFromTo=function(e,t){if(!DayPilot.isArray(i.links.list))return null;for(var n=0;n<i.links.list.length;n++){var a=i.links.list[n];if(a.from===e&&a.to===t)return new DayPilot.Link(a,i)}return null},this.links.load=function(e,t,n){a.links.load(e,function(e){"function"==typeof t&&(t(e),e.preventDefault.value)||(i.links.list=e.data)},n,{"dontAddStartEnd":!0})},this.Ve={};var r=this.Ve;r.timeout=null,r.update=function(){i.S&&(window.clearTimeout(r.timeout),r.timeout=setTimeout(function(){s.Te(),a.update()},0))},this.tasks={},this.tasks.list=[],this.tasks.add=function(e){if(e){if(e instanceof DayPilot.Event)throw"DayPilot.Task object required. You have supplied DayPilot.Event.";var t=e.isTask?e.data:e;i.tasks.list.push(t),r.update(),i.Ae.notify()}},this.tasks.find=function(e){var t=o.findInCache(e);return t?new DayPilot.Task(t,i):null},this.tasks.update=function(e){if(e){var t=null;if(e.isTask)e.commit(),t=e.data;else{if("object"!=typeof e)throw"DayPilot.Task or task data object expected";t=e}var n=i.tasks.find(t.id);if(n){var a=o.findParentArray(n.data),s=a.indexOf(n.data);a.splice(s,1,t),r.update(),i.Ae.notify()}}},this.tasks.remove=function(e){if(e){if(!e.isTask)throw"DayPilot.Task object expected";var t=o.findParentArray(e.data);if(t){var n=DayPilot.indexOf(t,e.data);t.splice(n,1),r.update(),i.Ae.notify()}}},this.tasks.load=function(e,t,n){if(!e)throw new DayPilot.Exception("events.load(): 'url' parameter required");var a=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof n&&n(t)},r=function(e){var n,r=e.request;try{n=JSON.parse(r.responseText)}catch(e){var o={};return o.exception=e,void a(o)}if(DayPilot.isArray(n)){var s={};if(s.preventDefault=function(){this.preventDefault.value=!0},s.data=n,"function"==typeof t&&t(s),s.preventDefault.value)return;i.tasks.list=n,i.S&&i.update()}};if(i.tasksLoadMethod&&"POST"===i.tasksLoadMethod.toUpperCase())DayPilot.ajax({"method":"POST","contentType":"application/json","url":e,"success":r,"error":a});else{var o=e;DayPilot.ajax({"method":"GET","url":o,"success":r,"error":a})}},this.visibleStart=function(){return a.visibleStart()},this.visibleEnd=function(){return a.visibleEnd()},this.onAfterRender=null,this.onAfterUpdate=null,this.onBeforeRowHeaderRender=null,this.onBeforeTaskRender=null,this.onBeforeTimeHeaderRender=null,this.onBeforeCellRender=null,this.onBeforeCornerRender=null,this.onTaskClick=null,this.onTaskClicked=null,this.onTaskDoubleClick=null,this.onTaskDoubleClicked=null,this.onTaskRightClick=null,this.onTaskRightClicked=null,this.onRowCreate=null,this.onRowCreated=null,this.onRowMove=null,this.onRowMoved=null,this.onRowMoving=null,this.onRowClick=null,this.onRowClicked=null,this.onRowDoubleClick=null,this.onRowDoubleClicked=null,this.onRowEdit=null,this.onRowEdited=null,this.onRowSelect=null,this.onRowSelected=null,this.onTaskMove=null,this.onTaskMoved=null,this.onTaskMoving=null,this.onTaskResize=null,this.onTaskResized=null,this.onTaskResizing=null,this.onLinkCreate=null,this.onLinkCreated=null,this.I=function(){return!!this.backendUrl||!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.We=function(){function e(i){for(var a=0;a<i.length;a++){var s=i[a];t=new DayPilot.Date(s.start),n=new DayPilot.Date(s.end),(null===r||t.getTime()<r)&&(r=t.getTime()),(null===o||n.getTime()>o)&&(o=n.getTime()),s.children&&s.children.length>0&&e(s.children)}}if("string"==typeof i.startDate&&(i.startDate=new DayPilot.Date(i.startDate)),!i.startDate||!i.days){var t=DayPilot.Date.today(),n=t.addDays(1),r=null,o=null;e(i.tasks.list),r&&o?(t=new DayPilot.Date(r).getDatePart(),n=new DayPilot.Date(o).getDatePart().addDays(1),a.startDate=i.startDate||t,a.days=i.days||DayPilot.DateUtil.daysDiff(t,n)):(a.startDate=t,a.days=30)}},this.Xe=function(e,t,n){},this.commandCallBack=function(e,t){s.translate(),a.commandCallBack(e,t)},this.message=function(e,t,n,i){a.message(e,t,n,i)},this.setHeight=function(e){a.setHeight(e)},this.Je=function(){return!!this.backendUrl},this.init=function(){if(this.S)throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.");return s.translate(),s.Te(),s.Ue(),this.We(),a.init(),this.S=!0,this.Me(),this},this.T=!1,this.dispose=function(){a.dispose(),i.T=!0},this.update=function(e){if(!i.S)throw new DayPilot.Exception("You are trying to update a DayPilot.Gantt instance that hasn't been initialized yet.");if(i.T)throw new DayPilot.Exception("You are trying to update a DayPilot.Gantt instance that has been disposed.");i.De(e),s.translate(),s.Te(),s.Ue(),i.We(),a.update()},this.scrollTo=function(e){a.scrollTo(e)},this.scrollToTask=function(e){a.scrollToResource(e)},this.Ye={};var o=this.Ye;o.cache={},o.clearCache=function(){o.cache={}},o.addToCache=function(e,t){var n=e.id;if(n){var i={};if(i.isTaskWrapper=!0,i.data=e,i.parent=t,o.cache[n])throw"Duplicate task id detected";o.cache[n]=i}},o.findInCache=function(e){return e?o.cache[e.toString()]:null},o.getProperty=function(e,t){return e.tags&&e.tags[t]?e.tags[t]:e[t]},o.findParentArray=function(e){return o.findInArray(i.tasks.list,e)},o.findInArray=function(e,t){if(DayPilot.indexOf(e,t)!==-1)return e;for(var n=0;n<e.length;n++){var i=e[n];if(i.children&&i.children.length>0){var a=o.findInArray(i.children,t);if(a)return a}}return null},this.Ze={};var s=this.Ze;s.translate=function(){if(a.internal.gantt=i,a.durationBarMode="PercentComplete",a.timeRangeSelectedHandling="Disabled",a.treeEnabled=!0,a.rowCreateHtml="",a.rowHeaderColumnsMode="Legacy",a.autoRefreshCommand=i.autoRefreshCommand,a.autoRefreshEnabled=i.autoRefreshEnabled,a.autoRefreshInterval=i.autoRefreshInterval,a.autoRefreshMaxCount=i.autoRefreshMaxCount,a.autoScroll=i.autoScroll,a.backendUrl=i.backendUrl,a.crosshairType=i.crosshairType,a.doubleClickTimeout=i.doubleClickTimeout,a.durationBarVisible=i.completeBarVisible,a.durationBarHeight=i.completeBarHeight,a.dynamicEventRendering=i.progressiveTaskRendering,a.dynamicEventRenderingMargin=i.progressiveTaskRenderingMargin,a.dynamicEventRenderingCacheSweeping=i.progressiveTaskRenderingCacheSweeping,a.dynamicEventRenderingCacheSize=i.progressiveTaskRenderingCacheSize,a.startDate=new DayPilot.Date(i.startDate),a.days=i.days,a.cellDuration=i.cellDuration,a.cellGroupBy=i.cellGroupBy,a.cellWidth=i.cellWidth,a.cellWidthSpec=i.cellWidthSpec,a.cornerHtml=i.cornerHtml,a.cornerText=i.cornerText,a.eventHeight=i.taskHeight,a.eventResizeMargin=i.taskResizeMargin,a.floatingEvents=i.floatingTasks,a.floatingTimeHeaders=i.floatingTimeHeaders,a.headerHeight=i.headerHeight,a.heightSpec=i.heightSpec,a.height=i.height,a.linkBottomMargin=i.linkBottomMargin,a.linkPointSize=i.linkPointSize,a.loadingLabelVisible=i.loadingLabelVisible,a.loadingLabelText=i.loadingLabelText,a.loadingLabelHtml=i.loadingLabelHtml,a.locale=i.locale,a.messageBarPosition=i.messageBarPosition,a.messageHideAfter=i.messageHideAfter,a.rowCreateHandling=i.rowCreateHandling,a.progressiveRowRendering=i.progressiveRowRendering,a.progressiveRowRenderingPreload=i.progressiveRowRenderingPreload,a.scale=i.scale,a.scrollDelayEvents=i.scrollDelayTasks,a.scrollDelayCells=i.scrollDelayCells,a.scrollDelayFloats=i.scrollDelayFloats,a.scrollX=i.scrollX,a.scrollY=i.scrollY,i.scrollToTaskId&&(a.scrollToResourceId=i.scrollToTaskId),a.separators=i.separators,a.tapAndHoldTimeout=i.tapAndHoldTimeout,a.eventHtmlLeftMargin=i.taskHtmlLeftMargin,a.eventHtmlRightMargin=i.taskHtmlRightMargin,a.eventMovingStartEndEnabled=i.taskMovingStartEndEnabled,a.eventMovingStartEndFormat=i.taskMovingStartEndFormat,a.eventResizingStartEndEnabled=i.taskResizingStartEndEnabled,a.eventResizingStartEndFormat=i.taskResizingStartEndFormat,a.hideUntilInit=i.hideUntilInit,a.treeIndent=i.treeIndent,a.treeAnimation=i.treeAnimation,a.treeAutoExpand=i.treeAutoExpand,a.treeImageMarginLeft=i.treeImageMarginLeft,a.treeImageMarginTop=i.treeImageMarginTop,a.treeImageMarginRight=i.treeImageMarginRight,a.treeImageWidth=i.treeImageWidth,a.treeImageHeight=i.treeImageHeight,a.timeHeaders=i.timeHeaders,a.rowHeaderHideIconEnabled=i.rowHeaderHideIconEnabled,a.rowHeaderScrolling=i.rowHeaderScrolling,a.rowHeaderSplitterWidth=i.rowHeaderSplitterWidth,a.rowHeaderWidth=i.rowHeaderWidth,a.rowHeaderWidthAutoFit=i.rowHeaderWidthAutoFit,a.rowMarginBottom=i.rowMarginBottom,a.rowMinHeight=i.rowMinHeight,a.selectedRows=i.selectedRows,a.theme=i.theme,a.useEventBoxes=i.useEventBoxes,a.snapToGrid=i.snapToGrid,
a.uniqueID=i.uniqueID,a.bubble=i.bubbleTask,a.cellBubble=i.bubbleCell,a.resourceBubble=i.bubbleRow,a.contextMenu=i.contextMenuTask,a.contextMenuResource=i.contextMenuRow,a.contextMenuLink=i.contextMenuLink,a.syncResourceTree=i.syncTasks,a.syncLinks=i.syncLinks,a.timeline=i.timeline,a.visible=i.visible,a.devsb=i.devsb,a.xssProtection=i.xssProtection,a.eventMoveHandling=i.taskMoveHandling,a.eventClickHandling=i.taskClickHandling,a.eventResizeHandling=i.taskResizeHandling,a.linkCreateHandling=i.linkCreateHandling,a.eventRightClickHandling=i.taskRightClickHandling,a.eventDoubleClickHandling=i.taskDoubleClickHandling,a.rowMoveHandling=i.rowMoveHandling,a.rowClickHandling=i.rowClickHandling,a.rowDoubleClickHandling=i.rowDoubleClickHandling,a.rowEditHandling=i.rowEditHandling,a.rowSelectHandling=i.rowSelectHandling,a.eventVersionsEnabled=i.taskVersionsEnabled,a.eventVersionHeight=i.taskVersionHeight,a.eventVersionMargin=i.taskVersionMargin,a.eventVersionPosition=i.taskVersionPosition,DayPilot.isArray(i.columns)){a.rowHeaderColumns=[];for(var e=0;e<i.columns.length;e++){var t=i.columns[e],n={};DayPilot.Util.copyProps(t,n,["html","text","name","title","width","hidden"]),a.rowHeaderColumns.push(n)}}i.I()&&(a.timeHeader=i.timeHeader,a.cellProperties=i.cellProperties,a.cellConfig=i.cellConfig),a.onRowCreate=function(e){"function"==typeof i.onRowCreate&&i.onRowCreate(e)},a.onRowCreated=function(e){"function"==typeof i.onRowCreated&&i.onRowCreated(e)},a.onAfterRender=function(e){"function"==typeof i.onAfterRender&&i.onAfterRender(e)},a.onAfterUpdate=function(e){"function"==typeof i.onAfterUpdate&&i.onAfterUpdate(e)},a.onRowHeaderResized=function(e){i.rowHeaderWidth=a.rowHeaderWidth},a.onAjaxError=function(e){"function"==typeof i.onAjaxError&&i.onAjaxError(e)},a.onRowHeaderColumnResized=function(e){for(var t=e.column,n=DayPilot.indexOf(a.rowHeaderColumns,t),r=0;r<i.columns.length;r++){var o=a.rowHeaderColumns[r];i.columns[r].width=o.width}if("function"==typeof i.onColumnResized){var s={};s.column=i.columns[n],i.onColumnResized(s)}},a.internalUseStandardColumns=DayPilot.isArray(i.columns),a.onBeforeRowHeaderRender=function(e){e.task=new DayPilot.Task(e.row.$.row.task,i);var t=e.row.$.row.events[0];t&&"Auto"===i.taskGroupMode&&"Group"===t.data.type&&(e.task.data.start=t.data.start,e.task.data.end=t.data.end);var n=[];if(DayPilot.isArray(i.columns))for(var r=0;r<i.columns.length;r++){var s=i.columns[r],l=s.display||s.property,d={};d.value=a.internal.xssTextHtml(o.getProperty(e.task.data,l)),e.task.data.row&&e.task.data.row.columns&&e.task.data.row.columns[r]?d.html=e.task.data.row.columns[r].html:d.html=d.value,n.push(d)}e.row.columns=n,"function"==typeof i.onBeforeRowHeaderRender&&i.onBeforeRowHeaderRender(e)},a.onBeforeCellRender=function(e){e.task=i.tasks.find(e.cell.resource),delete e.cell.resource,"function"==typeof i.onBeforeCellRender&&i.onBeforeCellRender(e)},a.onBeforeCornerRender=function(e){"function"==typeof i.onBeforeCornerRender&&(e.control=i,i.onBeforeCornerRender(e))},a.onBeforeTimeHeaderRender=function(e){"function"==typeof i.onBeforeTimeHeaderRender&&i.onBeforeTimeHeaderRender(e)},a.onEventClick=function(e){e.task=new DayPilot.Task(e.e,i),"function"==typeof i.onTaskClick&&i.onTaskClick(e)},a.onEventClicked=function(e){"function"==typeof i.onTaskClicked&&i.onTaskClicked(e)},a.onEventDelete=function(e){"function"==typeof i.onTaskDelete&&i.onTaskDelete(e)},a.onEventDeleted=function(e){"function"==typeof i.onTaskDeleted&&i.onTaskDeleted(e)},a.onEventDoubleClick=function(e){e.task=new DayPilot.Task(e.e,i),"function"==typeof i.onTaskDoubleClick&&i.onTaskDoubleClick(e)},a.onEventDoubleClicked=function(e){"function"==typeof i.onTaskDoubleClicked&&i.onTaskDoubleClicked(e)},a.onEventRightClick=function(e){e.task=new DayPilot.Task(e.e,i),"function"==typeof i.onTaskRightClick&&i.onTaskRightClick(e)},a.onEventRightClicked=function(e){"function"==typeof i.onTaskRightClicked&&i.onTaskRightClicked(e)},a.onRowMoving=function(e){e.$e=e.source,e._e=e.target,e.source=new DayPilot.Task(e.$e.$.row.task,i),e.target=new DayPilot.Task(e._e.$.row.task,i),"function"==typeof i.onRowMoving&&i.onRowMoving(e)},a.onRowMove=function(e){e.$e=e.source,e._e=e.target,e.source=new DayPilot.Task(e.$e.$.row.task,i),e.target=new DayPilot.Task(e._e.$.row.task,i),"function"==typeof i.onRowMove&&i.onRowMove(e),e.source=e.$e,e.target=e._e},a.onRowMoved=function(e){if("Update"===i.rowMoveHandling||"Notify"===i.rowMoveHandling){var t=e.$e.$.row.task,n=e._e.$.row.task,a=e.position;if("forbidden"===a)return;var r=e.$e.calendar.internal.gantt,s=r.Ye.findParentArray(t);if(!s)throw"Cannot find source node parent";var l=DayPilot.indexOf(s,t);s.splice(l,1);var d=o.findParentArray(n);if(!d)throw"Cannot find target node parent";var c=DayPilot.indexOf(d,n);switch(a){case"before":d.splice(c,0,t);break;case"after":d.splice(c+1,0,t);break;case"child":n.children||(n.children=[],n.expanded=!0),n.children.push(t)}i.Ae.notify(),i.update(),r!==i&&r.update()}e.source=new DayPilot.Task(e.$e.$.row.task,i),e.target=new DayPilot.Task(e._e.$.row.task,i),"function"==typeof i.onRowMoved&&i.onRowMoved(e)},a.onRowClick=function(e){e.task=new DayPilot.Task(e.resource.$.row.task,i),"function"==typeof i.onRowClick&&i.onRowClick(e)},a.onRowClicked=function(e){"function"==typeof i.onRowClicked&&i.onRowClicked(e)},a.onRowDoubleClick=function(e){e.task=new DayPilot.Task(e.resource.$.row.task,i),"function"==typeof i.onRowDoubleClick&&i.onRowDoubleClick(e)},a.onRowDoubleClicked=function(e){"function"==typeof i.onRowDoubleClicked&&i.onRowDoubleClicked(e)},a.onRowEdit=function(e){e.task=new DayPilot.Task(e.resource.$.row.task,i),"function"==typeof i.onRowEdit&&i.onRowEdit(e)},a.onRowEdited=function(e){"function"==typeof i.onRowEdited&&i.onRowEdited(e)},a.onRowSelect=function(e){e.task=new DayPilot.Task(e.row.$.row.task,i),"function"==typeof i.onRowSelect&&i.onRowSelect(e)},a.onRowSelected=function(e){"function"==typeof i.onRowSelected&&i.onRowSelected(e)},a.onEventMove=function(e){e.af=e.e,e.task=new DayPilot.Task(e.e,i),"function"==typeof i.onTaskMove&&i.onTaskMove(e)},a.onEventMoved=function(e){if("Auto"===i.taskGroupMode){var t=e.af,n=t.data.task;for(n.start=t.start(),n.end=t.end();t.data.parent;){var r=a.events.find(t.data.parent.id),o=s.childrenStartEnd(t.data.parent);r.start(o.start),r.end(o.end),a.events.update(r),t=r}}i.Ae.notify(),"function"==typeof i.onTaskMoved&&i.onTaskMoved(e)},a.onEventMoving=function(e){e.task=new DayPilot.Task(e.e,i),e.af=e.e,delete e.position,delete e.overlapping,delete e.resource,"function"==typeof i.onTaskMoving&&i.onTaskMoving(e)},a.onEventResize=function(e){e.af=e.e,e.task=new DayPilot.Task(e.e,i),"function"==typeof i.onTaskResize&&i.onTaskResize(e)},a.onEventResized=function(e){if("Auto"===i.taskGroupMode){var t=e.af,n=t.data.task;for(n.start=t.start(),n.end=t.end();t.data.parent;){var r=a.events.find(t.data.parent.id),o=s.childrenStartEnd(t.data.parent);r.start(o.start),r.end(o.end),a.events.update(r),t=r}}i.Ae.notify(),"function"==typeof i.onTaskResized&&i.onTaskResized(e)},a.onEventResizing=function(e){e.task=new DayPilot.Task(e.e,i),e.af=e.e,"function"==typeof i.onTaskResizing&&i.onTaskResizing(e)},a.onLinkCreate=function(e){e.source=i.tasks.find(e.from),e.target=i.tasks.find(e.to),"function"==typeof i.onLinkCreate&&i.onLinkCreate(e)},a.onLinkCreated=function(e){"function"==typeof i.onLinkCreated&&i.onLinkCreated(e)},a.onResourceExpand=function(e){var t=e.resource.$.row.task;t.row||(t.row={}),t.row.collapsed=!1},a.onResourceCollapse=function(e){var t=e.resource.$.row.task;t.row||(t.row={}),t.row.collapsed=!0}},s.bf=function(e){for(var t=0;t<a.rowlist.length;t++){var n=a.rowlist[t];if(n.task===e)return a.internal.createRowObject(n)}return null},s.Ue=function(){a.links.list=i.links.list?i.links.list:[]},s.Te=function(){a.resources=[],a.events.list=[],o.clearCache(),s.cf(i.tasks.list,a.resources,null),l.sheet&&(l.sheet.commit(),l.sheet=null)},s.df=function(e){var t=e.type||"Task";e.children&&e.children.length&&(t="Group");var n={};for(var r in e)"children"!==r&&(n[r]=e[r]);var o={};if(o.data=n,o.type=t,n.box||(n.box={}),"undefined"==typeof n.box.html)if("Task"===o.type){var s=n.complete||0;n.box.text=s+"%"}else n.box.text="";return"undefined"==typeof n.box.htmlRight&&(n.box.htmlRight=a.internal.xssTextHtml(n.text)),"function"==typeof i.onBeforeTaskRender&&i.onBeforeTaskRender(o),o.type=t,o};var l={};l.keys={},l.sheet=null,s.ef=function(e){if(e.data.box&&!e.data.box.cssClass&&e.data.box.backColor&&"Task"!==e.type){var t=DayPilot.Util.normalizeColor(e.data.box.backColor),n=e.type+"_"+t.replace("#",""),a=i.theme,r=i.theme+"_"+n;return l.keys[n]||(l.keys[n]=!0,l.sheet||(l.sheet=DayPilot.sheet()),"Group"===e.type?(l.sheet.add("."+r+"."+a+"_task_group ."+a+"_event_inner","position:absolute;top:5px;left:0px;right:0px;bottom:6px;overflow:hidden; background: "+t+"; filter: none; border: 0px none;"),l.sheet.add("."+r+"."+a+"_task_group."+a+"_event:before","content:''; border-color: transparent transparent transparent "+t+"; border-style: solid; border-width: 6px; position: absolute; bottom: 0px;"),l.sheet.add("."+r+"."+a+"_task_group."+a+"_event:after","content:''; border-color: transparent "+t+" transparent transparent; border-style: solid; border-width: 6px; position: absolute; bottom: 0px; right: 0px;")):"Milestone"===e.type&&(l.sheet.add("."+r+"."+a+"_task_milestone ."+a+"_event_inner","position:absolute;top:16%;left:16%;right:16%;bottom:16%; background: "+t+"; border: 0px none; -webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-ms-transform: rotate(45deg);-o-transform: rotate(45deg); transform: rotate(45deg); filter: none;"),l.sheet.add("."+r+"."+a+"_browser_ie8 ."+a+"_task_milestone ."+a+"_event_inner","-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=-0.7071067811865475, M21=0.7071067811865475, M22=0.7071067811865476);\""))),r}},s.cf=function(t,n,r){if(DayPilot.isArray(t))for(var l=0;l<t.length;l++){var d=t[l];o.addToCache(d,r);var c=s.df(d),u=c.data,h=c.type,f={};if(DayPilot.Util.copyProps(u,f,["id","start","end","text","complete","tags","versions"]),DayPilot.Util.copyProps(u.box,f),f.parent=r,f.task=d,f.resource=u.id,f.commitCallback=function(e){return function(){e.task.start=e.start,e.task.end=e.end}}(f),"Group"==h){f.type="Group",f.html=u.box&&u.box.html||"";var v=s.ef(c);if(v&&(f.cssClass=(f.cssClass||"")+" "+v),"Auto"===i.taskGroupMode){var p=s.childrenStartEnd(d);f.start=p.start,f.end=p.end,f.resizeDisabled=!0,f.moveDisabled=!0}}else if("Milestone"===h){f.html="",d.end=d.start;var v=s.ef(c);v&&(f.cssClass=(f.cssClass||"")+" "+v),u.end=u.start,f.end=u.start,f.barHidden=!0,f.resizeDisabled=!0,f.type="Milestone",f.width=i.taskHeight,delete f.backColor}else"Task"===h&&e();f.moveVDisabled=!0,f.htmlRight=u.box.htmlRight,f.htmlLeft=u.box.htmlLeft,a.events.list.push(f);var m={};m.task=d,DayPilot.Util.copyProps(u.row,m),m.name=u.text,m.id=u.id,m.children=[],m.expanded=!u.row||!u.row.collapsed,d.children&&d.children.length&&s.cf(d.children,m.children,d),n.push(m)}},s.childrenStartEnd=function(e){if(!e.children||!e.children.length){var t=e.start,n=e.end;return"Milestone"===e.type&&(n=t),{"start":new DayPilot.Date(t),"end":new DayPilot.Date(n)}}for(var t=null,n=null,i=0;i<e.children.length;i++){var a=s.childrenStartEnd(e.children[i]);(!t||a.start.getTime()<t.getTime())&&(t=a.start),(!n||a.end.getTime()>n.getTime())&&(n=a.end)}return{"start":t,"end":n}},this.rows={},this.rows.expand=function(e){a.rows.expand(e)},this.rows.expandAll=function(){a.rows.expandAll()},this.rows.selection={},this.rows.selection.add=function(e){a.rows.find(e.data.id)},this.rows.selection.clear=function(){a.rows.selection.clear()},this.rows.selection.get=function(){return a.rows.selection.get().map(function(e){return new DayPilot.Task(e.$.row.task,i)})},this.exportAs=function(e,t){return a.exportAs(e,t)},this.Ne=null,this.De=function(e){if(e){var t={"tasks":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?i.tasks.list=e.list:i.tasks.list=e)}},"links":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?i.links.list=e.list:i.links.list=e)}},"scrollTo":{"postInit":function(){this.data&&i.scrollTo(this.data)}},"scrollToTask":{"postInit":function(){this.data&&i.scrollToTask(this.data)}}};this.Ne=t;for(var n in e)if(t[n]){var a=t[n];a.data=e[n],a.preInit&&a.preInit()}else i[n]=e[n]}},this.Me=function(){var e=this.Ne;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.initialized=function(){return i.S},this.internal.rowObjectForTaskData=s.bf,this.internal.loadOptions=i.De,this.Ae={},this.Ae.scope=null,this.Ae.notify=function(){i.Ae.scope&&i.Ae.scope["$apply"]()},this.De(n)},"undefined"!=typeof jQuery&&!function(e){e.fn.daypilotGantt=function(e){var t=null,n=this.each(function(){if(!this.daypilot){var n=new DayPilot.Gantt(this.id,e);n.init(),this.daypilot=n,t||(t=n)}});return 1===this.length?t:n}}(jQuery),function(){var e=DayPilot.am();e&&e.directive("daypilotGantt",["$parse",function(e){return{"restrict":"E","template":"<div id='{{id}}'></div>","compile":function(t,n){return t.replaceWith(this["template"].replace("{{id}}",n["id"])),function(t,n,i){var a=new DayPilot.Gantt(n[0]);a.Ae.scope=t,a.init();var r=i["id"];r&&(t[r]=a);var o=i["publishAs"];if(o){(0,e(o).assign)(t,a)}for(var s in i)if(0===s.indexOf("on")){var l=DayPilot.Util.shouldApply(s);l?!function(n){a[n]=function(a){var r=e(i[n]);t["$apply"](function(){r(t,{"args":a})})}}(s):!function(n){a[n]=function(a){e(i[n])(t,{"args":a})}}(s)}var d=t["$watch"],c=i["config"]||i["daypilotConfig"];d.call(t,c,function(e,t){a.De(e),a.update()},!0)}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){if("undefined"==typeof DayPilot.Kanban){var e=function(){};DayPilot.Kanban=function(t,n){this.v="2021.1.4880";var i=this;this.barWidth=5,this.cardAutoHeight=!0,this.cardHeight=60,this.cardMarginLeft=5,this.cardMarginRight=5,this.cardMarginBottom=5,this.columnHeaderHeight=20,this.crosshairType="Disabled",this.height=300,this.heightSpec="Auto",this.theme="kanban_default",this.cellMarginBottom=4,this.cellMarginTop=5,this.columnWidthSpec="Auto",this.columnWidth=200,this.cornerHtml=null,this.contextMenuCard=null,this.rowMinHeight=0,this.swimlaneCollapsingEnabled=!1,this.swimlaneHeaderWidth=80,this.visible=!0,this.swimlanes={},this.swimlanes.list=[],this.columns={},this.columns.list=[],this.cards={},this.cards.list=[],this.cardDeleteHandling="Disabled",this.cardMoveHandling="Update",this.columnMoveHandling="Disabled",this.swimlaneMoveHandling="Disabled",this.cardRightClickHandling="ContextMenu",this.onBeforeCellRender=null,this.onCardClick=null,this.onCardClicked=null,this.onCardRightClick=null,this.onCardRightClicked=null,this.onCardDelete=null,this.onCardDeleted=null,this.onCardMove=null,this.onCardMoved=null,this.onColumnMove=null,this.onColumnMoved=null,this.onHeightChanged=null,this.onSwimlaneMove=null,this.onSwimlaneMoved=null;var a=new DayPilot.Scheduler(t);this.scheduler=a;var r={},o=15,s=15;e();var l=new DayPilot.Date("2000-01-01");r.translate=function(){var e=a;e.startDate=l,e.scale="Day",e.timeHeaders=[{groupBy:"Cell",format:"d"}],e.rowHeaderColumnsMode="Legacy",e.heightSpec=i.heightSpec,e.cellWidthSpec=i.columnWidthSpec,e.cellWidth=i.columnWidth,e.cellsMarkBusiness=!1,e.cornerHtml=i.cornerHtml,e.crosshairType=i.crosshairType,e.dynamicEventRendering="Disabled",e.floatingEvents=!1,e.floatingTimeHeaders=!1,e.rowMinHeight=i.rowMinHeight,e.rowMarginTop=i.cellMarginTop,e.rowMarginBottom=i.cellMarginBottom,e.devsb=i.devsb,e.eventMoveToPosition=!0,e.headerHeight=i.columnHeaderHeight,e.eventResizeHandling="Disabled",e.timeRangeSelectedHandling="Disabled",e.eventHeight=i.cardHeight,e.eventMarginLeft=i.cardMarginLeft,e.eventMarginRight=i.cardMarginRight,e.eventMarginBottom=i.cardMarginBottom,e.eventTextWrappingEnabled=!0,e.durationBarVisible=!1,e.theme=i.theme,e.visible=i.visible,e.rowHeaderWidth=i.swimlaneHeaderWidth,e.contextMenu=i.contextMenuCard,e.eventDeleteHandling=i.cardDeleteHandling,e.eventMoveHandling=i.cardMoveHandling,e.rowMoveHandling=DayPilot.list(i.swimlanes.list).isEmpty()?"Disabled":i.swimlaneMoveHandling,e.eventRightClickHandling=i.cardRightClickHandling,e.onHeightChanged=i.onHeightChanged,e.internal.enableCellStacking(i.cardAutoHeight),e.internal.cssNames.timeheadercol="_colheadercell",e.internal.cssNames.timeheadercolInner="_colheadercell_inner",e.internal.cssNames.resourcedivider="_rowheaderdivider",e.internal.cssNames.event="_card",e.internal.cssNames.eventInner="_card_inner",e.internal.cssNames.eventDelete="_card_delete",e.internal.cssNames.eventMovingSource="_card_moving_source",i.swimlaneCollapsingEnabled&&(e.rowHeaderWidthMarginRight=15),e.onBeforeTimeHeaderRender=function(e){var t=i.gf(e.header.start);if(e.header.html=t.name,e.header.toolTip=t.toolTip||"",e.header.areas=DayPilot.list(t.areas).map(function(e){var t=[];return DayPilot.Util.copyProps(e,t),t}),DayPilot.list(e.header.areas).each(function(e){e.target=new DayPilot.KanbanColumn(t,i)}),"Disabled"!==i.columnMoveHandling){var n=i.theme+"_columnmove_handle";e.header.areas.push({"left":0,"top":0,"width":20,"height":20,"css":n,"mousedown":i.hf,"action":"None"})}},e.onBeforeCellRender=function(t){var n={};n.cell={},n.cell.column=new DayPilot.KanbanColumn(i.gf(t.cell.start),i),n.cell.swimlane=null;var a=i.if(t.cell.resource);a&&(n.cell.swimlane=new DayPilot.Swimlane(a,i)),n.cell.areas=[],n.cell.cssClass=null,n.cell.html=null,n.cell.backImage=null,n.cell.backRepeat=null,n.cell.backColor=null,"function"==typeof i.onBeforeCellRender&&(i.onBeforeCellRender(n),DayPilot.Util.copyProps(n.cell,t.cell,["areas","cssClass","html","backImage","backRepeat","backColor"]),DayPilot.list(t.cell.areas).each(function(e){e.target={"swimlane":n.cell.swimlane,"column":n.cell.column}}));var r=e.rows.find(t.cell.resource);e.resources[r.index].collapsed&&(t.cell.cssClass||(t.cell.cssClass=""),t.cell.cssClass+=" "+i.theme+"_collapsed")},e.onEventClick=function(e){var t=new DayPilot.Args(e);t.card=new DayPilot.Card(e.e.data.card,i),"function"==typeof i.onCardClick&&i.onCardClick(t),e.wrapped=t},e.onEventClicked=function(e){var t=e.wrapped;"function"==typeof i.onCardClicked&&i.onCardClicked(t)},e.onEventRightClick=function(e){var t=new DayPilot.Args(e);if(t.card=new DayPilot.Card(e.e.data.card,i),"function"==typeof i.onCardRightClick&&i.onCardRightClick(t),e.wrapped=t,!e.preventDefault.value){var n=e.e,a=t.card;switch(i.cardRightClickHandling){case"ContextMenu":var r=n.client.contextMenu();r?r.show(a):i.contextMenuCard&&i.contextMenuCard.show(a),e.preventDefault()}}},e.onEventRightClicked=function(e){var t=e.wrapped;"function"==typeof i.onCardRightClicked&&i.onCardRightClicked(t)},e.onEventDelete=function(e){var t=new DayPilot.Args(e);t.card=new DayPilot.Card(e.e.data.card,i),"function"==typeof i.onCardDelete&&i.onCardDelete(t),e.wrapped=t},e.onEventDeleted=function(e){DayPilot.rfa(i.cards.list,e.e.data.card);var t=e.wrapped;"function"==typeof i.onCardDeleted&&i.onCardDeleted(t)},e.onEventMove=function(e){e.external&&(e.e.data.card={id:e.e.data.id,name:e.e.data.name,text:e.e.data.text,barColor:e.e.data.barColor,barBackColor:e.e.data.barBackColor});var t=new DayPilot.Args(e);t.card=new DayPilot.Card(e.e.data.card,i),t.column=new DayPilot.KanbanColumn(i.gf(e.newStart)),t.position=e.position,t.external=e.external,"*"!==e.newResource?t.swimlane=new DayPilot.Swimlane(i.if(e.newResource),i):t.swimlane=null;for(var n=a.cells.find(e.newStart,e.newResource)[0].events(),o=e.position,s=null,l=o-1;n[l];){if(n[l].data!==e.e.data){s=new DayPilot.Card(n[l]);break}l-=1}for(var d=null,c=o;n[c];){if(n[c].data!==e.e.data){d=new DayPilot.Card(n[c]);break}c+=1}if(t.previous=s,t.next=d,"function"==typeof i.onCardMove&&i.onCardMove(t),e.wrapped=t,e.preventDefault(),!t.preventDefault.value){switch(i.cardMoveHandling){case"Update":var u=0;d?u=d.wrapped.data.sort[0]:s&&(u=s.wrapped.data.sort[0]),e.e.data.sort=[u,(new DayPilot.Date).toString()],DayPilot.rfa(i.cards.list,e.e.data.card);var h=0;d?h=DayPilot.indexOf(i.cards.list,d.data):s&&(h=DayPilot.indexOf(i.cards.list,s.data)+1);var f=i.gf(e.newStart);e.e.data.card.column=f.id,e.e.data.card.swimlane=e.newResource,i.cards.list.splice(h,0,e.e.data.card),r.updateSort(),a.internal.deleteDragSource(),i.update()}!function(){var t=e.wrapped,n=DayPilot.list(i.cards.list).find(function(t){return e.e.data.card===t});n.swimlane=t.swimlane?t.swimlane.data.id:null,n.column=t.column.data.id,"function"==typeof i.onCardMoved&&i.onCardMoved(t)}()}},e.onBeforeResHeaderRender=function(e){if(i.swimlaneCollapsingEnabled){if(!DayPilot.list(i.swimlanes.list).isEmpty()){var t=i.theme+"_swimlane_collapse";e.resource.collapsed&&(t=i.theme+"_swimlane_expand"),e.resource.areas=[{"right":0,"top":0,"height":s,"width":o,"action":"JavaScript","css":t,"js":function(){i.jf(e.resource.index)}}]}}},e.onRowMove=function(e){var t=new DayPilot.Args(e);e.wrapped=t,t.swimlane=new DayPilot.Swimlane(e.source.$.row.swimlane);var n=0;switch(e.position){case"before":n=e.target.index;break;case"after":n=e.target.index+1;break;default:throw"Unexpected target swimlane position: "+e.position}t.position=n,t.previous=null;for(var r=n-1;a.rowlist[r]&&a.rowlist[r].swimlane!==t.swimlane.data;)t.previous=new DayPilot.Swimlane(a.rowlist[r].swimlane),r-=1;t.next=null;for(var o=n;a.rowlist[o]&&a.rowlist[o].swimlane!==t.swimlane.data;)t.next=new DayPilot.Swimlane(a.rowlist[o].swimlane),o+=1;"function"==typeof i.onSwimlaneMove&&i.onSwimlaneMove(t)},e.onRowMoved=function(e){var t=e.wrapped;DayPilot.rfa(i.swimlanes.list,t.swimlane.data);var n=0;t.next?n=DayPilot.indexOf(i.swimlanes.list,t.next.data):t.previous&&(n=DayPilot.indexOf(i.swimlanes.list,t.previous.data)+1),i.swimlanes.list.splice(n,0,t.swimlane.data),"function"==typeof i.onSwimlaneMoved&&i.onSwimlaneMoved(t)},e.treePreventParentUsage=!0},r.loadCards=function(){var e=i.theme+"_card_header",t=i.theme+"_card_body",n=(new DayPilot.Date).toString();a.sortDirections=["asc","desc"],a.events.list=DayPilot.list(i.cards.list).map(function(a,r){var o=a.html||a.text||"",s=a.name||"",d={};return d.id=a.id,d.text=a.text,d.html="<div class='"+e+"'>"+s+"</div><div class='"+t+"'>"+o+"</div>",d.resource=a.swimlane,d.start=l.addDays(DayPilot.list(i.columns.list).findIndex(function(e){return a.column===e.id})),d.end=d.start.addDays(1),d.card=a,d.height=a.height,d.cssClass=a.cssClass,d.sort=[r,n],d.areas=DayPilot.list(a.areas).map(function(e){var t={};return DayPilot.Util.copyProps(e,t),e.js&&(t.js=function(t){e.js(new DayPilot.Card(t.data.card,i))}),t}),d.areas.push({"left":0,"width":5,"top":0,"bottom":0,"backColor":a.barColor,"cssClass":i.theme+"_card_bar"}),d})},r.updateSort=function(){var e=(new DayPilot.Date).toString();DayPilot.list(i.cards.list).each(function(t,n){var i=r.findSchedulerEventData(t);i&&(i.sort=[n,e])})},r.findSchedulerEventData=function(e){return DayPilot.list(a.events.list).find(function(t){return t.card===e})},r.loadSwimlanes=function(){var e=DayPilot.list(i.swimlanes.list);a.resources=e.map(function(e){var t={};return t.name=e.name,t.id=e.id,t.swimlane=e,e.collapsed&&(t.collapsed=!0,t.eventHeight=20,t.hideEvents=!0),t}),e.isEmpty()&&(a.resources=[{name:"",id:"*"}])},r.loadColumns=function(){var e=DayPilot.list(i.columns.list);a.days=e.length};var d={};d.active=null,d.div=null,d.update=function(){d.clear();var e=d.findPosition();d.draw(e)},d.clear=function(){DayPilot.de(d.div),d.div=null},d.draw=function(e){var t=0;if(e>=a.itline.length){var n=a.itline[a.itline.length-1];t=n.left+n.width-3}else t=a.itline[e].left;var r=document.createElement("div");r.style.position="absolute",r.style.left=t+"px",r.style.width="3px",r.style.top=0,r.style.height=a.headerHeight+"px",r.className=i.theme+"_columnmove_position",d.div=r,a.nav.timeHeader.appendChild(r)},d.findPosition=function(){if(i.coords.x<0)return 0;var e=DayPilot.list(a.itline).findIndex(function(e){var t=e.left+a.rowHeaderWidth,n=e.width;return i.coords.x<t+n/2});return e===-1?a.itline.length:e},this.hf=function(e){d.active=e},this.gf=function(e){return i.columns.list[DayPilot.DateUtil.daysDiff(l,e)]},this.if=function(e){return DayPilot.list(i.swimlanes.list).find(function(t){return t.id===e})},this.message=function(e,t,n,i){a.message(e,t,n,i)},this.show=function(){i.visible=!0,a.show()},this.hide=function(){i.visible=!1,a.hide()},this.cards.add=function(e){var t=null;t=e&&e instanceof DayPilot.Card?e.data:e,e&&(i.cards.list.push(t),i.update())},this.cards.remove=function(e){var t=null;t=e&&e instanceof DayPilot.Card?e.data:e,e&&(DayPilot.rfa(i.cards.list,t),i.update())},this.cards.update=function(e){i.update()},this.cards.find=function(e){var t=DayPilot.list(i.cards.list).find(function(t){return e===t.id});return t?new DayPilot.Card(t,i):null},this.jf=function(e){DayPilot.list(i.swimlanes.list).isEmpty()||(i.swimlanes.list[e].collapsed=!i.swimlanes.list[e].collapsed),i.update()},this.init=function(){if(this.S)throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.");return r.translate(),r.loadSwimlanes(),r.loadColumns(),r.loadCards(),a.init(),i.me(),this.S=!0,this},this.T=!1,this.dispose=function(){a.dispose(),i.T=!0},this.update=function(e){if(!calendar.S)throw new DayPilot.Exception("You are trying to update a DayPilot.Kanban instance that hasn't been initialized yet.");if(calendar.T)throw new DayPilot.Exception("You are trying to update a DayPilot.Kanban instance that has been disposed.");i.De(e),r.translate(),r.loadSwimlanes(),r.loadColumns(),r.loadCards(),a.update()},this.me=function(){DayPilot.re(document,"mouseup",i.kf),DayPilot.re(document,"mousemove",i.lf)},this.Ae={},this.Ae.scope=null,this.Ae.notify=function(){i.Ae.scope&&i.Ae.scope["$apply"]()},this.Ne=null,this.De=function(e){if(e){var t={"cards":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?i.cards.list=e.list:i.cards.list=e)}},"columns":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?i.columns.list=e.list:i.columns.list=e)}},"swimlanes":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?i.swimlanes.list=e.list:i.swimlanes.list=e)}}};this.Ne=t;for(var n in e)if(t[n]){var a=t[n];a.data=e[n],a.preInit&&a.preInit()}else i[n]=e[n]}},this.Me=function(){var e=this.Ne;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.loadOptions=i.De,this.De(n),this.ce=function(){var e=dp.nav.top;return!!e&&(e.offsetWidth>0&&e.offsetHeight>0)},this.ee=function(){var e=i,t=e.ce;t()||e.ge||(e.ge=setInterval(function(){t()&&(e.update(),clearInterval(e.ge))},100))},this.lf=function(e){i.coords=DayPilot.mo3(a.nav.top,e),d.active&&d.update()},this.kf=function(e){if(d.active){var t=d.active.source,n=d.findPosition(),a=i.gf(t.start),r=new DayPilot.Args;r.column=new DayPilot.KanbanColumn(a,i),r.position=n,r.previous=null,r.next=null;for(var o=null,s=r.position;0!==s&&!o;)a!==i.columns.list[s-1]&&(o=i.columns.list[s-1]),s-=1;o&&(r.previous=new DayPilot.KanbanColumn(o,i));var l=null;for(s=r.position;s<i.columns.list.length-1&&!l;)a!==i.columns.list[s]&&(l=i.columns.list[s]),s+=1;if(l&&(r.next=new DayPilot.KanbanColumn(l,i)),"function"==typeof i.onColumnMove&&i.onColumnMove(r),!r.preventDefault.value){if("Update"===i.columnMoveHandling){DayPilot.rfa(i.columns.list,r.column.data);var c=0;r.next?c=DayPilot.indexOf(i.columns.list,r.next.data):r.previous&&(c=DayPilot.indexOf(i.columns.list,r.previous.data)+1),i.columns.list.splice(c,0,r.column.data),i.update()}"function"==typeof i.onColumnMoved&&i.onColumnMove(r)}d.active=null,d.clear()}}},DayPilot.Kanban.makeDraggable=function(e){DayPilot.Scheduler.makeDraggable(e)},DayPilot.Card=function(e,t){if(e instanceof DayPilot.Event){var n=e;this.data=n.data.card,this.wrapped=e}else this.data=e;this.control=t},DayPilot.KanbanColumn=function(e,t){this.data=e,this.control=t},DayPilot.Swimlane=function(e,t){this.data=e,this.control=t},function(){var e=DayPilot.am();e&&e.directive("daypilotKanban",["$parse",function(e){return{"restrict":"E","template":"<div id='{{id}}'></div>","compile":function(t,n){return t.replaceWith(this["template"].replace("{{id}}",n["id"])),function(t,n,i){var a=new DayPilot.Kanban(n[0]);a.Ae.scope=t,a.init();var r=i["id"];r&&(t[r]=a);var o=i["publishAs"];if(o){(0,e(o).assign)(t,a)}for(var s in i)if(0===s.indexOf("on")){var l=DayPilot.Util.shouldApply(s);l?!function(n){a[n]=function(a){var r=e(i[n]);t["$apply"](function(){r(t,{"args":a})})}}(s):!function(n){a[n]=function(a){e(i[n])(t,{"args":a})}}(s)}var d=t["$watch"],c=i["config"]||i["daypilotConfig"];d.call(t,c,function(e,t){a.De(e),a.update()},!0)}}}}])}()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){if("undefined"==typeof DayPilot.Menu){var e=function(){},t={};t.mouse=null,t.menu=null,t.handlersRegistered=!1,t.hideTimeout=null,t.waitingSubmenu=null,DayPilot.Menu=function(n){var i=this,a=null;this.v="2021.1.4880",this.zIndex=120,this.cssClassPrefix="menu_default",this.cssOnly=!0,this.menuTitle=null,this.showMenuTitle=!1,this.hideOnMouseOut=!1,this.hideAfter=200,this.theme=null,this.onShow=null,this.A=function(){},n&&DayPilot.isArray(n)&&(this.items=n),this.toJSON=function(){return null},this.show=function(n,r){r=r||{};var o=null;if(n?"string"==typeof n.id||"number"==typeof n.id?o=n.id:"function"==typeof n.id?o=n.id():"function"==typeof n.value&&(o=n.value()):o=null,"undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),r.submenu||t.menuClean(),this.A.submenu=null,null!==t.mouse){i.cssOnly||(i.cssOnly=!0);var s=null;if(n&&n.isRow&&n.$.row.task?(s=new DayPilot.Task(n.$.row.task,n.calendar),s.menuType="resource"):s=n&&n.isEvent&&n.data.task?new DayPilot.Task(n,n.calendar):n,"function"==typeof i.onShow){var l={};if(l.source=s,l.menu=i,l.preventDefault=function(){l.preventDefault.value=!0},i.onShow(l),l.preventDefault.value)return}var d=document.createElement("div");if(d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.display="none",d.style.overflow="hidden",d.style.zIndex=this.zIndex+1,d.className=this.applyCssClass("main"),d.onclick=function(e){e.cancelBubble=!0,this.parentNode.removeChild(this)},this.hideOnMouseOut&&(d.onmousemove=function(e){clearTimeout(t.hideTimeout)},d.onmouseleave=function(e){i.delayedHide({"hideParent":!0})}),!this.items||0===this.items.length)throw"No menu items defined.";if(this.showMenuTitle){var c=document.createElement("div");c.innerHTML=this.menuTitle,c.className=this.applyCssClass("title"),d.appendChild(c)}for(var u=0;u<this.items.length;u++){var h=this.items[u],f=document.createElement("div");if(DayPilot.Util.addClass(f,this.applyCssClass("item")),h.items&&DayPilot.Util.addClass(f,this.applyCssClass("item_haschildren")),"undefined"!=typeof h&&!h.hidden){if("-"===h.text){var v=document.createElement("div");v.addEventListener("click",function(e){e.stopPropagation()}),f.appendChild(v)}else{var p=document.createElement("a");if(p.style.position="relative",p.style.display="block",h.cssClass&&DayPilot.Util.addClass(p,h.cssClass),h.disabled)DayPilot.Util.addClass(p,i.applyCssClass("item_disabled"));else{if(h.onclick||h.onClick){p.item=h,p.onclick=function(e,t){return function(n){if("function"==typeof e.onClick){var i={};if(i.item=e,i.source=t.source,i.originalEvent=n,i.preventDefault=function(){i.preventDefault.value=!0},e.onClick(i),i.preventDefault.value)return}e.onclick&&e.onclick.call(t,n)}}(h,p);var m=function(e,n){return function(i){i.stopPropagation(),i.preventDefault();var a=function(){window.setTimeout(function(){n.source.calendar.internal.touch.active=!1},500)};if("function"==typeof e.onClick){var r={};if(r.item=e,r.source=n.source,r.originalEvent=i,
r.preventDefault=function(){r.preventDefault.value=!0},e.onClick(r),r.preventDefault.value)return void a()}e.onclick&&e.onclick.call(n,i),t.menuClean(),a()}};p.ontouchstart=function(e){e.stopPropagation(),e.preventDefault(),p.source.calendar.internal.touch.active=!0},p.ontouchend=m(h,p)}if(h.items&&!h.disabled){var g=function(e,t){return function(n){n.preventDefault(),n.stopPropagation(),i.mf(e,t)}};p.ontouchend=g(h,p)}if(h.onclick)e();else if(h.href)p.href=h.href.replace(/\x7B0\x7D/gim,o),h.target&&p.setAttribute("target",h.target);else if(h.command){var g=function(e,t){return function(n){var i=t.source,a=e;a.action=a.action?a.action:"CallBack";var r=i.calendar||i.root;if(i instanceof DayPilot.Link)return void r.internal.linkMenuClick(a.command,i,a.action);if(i instanceof DayPilot.Selection)return void r.internal.timeRangeMenuClick(a.command,i,a.action);if(i instanceof DayPilot.Event)return void r.internal.eventMenuClick(a.command,i,a.action);if(i instanceof DayPilot.Selection)return void r.internal.timeRangeMenuClick(a.command,i,a.action);if(i instanceof DayPilot.Task)return void("resource"===i.menuType?r.internal.resourceHeaderMenuClick(a.command,t.menuSource,a.action):r.internal.eventMenuClick(a.command,t.menuSource,a.action));switch(i.menuType){case"resource":return void r.internal.resourceHeaderMenuClick(a.command,i,a.action);case"selection":return void r.internal.timeRangeMenuClick(a.command,i,a.action);default:return void r.internal.eventMenuClick(a.command,i,a.action)}n.preventDefault()}};p.onclick=g(h,p),p.ontouchend=g(h,p)}}h.items&&p.addEventListener("click",function(e){e.stopPropagation()}),p.source=s,p.menuSource=n;var b=document.createElement("span");if(b.className=i.applyCssClass("item_text"),b.innerHTML=DayPilot.Util.escapeTextHtml(h.text,h.html),p.appendChild(b),h.image){var y=document.createElement("img");y.src=h.image,y.style.position="absolute",y.style.top="0px",y.style.left="0px",p.appendChild(y)}if(h.icon){var w=document.createElement("span");w.className=i.applyCssClass("item_icon");var x=document.createElement("i");x.className=h.icon,w.appendChild(x),p.appendChild(w)}var k=function(e,n){return function(){var a=(n.source,e),r=t.waitingSubmenu;if(r){if(r.parent===a)return;clearTimeout(r.timeout),t.waitingSubmenu=null}e.disabled||(t.waitingSubmenu={},t.waitingSubmenu.parent=a,t.waitingSubmenu.timeout=setTimeout(function(){t.waitingSubmenu=null,i.mf(a,n)},300))}};p.onmouseover=k(h,p),f.appendChild(p)}d.appendChild(f)}}var C=function(e){window.setTimeout(function(){t.menuClean(),DayPilot.MenuBar.deactivate()},100)};d.onclick=C,d.ontouchend=C,d.onmousedown=function(e){e=e||window.event,e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},d.oncontextmenu=function(){return!1},document.body.appendChild(d),i.A.visible=!0,i.A.source=n,d.style.display="";var S=d.offsetHeight,E=d.offsetWidth;d.style.display="none";var D=document.documentElement.clientHeight,T=window.innerWidth,A="number"==typeof r.windowMargin?r.windowMargin:5;if(function(){var e=r.initiator;if(e){var t=e.div,n=e.e,i=e.area,o=i.visibility||i.v||"Visible",s=e.a;if("Visible"!==o&&(s=DayPilot.Areas.createArea(t,n,i),t.appendChild(s),a=s),s){var l=DayPilot.abs(s);r.x=l.x,r.y=l.y+l.h+2}}}(),function(){var e="number"==typeof r.x?r.x:t.mouse.x+1,n="number"==typeof r.y?r.y:t.mouse.y+1,i=document.body.scrollTop||document.documentElement.scrollTop,a=document.body.scrollLeft||document.documentElement.scrollLeft;if(n-i>D-S&&0!==D){var o=n-i-(D-S)+A;d.style.top=n-o+"px"}else d.style.top=n+"px";if("right"===r.align&&(e-=E),e-a>T-E&&0!==T){var s=e-a-(T-E)+A;d.style.left=e-s+"px"}else d.style.left=e+"px"}(),r.parentLink){var _=r.parentLink,M=parseInt(new DayPilot.StyleReader(d).get("border-top-width")),H=DayPilot.abs(r.parentLink.parentNode),R=H.x+_.offsetWidth,B=H.y-M;R+E>T&&(R=Math.max(0,H.x-E));var P=document.body.scrollTop+document.documentElement.scrollTop;B+S-P>D&&(B=Math.max(0,D-S+P)),d.style.left=R+"px",d.style.top=B+"px"}d.style.display="",this.addShadow(d),this.A.div=d,r.submenu||(DayPilot.Menu.active=this)}},this.mf=function(e,t){var n=e,a=t.source;if((!i.A.submenu||i.A.submenu.item!==e)&&(i.A.submenu&&i.A.submenu.item!==e&&(DayPilot.Util.removeClass(i.A.submenu.link.parentNode,i.applyCssClass("item_haschildren_active")),i.A.submenu.menu.hide(),i.A.submenu=null),e.items)){var r=i.cloneOptions();r.items=e.items,i.A.submenu={},i.A.submenu.menu=new DayPilot.Menu(r),i.A.submenu.menu.nf=i,i.A.submenu.menu.show(a,{"submenu":!0,"parentLink":t,"parentItem":n}),i.A.submenu.item=e,i.A.submenu.link=t,DayPilot.Util.addClass(t.parentNode,i.applyCssClass("item_haschildren_active"))}},this.applyCssClass=function(e){var t=this.theme||this.cssClassPrefix,n=this.cssOnly?"_":"";return t?t+n+e:""},this.cloneOptions=function(){return DayPilot.Util.copyProps(r,{},["cssClassPrefix","theme","hideAfter","hideOnMouseOut","zIndex"])},this.hide=function(e){e=e||{},this.A.submenu&&this.A.submenu.menu.hide();var n=t.waitingSubmenu;n&&(t.waitingSubmenu=null,clearTimeout(n.timeout)),this.removeShadow(),this.A.div&&this.A.div.parentNode===document.body&&document.body.removeChild(this.A.div),a&&(DayPilot.de(a),a=null),i.A.visible=!1,i.A.source=null,i.nf&&e.hideParent&&i.nf.hide(e),DayPilot.Menu.active===i&&(DayPilot.Menu.active=null)},this.delayedHide=function(e){t.hideTimeout=setTimeout(function(){i.hide(e)},i.hideAfter)},this.cancelHideTimeout=function(){clearTimeout(t.hideTimeout)},this.init=function(e){return t.mouseMove(e),this},this.addShadow=function(e){},this.removeShadow=function(){};var r=DayPilot.isArray(n)?null:n;if(r)for(var o in r)this[o]=r[o]},DayPilot.MenuBar=function(e,t){var n=this;t=t||{},this.items=[],this.theme="menubar_default",this.windowMargin=0,this.nav={},this.elements={},this.elements.items=DayPilot.list(),this.of=null,this.S=!1;for(var i in t)this[i]=t[i];this.pf=function(e){return this.theme+"_"+e},this.Ya=function(){this.nav.top=document.getElementById(e);var t=this.nav.top;t.className=this.pf("main"),DayPilot.list(n.items).forEach(function(e){var i=document.createElement("span");i.innerHTML=DayPilot.Util.escapeTextHtml(e.text,e.html),i.className=n.pf("item"),e.cssClass&&i.classList.add(e.cssClass),i.data=e,i.onclick=function(t){if(n.active&&n.active.item===e)n.qf();else if(e.children)return void n.rf(i);if("function"==typeof e.onClick){var a={};a.item=e,a.originalEvent=t,e.onClick(a)}},i.onmousedown=function(e){e.stopPropagation()},i.onmouseover=function(){n.active&&n.active.item!==e&&n.rf(i)},t.appendChild(i),n.elements.items.push(i)})},this.qf=function(){var e=n.pf("item_active");n.elements.items.forEach(function(t){DayPilot.Util.removeClass(t,e)}),n.active&&n.active.menu&&n.active.menu.hide(),n.active=null},this.sf=function(e){return!!n.active&&n.active.item===e.data},this.rf=function(e){if(!n.sf(e)){n.qf();var t=e.data,i=n.active={};i.item=t,i.div=e;var a=n.pf("item_active");DayPilot.Util.addClass(e,a);var r=DayPilot.abs(e);if(t.children){i.menu=new DayPilot.Menu({"items":t.children});var o=r.x;"right"===t.align&&(o+=r.w),i.menu.show(null,{"x":o,"y":r.y+r.h,"align":t.align,"windowMargin":n.windowMargin})}DayPilot.MenuBar.active=n}},this.init=function(){return this.Ya(),this.S=!0,this},this.dispose=function(){this.S&&(this.nav.top.innerHTML="",this.elements.items=[])}},DayPilot.MenuBar.deactivate=function(){DayPilot.MenuBar.active&&(DayPilot.MenuBar.active.qf(),DayPilot.MenuBar.active=null)},t.menuClean=function(){"undefined"!=typeof DayPilot.Menu.active&&DayPilot.Menu.active&&(DayPilot.Menu.active.hide(),DayPilot.Menu.active=null)},t.mouseDown=function(e){"undefined"!=typeof t&&(t.menuClean(),DayPilot.MenuBar.deactivate())},t.mouseMove=function(e){"undefined"!=typeof t&&(t.mouse=t.mousePosition(e))},t.touchMove=function(e){"undefined"!=typeof t&&(t.mouse=t.touchPosition(e))},t.touchStart=function(e){"undefined"!=typeof t&&(t.mouse=t.touchPosition(e))},t.touchEnd=function(e){},t.touchPosition=function(e){if(!e||!e.touches)return null;var t=e.touches[0],n={};return n.x=t.pageX,n.y=t.pageY,n},t.mousePosition=function(e){return DayPilot.mo3(null,e)},DayPilot.Menu.touchPosition=function(e){e.touches&&(t.mouse=t.touchPosition(e))},DayPilot.Menu.hide=function(e){if(e=e||{},e.calendar){var n=DayPilot.Menu.active;if(n){var i=n.A.source;i&&i.calendar===e.calendar&&t.menuClean()}}else t.menuClean()},t.handlersRegistered||(DayPilot.re(document,"mousemove",t.mouseMove),DayPilot.re(document,"mousedown",t.mouseDown),DayPilot.re(document,"touchmove",t.touchMove),DayPilot.re(document,"touchstart",t.touchStart),DayPilot.re(document,"touchend",t.touchEnd),t.handlersRegistered=!0),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot&&(DayPilot={}),function(DayPilot){function e(t,n,i){var a=n.indexOf(".");if(a===-1)return void(t[n]=i);var r=n.substring(0,a),o=n.substring(a+1),s=t[r];"object"==typeof s&&null!==s||(t[r]={},s=t[r]),e(s,o,i)}function t(e,n,i){n=n||{},i=i||"";for(var a in e){var r=e[a];"object"==typeof r?"[object Array]"===Object.prototype.toString.call(r)?n[i+a]=r:r&&r.toJSON?n[i+a]=r.toJSON():t(r,n,i+a+"."):n[i+a]=r}return n}if(!DayPilot.ModalStatic){DayPilot.ModalStatic={},DayPilot.ModalStatic.list=[],DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var e=this.list.pop();e&&e.hide()}},DayPilot.ModalStatic.remove=function(e){for(var t=DayPilot.ModalStatic.list,n=0;n<t.length;n++)if(t[n]===e)return void t.splice(n,1)},DayPilot.ModalStatic.close=function(e){DayPilot.ModalStatic.result(e),DayPilot.ModalStatic.hide()},DayPilot.ModalStatic.result=function(e){var t=DayPilot.ModalStatic.list;t.length>0&&(t[t.length-1].result=e)},DayPilot.ModalStatic.displayed=function(e){for(var t=DayPilot.ModalStatic.list,n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},DayPilot.ModalStatic.stretch=function(){if(this.list.length>0){var e=this.list[this.list.length-1];e&&e.stretch()}},DayPilot.ModalStatic.last=function(){var e=DayPilot.ModalStatic.list;return e.length>0?e[e.length-1]:null};var n=function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.styleSheet||e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e);var t=!!e.styleSheet,n={};return n.rules=[],n.commit=function(){try{t&&(e.styleSheet.cssText=this.rules.join("\n"))}catch(e){}},n.add=function(n,i,a){if(t)return void this.rules.push(n+"{"+i+"}");if(e.sheet.insertRule)"undefined"==typeof a&&(a=e.sheet.cssRules.length),e.sheet.insertRule(n+"{"+i+"}",a);else{if(!e.sheet.addRule)throw"No CSS registration method found";e.sheet.addRule(n,i,a)}},n},i=new n;i.add(".modal_default_main","border: 10px solid #ccc; max-width: 90%;"),i.add(".modal_default_main:focus","outline: none;"),i.add(".modal_default_content","padding: 10px 0px;"),i.add(".modal_default_inner","padding: 20px;"),i.add(".modal_default_input","padding: 10px 0px;"),i.add(".modal_default_buttons","margin-top: 10px;"),i.add(".modal_default_buttons","padding: 10px 0px;"),i.add(".modal_default_form_item","padding: 10px 0px; position: relative;"),i.add(".modal_default_form_item_level1","border-left: 2px solid #ccc; margin-left: 10px; padding-left: 20px;"),i.add(".modal_default_form_item.modal_default_form_title","font-size: 1.5rem; font-weight: bold;"),i.add(".modal_default_form_item input[type=text]","width: 100%; box-sizing: border-box;"),i.add(".modal_default_form_item textarea","width: 100%; height: 200px; box-sizing: border-box;"),i.add(".modal_default_form_item input[type=select]","width: 100%; box-sizing: border-box;"),i.add(".modal_default_form_item label","display: block;"),i.add(".modal_default_form_item select","width: 100%; box-sizing: border-box;"),i.add(".modal_default_form_item_label","margin: 2px 0px;"),i.add(".modal_default_form_item_image img","max-width: 100%; height: auto;"),i.add(".modal_default_form_item_invalid",""),i.add(".modal_default_form_item_invalid_message","position: absolute; right: 0px; top: 9px; background-color: red; color: #ffffff; padding: 2px; border-radius: 2px;"),i.add(".modal_default_background","opacity: 0.5; background-color: #000;"),i.add(".modal_default_ok","padding: 3px; width: 80px;"),i.add(".modal_default_cancel","padding: 3px; width: 80px;"),i.add(".modal_default_form_item_date","position: relative;"),i.add(".modal_default_form_item_date:after","content: ''; position: absolute; right: 7px; top: 50%; margin-top: 3px; width: 10px; height: 15px; background-image:url("+"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjM4MDM3MzM2O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDE5MjgiCiAgICAgICB3aWR0aD0iOS45MTUzMDYxIgogICAgICAgaGVpZ2h0PSIxMS4zNjkzNyIKICAgICAgIHg9IjAuMTE3MTg3NSIKICAgICAgIHk9Ii0zLjAwOTk5NTciCiAgICAgICByeT0iMS4zMTE4NTA1IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNjY2NjY2M7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNTk4MTQwMTI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MTkzMCIKICAgICAgIHdpZHRoPSIxLjUzNDQxMzYiCiAgICAgICBoZWlnaHQ9IjIuMjE5ODI1IgogICAgICAgeD0iMi4xNTU4NDgzIgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHJ5PSIwLjY3MTc4OTE3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iMS41MjM5NTA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QxOTQ4IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjY3MTc4OTE3IgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHg9IjYuNDUyNzIzNSIKICAgICAgIGhlaWdodD0iMi4yMTk4MjUiCiAgICAgICB3aWR0aD0iMS41MzQ0MTM2IgogICAgICAgaWQ9InJlY3QyMDAzIgogICAgICAgc3R5bGU9ImZpbGw6I2NjY2NjYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS41OTgxNDAxMjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAwNSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIHk9Ii0xLjE2NTg0NjYiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iNi45OTI3MDA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDA3IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAxMyIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjEuNTIzOTUwNiIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHJ5PSIwLjI5NjAxNDciIC8+CiAgICA8cmVjdAogICAgICAgcnk9IjAuMjk2MDE0NyIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGlkPSJyZWN0MjAxNSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDIwMTciCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB4PSI2Ljk5MjcwMDYiCiAgICAgICB5PSIxLjgwMjkwMzQiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSI0LjczMjU5MDciCiAgICAgICB4PSIxLjU2MzAxMzEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBpZD0icmVjdDIwMTkiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QyMDIxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgeD0iNC4yNTgzMjU2IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgcnk9IjAuMjk2MDE0NyIgLz4KICAgIDxyZWN0CiAgICAgICByeT0iMC4yOTYwMTQ3IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgeD0iNy4wMzE3NjMxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDIzIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDwvZz4KPC9zdmc+Cg=="+")"),navigator.userAgent.indexOf("Edge")!==-1&&i.add(".modal_default_form_item_date input::-ms-clear","display: none;"),i.add(".modal_default_form_item_scrollable_scroll","width: 100%; height: 200px; box-sizing: border-box; border: 1px solid #ccc; overflow-y: auto;"),i.add(".modal_default_form_item_scrollable_scroll_content","padding: 5px;"),i.add(".modal_default_form_item_searchable","position: relative;"),i.add(".modal_default_form_item_searchable_icon",""),i.add(".modal_default_form_item_searchable_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDMxNzMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoxLjg1MTk2ODUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gMC45NTQxNDgzOCwwLjY4MTYwMzEgNS4wMzkwNjI1LDUuNDExNTM4NiA5LjEyMzk3NjYsMC42ODE2MDMxIgogICAgICAgIC8+CiAgPC9nPgo8L3N2Zz4K"+");"),i.add(".modal_default_form_item_searchable_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"),i.add(".modal_default_form_item_searchable_list_item","background: white; padding: 2px; cursor: default;"),i.add(".modal_default_form_item_searchable_list_item_highlight","background: #ccc;"),i.add(".modal_default_form_item_tabular_main","margin-top: 10px;"),i.add(".modal_default_form_item_tabular_table","display: table; width: 100%; background-color: #fff; border-collapse: collapse;"),i.add(".modal_default_form_item_tabular_tbody","display: table-row-group;"),i.add(".modal_default_form_item_tabular_row","display: table-row;"),i.add(".modal_default_form_item_tabular_row.modal_default_form_item_tabular_header",""),i.add(".modal_default_form_item_tabular_cell.modal_default_form_item_tabular_rowaction","padding: 0px; width: 23px;"),i.add(".modal_default_form_item_tabular_cell","display: table-cell; border: 0px; padding: 2px 2px 2px 0px; cursor: default; vertical-align: bottom;"),i.add(".modal_default_form_item_tabular_header .modal_default_form_item_tabular_cell","padding-left: 0px; padding-bottom: 0px;"),i.add(".modal_default_form_item_tabular_table input[type=text], .modal_default_form_item_tabular_table input[type=number]","width:100%; box-sizing: border-box;"),i.add(".modal_default_form_item_tabular_table select","width:100%; height:100%; box-sizing: border-box;"),i.add(".modal_default_form_item_tabular_plus","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),i.add(".modal_default_form_item_tabular_plus:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSA1LjAgMC41IEwgNS4wIDkuNSBNIDAuNSA1LjAgTCA5LjUgNS4wJyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),i.add(".modal_default_form_item_tabular_delete","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),i.add(".modal_default_form_item_tabular_delete:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgOS41IDkuNSBNIDAuNSA5LjUgTCA5LjUgMC41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),i.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_plus","display: none;"),i.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_delete","visibility: hidden;"),i.add(".modal_default_form_item_tabular_empty","height: 1px; margin: 5px 23px 5px 0px; background-color: #ccc;"),i.add(".modal_default_form_item_tabular_spacer .modal_default_form_item_tabular_cell","padding: 0px;"),i.add(".modal_min_main","border: 1px solid #ccc; max-width: 90%;"),i.add(".modal_min_background","opacity: 0.5; background-color: #000;"),i.add(".modal_min_ok","padding: 3px 10px;"),i.add(".modal_min_cancel","padding: 3px 10px;"),i.add(".navigator_modal_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"),i.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after","box-sizing: content-box;"),i.add(".navigator_modal_month","font-size: 11px;"),i.add(".navigator_modal_day","color: black;"),i.add(".navigator_modal_weekend","background-color: #f0f0f0;"),i.add(".navigator_modal_dayheader","color: black;"),i.add(".navigator_modal_line","border-bottom: 1px solid #c0c0c0;"),i.add(".navigator_modal_dayother","color: gray;"),i.add(".navigator_modal_todaybox","border: 1px solid red;"),i.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright","border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"),i.add(".navigator_modal_busy","font-weight: bold;"),i.add(".navigator_modal_cell","text-align: center;"),i.add(".navigator_modal_select .navigator_modal_cell_box","background-color: #FFE794; opacity: 0.5;"),i.add(".navigator_modal_title","text-align: center;"),i.add(".navigator_modal_titleleft, .navigator_modal_titleright","text-align: center;"),i.add(".navigator_modal_dayheader","text-align: center;"),i.add(".navigator_modal_weeknumber","text-align: center;"),i.add(".navigator_modal_cell_text","cursor: pointer;"),i.commit(),DayPilot.Modal=function(e){this.autoFocus=!0,this.focus=null,this.autoStretch=!0,this.autoStretchFirstLoadOnly=!1,this.className=null,this.theme="modal_default",this.disposeOnClose=!0,this.dragDrop=!0,this.loadingHtml=null,this.maxHeight=null,this.scrollWithPage=!0,this.useIframe=!0,this.zIndex=99999,this.left=null,this.width=600,this.top=20,this.height=200,this.locale=null,this.closed=null,this.onClose=null,this.onClosed=null,this.onShow=null;var t=this;this.id="_"+(new Date).getTime()+"n"+10*Math.random(),this.tf=!1,this.uf=null,this.vf=null,this.showHtml=function(e){if(DayPilot.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";if(this.div||this.wf(),this.Ic(),this.useIframe){var t=function(e,t){return function(){e.setInnerHTML(e.id+"iframe",t)}};window.setTimeout(t(this,e),0)}else e.nodeType?this.div.appendChild(e):this.div.innerHTML=e;this.Ic(),this.xf(),this.yf()},this.showUrl=function(e){if(DayPilot.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";if(this.useIframe){this.div||this.wf();var n=this.loadingHtml;n&&(this.iframe.src="about:blank",this.setInnerHTML(this.id+"iframe",n)),this.re(this.iframe,"load",this.zf),this.iframe.src=e,this.Ic(),this.xf(),this.yf()}else t.Af({"url":e,"success":function(e){var n=e.request.responseText;t.showHtml(n)},"error":function(e){t.showHtml("Error loading the modal dialog")}})},this.yf=function(){if("function"==typeof t.onShow){var e={};e.root=t.Bf(),t.onShow(e)}},this.Bf=function(){return t.iframe?t.iframe.contentWindow.document:t.div},this.Af=function(e){var t=new XMLHttpRequest;if(t){var n=e.method||"GET",i=e.success||function(){},a=e.error||function(){},r=e.data,o=e.url;t.open(n,o,!0),t.setRequestHeader("Content-type","text/plain"),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status||304===t.status){var e={};e.request=t,i(e)}else if(a){var e={};e.request=t,a(e)}else window.console&&console.log("HTTP error "+t.status)},4!==t.readyState&&("object"==typeof r&&(r=JSON.stringify(r)),t.send(r))}},this.Ic=function(){delete this.result;var e=window,n=document,i=e.pageYOffset?e.pageYOffset:n.documentElement&&n.documentElement.scrollTop?n.documentElement.scrollTop:n.body.scrollTop;this.theme&&(this.hideDiv.className=this.theme+"_background"),this.zIndex&&(this.hideDiv.style.zIndex=this.zIndex),this.hideDiv.style.display="",window.setTimeout(function(){t.hideDiv&&(t.hideDiv.onclick=function(){t.hide({"backgroundClick":!0})})},500),this.theme?this.div.className=this.theme+"_main":this.div.className="",this.className&&(this.div.className+=" "+this.className),this.left?this.div.style.left=this.left+"px":this.div.style.marginLeft="-"+Math.floor(this.width/2)+"px",this.div.style.position="absolute",this.div.style.boxSizing="content-box",this.div.style.top=i+this.top+"px",this.div.style.width=this.width+"px",this.zIndex&&(this.div.style.zIndex=this.zIndex),this.height&&(this.useIframe||!this.autoStretch?this.div.style.height=this.height+"px":this.div.style.height=""),this.useIframe&&this.height&&(this.iframe.style.height=this.height+"px"),this.div.style.display="",this.Df(),DayPilot.ModalStatic.remove(this),DayPilot.ModalStatic.list.push(this)},this.zf=function(){t.iframe.contentWindow.modal=t,t.autoStretch&&t.stretch()},this.stretch=function(){var e=function(){return t.Cf().y},n=function(){return t.Cf().x};if(this.useIframe){for(var i=n()-40,a=this.width;a<i&&this.Ef();a+=10)this.div.style.width=a+"px",this.div.style.marginLeft="-"+Math.floor(a/2)+"px";for(var r=this.maxHeight||e()-2*this.top,o=this.height;o<r&&this.Ff();o+=10)this.iframe.style.height=o+"px",this.div.style.height=o+"px";this.autoStretchFirstLoadOnly&&this.ue(this.iframe,"load",this.zf)}else this.div.style.height=""},this.Ef=function(){for(var e=this.iframe.contentWindow.document,t="BackCompat"===e.compatMode?e.body:e.documentElement,n=t.scrollWidth,i=e.body.children,a=0;a<i.length;a++){var r=i[a].offsetLeft+i[a].offsetWidth;n=Math.max(n,r)}return n>t.clientWidth},this.Ff=function(){for(var e=this.iframe.contentWindow.document,t="BackCompat"===e.compatMode?e.body:e.documentElement,n=t.scrollHeight,i=e.body.children,a=0;a<i.length;a++){var r=i[a].offsetTop+i[a].offsetHeight;n=Math.max(n,r)}return n>t.clientHeight},this.Cf=function(){var e=document;if("CSS1Compat"===e.compatMode&&e.documentElement&&e.documentElement.clientWidth){var t=e.documentElement.clientWidth,n=e.documentElement.clientHeight;return{x:t,y:n}}var t=e.body.clientWidth,n=e.body.clientHeight;return{x:t,y:n}},this.xf=function(){this.tf||(this.re(window,"resize",this.Gf),this.re(window,"scroll",this.Hf),this.dragDrop&&(this.re(document,"mousemove",this.If),this.re(document,"mouseup",this.Jf)),this.tf=!0)},this.Kf=function(){this.ue(window,"resize",this.Gf),this.ue(window,"scroll",this.Hf),this.dragDrop&&(this.ue(document,"mousemove",this.If),this.ue(document,"mouseup",this.Jf)),this.tf=!1},this.Lf=function(e){e.target===t.div&&(e.preventDefault(),t.div.style.cursor="move",t.Mf(),t.vf=t.mc(e||window.event),t.uf={x:t.div.offsetLeft,y:t.div.offsetTop})},this.If=function(e){if(t.vf){var e=e||window.event,n=t.mc(e),i=n.x-t.vf.x,a=n.y-t.vf.y;t.div.style.marginLeft="0px",t.div.style.top=t.uf.y+a+"px",t.div.style.left=t.uf.x+i+"px"}},this.Jf=function(e){t.vf&&(t.Nf(),t.div.style.cursor=null,t.vf=null)},this.Mf=function(){if(this.useIframe){var e=document.createElement("div");e.style.backgroundColor="#ffffff",e.style.filter="alpha(opacity=80)",e.style.opacity="0.80",e.style.width="100%",e.style.height=this.height+"px",e.style.position="absolute",e.style.left="0px",e.style.top="0px",this.div.appendChild(e),this.mask=e}},this.Nf=function(){this.useIframe&&(this.div.removeChild(this.mask),this.mask=null)},this.Gf=function(){t.Of(),t.Df()},this.Hf=function(){t.Of()},this.Df=function(){if(!t.left&&t.div){var e=t.div.offsetWidth;t.div.style.marginLeft="-"+Math.floor(e/2)+"px"}},this.Of=function(){if(t.hideDiv&&t.div&&"none"!==t.hideDiv.style.display&&"none"!==t.div.style.display){var e=t.Pf.scrollY();t.scrollWithPage||(t.div.style.top=e+t.top+"px")}},this.Pf={},this.Pf.container=function(){return t.container||document.body},this.Pf.scrollY=function(){var e=t.Pf.container();return e===document.body?window.pageYOffset?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop:e.scrollTop},this.re=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},this.ue=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},this.mc=function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},this.abs=function(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e.offsetParent;)e=e.offsetParent,t.x+=e.offsetLeft,t.y+=e.offsetTop;return t},this.wf=function(){var e=t.Pf.container(),n=e===document.body,i=n?"fixed":"absolute",a=document.createElement("div");a.id=this.id+"hide",a.style.position=i,a.style.left="0px",a.style.top="0px",a.style.right="0px",a.style.bottom="0px",a.oncontextmenu=function(){return!1},a.onmousedown=function(){return!1},e.appendChild(a);var r=document.createElement("div");r.id=this.id+"popup",r.style.position=i,r.style.left="50%",r.style.top="0px",r.style.backgroundColor="white",r.style.width="50px",r.style.height="50px",this.dragDrop&&(r.onmousedown=this.Lf),r.addEventListener("keydown",function(e){e.stopPropagation()});var o=null;this.useIframe&&(o=document.createElement("iframe"),o.id=this.id+"iframe",o.name=this.id+"iframe",o.frameBorder="0",o.style.width="100%",o.style.height="50px",
r.appendChild(o)),e.appendChild(r),this.div=r,this.iframe=o,this.hideDiv=a},this.setInnerHTML=function(e,n){var i=window.frames[e],a=i.contentWindow||i.document||i.contentDocument;a.document&&(a=a.document),null==a.body&&a.write("<body></body>"),n.nodeType?a.body.appendChild(n):a.body.innerHTML=n,t.autoStretch&&(t.autoStretchFirstLoadOnly&&t.Qf||(t.stretch(),t.Qf=!0))},this.close=function(e){this.result=e,this.hide()},this.closeSerialized=function(){for(var e=t.Bf(),n=e.querySelectorAll("input, textarea, select"),i={},a=0;a<n.length;a++){var r=n[a],o=r.name;if(o){var s=r.value;i[o]=s}}t.close(i)},this.hide=function(e){e=e||{};var n={};n.backgroundClick=!!e.backgroundClick,n.result=this.result,n.canceled="undefined"==typeof this.result,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof this.onClose&&(this.onClose(n),n.preventDefault.value)||(this.div&&(this.div.style.display="none",this.hideDiv.style.display="none",this.useIframe||(this.div.innerHTML=null)),window.focus(),DayPilot.ModalStatic.remove(this),"function"==typeof this.onClosed?this.onClosed(n):this.closed&&this.closed(),delete this.result,this.disposeOnClose&&(t.Kf(),t.Rf(t.div),t.Rf(t.hideDiv),t.div=null,t.hideDiv=null,t.iframe=null))},this.Rf=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},this.Sf=function(){if(e)for(var t in e)this[t]=e[t]},this.Sf()},DayPilot.Modal.alert=function(e,t){t=t||{},t.height=t.height||40,t.useIframe=!1;var n=t.okText||"OK";t.cancelText||"Cancel";return DayPilot.getPromise(function(i,a){t.onClosed=function(e){i(e)};var r=new DayPilot.Modal(t),o=document.createElement("div");o.className=r.theme+"_inner";var s=document.createElement("div");s.className=r.theme+"_content",s.innerHTML=e;var l=document.createElement("div");l.className=r.theme+"_buttons";var d=document.createElement("button");d.innerText=n,d.className=r.theme+"_ok",d.onclick=function(e){DayPilot.ModalStatic.close("OK")},l.appendChild(d),o.appendChild(s),o.appendChild(l),r.showHtml(o),r.autoFocus&&d.focus()})},DayPilot.Modal.confirm=function(e,t){t=t||{},t.height=t.height||40,t.useIframe=!1;var n=t.okText||"OK",i=t.cancelText||"Cancel";return DayPilot.getPromise(function(a,r){t.onClosed=function(e){a(e)};var o=new DayPilot.Modal(t),s=document.createElement("div");s.className=o.theme+"_inner";var l=document.createElement("div");l.className=o.theme+"_content",l.innerHTML=e;var d=document.createElement("div");d.className=o.theme+"_buttons";var c=document.createElement("button");c.innerText=n,c.className=o.theme+"_ok",c.onclick=function(e){DayPilot.ModalStatic.close("OK")};var u=document.createTextNode(" "),h=document.createElement("button");h.innerText=i,h.className=o.theme+"_cancel",h.onclick=function(e){DayPilot.ModalStatic.close()},d.appendChild(c),d.appendChild(u),d.appendChild(h),s.appendChild(l),s.appendChild(d),o.showHtml(s),o.autoFocus&&c.focus()})},DayPilot.Modal.prompt=function(e,t,n){"object"==typeof t&&(n=t,t=""),n=n||{},n.height=n.height||40,n.useIframe=!1;var i=n.okText||"OK",a=n.cancelText||"Cancel",r=t||"";return DayPilot.getPromise(function(t,o){n.onClosed=function(e){t(e)};var s=new DayPilot.Modal(n),l=document.createElement("div");l.className=s.theme+"_inner";var d=document.createElement("div");d.className=s.theme+"_content",d.innerHTML=e;var c=document.createElement("div");c.className=s.theme+"_input";var u=document.createElement("input");u.value=r,u.style.width="100%",u.onkeydown=function(e){var t=!1;switch(e.keyCode){case 13:s.close(this.value);break;case 27:s.close();break;default:t=!0}t||(e.preventDefault(),e.stopPropagation())},c.appendChild(u);var h=document.createElement("div");h.className=s.theme+"_buttons";var f=document.createElement("button");f.innerText=i,f.className=s.theme+"_ok",f.onclick=function(e){s.close(u.value)};var v=document.createTextNode(" "),p=document.createElement("button");p.innerText=a,p.className=s.theme+"_cancel",p.onclick=function(e){s.close()},h.appendChild(f),h.appendChild(v),h.appendChild(p),l.appendChild(d),l.appendChild(c),l.appendChild(h),s.showHtml(l),s.autoFocus&&u.focus()})};var a=function(e){return"[object Array]"===Object.prototype.toString.call(e)};DayPilot.Modal.form=function(t,n,i){if(1===arguments.length){var o=t;if(a(o))n={};else{if("object"!=typeof o)throw"Invalid DayPilot.Modal.form() parameter";n=t,t=[];for(var s in n){var l={};l.name=s,l.id=s,t.push(l)}}}var d={};for(var s in i)d[s]=i[s];d.height=d.height||40,d.useIframe=!1;var c=d.okText||"OK",u=d.cancelText||"Cancel";return DayPilot.getPromise(function(i,a){d.onClosed=function(t){if(t.result){var a=JSON.parse(JSON.stringify(n));for(var r in t.result)e(a,r,t.result[r]);t.result=a}i(t)};var o=new DayPilot.Modal(d),s=document.createElement("div");s.className=o.theme+"_inner";var l=document.createElement("div");l.className=o.theme+"_input";var h=new r({theme:o.theme,form:t,data:n,zIndex:o.zIndex,locale:o.locale,plugins:o.plugins,onKey:function(e){switch(e.key){case"Enter":h.validate()&&o.close(h.serialize());break;case"Escape":o.close()}}}),f=h.create();l.append(f);var v=document.createElement("div");v.className=o.theme+"_buttons";var p=document.createElement("button");p.innerText=c,p.className=o.theme+"_ok",p.onclick=function(e){h.validate()&&o.close(h.serialize())};var m=document.createTextNode(" "),g=document.createElement("button");if(g.innerText=u,g.className=o.theme+"_cancel",g.onclick=function(e){o.close()},g.onmousedown=function(e){h.canceling=!0},v.appendChild(p),v.appendChild(m),v.appendChild(g),s.appendChild(l),s.appendChild(v),o.showHtml(s),o.div.setAttribute("tabindex","-1"),o.div.addEventListener("keydown",function(e){switch(e.keyCode){case 27:o.close();break;case 13:h.validate()&&o.close(h.serialize())}}),o.focus){var b=null;if("object"==typeof o.focus){var y=o.focus.id,w=o.focus.value;b=h.findViewById(y,w)}else"string"==typeof o.focus&&(b=h.findViewById(o.focus));b&&b.focus()}else{var x=h.firstFocusable();o.autoFocus&&x?x.focus():o.div.focus()}})},DayPilot.Modal.close=function(e){var t=DayPilot.Modal.opener();t&&t.close(e)},DayPilot.Modal.stretch=function(e){var t=DayPilot.Modal.opener();if(!t)throw"Unable to find the opener DayPilot.Modal instance.";t.stretch()},DayPilot.Modal.closeSerialized=function(){var e=DayPilot.Modal.opener()||DayPilot.ModalStatic.last();e&&e.closeSerialized()},DayPilot.Modal.opener=function(){return"undefined"!=typeof DayPilot&&"undefined"!=typeof DayPilot.ModalStatic&&DayPilot.ModalStatic.list.length>0?DayPilot.ModalStatic.list[DayPilot.ModalStatic.list.length-1]:parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1]},"undefined"==typeof DayPilot.getPromise&&(DayPilot.getPromise=function(e){return"undefined"!=typeof Promise?new Promise(e):(DayPilot.Promise=function(e){var t=this;this.then=function(t,n){return t=t||function(){},n=n||function(){},e(t,n),DayPilot.getPromise(e)},this["catch"]=function(n){return t.then(null,n),DayPilot.getPromise(e)}},new DayPilot.Promise(e))});var r=function(e){this.form=[],this.data={},this.theme="form_default",this.zIndex=99999,this.locale="en-us",this.plugins={},this.onKey=null,this.Tf=[],this.Uf=null,this.canceling=!1,this.Vf=[],this.Wf=[],this.c=null,e=e||{};for(var t in e)this[t]=e[t]};r.prototype.create=function(){return this.load(),this.render(),this.c},r.prototype.render=function(){var e=this;this.c=document.createElement("div"),this.Tf.forEach(function(t){e.createView(t)}),this.applyState()},r.prototype.createView=function(e){var t=this.theme,n=this,i=document.createElement("div");if(i.className=t+"_form_item "+t+"_form_item_level"+e.level,e.interactive||"title"!==e.type?i.className+=" "+t+"_form_item_"+e.type:i.className+=" "+t+"_form_title",e.data.cssClass&&(i.className+=" "+e.data.cssClass),!e.isValue){var a=document.createElement("div");a.className=t+"_form_item_label",a.innerText=e.text,i.appendChild(a)}var r=this.createInteractive(e);r.onInput=function(e){e=e||{},n.Xf(r,{"debounce":!e.immediate})},r.onBlur=function(){n.canceling||n.Xf(r)},r.apply(e),r.c=i,r.Yf=e,r.element&&i.appendChild(r.element),this.Wf.push(r),this.c.appendChild(i)},r.prototype.validate=function(){var e=this,t=!0;return this.Wf.forEach(function(n){var i=e.Xf(n);t=t&&i}),t},r.prototype.Xf=function(e,t){function n(){e.Zf&&(e.Zf.remove(),e.Zf=null),e.c.classList.add(l);var t=document.createElement("div");t.classList.add(d),t.innerText=s.message,e.Zf=t,e.c.appendChild(t)}t=t||{};var i=t.debounce,a=t.silent,r=e.Yf,o=!0;if("function"==typeof r.data.validate){var s={};s.valid=!0,s.value=e.save()[r.field],s.message="Error",s.values=this.serialize(),r.data.validate(s);var l=this.theme+"_form_item_invalid",d=this.theme+"_form_item_invalid_message";if(s.valid)clearTimeout(this.Vf[r.field]),e.Zf&&(e.Zf.remove(),e.Zf=null),e.c.classList.remove(l);else if(!a)if(i){var c=1e3;clearTimeout(this.Vf[r.field]),this.Vf[r.field]=setTimeout(function(){n()},c)}else n();o=s.valid}return o},r.prototype.load=function(){var e=this;this.form.forEach(function(t){e.processFormItem(t,0)});try{JSON.stringify(this.data)}catch(e){throw new Error("The 'data' object is not serializable: "+e)}var n=t(this.data);for(var i in n)this.setValue(i,n[i])},r.prototype.setValue=function(e,t){this.Tf.forEach(function(n){n.applyValue(e,t)})},r.prototype.updateDependentState=function(){var e=this,t=[!0];(this.Uf?this.Uf:this.Tf).forEach(function(n){var i=e.updateState(n,{enabled:t[n.level]&&!n.data.disabled});i.isValue&&(t[i.level+1]=i.enabled&&i.checked)})},r.prototype.processFormItem=function(e,t){var n=this,i=this.getFieldType(e),a=[];if("radio"===i){if(e.name){var r=new o;r.field=e.id,r.data=e,r.level=t,r.type="label",r.interactive=!1,r.text=e.name,n.Tf.push(r),a.push(r)}e.options.forEach(function(r){var s=new o;s.field=e.id,s.data=r,s.level=t,s.type=i,s.isValue=!0,s.text=r.name,s.resolved=r.id,n.Tf.push(s),a.push(s),r.children&&r.children.forEach(function(e){var i=n.processFormItem(e,t+1);a=a.concat(i)})})}else if("title"===i){var r=new o;r.field=e.id,r.data=e,r.level=t,r.type=i,r.interactive=!1,r.text=e.name,n.Tf.push(r),a.push(r)}else if("image"===i){var r=new o;r.isValue=!0,r.field=e.id,r.data=e,r.level=t,r.type=i,r.interactive=!1,r.text=null,n.Tf.push(r),a.push(r)}else if("html"===i){var r=new o;r.isValue=!0,r.field=e.id,r.data=e,r.level=t,r.type=i,r.interactive=!1,r.text=null,n.Tf.push(r),a.push(r)}else if("scrollable"===i){var r=new o;r.isValue=!0,r.field=e.id,r.data=e,r.level=t,r.type=i,r.interactive=!1,r.text=null,n.Tf.push(r),a.push(r)}else{var r=new o;r.field=e.id,r.data=e,r.level=t,r.type=i,r.text=e.name,r.children=[],n.Tf.push(r),a.push(r)}return"checkbox"===i&&(r.isValue=!0,r.resolved=!0,e.children&&e.children.forEach(function(e){var i=n.processFormItem(e,t+1);a=a.concat(i)})),a},r.prototype.doOnKey=function(e){if("function"==typeof this.onKey){var t={key:e};this.onKey(t)}},r.prototype.createInteractive=function(e){var t=this,n={"label":function(){return new s},"title":function(){return new s},"image":function(){var t=new s,n=document.createElement("img");return n.src=e.data.image,t.element=n,t},"html":function(){var t=new s,n=document.createElement("div");return"string"==typeof e.data.text?n.innerText=e.data.text:"string"==typeof e.data.html&&(n.innerHTML=e.data.html),t.element=n,t},"scrollable":function(){var n=new s,i=document.createElement("div");i.className=t.theme+"_form_item_scrollable_scroll",e.data.height&&(i.style.height=e.data.height+"px");var a=document.createElement("div");return a.className=t.theme+"_form_item_scrollable_scroll_content","string"==typeof e.data.text?a.innerText=e.data.text:"string"==typeof e.data.html&&(a.innerHTML=e.data.html),i.appendChild(a),n.element=i,n},"text":function(){var n=new s;n.apply=function(e){n.row=e;var t=n.element;t.value=e.value,t.disabled=!e.enabled};var i=document.createElement("input");return i.name=e.field,i.type="text",i.onkeydown=function(e){var n=!1;switch(e.keyCode){case 13:t.doOnKey("Enter");break;case 27:t.doOnKey("Escape");break;default:n=!0}n||(e.preventDefault(),e.stopPropagation())},i.oninput=function(e){n.onInput()},i.onblur=function(e){n.onBlur()},n.element=i,n.canFocus=function(){return!n.element.disabled},n.focus=function(){n.element.focus(),n.element.setSelectionRange(0,n.element.value.length)},n.save=function(){var t={};return t[e.field]=i.value,t},n},"textarea":function(){var n=new s;n.apply=function(e){n.row=e;var t=n.element;t.value=e.value,t.disabled=!e.enabled};var i=document.createElement("textarea");return i.name=e.field,e.data.height&&(i.style.height=e.data.height+"px"),i.onkeydown=function(e){var n=!1;switch(e.keyCode){case 13:n=!1;break;case 27:t.doOnKey("Escape");break;default:n=!0}n||(e.preventDefault(),e.stopPropagation())},i.oninput=function(e){n.onInput()},i.onblur=function(e){n.onBlur()},n.element=i,n.canFocus=function(){return!n.element.disabled},n.focus=function(){n.element.focus(),n.element.setSelectionRange(0,0)},n.save=function(){var t={};return t[e.field]=i.value,t},n},"date":function(){var n=new s;n.apply=function(e){n.row=e;var i=n.element,a=n.picker;e.data.dateFormat&&(a.pattern=e.data.dateFormat);var r=e.data.locale||t.locale;r&&(a.locale=r),i.disabled=!e.enabled,a.date=new DayPilot.Date(e.value);var o=new DayPilot.Date(e.value).toString(e.data.dateFormat||a.pattern,a.locale);i.value=o};var i=document.createElement("input");i.name=e.field;var a=new DayPilot.DatePicker({target:i,theme:"navigator_modal",zIndex:t.zIndex+1,resetTarget:!1,targetAlignment:"left",onTimeRangeSelect:function(e){n.onInput({"immediate":!0})}});return i.picker=a,i.className=t.theme+"_input_date",i.type="text",i.onkeydown=function(e){var n=!1;switch(e.keyCode){case 13:a.visible?a.close():t.doOnKey("Enter");break;case 27:a.visible?a.close():t.doOnKey("Escape");break;case 9:a.close(),n=!0;break;default:n=!0}n||(e.preventDefault(),e.stopPropagation())},i.onfocus=function(){a.show()},i.onclick=function(){a.show()},i.oninput=function(e){n.onInput()},i.onblur=function(e){n.onBlur()},n.element=i,n.picker=a,n.canFocus=function(){return!n.element.disabled},n.focus=function(){n.element.focus()},n.save=function(){var t=a.date?a.date.toString():null,n={};return n[e.field]=t,n},n},"select":function(){var t=new s;t.apply=function(e){t.row=e;var n=t.element;n.value=e.value,n.disabled=!e.enabled};var n=document.createElement("select");return n.name=e.field,e.data.options&&e.data.options.forEach&&e.data.options.forEach(function(e){var t=document.createElement("option");t.innerText=e.name||e.id,t.value=e.id,t.$f=e.id,n.appendChild(t)}),n.onchange=function(e){t.onInput({"immediate":!0})},n.onblur=function(e){t.onBlur()},t.element=n,t.canFocus=function(){return!t.element.disabled},t.focus=function(){t.element.focus()},t.save=function(){var t=null,i=n.options[n.selectedIndex];i&&"undefined"!=typeof i.$f&&(t=i.$f);var a={};return a[e.field]=t,a},t},"searchable":function(){var n=new s;n.apply=function(e){n.row=e;var t=n.searchable;t.disabled=!e.enabled,t.select(e.value)};var i=new l({data:e.data.options,name:e.field,theme:t.theme+"_form_item_searchable",listZIndex:t.zIndex+1,onSelect:function(e){e.ui&&n.onInput({"immediate":!0})}}),a=i.create();return n.element=a,n.searchable=i,n.canFocus=function(){return!n.searchable.disabled},n.focus=function(){n.searchable.focus()},n.save=function(){var t=i.selected&&i.selected.id,n={};return n[e.field]=t,n},n},"radio":function(){var n=new s;n.apply=function(e){n.row=e;var t=n.radio;t.checked=e.checked,t.disabled=!e.enabled};var i=document.createElement("label"),a=document.createElement("input");a.type="radio",a.name=e.field,a.$f=e.resolved,a.onchange=function(e){var i=n.row;t.findRowsByField(i.field).forEach(function(e){t.updateState(e,{checked:!1})}),t.updateState(i,{checked:!0}),t.applyState(),n.onInput({"immediate":!0})},a.onblur=function(e){n.onBlur()},i.appendChild(a);var r=document.createTextNode(e.text);return i.append(r),n.element=i,n.radio=a,n.canFocus=function(){return!1},n.focus=function(){n.radio.focus()},n.save=function(){if(!a.checked)return{};var t=a.$f,n={};return n[e.field]=t,n},n},"checkbox":function(){var n=new s;n.apply=function(e){n.row=e;var t=n.checkbox;t.checked=e.checked,t.disabled=!e.enabled};var i=document.createElement("label"),a=document.createElement("input");a.type="checkbox",a.name=e.field,a.$f=e.resolved,a.onchange=function(e){var i=n.row;t.updateState(i,{checked:this.checked}),t.applyState(),n.onInput({"immediate":!0})},a.onblur=function(e){n.onBlur()},i.appendChild(a);var r=document.createTextNode(e.text);return i.append(r),n.element=i,n.checkbox=a,n.canFocus=function(){return!1},n.focus=function(){n.checkbox.focus()},n.save=function(){var t=a.checked,n={};return n[e.field]=t,n},n},"table":function(){var n=new s;n.apply=function(e){n.row=e;var t=n.table;t.disabled=!e.enabled,e.value&&t.load(e.value)};var i=new d({name:e.field,form:e.data.columns,theme:t.theme+"_form_item_tabular"}),a=i.create();return n.element=a,n.table=i,n.canFocus=function(){return!1},n.focus=function(){n.table.focus()},n.save=function(){var t=i.save(),n={};return n[e.field]=t,n},n}};return t.plugins&&t.plugins[e.type]?t.plugins[e.type](e):n[e.type]()},r.prototype.findRowsByField=function(e){return this.Tf.filter(function(t){return t.field===e})},r.prototype.findViewById=function(e,t){return this.Wf.find(function(n){return n.row.field===e&&("radio"!==n.row.type||n.row.resolved===t)})},r.prototype.firstFocusable=function(){return this.Wf.find(function(e){return e.canFocus&&e.canFocus()})},r.prototype.updateState=function(e,t){var n=this.Uf?this.Uf:this.Tf,i=n.indexOf(e);return this.Uf=n.map(function(n){if(n!==e)return n;if(e.propsEqual(t))return e;var i=e.clone();for(var a in t)i[a]=t[a];return i}),this.Uf[i]},r.prototype.updateInteractive=function(e){var t=this.Uf.indexOf(e);this.Wf[t].apply(e)},r.prototype.applyState=function(){var e=this;if(this.updateDependentState(),this.Uf){this.Uf.filter(function(t,n){return e.Tf[n]!==t}).forEach(function(t){e.updateInteractive(t)}),this.Tf=this.Uf,this.Uf=null}},r.prototype.getFieldType=function(e){return["text","date","select","searchable","radio","checkbox","table","title","image","html","textarea","scrollable"].indexOf(e.type)!==-1?e.type:e.type&&this.plugins&&this.plugins[e.type]?e.type:e.image?"image":e.html||e.text?"html":e.id?e.options?"searchable":e.dateFormat?"date":e.columns?"table":"text":"title"},r.prototype.serialize=function(){var e={};return this.Wf.forEach(function(t){var n=t.save();for(var i in n)e[i]=n[i]}),e};var o=function(){this.id=this.guid(),this.field=null,this.data=null,this.type=null,this.level=0,this.enabled=!0,this.value=null,this.text=null,this.interactive=!0,this.isValue=!1,this.checked=!1,this.resolved=null};o.prototype.clone=function(){var e=new o;for(var t in this)"id"!==t&&(e[t]=this[t]);return e},o.prototype.propsEqual=function(e){for(var t in e)if(this[t]!==e[t])return!1;return!0},o.prototype.guid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},o.prototype.applyValue=function(e,t){this.field===e&&(this.value=t,this.isValue&&t===this.resolved&&(this.checked=!0))};var s=function(){this.element=null,this.canFocus=function(){return!1},this.apply=function(e){},this.focus=function(){},this.save=function(){return{}}},l=function(e){this.data=[],this.name=null,this.theme="searchable_default",this._f=!1,this.listZIndex=1e5,this.onSelect=null,this.ag=null,this.bg=null,this.cg=!1,this.dg=null,this.Ub=null,this.He=[],this.eg=null,e=e||{};var t=this,n={"selected":{post:function(e){"object"==typeof e&&e.id?t.ag=e:"string"!=typeof e&&"number"!=typeof e||t.select(e)}}};Object.defineProperty(this,"selected",{get:function(){return this.ag}}),Object.defineProperty(this,"disabled",{get:function(){return this._f},set:function(e){this._f=e,this.dg&&(this.dg.disabled=e,e&&this.fg())}});for(var i in e)n[i]||(this[i]=e[i]);for(var i in e)n[i]&&n[i].post(e[i])};l.prototype.select=function(e){return this.ag=this.data.find(function(t){return t.id===e}),this.gg(!1),this},l.prototype.create=function(){function e(){h.style.display="",h.style.top=v.offsetHeight+"px",h.style.left="0px",h.style.width=v.offsetWidth+"px",h.innerHTML="",h.addEventListener("mousedown",function(e){e.preventDefault()}),l.bg=null,l.He=[];var e=null;l.data.forEach(function(n){var a=n.name||n.id;if(a.toLowerCase().indexOf(v.value.toLowerCase())!==-1){var r=document.createElement("div");r.className=l.theme+"_list_item",r.innerText=a,r.item=n,n===l.ag&&(l.bg=r),e||(e=r),r.addEventListener("mousedown",function(e){i(r),e.preventDefault()}),r.addEventListener("mousemove",function(e){l.bg!==r&&(l.bg=r,t({dontScroll:!0}))}),h.appendChild(r),l.He.push(r)}}),l.bg||(l.bg=e),t()}function t(e){e=e||{};var t=!e.dontScroll;document.querySelectorAll("."+l.theme+"_list_item_highlight").forEach(function(e){e.className=e.className.replace(l.theme+"_list_item_highlight","")}),l.bg&&(l.bg.className+=" "+l.theme+"_list_item_highlight",t&&!n(l.bg,h)&&l.bg.scrollIntoView())}function n(e,t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect();return n.top>=i.top&&n.bottom<=i.bottom}function i(e){var t=e.item;l.ag=t,l.gg(!0),r(),o()}function a(){l.fg()}function r(){l.hg()}function o(){l.cg=!0,v.setAttribute("readonly","readonly"),v.focus()}function s(){l.cg=!1,v.removeAttribute("readonly"),v.value="",e()}var l=this,d=this,c=document.createElement("div");c.className=this.theme+"_main",c.style.position="relative";var u=document.createElement("div");u.className=this.theme+"_icon",u.style.position="absolute",u.style.right="0",u.style.top="0",u.style.bottom="0",u.style.width="20px",u.addEventListener("mousedown",function(e){e.preventDefault(),l.cg?(l.focus(),s()):(a(),o())});var h=document.createElement("div");h.className=this.theme+"_list",h.style.display="none",h.style.position="absolute",h.style.zIndex=this.listZIndex;var f=document.createElement("input");f.type="hidden",f.name=this.name,f.searchable=d,this.eg=f;var v=document.createElement("input");return v.type="text",v.className=this.theme+"_input",v.disabled=this._f,v.addEventListener("click",function(e){s()}),v.addEventListener("focus",function(t){v.value="",e()}),v.addEventListener("input",function(t){e()}),v.addEventListener("blur",function(e){v.removeAttribute("readonly"),a()}),v.addEventListener("keydown",function(e){if(l.cg){if("Enter"===e.key)return;if("Esc"===e.key||"Escape"===e.key)return;s()}if("ArrowDown"===e.key){var n=d.He.indexOf(d.bg);n+1<d.He.length&&(d.bg=d.He[n+1]),t()}else if("ArrowUp"===e.key){var n=d.He.indexOf(d.bg);n-1>=0&&(d.bg=d.He[n-1]),t()}else"Enter"===e.key?l.bg?(e.stopPropagation(),i(l.bg)):(e.stopPropagation(),a(),o()):"Esc"!==e.key&&"Escape"!==e.key||(e.stopPropagation(),a(),o())}),this.dg=v,this.Ub=h,this.ag||(this.ag=this.data[0],this.ag&&(v.value=this.ag.name)),c.appendChild(v),c.appendChild(u),c.appendChild(f),c.appendChild(h),c},l.prototype.fg=function(){this.hg(),this.ag?this.dg.value=this.ag.name:(this.dg.value="",this.gg(!0))},l.prototype.focus=function(){this.cg=!0,this.dg.setAttribute("readonly","readonly"),this.dg.focus(),this.fg()},l.prototype.hg=function(){this.Ub.style.display="none"},l.prototype.gg=function(e){if(this.eg.value=this.selected?this.selected.id:null,this.ag?this.dg.value=this.ag.name:this.dg.value="","function"==typeof this.onSelect){var t={control:this,ui:e};this.onSelect(t)}};var d=function(e){this.form=null,this.data=null,this.name=null,this.theme="edit_table_default",this.nav={},this.ig=null,this.Tf=[],e=e||{};for(var t in e)this[t]=e[t]};d.prototype.create=function(){var e=this,t=document.createElement("div");t.className=this.theme+"_main",t.style.position="relative";var n=document.createElement("input");n.type="hidden",n.name=e.name,n.table=this,t.appendChild(n);var i=document.createElement("div");i.className=this.theme+"_table";var a=this.jg();i.appendChild(a);var r=e.kg({});r.spacer=!0;var o=this.lg(r);o.classList.add(e.theme+"_spacer"),i.appendChild(o);var s=document.createElement("div");s.className=e.theme+"_tbody",i.appendChild(s),t.appendChild(i);var l=document.createElement("div");t.appendChild(l),this.nav.body=s,this.nav.table=i,this.nav.main=t,this.nav.after=l;var d=document.createElement("div"),c=document.createElement("span");return c.className=this.theme+"_plus",c.addEventListener("click",function(t){if(!e.disabled){var n=e.kg({});e.Tf.push(n),e.mg()}}),d.appendChild(c),t.appendChild(d),t},d.prototype.jg=function(){var e=this,t=document.createElement("div");return t.classList.add(this.theme+"_row"),t.classList.add(this.theme+"_header"),this.form.forEach(function(n){var i=document.createElement("div");i.classList.add(e.theme+"_cell"),i.innerText=n.name,t.appendChild(i)}),t},d.prototype.save=function(){var e=this,t=[];return e.Tf.forEach(function(e){var n={};e.cells.forEach(function(e){n[e.id]=e.value}),t.push(n)}),t},d.prototype.load=function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("Array expected");this.data=e,this.ng(),this.mg()},d.prototype.og=function(){this.disabled?this.nav.main.classList.add(this.theme+"_disabled"):this.nav.main.classList.remove(this.theme+"_disabled")},d.prototype.ng=function(){var e=this;this.Tf=[],this.data.forEach(function(t){var n=e.kg(t);e.Tf.push(n)})},d.prototype.pg=function(e){var t=this,n=t.Tf.indexOf(e);t.Tf.splice(n,1)},d.prototype.kg=function(e){var t=this,n={};return n.data=e,n.cells=[],t.form.forEach(function(i){var a=i.id,r=e[a],o=t.qg(i);if("undefined"==typeof r)if("text"===o)r="";else if("number"===o)r=0;else if("select"===o){var s=i.options;r=s&&s[0].id}var l={};l.id=a,l.value=r,l.type=o,l.data=i,n.cells.push(l)}),n},d.prototype.qg=function(e){var t=e.type;return t||(t=e.options?"select":"text"),t},d.prototype.mg=function(){var e=this;if(this.nav.body.innerHTML="",this.nav.after.innerHTML="",this.Tf.forEach(function(t){var n=e.lg(t);e.nav.body.appendChild(n)}),0===this.Tf.length){var t=e.rg();e.nav.after.appendChild(t)}this.og()},d.prototype.rg=function(){var e=document.createElement("div");return e.className=this.theme+"_empty",e},d.prototype.lg=function(e){var t=this,n=document.createElement("div");n.className=t.theme+"_row",e.cells.forEach(function(i){var a=document.createElement("div");a.className=t.theme+"_cell";var r=t.sg(i);if(e.spacer){var o=document.createElement("div");o.style.height="0px",o.style.overflow="hidden",o.appendChild(r),a.appendChild(o)}else a.appendChild(r);n.appendChild(a)});var i=document.createElement("div");i.classList.add(t.theme+"_cell"),i.classList.add(t.theme+"_rowaction");var a=document.createElement("span");return a.className=this.theme+"_delete",a.addEventListener("click",function(n){t.disabled||(t.pg(e),t.mg())}),e.spacer||i.appendChild(a),n.appendChild(i),n},d.prototype.sg=function(e){var t=this,n=e.type;if("text"===n||"number"===n){var i=document.createElement("input");return i.type=n,t.disabled&&(i.disabled=!0),e.value&&(i.value=e.value),i.addEventListener("keyup",function(t){"number"===n?e.value=Number(this.value):e.value=this.value}),i}if("select"===n){var a=document.createElement("select");return t.disabled&&(a.disabled=!0),e.data.options.forEach(function(t){var n=document.createElement("option");n.innerText=t.name,n.value=t.id,n.$f=t.id,a.appendChild(n),e.value===t.id&&n.setAttribute("selected",!0)}),a.addEventListener("change",function(t){var n=a.options[a.selectedIndex];n&&"undefined"!=typeof n.$f&&(e.value=n.$f)}),a}throw new Error("Unsupported item type: "+n)},d.prototype.focus=function(){}}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){var e=function(){};if("undefined"==typeof DayPilot.Month){var t={};DayPilot.Month=function(n,i){this.v="2021.1.4880",this.nav={};var a=this;this.id=n,this.isMonth=!0,this.api=2,this.S=!1,this.hideUntilInit=!0,this.startDate=new DayPilot.Date,this.width=null,"function"==typeof DayPilot.Bubble?this.bubble=new DayPilot.Bubble:this.bubble=null,this.cssClassPrefix="month_default",this.cellHeight=100,this.cellMarginBottom=0,this.allowMultiSelect=!0,this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.doubleClickTimeout=300,this.eventEndSpec="DateTime",this.headerHeight=30,this.heightSpec="Auto",this.weekStarts="Auto",this.eventHeight=25,this.cellHeaderHeight=24,this.clientState={},this.afterRender=function(){},this.cssOnly=!0,this.eventsLoadMethod="GET",this.initEventEnabled=!1,this.lineSpace=1,this.loadingLabelVisible=!0,this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.locale="en-us",this.messageHideAfter=5e3,this.notifyCommit="Immediate",this.visible=!0,this.eventMoveToPosition=!1,this.eventStartTime=!1,this.eventEndTime=!1,this.eventStartEndWidth=60,this.showWeekend=!0,this.cellMode=!1,this.shadowType="Fill",this.tapAndHoldTimeout=300,this.timeFormat="Auto",this.viewType="Month",this.weeks=1,this.xssProtection="Enabled",this.eventClickHandling="Enabled",this.eventDeleteHandling="Disabled",this.eventDoubleClickHandling="Enabled",this.eventMoveHandling="Update",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.eventSelectHandling="Update",this.headerClickHandling="Enabled",this.timeRangeSelectedHandling="Enabled",this.timeRangeDoubleClickHandling="Enabled",this.onEventFilter=null,this.onBeforeEventRender=null,this.onBeforeCellRender=null,this.onBeforeHeaderRender=null,this.onDomAddEvent=null,this.onDomRemoveEvent=null,this.onBeforeEventExport=null,this.onBeforeCellExport=null,this.onBeforeHeaderExport=null,this.backendUrl=null,this.cellEvents=[],this.elements={},this.elements.events=[],this.P={},this.P.events={},this.events={},this.R=0,this.members={},this.members.ignore=["internal","nav","debug","temp","elements","members","cellProperties"],this.U="javasc",this.la=function(e,t){var e=JSON.parse(e);if(e.BubbleGuid){var n=e.BubbleGuid,i=this.bubbles[n];return delete this.bubbles[n],a.Ga(),void("undefined"!=typeof e.Result.BubbleHTML&&i.updateView(e.Result.BubbleHTML,i))}if(e.CallBackRedirect)return void(document.location.href=e.CallBackRedirect);if("undefined"!=typeof e.ClientState&&(a.clientState=e.ClientState),"None"===e.UpdateType)return a.Ha(e.CallBackData,!0),e.Message&&a.message(e.Message),void a.Ga();if(e.VsUpdate){var r=document.createElement("input");r.type="hidden",r.name=a.id+"_vsupdate",r.id=r.name,r.value=e.VsUpdate,a.tg.innerHTML="",a.tg.appendChild(r)}a.events.list=e.Events,"undefined"!=typeof e.TagFields&&(a.tagFields=e.TagFields),"undefined"!=typeof e.SortDirections&&(a.sortDirections=e.SortDirections),"Full"===e.UpdateType&&(a.cellProperties=e.CellProperties,a.headerProperties=e.HeaderProperties,a.startDate=e.StartDate,"undefined"!=typeof e.ShowWeekend&&(a.showWeekend=e.ShowWeekend),a.locale=e.Locale?e.Locale:a.locale,a.timeFormat=e.TimeFormat?e.TimeFormat:a.timeFormat,"undefined"!=typeof e.WeekStarts&&(a.weekStarts=e.WeekStarts),a.hashes=e.Hashes),a.multiselect.clear(!0),a.multiselect.initList=e.SelectedEvents,a.pa(),a.ug(),a.Ma(),"Full"===e.UpdateType&&(a.vg(),a.wg()),a.Ua(),a.Ya(),a.Za(),a.Ha(e.CallBackData,!0),a.bb(),e.Message&&a.message(e.Message),a.Ga()},this.Ha=function(e,t){var n=function(e,t){return function(){if(a.cb()){if("function"==typeof a.onAfterRender){var n={};n.isCallBack=t,n.data=e,a.onAfterRender(n)}}else a.afterRender&&a.afterRender(e,t)}};window.setTimeout(n(e,t),0)},this.cb=function(){return 2===a.api},this.ca=function(e,t){return a.ea.da()?DayPilot.Util.escapeTextHtml(e,t):DayPilot.Util.isNullOrUndefined(t)?DayPilot.Util.isNullOrUndefined(e)?"":e:t},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.Ma=function(){if(this.events.list){if("function"==typeof this.onBeforeEventRender)for(var e=this.events.list.length,t=0;t<e;t++)this.ne(t);this.cellMode?this.xg():this.yg()}},this.ia=function(e){var t=e?0:100;a.loadingTimeout&&window.clearTimeout(a.loadingTimeout),
a.loadingTimeout=window.setTimeout(function(){a.loadingLabelVisible&&a.nav.loading&&(a.nav.loading.style.top=s.headerHeight()+5+"px",a.nav.loading.innerHTML=a.ca(this.loadingLabelText,this.loadingLabelHtml),a.nav.loading.style.display="")},t)},this.Ga=function(){this.loadingTimeout&&window.clearTimeout(this.loadingTimeout),a.nav.loading&&(this.nav.loading.style.display="none")},this.yg=function(){if(this.events.list){for(var e=0;e<this.events.list.length;e++){var t=this.events.list[e];if("object"!=typeof t)throw new DayPilot.Exception("Event data item must be an object");if(!t.start)throw new DayPilot.Exception("Event data item must specify 'start' property");var n=null;if("function"==typeof a.onBeforeEventRender&&(n=a.P.events[e]),n){if(n.hidden)continue}else if(t.hidden)continue;var i=new DayPilot.Date(t.start),r=new DayPilot.Date(t.end);if(r=a.zg(r),!(i.getTime()>r.getTime()))for(var o=0;o<this.rows.length;o++){var s=this.rows[o];if(s.belongsHere(i,r)){var l=new DayPilot.Event(t,a);if("function"==typeof a.onEventFilter&&a.events.ve){var d={};if(d.filter=a.events.ve,d.visible=!0,d.e=l,a.onEventFilter(d),!d.visible)break}s.events.push(l),"function"==typeof this.onBeforeEventRender&&(l.cache=this.P.events[e])}}}for(var c=0;c<this.rows.length;c++){var s=this.rows[c];s.events.sort(this.xe);for(var u=0;u<this.rows[c].events.length;u++){var h=s.events[u],f=s.getStartColumn(h),v=s.getWidth(h);s.putIntoLine(h,f,v,c)}}}},this.xg=function(){this.cellEvents=[];for(var e=0;e<this.Ag();e++){this.cellEvents[e]=[];for(var t=0;t<this.rows.length;t++){var n={},i=this.firstDate.addDays(7*t+e);n.start=i,n.end=i.addDays(1),n.events=[],this.cellEvents[e][t]=n}}for(var r=0;r<this.events.list.length;r++){var o=this.events.list[r];if("object"!=typeof o)throw new DayPilot.Exception("Event data item must be an object");if(!o.start)throw new DayPilot.Exception("Event data item must specify 'start' property");var s=null;if("function"==typeof a.onBeforeEventRender&&(s=a.P.events[r]),s){if(s.hidden)continue}else if(o.hidden)continue;var l=new DayPilot.Date(o.start),d=new DayPilot.Date(o.start);if(d=a.zg(d),!(l.getTime()>d.getTime()))for(var e=0;e<this.Ag();e++)for(var t=0;t<this.rows.length;t++){var n=this.cellEvents[e][t];if(l.getTime()>=n.start.getTime()&&l.getTime()<n.end.getTime()){var c=new DayPilot.Event(o,a);if("function"==typeof a.onEventFilter&&a.events.ve){var u={};if(u.filter=a.events.ve,u.visible=!0,u.e=c,a.onEventFilter(u),!u.visible)continue}n.events.push(c),"function"==typeof this.onBeforeEventRender&&(c.cache=this.P.events[r])}}}for(var e=0;e<this.Ag();e++)for(var t=0;t<this.rows.length;t++){var n=this.cellEvents[e][t];n.events.sort(this.xe)}},this.pa=function(){for(var e=0;e<this.elements.events.length;e++){var t=this.elements.events[e];if("function"==typeof a.onDomRemoveEvent){var n=t.domArgs;t.domArgs=null,a.onDomRemoveEvent(n)}t.event=null,t.click=null,t.parentNode.removeChild(t)}this.elements.events=[]},this.Za=function(){this.P.events={},this.cellMode?this.Bg():this.Cg(),this.multiselect.redraw()},this.Bg=function(){this.elements.events=[];for(var e=0;e<this.Ag();e++)for(var t=0;t<this.rows.length;t++)for(var n=this.cellEvents[e][t],i=(this.cells[e][t],0);i<n.events.length;i++){var a=n.events[i];a.part.colStart=e,a.part.colWidth=1,a.part.row=t,a.part.line=i,a.part.startsHere=!0,a.part.endsHere=!0,this.Tc(a)}},this.Cg=function(){this.elements.events=[];for(var e=0;e<this.rows.length;e++)for(var t=this.rows[e],n=0;n<t.lines.length;n++)for(var i=t.lines[n],a=0;a<i.length;a++)this.Tc(i[a])},this.we=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var n=e.start().ticks-t.start().ticks;return 0!==n?n:t.end().ticks-e.end().ticks},this.xe=function(e,t){if(!e||!t)return 0;if(!(e.data&&t.data&&e.data.sort&&t.data.sort&&0!==e.data.sort.length&&0!==t.data.sort.length))return a.we(e,t);for(var n=0,i=0;0===n&&"undefined"!=typeof e.data.sort[i]&&"undefined"!=typeof t.data.sort[i];)n=e.data.sort[i]===t.data.sort[i]?0:"number"==typeof e.data.sort[i]&&"number"==typeof t.data.sort[i]?e.data.sort[i]-t.data.sort[i]:a.ye(e.data.sort[i],t.data.sort[i],a.sortDirections[i]),i++;return n},this.ye=function(e,t,n){var i="desc"!==n,a=i?-1:1,r=-a;if(null===e&&null===t)return 0;if(null===t)return r;if(null===e)return a;var o=[];return o[0]=e,o[1]=t,o.sort(),e===o[0]?a:r},this.Dg=function(e,n,i,a,r,o){r||(r=0);var s=a;this.shadow={},this.shadow.list=[],this.shadow.start={x:e,y:n},this.shadow.width=a,this.eventMoveToPosition&&(s=1,this.shadow.position=i);var l=7*n+e-r;l<0&&(s+=l,e=0,n=0);for(var d=r;d>=7;)n--,d-=7;if(d>e){d>e+(7-this.Ag())?(n--,e=e+7-d):(s=s-d+e,e=0)}else e-=d;n<0&&(n=0,e=0);var c=null;for(t.resizingEvent?c="w-resize":t.movingEvent&&(c="move"),this.nav.top.style.cursor=c;s>0&&n<this.rows.length;){var u=Math.min(this.Ag()-e,s),h=this.rows[n],f=this.Eg(n),v=h.getHeight();this.eventMoveToPosition&&(f=this.Fg(n,i),v=2);var p=document.createElement("div");p.setAttribute("unselectable","on"),p.style.position="absolute",p.style.left=this.Gg()*e+"%",p.style.width=this.Gg()*u+"%",p.style.top=f+"px",p.style.height=v+"px",p.style.cursor=c;var m=document.createElement("div");m.setAttribute("unselectable","on"),p.appendChild(m),p.className=this.G("_shadow"),m.className=this.G("_shadow_inner");this.nav.events.appendChild(p),this.shadow.list.push(p),s-=u+7-this.Ag(),e=0,n++}},this.Hg=function(){if(this.shadow){this.nav.events;DayPilot.de(this.shadow.list),this.shadow=null,this.nav.top.style.cursor=""}},this.Fg=function(e,t){for(var n=0,i=0;i<e;i++)n+=this.rows[i].getHeight();return n+=this.cellHeaderHeight,n+=t*s.lineHeight()},this.Ig=function(e,t){return this.firstDate.addDays(7*t+e)},this.ne=function(e){var t=this.P.events,n=this.events.list[e],i={};for(var a in n)i[a]=n[a];if("function"==typeof this.onBeforeEventRender){var r={};r.e=i,r.data=i,this.onBeforeEventRender(r)}t[e]=i},this.Tc=function(e){var t=this.cellMode,n=e.part.row,i=e.part.line,o=e.part.colStart,l=e.part.colWidth,d=e.cache||e.data,c=t?0:this.Gg()*o,u=t?100:this.Gg()*l,h=t?i*s.lineHeight():this.Fg(n,i),f=document.createElement("div");f.setAttribute("unselectable","on"),f.style.height=s.eventHeight()+"px",f.style.position="relative",f.style.overflow="hidden",f.className=this.G("_event"),d.cssClass&&DayPilot.Util.addClass(f,d.cssClass),f.event=e,t?(f.style.marginRight="2px",f.style.marginBottom="2px"):(f.style.width=u+"%",f.style.position="absolute",f.style.left=c+"%",f.style.top=h+"px"),this.showToolTip&&d.toolTip&&!this.bubble&&(f.title=d.toolTip),f.onclick=this.Jg,f.ondblclick=this.Kg,f.oncontextmenu=this.Lg,f.onmousedown=this.Wc,f.onmousemove=this.Uc,f.onmouseout=this.Vc,f.ontouchstart=r.onEventTouchStart,f.ontouchmove=r.onEventTouchMove,f.ontouchend=r.onEventTouchEnd,e.part.startsHere||DayPilot.Util.addClass(f,this.G("_event_continueleft")),e.part.endsHere||DayPilot.Util.addClass(f,this.G("_event_continueright"));var v=document.createElement("div");v.setAttribute("unselectable","on"),v.className=this.G("_event_inner"),d.fontColor&&(v.style.color=d.fontColor),d.borderColor&&("darker"===d.borderColor&&d.backColor?v.style.borderColor=DayPilot.ColorUtil.darker(d.backColor,2):v.style.borderColor=d.borderColor),d.backColor&&(v.style.background=d.backColor),f.appendChild(v);var p=this.ea.locale(),m=a.eventStartEndWidth;if(this.eventStartTime||d.htmlStart){var g="Clock12Hours"===a.ea.timeFormat()?e.start().toString("h tt",p):e.start().toString("H",p),b={"left":5,"top":3,"width":m,"bottom":2,"v":"Visible","html":d.htmlStart||g,"css":a.G("_event_timeleft")},y=DayPilot.Areas.createArea(f,e,b);f.appendChild(y),v.style.paddingLeft=m+"px"}if(this.eventEndTime||d.htmlEnd){var g="Clock12Hours"===a.ea.timeFormat()?e.end().toString("h tt",p):e.end().toString("H",p),b={"right":5,"top":3,"width":m,"bottom":2,"v":"Visible","html":d.htmlEnd||g,"css":a.G("_event_timeright")},y=DayPilot.Areas.createArea(f,e,b);f.appendChild(y),v.style.paddingRight=m+"px"}if(d.areas)for(var w=d.areas,x=0;x<w.length;x++){var b=w[x];if(DayPilot.Areas.isVisible(b)){var y=DayPilot.Areas.createArea(f,e,b);f.appendChild(y)}}!function(){var t={};t.e=e,t.element=null,f.domArgs=t,"function"==typeof a.onDomAddEvent&&a.onDomAddEvent(t),t.element?v.appendChild(t.element):v.innerHTML=e.client.innerHTML()}(),this.elements.events.push(f),t?this.cells[o][n].body.appendChild(f):this.nav.events.appendChild(f),a.multiselect.wc(f.event)&&a.multiselect.add(f.event,!0);var f=f;if(a.cb()){if("function"==typeof a.onAfterEventRender){var k={};k.e=f.event,k.div=f,a.onAfterEventRender(k)}}else a.afterEventRender&&a.afterEventRender(f.event,f)},this.Jg=function(e){r.start||a.pb(this,e)},this.Kg=function(e){a.tb(this,e)},this.Uc=function(e){var n=this,i=n.event;if("undefined"!=typeof t&&!t.movingEvent&&!t.resizingEvent){var r=DayPilot.mo3(n,e);if(r){!function(){var e=n;if(!e.active){var t=[],r=i.cache||i.data;"Disabled"===a.eventDeleteHandling||r.deleteDisabled||t.push({"action":"JavaScript","v":"Hover","w":17,"h":17,"top":2,"right":2,"css":a.G("_event_delete"),"js":function(e){a.zb(e)}});var o=e.event.cache?e.event.cache.areas:e.event.data.areas;o&&o.length>0&&(t=t.concat(o)),DayPilot.Areas.showAreas(e,e.event,null,t)}}(),a.Mg(n.event).each(function(e){DayPilot.Util.addClass(e,a.G("_event_hover"))});var o=6;if(!a.cellMode&&r.x<=o&&i.client.resizeEnabled()?i.part.startsHere?(n.style.cursor="w-resize",n.dpBorder="left"):n.style.cursor="not-allowed":!a.cellMode&&n.clientWidth-r.x<=o&&i.client.resizeEnabled()?i.part.endsHere?(n.style.cursor="e-resize",n.dpBorder="right"):n.style.cursor="not-allowed":i.client.clickEnabled()?n.style.cursor="pointer":n.style.cursor="default","undefined"!=typeof DayPilot.Bubble&&a.bubble&&"Disabled"!==a.eventHoverHandling)if(t.movingEvent||t.resizingEvent)DayPilot.Bubble.hideActive();else{var s=this.oe&&r.x===this.oe.x&&r.y===this.oe.y;s||(this.oe=r,a.bubble.showEvent(n.event))}}}},this.Vc=function(e){var t=this;"undefined"!=typeof DayPilot.Bubble&&a.bubble&&a.bubble.hideOnMouseOut(),t.style.cursor="",a.Mg(t.event).each(function(e){DayPilot.Util.removeClass(e,a.G("_event_hover"))}),DayPilot.Areas.hideAreas(t,e)},this.Lg=function(){var e=this;return a.ub(e.event),!1},this.Wc=function(e){if(!r.start){"undefined"!=typeof DayPilot.Bubble&&(DayPilot.Bubble.hideActive(),DayPilot.Bubble.cancelShowing());var n=this,i=n.event,o=i.part.row,s=i.part.colStart,l=i.part.line,d=i.part.colWidth;e=e||window.event;var c=DayPilot.Util.mouseButton(e);if(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),c.left)if("undefined"!=typeof DayPilot.Bubble&&a.bubble&&DayPilot.Bubble.hideActive(),t.movingEvent=null,"w-resize"===this.style.cursor||"e-resize"===this.style.cursor){var u={};u.start={},u.start.x=s,u.start.y=o,u.event=n.event,u.width=DayPilot.DateUtil.daysSpan(u.event.start(),u.event.end())+1,u.direction=this.style.cursor,t.resizingEvent=u}else if("move"===this.style.cursor||i.client.moveEnabled()){a.Hg();var h=DayPilot.mo3(a.nav.events,e);if(!h)return;var f=a.Ng(h.x,h.y);if(!f)return;var v=DayPilot.DateUtil.daysDiff(i.start(),a.rows[o].start),p=7*f.y+f.x-(7*o+s);v&&(p+=v);var m={};m.start={},m.start.x=s,m.start.y=o,m.start.line=l,m.offset=a.eventMoveToPosition?0:p,m.colWidth=d,m.event=n.event,m.coords=h,t.movingEvent=m}}},this.temp={},this.temp.getPosition=function(){if(!a.coords)return null;var e=a.Ng(a.coords.x,a.coords.y);if(!e)return null;var t=new DayPilot.Date(a.Ig(e.x,e.y)),e={};return e.start=t,e.end=t.addDays(1),e},this.Xc={};var r=a.Xc;r.active=!1,r.start=!1,r.timeouts=[],r.onEventTouchStart=function(e){if(!r.active&&!r.start){r.clearTimeouts(),r.start=!0,r.active=!1;var t=this;if(t.event.client.moveEnabled()){var n=a.tapAndHoldTimeout;r.timeouts.push(window.setTimeout(function(){r.active=!0,r.start=!1;var n=r.relativeCoords(e);r.startMoving(t,n),e.preventDefault()},n))}e.stopPropagation()}},r.onEventTouchMove=function(e){r.clearTimeouts(),r.start=!1},r.onEventTouchEnd=function(e){r.clearTimeouts(),r.start&&a.qb(this,e),window.setTimeout(function(){r.start=!1,r.active=!1},500)},r.onMainTouchStart=function(e){if(!r.active&&!r.start){r.clearTimeouts(),r.start=!0,r.active=!1;var t=a.tapAndHoldTimeout;r.timeouts.push(window.setTimeout(function(){r.active=!0,r.start=!1,e.preventDefault();var t=r.relativeCoords(e);r.startRange(t)},t))}},r.onMainTouchMove=function(e){if(r.clearTimeouts(),r.start=!1,r.active){e.preventDefault();var t=r.relativeCoords(e);if(r.moving)return void r.updateMoving(t);r.range&&r.updateRange(t)}},r.onMainTouchEnd=function(e){if(r.clearTimeouts(),r.active){if(r.moving){var t=(r.moving,r.moving.event),n=a.shadow.start,i=a.shadow.position,o=r.moving.offset;a.Hg(),r.moving=null,a.Ib(t,n.x,n.y,o,e,i)}if(r.range){var s=r.range,n=new DayPilot.Date(a.Ig(s.from.x,s.from.y)),l=n.addDays(s.width);r.range=null,a.Qb(n,l)}}window.setTimeout(function(){r.start=!1,r.active=!1},500)},r.clearTimeouts=function(){for(var e=0;e<r.timeouts.length;e++)clearTimeout(r.timeouts[e]);r.timeouts=[]},r.relativeCoords=function(e){var t=a.nav.events,n=e.touches?e.touches[0]:e,i=n.pageX,r=n.pageY,o=DayPilot.abs(t);return{x:i-o.x,y:r-o.y,toString:function(){return"x: "+this.x+", y:"+this.y}}},r.startMoving=function(e,t){a.Hg();var n=e.event,i=a.Ng(t.x,t.y);if(i){var o=DayPilot.DateUtil.daysDiff(n.start(),a.rows[n.part.row].start),s=7*i.y+i.x-(7*n.part.row+n.part.colStart);o&&(s+=o);var l={};l.start={},l.start.x=n.part.colStart,l.start.y=n.part.row,l.start.line=n.part.line,l.offset=a.eventMoveToPosition?0:s,l.colWidth=n.part.colWidth,l.event=n,l.coords=t,r.moving=l,r.updateMoving(t)}},r.updateMoving=function(e){var t=a.Ng(e.x,e.y);if(t){var n=a.Og(t);a.Hg();var i=r.moving.event,o=r.moving.offset,s=a.cellMode?1:DayPilot.DateUtil.daysSpan(i.start(),i.end())+1;s<1&&(s=1),a.Dg(t.x,t.y,n,s,o,i)}},r.startRange=function(e){var t=a.Ng(e.x,e.y);if(t){a.Hg();var n={};n.start={},n.start.x=t.x,n.start.y=t.y,n.x=t.x,n.y=t.y,n.width=1,r.range=n,r.updateRange(e)}},r.updateRange=function(e){var t=a.Ng(e.x,e.y);if(t){a.Hg();var n=r.range.start,i=7*n.y+n.x,o=7*t.y+t.x,s=Math.abs(o-i)+1;s<1&&(s=1);var l=i<o?n:t;r.range.width=s,r.range.from={x:l.x,y:l.y},a.Dg(l.x,l.y,0,s,0,null)}},this.isWeekend=function(e){return 0===e.dayOfWeek()||6===e.dayOfWeek()},this.Pg=function(){var e=this.startDate.lastDayOfMonth();if(this.showWeekend)return e;for(;this.isWeekend(e);)e=e.addDays(-1);return e},this.ug=function(){if("string"==typeof this.startDate&&(this.startDate=new DayPilot.Date(this.startDate)),"Month"===this.viewType?this.startDate=this.startDate.firstDayOfMonth():this.startDate=this.startDate.getDatePart(),this.firstDate=this.startDate.firstDayOfWeek(s.weekStarts()),!this.showWeekend){for(var e=this.startDate.addMonths(-1).getMonth(),t=new DayPilot.Date(this.firstDate).addDays(6);this.isWeekend(t);)t=t.addDays(-1);t.getMonth()===e&&(this.firstDate=this.firstDate.addDays(7))}var n;this.startDate;if("Month"===this.viewType){var i=this.Pg(),r=DayPilot.DateUtil.daysDiff(this.firstDate,i)+1;n=Math.ceil(r/7)}else n=this.weeks;this.days=7*n,this.rows=[];for(var o=0;o<n;o++){var l={};l.start=this.firstDate.addDays(7*o),l.end=l.start.addDays(this.Ag()),l.events=[],l.lines=[],l.index=o,l.minHeight=this.cellHeight,l.calendar=this,l.belongsHere=function(e,t){return t.getTime()===e.getTime()&&e.getTime()===this.start.getTime()||!(t.getTime()<=this.start.getTime()||e.getTime()>=this.end.getTime())},l.getPartStart=function(e){return DayPilot.DateUtil.max(this.start,e.start())},l.getPartEnd=function(e){return DayPilot.DateUtil.min(this.end,e.rawend())},l.getStartColumn=function(e){var t=this.getPartStart(e);return DayPilot.DateUtil.daysDiff(this.start,t)},l.getWidth=function(e){return DayPilot.DateUtil.daysSpan(this.getPartStart(e),this.getPartEnd(e))+1},l.putIntoLine=function(e,t,n,i){for(var a=this,r=0;r<this.lines.length;r++){var o=this.lines[r];if(o.isFree(t,n))return o.addEvent(e,t,n,i,r),r}var o=[];return o.isFree=function(e,t){for(var n=!0,i=0;i<this.length;i++){var a=this[i];e+t-1<a.part.colStart||e>a.part.colStart+a.part.colWidth-1||(n=!1)}return n},o.addEvent=function(e,t,n,i,r){e.part.colStart=t,e.part.colWidth=n,e.part.row=i,e.part.line=r,e.part.startsHere=a.start.getTime()<=e.start().getTime(),e.part.endsHere=a.end.getTime()>=e.end().getTime(),this.push(e)},o.addEvent(e,t,n,i,this.lines.length),this.lines.push(o),this.lines.length-1},l.getStart=function(){for(var e=0,t=0;t<a.rows.length&&t<this.index;t++)e+=a.rows[t].getHeight()},l.getHeight=function(){return Math.max(this.lines.length*s.lineHeight()+a.cellHeaderHeight+a.cellMarginBottom,this.calendar.cellHeight)},this.rows.push(l)}this.Qg=this.firstDate.addDays(7*n)},this.Rg=function(){switch(this.heightSpec){case"Auto":for(var e=s.headerHeight(),t=0;t<this.rows.length;t++)e+=this.rows[t].getHeight();return e;case"Fixed":return this.height}},this.Sg=function(e,t){return 7*t.y+t.x-(7*e.y+e.x)+1},this.Ae={},this.Ae.scope=null,this.Ae.notify=function(){a.Ae.scope&&a.Ae.scope["$apply"]()},this.debug=new DayPilot.Debug(this),this.ed=function(){var e=this.nav.top;this.nav.top.dp=this,e.setAttribute("unselectable","on"),e.style.MozUserSelect="none",e.style.KhtmlUserSelect="none",e.style.WebkitUserSelect="none",e.style.WebkitTapHighlightColor="rgba(0,0,0,0)",e.style.WebkitTouchCallout="none",e.style.position="relative",this.width&&(e.style.width=this.width),e.onselectstart=function(e){return!1},e.className=this.G("_main"),this.hideUntilInit&&(e.style.visibility="hidden"),this.visible||(e.style.display="none"),e.onmousemove=this.kd,e.ontouchstart=r.onMainTouchStart,e.ontouchmove=r.onMainTouchMove,e.ontouchend=r.onMainTouchEnd,this.tg=document.createElement("div"),this.tg.style.display="none",this.nav.top.appendChild(this.tg);var t=document.createElement("div");t.style.position="relative",t.style.height=s.headerHeight()+"px",t.oncontextmenu=function(){return!1},this.nav.top.appendChild(t),this.nav.header=t;var n=document.createElement("div");n.style.zoom="1";var i=document.createElement("div");i.style.position="relative",n.appendChild(i),this.nav.loading=document.createElement("div"),this.nav.loading.style.position="absolute",this.nav.loading.style.top="0px",this.nav.loading.style.left="5px",this.nav.loading.className=a.G("_loading"),this.nav.loading.innerHTML=a.ca(this.loadingLabelText,this.loadingLabelHtml),this.nav.loading.style.display="none",this.nav.top.appendChild(n),this.nav.top.appendChild(this.nav.loading),this.nav.scrollable=n,this.nav.events=i},this.kd=function(e){e.insideMainD=!0,window.event&&window.event.srcElement&&(window.event.srcElement.inside=!0),a.coords=DayPilot.mo3(a.nav.events,e);var n=a.coords;if(n){var i=a.Ng(n.x,n.y);if(i){if(t.resizingEvent){a.Hg();var r,o,s=t.resizingEvent;s.start;if("w-resize"===s.direction){o=i;var l=s.event.rawend();l.getDatePart().getTime()===l.getTime()&&(l=l.addDays(-1));var d=a.Tg(l);r=a.Sg(i,d)}else o=a.Tg(s.event.start()),r=a.Sg(o,i);r<1&&(r=1),a.Dg(o.x,o.y,0,r)}else if(t.movingEvent){if(n.x===t.movingEvent.coords.x&&n.y===t.movingEvent.coords.y)return;var c=a.Og(i);a.Hg();var u=t.movingEvent.event,h=t.movingEvent.offset,r=a.cellMode?1:DayPilot.DateUtil.daysSpan(u.start(),u.rawend())+1;r<1&&(r=1),a.Dg(i.x,i.y,c,r,h,u)}else if(t.timeRangeSelecting){t.cancelCellClick=!0,a.Hg();var o=t.timeRangeSelecting,f=7*o.y+o.x,v=7*i.y+i.x,r=Math.abs(v-f)+1;r<1&&(r=1);var p=f<v?o:i;t.timeRangeSelecting.from={x:p.x,y:p.y},t.timeRangeSelecting.width=r,t.timeRangeSelecting.moved=!0,a.Dg(p.x,p.y,0,r,0,null)}if(t.drag){if(t.gShadow&&document.body.removeChild(t.gShadow),t.gShadow=null,!t.movingEvent){var m=DayPilot.Date.today(),e={"id":t.drag.id,"start":m,"end":m.addSeconds(t.drag.duration),"text":t.drag.text},g=t.drag.data;if(g){var b=["duration","element","remove","id","text"];for(var y in g)DayPilot.contains(b,y)||(e[y]=g[y])}var u=new DayPilot.Event(e,a);u.external=!0;var w=t.movingEvent={};w.event=u,w.coords=n,w.position=0,w.offset=0,w.external=!0,w.removeElement=t.drag.element}e.cancelBubble=!0}}}},this.Og=function(e){for(var t=e.relativeY,n=a.rows[e.y],i=a.cellHeaderHeight,r=s.lineHeight(),o=n.lines.length,l=0;l<n.lines.length;l++){if(n.lines[l].isFree(e.x,1)){o=l;break}}var d=Math.floor((t-i+r/2)/r),d=Math.min(o,d),d=Math.max(0,d);return d},this.message=function(e,t){if(null!==e&&a.S){var n,i={};"object"==typeof arguments[1]?(i=arguments[1],n=i.delay):n=t;var r="";r=i.rawHtml?e:DayPilot.Util.escapeHtml(e),n=n||this.messageHideAfter||2e3;var o,l=s.headerHeight();if(this.nav.message)o=a.nav.message;else{o=document.createElement("div"),o.setAttribute("unselectable","on"),o.style.position="absolute",o.style.right="0px",o.style.left="0px",o.style.top=l+"px",o.style.display="none",o.onmousemove=function(){o.messageTimeout&&!o.status&&clearTimeout(o.messageTimeout)},o.onmouseout=function(){"none"!==a.nav.message.style.display&&(o.messageTimeout=setTimeout(a.nb,500))};var d=document.createElement("div");d.setAttribute("unselectable","on"),d.onclick=function(){a.nav.message.style.display="none"},d.className=this.G("_message"),o.appendChild(d);var c=document.createElement("div");c.setAttribute("unselectable","on"),c.style.position="absolute",c.className=this.G("_message_close"),c.onclick=function(){a.nav.message.style.display="none"},o.appendChild(c),this.nav.top.appendChild(o),this.nav.message=o}var u=function(){a.nav.message.firstChild.innerHTML=r;var e=function(){o.messageTimeout=setTimeout(a.nb,n)};DayPilot.fade(a.nav.message,.2,e)};clearTimeout(o.messageTimeout),"none"!==this.nav.message.style.display?DayPilot.fade(a.nav.message,-.2,u):u()}},this.message.show=function(e){a.message(e)},this.message.hide=function(){a.nb()},this.nb=function(){var e=function(){a.nav.message.style.display="none"};DayPilot.fade(a.nav.message,-.2,e)},this.xa=function(e){"Parent100Pct"===a.heightSpec&&a.Ua()},this.Ua=function(){var e=this.nav.scrollable;if("Parent100Pct"===this.heightSpec||"Fixed"===this.heightSpec?(e.style.top=this.headerHeight+"px",e.style.bottom="0px",e.style.left="0px",e.style.right="0px",e.style.overflow="auto",e.style.position="absolute"):e.style.position="relative","Parent100Pct"===this.heightSpec){this.nav.top.style.height="100%";this.nav.top.clientHeight}else this.nav.top.style.height=this.Rg()+"px";for(var t=0;t<this.cells.length;t++)for(var n=0;n<this.cells[t].length;n++)this.cells[t][n].style.top=this.Eg(n)+"px",this.cells[t][n].style.height=this.rows[n].getHeight()+"px";this.Ug()},this.Ng=function(e,t){for(var n=Math.floor(this.nav.top.clientWidth/this.Ag()),i=Math.min(Math.floor(e/n),this.Ag()-1),a=null,r=0,o=0,s=0,l=0;l<this.rows.length;l++){if(o+=this.rows[l].getHeight(),t<o){r=t-s,a=l;break}s=o}null===a&&(a=this.rows.length-1);var d={};return d.x=i,d.y=a,d.relativeY=r,d},this.Tg=function(e){for(var t=DayPilot.DateUtil.daysDiff(this.firstDate,e),n={x:0,y:0};t>=7;)n.y++,t-=7;return n.x=t,n},this.Ug=function(){var e=DayPilot.sw(this.nav.scrollable);this.nav.header.style.marginRight=e+"px"};var o=null;this.wg=function(){var e=this.nav.header,t=this.nav.events;this.cells=[];for(var n=0;n<this.Ag();n++){this.cells[n]=[];var i=this.headerProperties?this.headerProperties[n]:null,r=n+s.weekStarts();if(r>6&&(r-=7),!i){var i={};i.html=s.locale().dayNames[r]}if("function"==typeof a.onBeforeHeaderRender){var l={};l.header={},l.header.dayOfWeek=r;var d=["html","backColor","cssClass"];DayPilot.Util.copyProps(i,l.header,d),a.onBeforeHeaderRender(l),DayPilot.Util.copyProps(l.header,i,d)}var c=document.createElement("div");c.setAttribute("unselectable","on"),c.style.position="absolute",c.style.left=this.Gg()*n+"%",c.style.width=this.Gg()+"%",c.style.top="0px",c.style.height=s.headerHeight()+"px",function(e){c.onclick=function(){a.wb(e)}}(r);var u=document.createElement("div");u.setAttribute("unselectable","on"),u.className=this.G("_header_inner"),u.innerHTML=i.html,c.appendChild(u),c.className=this.G("_header"),i&&(i.cssClass&&DayPilot.Util.addClass(c,i.cssClass),i.backColor&&(u.style.background=i.backColor)),e.appendChild(c);for(var h=0;h<this.rows.length;h++)this.$c(n,h,t)}if(!DayPilot.contains(this.nav.top.childNodes,o)&&DayPilot.Util.isNullOrUndefined(undefined)){var f=document.createElement("div");f.style.position="absolute",f.style.padding="2px",f.style.top="0px",f.style.left="0px",f.style.backgroundColor="#FF6600",f.style.color="white",f.innerHTML="\u0044\u0045"+"\u004D\u004F",o=f,this.nav.top.appendChild(f)}},this.vg=function(){for(var e=0;e<this.cells.length;e++)for(var t=0;t<this.cells[e].length;t++)this.cells[e][t].onclick=null;this.nav.header.innerHTML="",this.nav.events.innerHTML=""},this.$c=function(t,n,i){var r=this.rows[n],o=this.firstDate.addDays(7*n+t),l=this.cellProperties?this.cellProperties[n*this.Ag()+t]:null,d=null;if(l)d=l["headerHtml"];else{var c=o.getDay();d=1===c?s.locale().monthNames[o.getMonth()]+" "+c:c+""}if(!l){var l={};l.business=!a.isWeekend(o),l.headerHtml=d}if("function"==typeof a.onBeforeCellRender){var u={};u.cell={},u.cell.areas=null,u.cell.backColor=null,u.cell.backImage=null,u.cell.backRepeat=null,u.cell.business=a.isWeekend(o),u.cell.headerHtml=d,u.cell.headerBackColor=null,u.cell.cssClass=null,u.cell.html=null,u.cell.start=o,u.cell.end=u.cell.start.addDays(1),u.cell.events=function(){return a.events.forRange(u.cell.start,u.cell.end)},DayPilot.Util.copyProps(l,u.cell),a.onBeforeCellRender(u),DayPilot.Util.copyProps(u.cell,l,["areas","backColor","backImage","backRepeat","business","headerHtml","headerBackColor","cssClass","html"])}var h=document.createElement("div");h.setAttribute("unselectable","on"),h.style.position="absolute",h.style.cursor="default",h.style.left=this.Gg()*t+"%",h.style.width=this.Gg()+"%",h.style.top=this.Eg(n)+"px",h.style.height=r.getHeight()+"px",h.d=o,h.x=t,h.y=n,h.props=l;var f=this.startDate.addMonths(-1).getMonth(),v=this.startDate.addMonths(1).getMonth(),p=this.startDate.getMonth(),m=document.createElement("div");m.setAttribute("unselectable","on"),h.appendChild(m),m.className=this.G("_cell_inner"),m.className=this.G("_cell_inner"),o.getMonth()===p?h.className=this.G("_cell"):o.getMonth()===f?h.className=this.G("_cell")+" "+this.G("_previous"):o.getMonth()===v?h.className=this.G("_cell")+" "+this.G("_next"):e(),l&&(l["cssClass"]&&DayPilot.Util.addClass(h,l.cssClass),l["business"]&&DayPilot.Util.addClass(h,this.G("_cell_business")),l["backColor"]&&(m.style.backgroundColor=l["backColor"]),l["backImage"]&&(m.style.backgroundImage="url('"+l["backImage"]+"')"),l["backRepeat"]&&(m.style.backgroundRepeat=l["backRepeat"])),h.onmousedown=this.Yb,h.onmousemove=this.hc,h.onmouseout=this.gc,h.oncontextmenu=this.Vg,h.onclick=this.Wg,h.ondblclick=this.Xg;var g=document.createElement("div");if(g.setAttribute("unselectable","on"),g.style.height=this.cellHeaderHeight+"px",l&&l["headerBackColor"]&&(g.style.background=l["headerBackColor"]),g.className=this.G("_cell_header"),g.innerHTML=l.headerHtml,m.appendChild(g),l&&l["html"]){var b=document.createElement("div");b.setAttribute("unselectable","on"),b.style.height=r.getHeight()-this.cellHeaderHeight+"px",b.style.overflow="hidden",b.innerHTML=l["html"],m.appendChild(b)}if(this.cellMode){var y=document.createElement("div");y.setAttribute("unselectable","on"),y.style.height=this.cellHeight-this.cellHeaderHeight+"px",y.style.overflow="auto",y.style.position="relative";var w=document.createElement("div");w.setAttribute("unselectable","on"),w.style.paddingTop="1px",w.style.paddingBottom="1px",y.appendChild(w),m.appendChild(y),h.body=w,h.scrolling=y}if(h.props)for(var x=h.props.areas||[],k=0;k<x.length;k++){var C=x[k];if(DayPilot.Areas.isVisible(C)){var S=DayPilot.Areas.createArea(h,h.props,C);h.appendChild(S)}}this.cells[t][n]=h,i.appendChild(h),"function"==typeof a.onAfterCellRender&&(u.cell.div=h,u.cell.divHeader=g,a.onAfterCellRender(u))},this.hc=function(){var e=this;e.props&&DayPilot.Areas.showAreas(e,e.props)},this.gc=function(e){var t=this;t.props&&DayPilot.Areas.hideAreas(t,e)},this.Vg=function(){var e=this.d;return function(e){var t=new DayPilot.Date(e),n=t.addDays(1),i=new DayPilot.Selection(t,n,null,a);a.contextMenuSelection&&a.contextMenuSelection.show(i)}(e),!1},this.Xg=function(){var e=this.d;if(a.timeouts){for(var t in a.timeouts)window.clearTimeout(a.timeouts[t]);a.timeouts=null}if("Disabled"!==a.timeRangeDoubleClickHandling){var n=new DayPilot.Date(e),i=n.addDays(1);a.Rb(n,i)}},this.Wg=function(){if(!t.cancelCellClick){var e=this.d,n=function(e){var t=new DayPilot.Date(e),n=t.addDays(1);a.Qb(t,n)};if("Disabled"!==a.timeRangeSelectedHandling&&"Disabled"===a.timeRangeDoubleClickHandling)return void n(e);a.timeouts||(a.timeouts=[]);var i=function(e){return function(){n(e)}};a.timeouts.push(window.setTimeout(i(e),a.doubleClickTimeout))}},this.Yb=function(e){var n=this,i=n.x,r=n.y;if(t.cancelCellClick=!1,n.scrolling){var o=DayPilot.mo3(n.scrolling,e),s=DayPilot.sw(n.scrolling),l=n.scrolling.offsetWidth;if(o.x>l-s)return}"Disabled"!==a.timeRangeSelectedHandling&&(a.Hg(),t.timeRangeSelecting={"root":a,"x":i,"y":r,"from":{x:i,y:r},"width":1})},this.Ag=function(){return this.showWeekend?7:5},this.Gg=function(){return this.showWeekend?14.285:20},this.Eg=function(e){for(var t=0,n=0;n<e;n++)t+=this.rows[n].getHeight();return t},this.clearSelection=function(){this.Hg()},this.fa=function(e,t,n){var i={};i.action=e,i.parameters=n,i.data=t,i.header=this.ga();var r="JSON"+JSON.stringify(i);__doPostBack(a.uniqueID,r)},this.ha=function(e,t,n,i){if(!this.I())return void a.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning");"undefined"==typeof i&&(i="CallBack"),a.ia();var r={};r.action=e,r.type=i,r.parameters=t,r.data=n,r.header=this.ga();var o="JSON"+JSON.stringify(r);this.backendUrl?DayPilot.request(this.backendUrl,this.ja,o,this.ka):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,o,this.la,null,this.callbackError,!0)},this.I=function(){return"javasc"!==a.U&&a.U.indexOf("DCODE")===-1||a.devsb},this.ma=function(){return!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.ka=function(e){if("function"==typeof a.onAjaxError){var t={};t.request=e,a.onAjaxError(t)}else"function"==typeof a.ajaxError&&a.ajaxError(e)},this.ja=function(e){a.la(e.responseText)},this.ga=function(){var e={};return e.v=this.v,e.control="dpm",e.id=this.id,e.visibleStart=new DayPilot.Date(this.firstDate),e.visibleEnd=e.visibleStart.addDays(this.days),e.clientState=this.clientState,e.cssClassPrefix=a.cssClassPrefix,e.startDate=a.startDate,e.showWeekend=this.showWeekend,e.locale=this.locale,e.timeFormat=this.timeFormat,e.weekStarts=this.weekStarts,e.viewType=this.viewType,e.weeks=this.weeks,e.selected=a.multiselect.events(),e.hashes=a.hashes,e},this.visibleStart=function(){return new DayPilot.Date(this.firstDate)},this.visibleEnd=function(){return a.visibleStart().addDays(a.days)},this.Ab=function(e,t,n,i){if("PostBack"===e)a.postBack2(t,n,i);else if("CallBack"===e)a.ha(t,n,i,"CallBack");else if("Immediate"===e)a.ha(t,n,i,"Notify");else if("Queue"===e)a.queue.add(new DayPilot.Action(this,t,n,i));else{if("Notify"!==e)throw"Invalid event invocation type";"Notify"===s.notifyType()?a.ha(t,n,i,"Notify"):a.queue.add(new DayPilot.Action(a,t,n,i))}},this.Mb=function(e,t){var n=a.Nb(t),i={};i.args=e,i.guid=n,a.ha("Bubble",i)},this.Nb=function(e){var t=DayPilot.guid();return this.bubbles||(this.bubbles=[]),this.bubbles[t]=e,t},this.eventClickPostBack=function(e,t){this.fa("EventClick",t,e)},this.eventClickCallBack=function(e,t){this.ha("EventClick",e,t)},this.pb=function(e,n){t.movingEvent=null,t.resizingEvent=null;var n=n||window.event;n.ctrlKey,n.metaKey;if(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation(),"undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),"Disabled"===a.eventDoubleClickHandling)return void a.qb(e,n);if(a.timeouts){for(var i in a.timeouts)window.clearTimeout(a.timeouts[i]);a.timeouts=[]}else a.timeouts=[];var r=function(e,t){return function(){a.qb(e,t)}};a.timeouts.push(window.setTimeout(r(e,n),a.doubleClickTimeout))},this.qb=function(e,t){var n=e.event;if(n.client.clickEnabled()){var i=t.ctrlKey,r=t.metaKey;
if(a.cb()){var o={};if(o.e=n,o.div=e,o.originalEvent=t,o.meta=t.metaKey,o.ctrl=t.ctrlKey,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventClick&&(a.onEventClick(o),o.preventDefault.value))return;switch(a.eventClickHandling){case"PostBack":a.eventClickPostBack(n);break;case"CallBack":a.eventClickCallBack(n);break;case"Select":a.sb(e,n,i,r);break;case"ContextMenu":var s=n.client.contextMenu();s?s.show(n):a.contextMenu&&a.contextMenu.show(n);break;case"Bubble":a.bubble&&a.bubble.showEvent(n)}"function"==typeof a.onEventClicked&&a.onEventClicked(o)}else switch(a.eventClickHandling){case"PostBack":a.eventClickPostBack(n);break;case"CallBack":a.eventClickCallBack(n);break;case"JavaScript":a.onEventClick(n);break;case"Select":a.sb(e,n,i,r);break;case"ContextMenu":var s=n.client.contextMenu();s?s.show(n):a.contextMenu&&a.contextMenu.show(n);break;case"Bubble":a.bubble&&a.bubble.showEvent(n)}}},this.zb=function(e){if(a.cb()){var t={};if(t.e=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventDelete&&(a.onEventDelete(t),t.preventDefault.value))return;switch(a.eventDeleteHandling){case"PostBack":a.eventDeletePostBack(e);break;case"CallBack":a.eventDeleteCallBack(e);break;case"Update":a.events.remove(e)}"function"==typeof a.onEventDeleted&&a.onEventDeleted(t)}else switch(a.eventDeleteHandling){case"PostBack":a.eventDeletePostBack(e);break;case"CallBack":a.eventDeleteCallBack(e);break;case"JavaScript":a.onEventDelete(e)}},this.eventDeletePostBack=function(e,t){this.fa("EventDelete",e,t)},this.eventDeleteCallBack=function(e,t){this.ha("EventDelete",e,t)},this.eventDoubleClickPostBack=function(e,t){this.fa("EventDoubleClick",t,e)},this.eventDoubleClickCallBack=function(e,t){this.ha("EventDoubleClick",e,t)},this.tb=function(e,t){if("undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),a.timeouts){for(var n in a.timeouts)window.clearTimeout(a.timeouts[n]);a.timeouts=null}var t=t||window.event,i=e.event;if(a.cb()){var r={};if(r.e=i,r.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventDoubleClick&&(a.onEventDoubleClick(r),r.preventDefault.value))return;switch(a.eventDoubleClickHandling){case"PostBack":a.eventDoubleClickPostBack(i);break;case"CallBack":a.eventDoubleClickCallBack(i);break;case"Select":a.sb(e,i,t.ctrlKey,t.metaKey);break;case"Bubble":a.bubble&&a.bubble.showEvent(i)}"function"==typeof a.onEventDoubleClicked&&a.onEventDoubleClicked(r)}else switch(a.eventDoubleClickHandling){case"PostBack":a.eventDoubleClickPostBack(i);break;case"CallBack":a.eventDoubleClickCallBack(i);break;case"JavaScript":a.onEventDoubleClick(i);break;case"Select":a.sb(e,i,t.ctrlKey,t.metaKey);break;case"Bubble":a.bubble&&a.bubble.showEvent(i)}},this.sb=function(e,t,n,i){a.Tb(e,t,n,i)},this.eventSelectPostBack=function(e,t,n){var i={};i.e=e,i.change=t,this.fa("EventSelect",n,i)},this.eventSelectCallBack=function(e,t,n){var i={};i.e=e,i.change=t,this.ha("EventSelect",i,n)},this.Tb=function(e,t,n,i){var r=a.multiselect,o=r.isSelected(t);if(n||i||!o||1!==r.list.length)if(a.cb()){r.previous=r.events();var s={};if(s.e=t,s.selected=r.isSelected(t),s.ctrl=n,s.meta=i,s.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventSelect&&(a.onEventSelect(s),s.preventDefault.value))return;switch(a.eventSelectHandling){case"PostBack":a.eventSelectPostBack(t,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),a.eventSelectCallBack(t,l);break;case"Update":r.Xb(e,n)}"function"==typeof a.onEventSelected&&(s.change=r.isSelected(t)?"selected":"deselected",s.selected=r.isSelected(t),a.onEventSelected(s))}else{r.previous=r.events(),r.Xb(e,n);var l=r.isSelected(t)?"selected":"deselected";switch(a.eventSelectHandling){case"PostBack":a.eventSelectPostBack(t,l);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),a.eventSelectCallBack(t,l);break;case"JavaScript":a.onEventSelect(t,l)}}},this.eventRightClickPostBack=function(e,t){this.fa("EventRightClick",t,e)},this.eventRightClickCallBack=function(e,t){this.ha("EventRightClick",e,t)},this.ub=function(e){if(this.event=e,!e.client.rightClickEnabled())return!1;if(a.cb()){var t={};if(t.e=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventRightClick&&(a.onEventRightClick(t),t.preventDefault.value))return;switch(a.eventRightClickHandling){case"PostBack":a.eventRightClickPostBack(e);break;case"CallBack":a.eventRightClickCallBack(e);break;case"ContextMenu":var n=e.client.contextMenu();n?n.show(e):a.contextMenu&&a.contextMenu.show(this.event);break;case"Bubble":a.bubble&&a.bubble.showEvent(e)}"function"==typeof a.onEventRightClicked&&a.onEventRightClicked(t)}else switch(a.eventRightClickHandling){case"PostBack":a.eventRightClickPostBack(e);break;case"CallBack":a.eventRightClickCallBack(e);break;case"JavaScript":a.onEventRightClick(e);break;case"ContextMenu":var n=e.client.contextMenu();n?n.show(e):a.contextMenu&&a.contextMenu.show(this.event);break;case"Bubble":a.bubble&&a.bubble.showEvent(e)}return!1},this.eventMenuClickPostBack=function(e,t,n){var i={};i.e=e,i.command=t,this.fa("EventMenuClick",n,i)},this.eventMenuClickCallBack=function(e,t,n){var i={};i.e=e,i.command=t,this.ha("EventMenuClick",i,n)},this.Ob=function(e,t,n){switch(n){case"PostBack":a.eventMenuClickPostBack(t,e);break;case"CallBack":a.eventMenuClickCallBack(t,e)}},this.eventMovePostBack=function(e,t,n,i,a){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.position=a,this.fa("EventMove",i,r)},this.eventMoveCallBack=function(e,t,n,i,a){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var r={};r.e=e,r.newStart=t,r.newEnd=n,r.position=a,this.ha("EventMove",r,i)},this.Ib=function(e,t,n,i,r,o,s){var l=e.start().getTimePart(),d=e.rawend().getDatePart();d.getTime()!==e.rawend().getTime()&&(d=d.addDays(1));var c=DayPilot.DateUtil.diff(e.rawend(),d),u=this.Ig(t,n);u=u.addDays(-i);var h=DayPilot.DateUtil.daysSpan(e.start(),e.rawend())+1,f=u.addDays(h),v=u.addTime(l),p=f.addTime(c);if(p=a.Yg(p),a.cb()){var m={};if(m.e=e,m.newStart=v,m.newEnd=p,m.position=o,m.ctrl=!1,m.external=s,r&&(m.ctrl=r.ctrlKey),m.shift=!1,r&&(m.shift=r.shiftKey),m.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventMove&&(a.onEventMove(m),m.preventDefault.value))return;switch(a.eventMoveHandling){case"PostBack":a.eventMovePostBack(e,v,p,null,o);break;case"CallBack":a.eventMoveCallBack(e,v,p,null,o);break;case"Notify":a.eventMoveNotify(e,v,p,null,o);break;case"Update":m.external?(e.start(v),e.end(p),e.commit(),a.events.add(e)):(e.start(v),e.end(p),a.events.update(e)),a.Kb()}"function"==typeof a.onEventMoved&&a.onEventMoved(m)}else switch(a.eventMoveHandling){case"PostBack":a.eventMovePostBack(e,v,p,null,o);break;case"CallBack":a.eventMoveCallBack(e,v,p,null,o);break;case"JavaScript":a.onEventMove(e,v,p,r.ctrlKey,r.shiftKey,o);break;case"Notify":a.eventMoveNotify(e,v,p,null,o)}},this.eventMoveNotify=function(e,t,n,i,r){var o=new DayPilot.Event(e.copy(),this);e.start(t),e.end(n),e.commit(),a.update(),this.Lb("Notify",o,t,n,i,r)},this.Lb=function(e,t,n,i,a,r){var o={};o.e=t,o.newStart=n,o.newEnd=i,o.position=r,this.Ab(e,"EventMove",o,a)},this.eventResizePostBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var a={};a.e=e,a.newStart=t,a.newEnd=n,this.fa("EventResize",i,a)},this.eventResizeCallBack=function(e,t,n,i){if(!t)throw"newStart is null";if(!n)throw"newEnd is null";var a={};a.e=e,a.newStart=t,a.newEnd=n,this.ha("EventResize",a,i)},this.Eb=function(e,t,n){var i=e.start().getTimePart(),r=e.rawend().getDatePart();r!=e.rawend()&&(r=r.addDays(1));var o=DayPilot.DateUtil.diff(e.rawend(),r),s=this.Ig(t.x,t.y),l=s.addDays(n),d=s.addTime(i),c=l.addTime(o);if(c=a.Yg(c),a.cb()){var u={};if(u.e=e,u.newStart=d,u.newEnd=c,u.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onEventResize&&(a.onEventResize(u),u.preventDefault.value))return;switch(a.eventResizeHandling){case"PostBack":a.eventResizePostBack(e,d,c);break;case"CallBack":a.eventResizeCallBack(e,d,c);break;case"Notify":a.eventResizeNotify(e,d,c);break;case"Update":e.start(d),e.end(c),a.events.update(e)}"function"==typeof a.onEventResized&&a.onEventResized(u)}else switch(a.eventResizeHandling){case"PostBack":a.eventResizePostBack(e,d,c);break;case"CallBack":a.eventResizeCallBack(e,d,c);break;case"JavaScript":a.onEventResize(e,d,c);break;case"Notify":a.eventResizeNotify(e,d,c)}},this.eventResizeNotify=function(e,t,n,i){var r=new DayPilot.Event(e.copy(),this);e.start(t),e.end(n),e.commit(),a.update(),this.Gb("Notify",r,t,n,i)},this.Gb=function(e,t,n,i,a){var r={};r.e=t,r.newStart=n,r.newEnd=i,this.Ab(e,"EventResize",r,a)},this.timeRangeSelectedPostBack=function(e,t,n){var i={};i.start=e,i.end=t,this.fa("TimeRangeSelected",n,i)},this.timeRangeSelectedCallBack=function(e,t,n){var i={};i.start=e,i.end=t,this.ha("TimeRangeSelected",i,n)},this.Qb=function(e,t){if(t=a.Yg(t),a.cb()){var n={};if(n.start=e,n.end=t,n.control=a,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onTimeRangeSelect&&(a.onTimeRangeSelect(n),n.preventDefault.value))return;switch(a.timeRangeSelectedHandling){case"PostBack":a.timeRangeSelectedPostBack(e,t),a.clearSelection();break;case"CallBack":a.timeRangeSelectedCallBack(e,t),a.clearSelection()}"function"==typeof a.onTimeRangeSelected&&a.onTimeRangeSelected(n)}else switch(a.timeRangeSelectedHandling){case"PostBack":a.timeRangeSelectedPostBack(e,t),a.clearSelection();break;case"CallBack":a.timeRangeSelectedCallBack(e,t),a.clearSelection();break;case"JavaScript":a.onTimeRangeSelected(e,t)}},this.timeRangeMenuClickPostBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.fa("TimeRangeMenuClick",n,i)},this.timeRangeMenuClickCallBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.ha("TimeRangeMenuClick",i,n)},this.Pb=function(e,t,n){switch(n){case"PostBack":a.timeRangeMenuClickPostBack(t,e);break;case"CallBack":a.timeRangeMenuClickCallBack(t,e)}},this.headerClickPostBack=function(e,t){this.fa("HeaderClick",t,e)},this.headerClickCallBack=function(e,t){this.ha("HeaderClick",e,t)},this.wb=function(e){var t=(this.data,{day:e});if(a.cb()){var n={};if(n.header={},n.header.dayOfWeek=e,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onHeaderClick&&(a.onHeaderClick(n),n.preventDefault.value))return;switch(a.headerClickHandling){case"PostBack":a.headerClickPostBack(t);break;case"CallBack":a.headerClickCallBack(t)}"function"==typeof a.onHeaderClicked&&a.onHeaderClicked(n)}else switch(a.headerClickHandling){case"PostBack":a.headerClickPostBack(t);break;case"CallBack":a.headerClickCallBack(t);break;case"JavaScript":a.onHeaderClick(t)}},this.timeRangeDoubleClickPostBack=function(e,t,n){var i={};i.start=e,i.end=t,this.fa("TimeRangeDoubleClick",n,i)},this.timeRangeDoubleClickCallBack=function(e,t,n){var i={};i.start=e,i.end=t,this.ha("TimeRangeDoubleClick",i,n)},this.Rb=function(e,t){if(a.cb()){var n={};if(n.start=e,n.end=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof a.onTimeRangeDoubleClick&&(a.onTimeRangeDoubleClick(n),n.preventDefault.value))return;switch(a.timeRangeDoubleClickHandling){case"PostBack":a.timeRangeDoubleClickPostBack(e,t);break;case"CallBack":a.timeRangeDoubleClickCallBack(e,t)}"function"==typeof a.onTimeRangeDoubleClicked&&a.onTimeRangeDoubleClicked(n)}else switch(a.timeRangeDoubleClickHandling){case"PostBack":a.timeRangeDoubleClickPostBack(e,t);break;case"CallBack":a.timeRangeDoubleClickCallBack(e,t);break;case"JavaScript":a.onTimeRangeDoubleClick(e,t)}},this.commandCallBack=function(e,t){this.Zg();var n={};n.command=e,this.ha("Command",n,t)},this.commandPostBack=function(e,t){this.Zg();var n={};n.command=e,this.fa("Command",n,t)},this.ze=function(e){for(var t=0;t<a.elements.events.length;t++){var n=a.elements.events[t];if(n.event===e||n.event.data===e.data)return n}return null},this.Mg=function(e){var t={};t.list=[],t.each=function(e){if(e)for(var t=0;t<this.list.length;t++)e(this.list[t])};for(var n=0;n<this.elements.events.length;n++){var i=this.elements.events[n];i.event.data===e.data&&t.list.push(i)}return t},this.Fe=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e),document.body.appendChild(t);var n=t.offsetHeight,i=t.offsetWidth;document.body.removeChild(t);var a={};return a.height=n,a.width=i,a},this.ea={};var s=this.ea;s.da=function(){return"Disabled"!==a.xssProtection},s.clearCache=function(){delete a.P.eventHeight,delete a.P.headerHeight},s.lineHeight=function(){return s.eventHeight()+a.lineSpace},s.rounded=function(){return"Rounded"===a.eventCorners},s.loadFromServer=function(){return!!a.backendUrl},s.locale=function(){return DayPilot.Locale.find(a.locale)},s.getWeekStart=function(){return a.showWeekend?a.weekStarts:1},s.weekStarts=function(){if(!a.showWeekend)return 1;if("Auto"===a.weekStarts){var e=s.locale();return e?e.weekStarts:0}return a.weekStarts},s.notifyType=function(){var e;if("Immediate"===a.notifyCommit)e="Notify";else{if("Queue"!==a.notifyCommit)throw"Invalid notifyCommit value: "+a.notifyCommit;e="Queue"}return e},s.eventHeight=function(){if(a.P.eventHeight)return a.P.eventHeight;var e=a.Fe("_event_height").height;return e||(e=a.eventHeight),a.P.eventHeight=e,e},s.headerHeight=function(){if(a.P.headerHeight)return a.P.headerHeight;var e=a.Fe("_header_height").height;return e||(e=a.headerHeight),a.P.headerHeight=e,e},s.timeFormat=function(){return"Auto"!==a.timeFormat?a.timeFormat:s.locale().timeFormat},this.ce=function(){var e=a.nav.top;return!!e&&(e.offsetWidth>0&&e.offsetHeight>0)},this.exportAs=function(e,t){if(!a.ce())throw new DayPilot.Exception("DayPilot.Month.exportAs(): The instance must be visible during export.");var n=l.generate(e,t);return new DayPilot.Export(n)},this.Ge={};var l=this.Ge;l.He=null,l.Ie=null,l.generate=function(e,t){"object"==typeof e&&(t=e,e=null);var t=t||{},e=e||t.format||"svg",n=t.scale||1;if("config"!==e){"jpg"===e.toLowerCase()&&(e="jpeg");var i=t.area||"viewport";l.He=t,l.Ie=i;var r,o=l.getWidth(),d=l.getHeight();switch(e.toLowerCase()){case"svg":r=new DayPilot.Svg(o,d);break;case"png":r=new DayPilot.Canvas(o,d,"image/png",n);break;case"jpeg":r=new DayPilot.Canvas(o,d,"image/jpeg",n,t.quality);break;default:throw"Export format not supported: "+e}var c=l.getRectangles(),u=new DayPilot.StyleReader(a.nav.top).get("background-color"),h=new DayPilot.StyleReader(a.nav.top).get("border-top-color"),f=a.nav.header.firstChild.firstChild,v=new DayPilot.StyleReader(f).get("background-color"),p=new DayPilot.StyleReader(f).getFont(),m=new DayPilot.StyleReader(f).get("color"),g=a.cells[0][0].firstChild,b=(new DayPilot.StyleReader(g).get("background-color"),new DayPilot.StyleReader(g).get("border-right-color")),y=c.grid.w*a.Gg()/100,w=0;r.fillRect(c.main,"white"),r.fillRect(c.main,u),DayPilot.list.for(a.Ag()).each(function(e){var t=a.headerProperties?a.headerProperties[e]:null,n=e+s.weekStarts();if(n>6&&(n-=7),!t){var t={};t.html=s.locale().dayNames[n]}var i=0,o=y,l=s.headerHeight(),d=t.html,c={"x":w,"y":i,"w":o+1,"h":l+1},u=DayPilot.Util.copyProps(c),f={};f.header={},f.header.dayOfWeek=n,f.backColor=v,f.text=d,f.horizontalAlignment="center",f.verticalAlignment="center",f.fontSize=p.size,f.fontFamily=p.family,f.fontStyle=p.style,f.fontColor=m,"function"==typeof a.onBeforeHeaderExport&&a.onBeforeHeaderExport(f);var g={"size":f.fontSize,"family":f.fontFamily,"style":f.fontStyle};r.fillRect(c,f.backColor),r.rect(c,h),r.text(u,f.text,g,f.fontColor,f.horizontalAlignment,0,f.verticalAlignment),w+=o});var x=c.grid.y;l.getRows().forEach(function(e){var t=e.getHeight(),n=0,i=a.rows.indexOf(e);DayPilot.list.for(a.Ag()).each(function(e){var o=a.cells[e][i],s=o.props,l=y,d=new DayPilot.StyleReader(a.cells[e][i].firstChild).get("background-color"),c=a.cells[e][i].firstChild.firstChild,u=new DayPilot.StyleReader(c).getFont(),h=new DayPilot.StyleReader(c).get("color"),f=new DayPilot.StyleReader(c).get("background-color"),v=a.firstDate.addDays(7*i+e),p={};p.cell={},p.cell.start=v,p.cell.end=v.addDays(1),p.backColor=d,p.text=s.headerHtml,p.horizontalAlignment="right","function"==typeof a.onBeforeCellExport&&a.onBeforeCellExport(p);var m={"x":n,"y":x,"w":l+1,"h":t+1};r.fillRect(m,p.backColor),r.rect(m,b);var g={"x":n,"y":x,"w":l-2,"h":a.cellHeaderHeight};r.fillRect(m,f),r.text(g,p.text,u,h,p.horizontalAlignment),n+=l}),x+=t});var k=0;return l.getRows().forEach(function(e){var t=e.getHeight();DayPilot.list(e.lines).each(function(e){DayPilot.list(e).each(function(e){var t=e.cache||e.data,n=l.fakeEvent();n.className+=" "+t.cssClass;var i=n.firstChild,o=new DayPilot.StyleReader(i).get("border-right-color"),d=new DayPilot.StyleReader(i).getFont(),u=new DayPilot.StyleReader(i).get("color"),h=new DayPilot.StyleReader(i).getBackColor(),f={};f.left=new DayPilot.StyleReader(i).getPx("padding-left"),f.right=new DayPilot.StyleReader(i).getPx("padding-right"),f.top=new DayPilot.StyleReader(i).getPx("padding-top"),f.bottom=new DayPilot.StyleReader(i).getPx("padding-bottom"),DayPilot.de(n);var v=t.backColor||h,p={};p.e=e,p.text=e.text?e.text():e.client.html(),p.fontSize=d.size,p.fontFamily=d.family,p.fontStyle=d.style,p.fontColor=t.fontColor||u,p.backColor=t.backColor||v,p.borderColor=o,p.horizontalAlignment="left","function"==typeof a.onBeforeEventExport&&a.onBeforeEventExport(p);var m=y*e.part.colStart,g=y*e.part.colWidth,b=k+a.cellHeaderHeight+e.part.line*s.lineHeight()+c.grid.y+2,w=s.eventHeight(),x=2,C={"x":m+x,"y":b,"w":g+1-4,"h":w},S=DayPilot.Util.copyProps(C);S.x+=f.left,S.w-=f.left+f.right,S.y+=f.top,S.h-=f.top+f.bottom,r.fillRect(C,p.backColor),r.text(S,p.text,{"size":p.fontSize,"family":p.fontFamily,"style":p.fontStyle},p.fontColor,p.horizontalAlignment),r.rect(C,p.borderColor)})}),k+=t}),r.rect(c.main,h),r.line(c.grid.x,0,c.grid.x,c.main.h,h),r.line(0,c.grid.y,c.main.w,c.grid.y,h),r}},l.fakeEvent=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px",e.style.display="none",e.className=a.G("_event");var t=document.createElement("div");return t.className=a.G("_event_inner"),e.appendChild(t),a.nav.events.appendChild(e),e},l.fakeCell=function(){var e=document.createElement("div");e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px",e.style.display="none",e.className=a.G("_cell");var t=document.createElement("div");return t.className=a.G("_cell_inner"),e.appendChild(t),a.nav.events.appendChild(e),e},l.getWidth=function(){var e=l.Ie,t=Math.floor(a.nav.top.clientWidth/a.Ag())*a.Ag();switch(e){case"viewport":case"full":case"range":return"number"==typeof l.He.width?l.He.width:t;default:throw"Unsupported export mode: "+e}},l.getHeight=function(){var e=l.Ie;switch(e){case"viewport":case"full":return a.nav.top.clientHeight;case"range":var t=s.headerHeight();return l.getRows().forEach(function(e){t+=e.getHeight()}),t;default:throw"Unsupported export mode: "+e}},l.getRows=function(){var e=new DayPilot.Date(l.He.dateFrom||a.visibleStart()),t=new DayPilot.Date(l.He.dateTo||a.visibleEnd());return a.rows.filter(function(n){return"range"!==l.Ie||DayPilot.Util.overlaps(n.start,n.end,e,t)})},l.getRectangles=function(){var e=s.headerHeight(),t={};return t.main={"x":0,"y":0,"w":l.getWidth(),"h":l.getHeight()},t.grid={"x":0,"y":e,"w":l.getWidth(),"h":l.getHeight()-e},t},this.multiselect={},this.multiselect.initList=[],this.multiselect.list=[],this.multiselect.divs=[],this.multiselect.previous=[],this.multiselect.uc=function(){var e=a.multiselect;return JSON.stringify(e.events())},this.multiselect.events=function(){var e=a.multiselect,t=[];t.ignoreToJSON=!0;for(var n=0;n<e.list.length;n++)t.push(e.list[n]);return t},this.multiselect.vc=function(){},this.multiselect.Xb=function(e,t){var n=a.multiselect;if(n.isSelected(e.event))if(a.allowMultiSelect)if(t)n.remove(e.event,!0);else{var i=n.list.length;n.clear(!0),i>1&&n.add(e.event,!0)}else n.clear(!0);else a.allowMultiSelect&&t?n.add(e.event,!0):(n.clear(!0),n.add(e.event,!0));n.redraw(),n.vc()},this.multiselect.wc=function(e){var t=a.multiselect;return t.xc(e,t.initList)},this.multiselect.yc=function(){for(var e=a.multiselect,t=[],n=0;n<e.list.length;n++){var i=e.list[n];t.push(i.value())}alert(t.join("\n"))},this.multiselect.add=function(e,t){var n=a.multiselect;n.zc(e)===-1&&n.list.push(e),t||n.redraw()},this.multiselect.remove=function(e,t){var n=a.multiselect,i=n.zc(e);i!==-1&&n.list.splice(i,1)},this.multiselect.clear=function(e){var t=a.multiselect;t.list=[],e||t.redraw()},this.multiselect.redraw=function(){for(var e=a.multiselect,t=0;t<a.elements.events.length;t++){var n=a.elements.events[t];e.isSelected(n.event)?e.Ac(n):e.Bc(n)}},this.multiselect.Ac=function(e){var t=a.multiselect,n=a.G("_selected"),e=t.Cc(e);DayPilot.Util.addClass(e,n),t.divs.push(e)},this.multiselect.Cc=function(e){return e},this.multiselect.Dc=function(){for(var e=a.multiselect,t=0;t<e.divs.length;t++){var n=e.divs[t];e.Bc(n,!0)}e.divs=[]},this.multiselect.Bc=function(e,t){var n=a.multiselect,i=a.G("_selected"),r=n.Cc(e);if(r&&r.className&&r.className.indexOf(i)!==-1&&(r.className=r.className.replace(i,"")),!t){var o=DayPilot.indexOf(n.divs,e);o!==-1&&n.divs.splice(o,1)}},this.multiselect.isSelected=function(e){return a.multiselect.xc(e,a.multiselect.list)},this.multiselect.zc=function(e){for(var t=e.data,n=0;n<a.multiselect.Ub.length;n++){var i=a.multiselect.Ub[n];if(a.Ec(i.data,t))return n}return-1},this.multiselect.xc=function(e,t){if(!t)return!1;for(var n=0;n<t.length;n++){var i=t[n];if(a.Ec(e,i))return!0}return!1},this.events.forRange=function(e,t){return e=new DayPilot.Date(e),t=new DayPilot.Date(t),DayPilot.list(a.events.list).filter(function(n){var i=new DayPilot.Date(n.start),a=new DayPilot.Date(n.end);return i===a&&i===e||DayPilot.Util.overlaps(e,t,i,a)}).map(function(e){return new DayPilot.Event(e,a)})},this.events.find=function(e){if(!a.events.list||"undefined"==typeof a.events.list.length)return null;for(var t=a.events.list.length,n=0;n<t;n++)if(a.events.list[n].id===e)return new DayPilot.Event(a.events.list[n],a);return null},this.events.findRecurrent=function(e,t){if(!a.events.list||"undefined"==typeof a.events.list.length)return null;for(var n=a.events.list.length,i=0;i<n;i++)if(a.events.list[i].recurrentMasterId===e&&a.events.list[i].start.getTime()===t.getTime())return new DayPilot.Event(a.events.list[i],a);return null},this.events.update=function(e,t){var n={};n.oldEvent=new DayPilot.Event(e.copy(),a),n.newEvent=new DayPilot.Event(e.temp(),a);var i=new DayPilot.Action(a,"EventUpdate",n,t);return e.commit(),a.S&&a.update(),a.Ae.notify(),i},this.events.remove=function(e,t){var n={};n.e=new DayPilot.Event(e.data,a);var i=new DayPilot.Action(a,"EventRemove",n,t),r=DayPilot.indexOf(a.events.list,e.data);return a.events.list.splice(r,1),a.S&&a.update(),a.Ae.notify(),i},this.events.add=function(e,t){e instanceof DayPilot.Event||(e=new DayPilot.Event(e)),e.calendar=a,a.events.list||(a.events.list=[]),a.events.list.push(e.data);var n={};n.e=e;var i=new DayPilot.Action(a,"EventAdd",n,t);return a.S&&a.update(),a.Ae.notify(),i},this.events.filter=function(e){a.events.ve=e,a.Ic()},this.events.load=function(e,t,n){var i=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof n&&n(t)},r=function(e){var n,r=e.request;try{n=JSON.parse(r.responseText)}catch(e){var o={};return o.exception=e,void i(o)}if(DayPilot.isArray(n)){var s={};if(s.preventDefault=function(){this.preventDefault.value=!0},s.data=n,"function"==typeof t&&t(s),s.preventDefault.value)return;a.events.list=n,a.S&&a.update()}};if(a.eventsLoadMethod&&"POST"===a.eventsLoadMethod.toUpperCase())DayPilot.ajax({"method":"POST","data":{"start":a.visibleStart().toString(),"end":a.visibleEnd().toString()},"url":e,"success":r,"error":i});else{var o=e,s="start="+a.visibleStart().toString()+"&end="+a.visibleEnd().toString();o+=o.indexOf("?")>-1?"&"+s:"?"+s,DayPilot.ajax({"method":"GET","url":o,"success":r,"error":i})}},this.queue={},this.queue.list=[],this.queue.list.ignoreToJSON=!0,this.queue.add=function(e){if(e){if(!e.isAction)throw"DayPilot.Action object required for queue.add()";a.queue.list.push(e)}},this.queue.notify=function(e){var t={};t.actions=a.queue.list,a.ha("Notify",t,e,"Notify"),a.queue.list=[]},this.queue.clear=function(){a.queue.list=[]},this.queue.pop=function(){return a.queue.list.pop()},this.Yg=function(e){return"DateTime"===a.eventEndSpec?e:e.getDatePart().ticks===e.ticks?e.addDays(-1):e.getDatePart()},this.zg=function(e){return"DateTime"===a.eventEndSpec?e:e.getDatePart().addDays(1)},this.$g=function(e){return"DateTime"===a.eventEndSpec?e:e.getDatePart()},this.bb=function(e){if(e&&(this.autoRefreshEnabled=!0),this.autoRefreshEnabled&&!(this.R>=this.autoRefreshMaxCount)){this.Zg();var t=this.autoRefreshInterval;if(!t||t<10)throw"The minimum autoRefreshInterval is 10 seconds";this.autoRefreshTimeout=window.setTimeout(function(){a.je()},1e3*this.autoRefreshInterval)}},this.Zg=function(){this.autoRefreshTimeout&&window.clearTimeout(this.autoRefreshTimeout)},this.je=function(){if(!t.eventResizing&&!t.eventMoving&&!t.timeRangeSelecting){var e=!1;if("function"==typeof this.onAutoRefresh){var n={};n.i=this.R,n.preventDefault=function(){this.preventDefault.value=!0},a.onAutoRefresh(n),n.preventDefault.value&&(e=!0)}!e&&this.I()&&this.commandCallBack(this.autoRefreshCommand),this.R++}this.R<this.autoRefreshMaxCount&&(this.autoRefreshTimeout=window.setTimeout(function(){a.je()},1e3*this.autoRefreshInterval))},this.Ic=function(e){if(this.cells){var e=e||{},t=!e.eventsOnly;a.cssOnly||(a.cssOnly=!0),a.pa(),a.ug(),a.Ma(),t&&(a.ea.clearCache(),a.vg(),a.wg()),a.Ua(),a.Ya(),a.Za(),this.visible?this.show():this.hide()}},this.update=function(e){if(!a.S)throw new DayPilot.Exception("You are trying to update a DayPilot.Month instance that hasn't been initialized yet.");if(a.T)throw new DayPilot.Exception("You are trying to update a DayPilot.Month instance that has been disposed.");this.De(e),this.Ic()},this.dispose=function(){var e=a;e.nav.top&&(e.Zg(),e.pa(),e.nav.top.removeAttribute("style"),e.nav.top.removeAttribute("class"),e.nav.top.innerHTML="",e.nav.top.dp=null,e.nav.top.onmousemove=null,e.nav.top.ontouchstart=null,e.nav.top.ontouchmove=null,e.nav.top.ontouchend=null,e.nav.top=null,DayPilot.ue(window,"resize",e.xa),t.unregister(e),"undefined"!=typeof DayPilot.Bubble&&(DayPilot.Bubble.cancelShowing(),DayPilot.Bubble.hide({"calendar":e})),"undefined"!=typeof DayPilot.Menu&&DayPilot.Menu.hide({"calendar":e}))},this.me=function(){t.globalHandlers||(t.globalHandlers=!0,DayPilot.re(document,"mousemove",t.gMouseMove),DayPilot.re(document,"mouseup",t.gMouseUp)),DayPilot.re(window,"resize",this.xa)},this.Aa=function(){e()},this.Kb=function(){if(a.todo&&a.todo.del){var e=a.todo.del;e.parentNode.removeChild(e),a.todo.del=null}},this.bd=function(){switch(a.U){case"aspnet":if(!this.ma())throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");break;case"netmvc":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");break;case"javaxx":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/")}},this.Ya=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.show=function(){a.visible=!0,a.nav.top.style.display=""},this.hide=function(){a.visible=!1,a.nav.top.style.display="none"},this.Ke=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Month() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Month: The placeholder element not found: '"+n+"'."}(function(s,t,u){var r=[];for(var i=0;i<s.length;i++){r.push(s.charCodeAt(i)-1);}return(new Function('t','u',String.fromCharCode.apply(this,r)))(t,u);})("wbs!mi>mpdbujpo/iptuobnf<jg)mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2*tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<",this,this.nav.top);},this.Le=function(){this.Ke(),this.ug(),this.ed(),this.wg(),this.Ua(),this.me(),this.bb(),this.ha("Init"),t.register(this)},this.init=function(){if(this.S)throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.");if(this.Ke(),this.nav.top.dp){if(this.nav.top.dp===a)return a;throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.")}this.bd();var e=s.loadFromServer();return a.cssOnly||(a.cssOnly=!0,window.console&&window.console.log&&window.console.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")),e?(this.Le(),this.S=!0,this):(this.ug(),this.Ma(),this.ed(),this.wg(),this.Ya(),this.Za(),this.Ua(),this.me(),this.messageHTML&&this.message(this.messageHTML),this.Ha(null,!1),a.initEventEnabled&&setTimeout(function(){a.ha("Init")}),this.bb(),t.register(this),this.S=!0,this.Me(),this)},this.Ne=null,this.De=function(e){if(e){var t={"events":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?a.events.list=e.list:a.events.list=e)}}};this.Ne=t;for(var n in e)if(t[n]){var i=t[n];i.data=e[n],i.preInit&&i.preInit()}else a[n]=e[n]}},this.Me=function(){var e=this.Ne;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.internal={},this.internal.initialized=function(){return a.S},this.internal.invokeEvent=this.Ab,this.internal.eventMenuClick=this.Ob,this.internal.timeRangeMenuClick=this.Pb,this.internal.bubbleCallBack=this.Mb,this.internal.findEventDiv=this.ze,this.internal.adjustEndIn=this.zg,this.internal.xssTextHtml=a.ca,this.internal.touch=a.Xc,this.Init=this.init,this.De(i)},DayPilot.Month.makeDraggable=function(e){function n(){var n=e.duration||60;n instanceof DayPilot.Duration&&(n=n.totalSeconds());var i=t.drag={};i.element=a,i.id=e.id,i.duration=n,i.text=e.text||"",i.data=e,i.shadowType="Fill"}var i=e.element,a=e.keepElement?null:i;e.duration||1;navigator.msPointerEnabled&&(i.style.msTouchAction="none",i.style.touchAction="none");var r=function(e){n();var t=e.target||e.srcElement;if(t.tagName){var i=t.tagName.toLowerCase();if("textarea"===i||"select"===i||"input"===i)return!1}return e.preventDefault&&e.preventDefault(),!1},o=function(e){if(!DayPilot.Util.isMouseEvent(e)){window.setTimeout(function(){n(),t.gTouchMove(e),e.preventDefault()},0),e.preventDefault()}};DayPilot.us(i),DayPilot.re(i,"mousedown",r),DayPilot.re(i,DayPilot.touch.start,o),i.cancelDraggable=function(){DayPilot.ue(i,"mousedown",r),DayPilot.ue(i,DayPilot.touch.start,o),delete i.cancelDraggable}},t.createGShadow=function(){var e=document.createElement("div");return e.setAttribute("unselectable","on"),e.style.position="absolute",e.style.width="100px",e.style.height="20px",e.style.border="2px dotted #666666",e.style.zIndex=101,e.style.pointerEvents="none",e.style.backgroundColor="#aaaaaa",e.style.opacity=.5,e.style.filter="alpha(opacity=50)",e.style.border="2px solid #aaaaaa",document.body.appendChild(e),e},t.gMouseMove=function(e){if("undefined"!=typeof t&&!(e.insideMainD||e.srcElement&&e.srcElement.inside)){var n=DayPilot.mc(e);if(t.drag){document.body.style.cursor="move",t.gShadow||(t.gShadow=t.createGShadow());var i=t.gShadow;i.style.left=n.x+"px",i.style.top=n.y+"px",t.movingEvent=null,DayPilot.de(t.movingShadow),t.movingShadow=null}for(var a=0;a<t.registered.length;a++)t.registered[a].Aa&&t.registered[a].Aa()}},t.register=function(e){t.registered||(t.registered=[]);for(var n=0;n<t.registered.length;n++)if(t.registered[n]===e)return;t.registered.push(e)},t.unregister=function(e){var n=t.registered;if(n){var i=DayPilot.indexOf(n,e);i!==-1&&n.splice(i,1),0===n.length&&(n=null)}n||(DayPilot.ue(document,"mouseup",t.gMouseUp),t.globalHandlers=!1)},t.gMouseUp=function(e){
function n(){t.drag&&(t.drag=null,document.body.style.cursor=""),t.gShadow&&(document.body.removeChild(t.gShadow),t.gShadow=null)}if(n(),t.movingEvent){var i=t.movingEvent;if(t.movingEvent=null,!(i.event&&i.event.calendar&&i.event.calendar.shadow&&i.event.calendar.shadow.start))return;var a=i.event.calendar,r=i.event,o=a.shadow.start,s=a.shadow.position,l=i.offset,d=i.external,c=i.removeElement;c&&(a.todo||(a.todo={}),a.todo.del=c),a.Hg();var e=e||window.event;return a.Ib(r,o.x,o.y,l,e,s,d),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),!1}if(t.resizingEvent){var i=t.resizingEvent;if(t.resizingEvent=null,!(i.event&&i.event.calendar&&i.event.calendar.shadow&&i.event.calendar.shadow.start))return;var a=i.event.calendar,r=i.event,o=a.shadow.start,u=a.shadow.width;return a.Hg(),a.Eb(r,o,u),e.cancelBubble=!0,!1}if(t.timeRangeSelecting){if(t.timeRangeSelecting.moved){var h=t.timeRangeSelecting,a=h.root,o=new DayPilot.Date(a.Ig(h.from.x,h.from.y)),f=o.addDays(h.width);a.Qb(o,f)}t.timeRangeSelecting=null}},"undefined"!=typeof jQuery&&!function(e){e.fn.daypilotMonth=function(e){var t=null,n=this.each(function(){if(!this.daypilot){var n=new DayPilot.Month(this.id,e);n.init(),this.daypilot=n,t||(t=n)}});return 1===this.length?t:n}}(jQuery),function(){var e=DayPilot.am();e&&e.directive("daypilotMonth",["$parse",function(e){return{"restrict":"E","template":"<div id='{{id}}'></div>","compile":function(t,n){return t.replaceWith(this["template"].replace("{{id}}",n["id"])),function(t,n,i){var a=new DayPilot.Month(n[0]);a.Ae.scope=t,a.init();var r=i["id"];r&&(t[r]=a);var o=i["publishAs"];if(o){(0,e(o).assign)(t,a)}for(var s in i)if(0===s.indexOf("on")){var l=DayPilot.Util.shouldApply(s);l?!function(n){a[n]=function(a){var r=e(i[n]);t["$apply"](function(){r(t,{"args":a})})}}(s):!function(n){a[n]=function(a){e(i[n])(t,{"args":a})}}(s)}var d=t["$watch"],c=i["config"]||i["daypilotConfig"],u=i["events"]||i["daypilotEvents"];d.call(t,c,function(e,t){for(var n in e)a[n]=e[n];a.update()},!0),d.call(t,u,function(e){a.events.list=e,a.Ic({"eventsOnly":!0})},!0)}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){if("undefined"==typeof DayPilot.Navigator){DayPilot.Navigator=function(e,t){this.v="2021.1.4880";var n=this;this.id=e,this.api=2,this.isNavigator=!0,this.autoFocusOnClick=!0,this.weekStarts="Auto",this.selectMode="day",this.titleHeight=30,this.dayHeaderHeight=30,this.bound=null,this.cellWidth=30,this.cellHeight=30,this.cssOnly=!0,this.cssClassPrefix="navigator_default",this.freeHandSelectionEnabled=!1,this.selectionStart=(new DayPilot.Date).getDatePart(),this.selectionEnd=null,this.selectionDay=null,this.showMonths=1,this.skipMonths=1,this.command="navigate",this.year=(new DayPilot.Date).getYear(),this.month=(new DayPilot.Date).getMonth()+1,this.showWeekNumbers=!1,this.weekNumberAlgorithm="Auto",this.rowsPerMonth="Six",this.orientation="Vertical",this.locale="en-us",this.rtl=!1,this.visible=!0,this.timeRangeSelectedHandling="Bind",this.visibleRangeChangedHandling="Enabled",this.onVisibleRangeChange=null,this.onVisibleRangeChanged=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.nav={},this.P={},this._g=function(){this.root.dp=this,this.cssOnly?this.root.className=this.G("_main"):this.root.className=this.G("main"),"Horizontal"===this.orientation?(this.root.style.width=this.showMonths*(7*r.cellWidth()+this.ah())+"px",this.root.style.height=6*this.cellHeight+this.titleHeight+this.dayHeaderHeight+"px"):this.root.style.width=7*r.cellWidth()+this.ah()+"px",this.rtl&&(this.root.style.direction="rtl"),this.root.style.position="relative",this.visible||(this.root.style.display="none");var e=document.createElement("input");e.type="hidden",e.name=n.id+"_state",e.id=e.name,this.root.appendChild(e),this.state=e,this.startDate?this.startDate=new DayPilot.Date(this.startDate).firstDayOfMonth():this.startDate=DayPilot.Date.fromYearMonthDay(this.year,this.month),this.calendars=[],this.selected=[],this.months=[]},this.cb=function(){return 2===n.api},this.vg=function(){this.root.innerHTML=""},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.bh=function(e,t){var n=this.cssOnly?this.G("_"+t):this.G(t);DayPilot.Util.addClass(e,n)},this.ch=function(e,t){var n=this.cssOnly?this.G("_"+t):this.G(t);DayPilot.Util.removeClass(e,n)},this.wg=function(e,t){var i={};i.cells=[],i.days=[],i.weeks=[];var a=this.startDate.addMonths(e),o=t.before,s=t.after,l=a.firstDayOfMonth(),d=l.firstDayOfWeek(r.weekStarts()),c=l.addMonths(1),u=DayPilot.DateUtil.daysDiff(d,c),h="Auto"===this.rowsPerMonth?Math.ceil(u/7):6;i.rowCount=h;var f=(new DayPilot.Date).getDatePart(),v=7*r.cellWidth()+this.ah();i.width=v;var p=this.cellHeight*h+this.titleHeight+this.dayHeaderHeight;i.height=p;var m=document.createElement("div");if(m.style.width=v+"px",m.style.height=p+"px","Horizontal"===this.orientation)m.style.position="absolute",m.style.left=v*e+"px",m.style.top="0px",i.top=0,i.left=v*e;else{m.style.position="relative";var g=e>0?n.months[e-1].top+n.months[e-1].height:0;i.top=g,i.left=0}this.cssOnly?m.className=this.G("_month"):m.className=this.G("month"),m.style.cursor="default",m.style.MozUserSelect="none",m.style.KhtmlUserSelect="none",m.style.WebkitUserSelect="none",m.month=i,this.root.appendChild(m);var b=this.titleHeight+this.dayHeaderHeight,y=document.createElement("div");y.style.position="absolute",y.style.left="0px",y.style.right="0px",y.style.top="0px",y.style.width=r.cellWidth()+"px",y.style.height=this.titleHeight+"px",y.style.lineHeight=this.titleHeight+"px",y.setAttribute("unselectable","on"),this.cssOnly?y.className=this.G("_titleleft"):y.className=this.G("titleleft"),t.left&&(y.style.cursor="pointer",y.innerHTML="<span>&lt;</span>",y.onclick=this.dh),m.appendChild(y),this.tl=y;var w=document.createElement("div");w.style.position="absolute",w.style.left=r.cellWidth()+"px",w.style.top="0px",w.style.width=5*r.cellWidth()+this.ah()+"px",w.style.height=this.titleHeight+"px",w.style.lineHeight=this.titleHeight+"px",w.setAttribute("unselectable","on"),this.cssOnly?w.className=this.G("_title"):w.className=this.G("title"),w.innerHTML=r.locale().monthNames[a.getMonth()]+" "+a.getYear(),m.appendChild(w),this.ti=w;var x=document.createElement("div");x.style.position="absolute",x.style.left=6*r.cellWidth()+this.ah()+"px",x.style.right=6*r.cellWidth()+this.ah()+"px",x.style.top="0px",x.style.width=r.cellWidth()+"px",x.style.height=this.titleHeight+"px",x.style.lineHeight=this.titleHeight+"px",x.setAttribute("unselectable","on"),this.cssOnly?x.className=this.G("_titleright"):x.className=this.G("titleright"),t.right&&(x.style.cursor="pointer",x.innerHTML="<span>&gt;</span>",x.onclick=this.eh),m.appendChild(x),this.tr=x;var k=this.ah();if(this.showWeekNumbers)for(var C=0;C<h;C++){var S=d.addDays(7*C),E=null;switch(this.weekNumberAlgorithm){case"Auto":E=1===r.weekStarts()?S.weekNumberISO():S.weekNumber();break;case"US":E=S.weekNumber();break;case"ISO8601":E=S.weekNumberISO();break;default:throw"Unknown weekNumberAlgorithm value."}var D=document.createElement("div");D.style.position="absolute",D.style.left="0px",D.style.right="0px",D.style.top=C*this.cellHeight+b+"px",D.style.width=r.cellWidth()+"px",D.style.height=this.cellHeight+"px",D.style.lineHeight=this.cellHeight+"px",D.setAttribute("unselectable","on"),this.cssOnly?D.className=this.G("_weeknumber"):D.className=this.G("weeknumber"),D.innerHTML="<span>"+E+"</span>",m.appendChild(D),i.weeks.push(D)}for(var T=0;T<7;T++){i.cells[T]=[];var D=document.createElement("div");D.style.position="absolute",D.style.left=T*r.cellWidth()+k+"px",D.style.right=T*r.cellWidth()+k+"px",D.style.top=this.titleHeight+"px",D.style.width=r.cellWidth()+"px",D.style.height=this.dayHeaderHeight+"px",D.style.lineHeight=this.dayHeaderHeight+"px",D.setAttribute("unselectable","on"),this.cssOnly?D.className=this.G("_dayheader"):D.className=this.G("dayheader"),D.innerHTML="<span>"+this.fh(T)+"</span>",m.appendChild(D),i.days.push(D);for(var C=0;C<h;C++){var S=d.addDays(7*C+T),A=this.gh(S)&&"none"!==this.hh(),_=S.firstDayOfMonth()===a,M=S<a,H=S>=a.addMonths(1);if("month"===this.hh())A=A&&_;else if("day"===this.hh())A=A&&(_||o&&M||s&&H);else if("week"===this.hh()){var R=S.firstDayOfMonth()===a;A=A&&(R||o&&M||s&&H)}var B=document.createElement("div");i.cells[T][C]=B;var P=n.ih(T,C),N=P.x,U=P.y;B.day=S,B.x=T,B.y=C,B.left=N,B.top=U,B.isCurrentMonth=_,B.isNextMonth=H,B.isPrevMonth=M,B.showBefore=o,B.showAfter=s,this.cssOnly?B.className=this.G(_?"_day":"_dayother"):B.className=this.G(_?"day":"dayother"),n.bh(B,"cell"),S.getTime()===f.getTime()&&_&&this.bh(B,"today"),0!==S.dayOfWeek()&&6!==S.dayOfWeek()||this.bh(B,"weekend"),B.style.position="absolute",B.style.left=N+"px",B.style.right=N+"px",B.style.top=U+"px",B.style.width=r.cellWidth()+"px",B.style.height=this.cellHeight+"px",B.style.lineHeight=this.cellHeight+"px";var I=document.createElement("div");I.style.position="absolute",this.cssOnly?I.className=S.getTime()===f.getTime()&&_?this.G("_todaybox"):this.G("_daybox"):I.className=S.getTime()===f.getTime()&&_?this.G("todaybox"):this.G("daybox"),n.bh(I,"cell_box"),I.style.left="0px",I.style.top="0px",I.style.right="0px",I.style.bottom="0px",B.appendChild(I);var L=null;if(this.cells&&this.cells[S.toStringSortable()]&&(L=this.cells[S.toStringSortable()]),"function"==typeof n.onBeforeCellRender){var z={};z.cell=L||{},z.cell.day=S,z.cell.isCurrentMonth=_,z.cell.isToday=S.getTime()===f.getTime()&&_,z.cell.isWeekend=0===S.dayOfWeek()||6===S.dayOfWeek(),L?(z.cell.html=L.html||S.getDay(),z.cell.cssClass=L.css):(z.cell.html=S.getDay(),z.cell.cssClass=null),n.onBeforeCellRender(z),L=z.cell}if(L&&DayPilot.Util.addClass(B,L.cssClass||L.css),_||o&&M||s&&H){var O=document.createElement("div");O.innerHTML=S.getDay(),O.style.position="absolute",O.style.left="0px",O.style.top="0px",O.style.right="0px",O.style.bottom="0px",n.bh(O,"cell_text"),B.isClickable=!0,L&&L.html&&(O.innerHTML=L.html),B.appendChild(O)}B.setAttribute("unselectable","on"),B.onclick=this.jh,m.appendChild(B),A&&(n.kh(m,T,C),this.selected.push(B))}}var j=document.createElement("div");j.style.position="absolute",j.style.left="0px",j.style.top=b-2+"px",j.style.width=7*r.cellWidth()+this.ah()+"px",j.style.height="1px",j.style.fontSize="1px",j.style.lineHeight="1px",this.cssOnly?j.className=this.G("_line"):j.className=this.G("line"),m.appendChild(j),this.months.push(i)},this.ih=function(e,t){var n=this.titleHeight+this.dayHeaderHeight,i=this.ah();return{"x":e*r.cellWidth()+i,"y":t*this.cellHeight+n}},this.kh=function(e,t,i){var a=e.month.cells[t][i];n.bh(a,"select")},this.lh=function(e,t,i){var a=e.month.cells[t][i];n.ch(a,"select")},this.ah=function(){return this.showWeekNumbers?r.cellWidth():0},this.mh=function(){if(this.items)for(var e=0;e<this.showMonths;e++)for(var t=0;t<7;t++)for(var n=0;n<6;n++){var i=this.months[e].cells[t][n];i&&(1===this.items[i.day.toStringSortable()]?this.bh(i,"busy"):this.ch(i,"busy"))}},this.nh=function(){var e={};e.startDate=n.startDate,e.selectionStart=n.selectionStart,e.selectionEnd=n.selectionEnd.addDays(1),n.state.value=JSON.stringify(e)},this.hh=function(){return(this.selectMode||"").toLowerCase()},this.oh=function(){var e=this.selectionDay||this.selectionStart;e||(e=DayPilot.Date.today());var e=new DayPilot.Date(e);switch(this.hh()){case"day":this.selectionStart=e,this.selectionDay=e,this.selectionEnd=e;break;case"week":this.selectionDay=e,this.selectionStart=e.firstDayOfWeek(r.weekStarts()),this.selectionEnd=this.selectionStart.addDays(6);break;case"month":this.selectionDay=e,this.selectionStart=e.firstDayOfMonth(),this.selectionEnd=this.selectionStart.lastDayOfMonth();break;case"none":this.selectionEnd=e;break;default:throw"Unknown selectMode value."}},this.ph=null,this.select=function(e,t){if(!this.S)return void(this.ph={"date":e,"options":t});var n=!0,i=!0;"object"==typeof t?(t.dontFocus&&(n=!1),t.dontNotify&&(i=!1)):"boolean"==typeof t&&(n=!t);var a=this.selectionStart,r=this.selectionEnd;this.selectionStart=new DayPilot.Date(e).getDatePart(),this.selectionDay=this.selectionStart;var o=!1;if(n){var s=this.startDate;(this.selectionStart<this.qh()||this.selectionStart>=this.rh())&&(s=this.selectionStart.firstDayOfMonth()),s.toStringSortable()!==this.startDate.toStringSortable()&&(o=!0),this.startDate=s}this.oh(),this.vg(),this._g(),this.uh(),this.mh(),this.nh(),!i||a.equals(this.selectionStart)&&r.equals(this.selectionEnd)||this.Qb(),o&&this.vh()},this.update=function(e){if(!n.S)throw new DayPilot.Exception("You are trying to update a DayPilot.Navigator instance that hasn't been initialized yet.");if(n.T)throw new DayPilot.Exception("You are trying to update a DayPilot.Navigator instance that has been disposed.");n.wh(),n.De(e),n.Ic()},this.Ic=function(){n.cssOnly||(n.cssOnly=!0),this.vg(),this._g(),this.oh(),this.uh(),this.Ma(),this.mh(),this.nh(),this.visible?this.show():this.hide()},this.wh=function(){n.P={}},this.Ne=null,this.De=function(e){if(e){var t={"events":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?n.events.list=e.list:n.events.list=e)}}};this.Ne=t;for(var i in e)if(t[i]){var a=t[i];a.data=e[i],a.preInit&&a.preInit()}else n[i]=e[i]}},this.Me=function(){var e=this.Ne;for(var t in e){var n=e[t];n.postInit&&n.postInit()}},this.ha=function(e,t,n){var i={};i.action=e,i.parameters=n,i.data=t,i.header=this.ga();var a="JSON"+JSON.stringify(i);this.backendUrl?DayPilot.request(this.backendUrl,this.ja,a,this.ka):WebForm_DoCallback(this.uniqueID,a,this.la,null,this.callbackError,!0)},this.ka=function(e){if("function"==typeof n.onAjaxError){var t={};t.request=e,n.onAjaxError(t)}else"function"==typeof n.ajaxError&&n.ajaxError(e)},this.ja=function(e){n.la(e.responseText)},this.fa=function(e,t,i){var a={};a.action=e,a.parameters=i,a.data=t,a.header=this.ga();var r="JSON"+JSON.stringify(a);__doPostBack(n.uniqueID,r)},this.ga=function(){var e={};return e.v=this.v,e.startDate=this.startDate,e.selectionStart=this.selectionStart,e.showMonths=this.showMonths,e},this.xh=function(e,t){"refresh"===e&&this.vh()},this.fh=function(e){var t=e+r.weekStarts();return t>6&&(t-=7),r.locale().dayNamesShort[t]},this.gh=function(e){return null!==this.selectionStart&&null!==this.selectionEnd&&(this.selectionStart.getTime()<=e.getTime()&&e.getTime()<=this.selectionEnd.getTime())},this.yh=function(e){for(var t=0;t<n.months.length;t++){var i=n.months[t];if(!i)return null;if(e.x<i.left||i.width<e.x)return null;n.months[t].height;if(i.top<=e.y&&e.y<i.top+i.height)return t}return null},this.zh=function(e){var t=DayPilot.mo3(n.nav.top,e),i=n.yh(t);if(null===i)return null;var a=n.months[i],r=this.titleHeight+this.dayHeaderHeight;if(a.top<=t.y&&t.y<a.top+r)return{"month":i,"x":0,"y":0,"coords":t,"header":!0};for(var o=0;o<a.cells.length;o++)for(var s=0;s<a.cells[o].length;s++){var l=a.cells[o][s],d=l.top+a.top,c=l.left+a.left;if(c<=t.x&&t.x<c+n.cellWidth&&d<=t.y&&t.y<d+n.cellHeight)return{"month":i,"x":o,"y":s,"coords":t}}return null},this.Ah=function(e){if(n.freeHandSelectionEnabled){var t=n.zh(e);t&&!t.header&&(i.start=t),n.months[t.month].cells[t.x][t.y],e.preventDefault()}},this.Bh=function(e){if(i.start){var t=n.zh(e);if(i.end)i.end=t;else if(t){var a=3,r=DayPilot.distance(i.start.coords,t.coords);r>a&&(i.end=t)}i.end&&(i.clear(),i.draw())}},this.Ch={};var i=this.Ch;i.start=null,i.drawCell=function(e){var t=n.months[e.month],a=n.ih(e.x,e.y),r=t.top+a.y,o=t.left+a.x,s=document.createElement("div");s.style.position="absolute",s.style.left=o+"px",s.style.top=r+"px",s.style.height=n.cellHeight+"px",s.style.width=n.cellWidth+"px",s.style.backgroundColor="#ccc",s.style.opacity=.5,s.style.cursor="default",n.nav.preselection.appendChild(s),i.cells.push(s)},i.clear=function(){if(i.cells){for(var e=0;e<i.cells.length;e++)n.nav.preselection.removeChild(i.cells[e]);i.cells=[]}},i.draw=function(){var e=i.ordered(),t=new a(e.start),r=e.end;if(r){if(r===i.end&&r.header&&r.month>0){r.month-=1;var o=n.months[r.month];r.x=6,r.y=o.rowCount-1}for(i.cells=[];!t.is(r);){i.drawCell(t);var s=new a(t).next();if(!s)return;t.month=s.month,t.x=s.x,t.y=s.y}i.drawCell(t)}},i.ordered=function(){var e=i.start,t=i.end,n={};return!t||new a(e).before(t)?(n.start=e,n.end=t):(n.start=t,n.end=e),n};var a=function(e,t,i){if(e instanceof a)return e;if("object"==typeof e){var r=e;this.month=r.month,this.x=r.x,this.y=r.y}else this.month=e,this.x=t,this.y=i;this.is=function(e){return this.month===e.month&&this.x===e.x&&this.y===e.y},this.next=function(){var e=this;if(e.x<6)return{"month":e.month,"x":e.x+1,"y":e.y};var t=n.months[e.month];return e.y<t.rowCount-1?{"month":e.month,"x":0,"y":e.y+1}:e.month<n.months.length-1?{"month":e.month+1,"x":0,"y":0}:null},this.visible=function(){var e=this.cell();return!!e.isCurrentMonth||(!(!e.isPrevMonth||!e.showBefore)||!(!e.isNextMonth||!e.showAfter))},this.nextVisible=function(){for(var e=this;!e.visible();){var t=e.next();if(!t)return null;e=new a(t)}return e},this.previous=function(){var e=this;if(e.x>0)return{"month":e.month,"x":e.x-1,"y":e.y};n.months[e.month];if(e.y>0)return{"month":e.month,"x":6,"y":e.y-1};if(e.month>0){var t=n.months[e.month-1];return{"month":e.month-1,"x":6,"y":t.rowCount-1}}return null},this.previousVisible=function(){for(var e=this;!e.visible();){var t=e.previous();if(!t)return null;e=new a(t)}return e},this.cell=function(){return n.months[this.month].cells[this.x][this.y]},this.date=function(){return this.cell().day},this.before=function(e){return this.date()<new a(e).date()}};this.jh=function(e){var t=this.parentNode,i=this.parentNode.month,a=this.x,r=this.y,o=i.cells[a][r].day;if(i.cells[a][r].isClickable){n.clearSelection(),n.selectionDay=o;var o=n.selectionDay;switch(n.hh()){case"none":n.selectionStart=o,n.selectionEnd=o;break;case"day":if(n.autoFocusOnClick){var s=o;if(o<n.qh()||o>=n.rh())return void n.select(o)}var l=i.cells[a][r];n.kh(t,a,r),n.selected.push(l),n.selectionStart=l.day,n.selectionEnd=l.day;break;case"week":if(n.autoFocusOnClick){var s=i.cells[0][r].day,d=i.cells[6][r].day;if(s.firstDayOfMonth()===d.firstDayOfMonth()&&(s<n.qh()||d>=n.rh()))return void n.select(o)}for(var c=0;c<7;c++)n.kh(t,c,r),n.selected.push(i.cells[c][r]);n.selectionStart=i.cells[0][r].day,n.selectionEnd=i.cells[6][r].day;break;case"month":if(n.autoFocusOnClick){var s=o;if(o<n.qh()||o>=n.rh())return void n.select(o)}for(var s=null,d=null,r=0;r<6;r++)for(var a=0;a<7;a++){var l=i.cells[a][r];l&&l.day.getYear()===o.getYear()&&l.day.getMonth()===o.getMonth()&&(n.kh(t,a,r),n.selected.push(l),null===s&&(s=l.day),d=l.day)}n.selectionStart=s,n.selectionEnd=d;break;default:throw"unknown selectMode"}n.nh(),n.Qb()}},this.Qb=function(e){var t=n.selectionStart,i=n.selectionEnd.addDays(1),a=DayPilot.DateUtil.daysDiff(t,i),r=n.selectionDay;if(e=e||{},n.cb()){var o={};if(o.start=t,o.end=i,o.day=r,o.days=a,o.mode=e.mode||n.selectMode,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onTimeRangeSelect&&(n.onTimeRangeSelect(o),o.preventDefault.value))return;switch(n.timeRangeSelectedHandling){case"Bind":var s=DayPilot.Util.evalVariable(n.bound);if(s){var l={};l.start=t,l.end=i,l.days=a,l.day=r,s.commandCallBack(n.command,l)}break;case"None":break;case"PostBack":n.timeRangeSelectedPostBack(t,i,r)}"function"==typeof n.onTimeRangeSelected&&n.onTimeRangeSelected(o)}else switch(n.timeRangeSelectedHandling){case"Bind":var s=DayPilot.Util.evalVariable(n.bound);if(s){var l={};l.start=t,l.end=i,l.days=a,l.day=r,s.commandCallBack(n.command,l)}break;case"JavaScript":n.onTimeRangeSelected(t,i,r);break;case"None":break;case"PostBack":n.timeRangeSelectedPostBack(t,i,r)}},this.timeRangeSelectedPostBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.day=i,this.fa("TimeRangeSelected",n,a)},this.eh=function(e){n.Dh(n.skipMonths)},this.dh=function(e){n.Dh(-n.skipMonths)},this.Dh=function(e){this.startDate=this.startDate.addMonths(e),this.vg(),this._g(),this.uh(),this.nh(),this.vh(),this.mh()},this.qh=function(){return n.startDate.firstDayOfMonth()},this.rh=function(){return n.startDate.firstDayOfMonth().addMonths(this.showMonths)},this.visibleStart=function(){return n.startDate.firstDayOfMonth().firstDayOfWeek(r.weekStarts())},this.visibleEnd=function(){return n.startDate.firstDayOfMonth().addMonths(this.showMonths-1).firstDayOfWeek(r.weekStarts()).addDays(42)},this.vh=function(){var e=this.visibleStart(),t=this.visibleEnd();if(n.cb()){var i={};if(i.start=e,i.end=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onVisibleRangeChange&&(n.onVisibleRangeChange(i),i.preventDefault.value))return;switch(this.visibleRangeChangedHandling){case"CallBack":this.visibleRangeChangedCallBack(null);break;case"PostBack":this.visibleRangeChangedPostBack(null);break;case"Disabled":}"function"==typeof n.onVisibleRangeChanged&&n.onVisibleRangeChanged(i)}else switch(this.visibleRangeChangedHandling){case"CallBack":this.visibleRangeChangedCallBack(null);break;case"PostBack":this.visibleRangeChangedPostBack(null);break;case"JavaScript":this.onVisibleRangeChanged(e,t);break;case"Disabled":}},this.visibleRangeChangedCallBack=function(e){var t={};this.ha("Visible",e,t)},this.visibleRangeChangedPostBack=function(e){var t={};this.fa("Visible",e,t)},this.la=function(e,t){var e=JSON.parse(e);n.items=e.Items,n.cells=e.Cells,n.cells?n.update():n.mh()},this.uh=function(){for(var e=0;e<this.showMonths;e++){var t=this.Eh(e);this.wg(e,t)}this.root.style.height=this.Rg()+"px",this.nav.preselection=document.createElement("div"),this.nav.preselection.style.position="absolute",this.nav.preselection.style.left="0px",this.nav.preselection.style.top="0px",this.root.appendChild(this.nav.preselection)},this.Rg=function(){if("Horizontal"===this.orientation){for(var e=0,t=0;t<this.months.length;t++){var n=this.months[t];n.height>e&&(e=n.height)}return e}for(var i=0,t=0;t<this.months.length;t++){var n=this.months[t];i+=n.height}return i},this.Eh=function(e){if(this.internal.showLinks)return this.internal.showLinks;var t={};return t.left=0===e,t.right=0===e,t.before=0===e,t.after=e===this.showMonths-1,"Horizontal"===this.orientation&&(t.right=e===this.showMonths-1),t},this.Ae={},this.Ae.scope=null,this.Ae.notify=function(){n.Ae.scope&&n.Ae.scope["$apply"]()},this.internal={},this.internal.initialized=function(){return n.S},this.ea={};var r=this.ea;r.locale=function(){return DayPilot.Locale.find(n.locale)},r.weekStarts=function(){if("Auto"===n.weekStarts){var e=r.locale();return e?e.weekStarts:0}return n.weekStarts},r.cellWidth=function(){if(n.P.cellWidth)return n.P.cellWidth;var e=n.Fe("_cell_dimensions").width;return e||(e=n.cellWidth),n.P.cellWidth=e,e},this.clearSelection=function(){for(var e=0;e<this.selected.length;e++){var t=this.selected[e];n.lh(t.parentNode,t.x,t.y)}this.selected=[]},this.Je=function(){return!!this.backendUrl&&("undefined"==typeof n.items||!n.items)},this.events={},this.Ma=function(){if(DayPilot.isArray(this.events.list)){this.items={};for(var e=0;e<this.events.list.length;e++){var t=this.events.list[e];if(!t.hidden){var n=this.Fh(t);for(var i in n)this.items[i]=1}}}},this.Fe=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e);var i=n.root||document.body;i.appendChild(t);var a=t.offsetHeight,r=t.offsetWidth;i.removeChild(t);var o={};return o.height=a,o.width=r,o},this.Fh=function(e){for(var t=new DayPilot.Date(e.start),n=new DayPilot.Date(e.end),i={},a=t.getDatePart();a.getTime()<n.getTime();)i[a.toStringSortable()]=1,a=a.addDays(1);return i},this.show=function(){n.visible=!0,n.root.style.display=""},this.hide=function(){n.visible=!1,n.root.style.display="none"},this.Ke=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Navigator() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Navigator: The placeholder element not found: '"+e+"'."}this.root=this.nav.top},this.init=function(){if(this.Ke(),!this.root.dp){n.cssOnly||(n.cssOnly=!0,DayPilot.Util.log("DayPilot: cssOnly = false mode is not supported since DayPilot Pro 8.0.")),this.oh(),this._g(),this.uh(),this.Ma(),this.mh(),this.ya(),this.Gh(),this.me();return this.Je()&&this.vh(),this.S=!0,this.Me(),this.ph&&(this.select(this.ph.date,this.ph.options),this.ph=null),this}},this.Gh=function(){n.nav.top.onmousedown=this.Ah,n.nav.top.onmousemove=this.Bh},this.me=function(){DayPilot.re(document,"mouseup",n.kf)},this.kf=function(e){if(i.start&&i.end){var t=DayPilot.mo3(n.nav.top,e);if(t.x===i.start.coords.x&&t.y===i.start.coords.y)return i.start=null,void i.clear();i.clear();var r=i.ordered();r.start=new a(r.start).nextVisible(),r.end=new a(r.end).previousVisible(),n.selectionDay=new a(r.start).date(),n.selectionStart=n.selectionDay,n.selectionEnd=new a(r.end).date(),i.start=null,i.end=null,n.vg(),n._g(),n.uh(),n.mh(),n.nh();n.Qb({"mode":"freehand"})}i.start=null,i.end=null},this.dispose=function(){var e=n;e.root&&(e.root.removeAttribute("style"),e.root.removeAttribute("class"),e.root.dp=null,e.root.innerHTML=null,e.root=null)},this.ya=function(){this.root.dispose=this.dispose},this.Init=this.init,this.De(t)},"undefined"!=typeof jQuery&&!function(e){e.fn.daypilotNavigator=function(e){var t=null,n=this.each(function(){if(!this.daypilot){var n=new DayPilot.Navigator(this.id);this.daypilot=n;for(var i in e)n[i]=e[i];n.Init(),t||(t=n)}});return 1===this.length?t:n}}(jQuery),function(){var e=DayPilot.am();e&&e.directive("daypilotNavigator",["$parse",function(e){return{"restrict":"E","template":"<div id='{{id}}'></div>","compile":function(t,n){return t.replaceWith(this["template"].replace("{{id}}",n["id"])),function(t,n,i){var a=new DayPilot.Navigator(n[0]);a.Ae.scope=t,a.init();var r=i["id"];r&&(t[r]=a);var o=i["publishAs"];if(o){(0,e(o).assign)(t,a)}for(var s in i)if(0===s.indexOf("on")){var l=DayPilot.Util.shouldApply(s);l?!function(n){a[n]=function(a){var r=e(i[n]);t["$apply"](function(){r(t,{"args":a})})}}(s):!function(n){a[n]=function(a){e(i[n])(t,{"args":a})}}(s)}var d=t["$watch"],c=i["config"]||i["daypilotConfig"],u=i["events"]||i["daypilotEvents"];d.call(t,c,function(e,t){for(var n in e)a[n]=e[n];a.update()},!0),d.call(t,u,function(e){a.events.list=e,a.Ma(),a.mh()},!0)}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};if("undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){function t(e){for(var t=e.touches[0].clientX,n=e.touches[0].clientY,i=document.elementFromPoint(t,n);i&&i.parentNode;)if(i=i.parentNode,i.daypilotMainD)return i.calendar;return!1}function n(e){var t=e.touches[0].pageX,n=e.touches[0].pageY,i={};return i.x=t,i.y=n,i}if("undefined"==typeof DayPilot.Scheduler){var i=function(){var e=navigator.userAgent;return e.indexOf("Mozilla/5.0")>-1&&e.indexOf("Android ")>-1&&e.indexOf("AppleWebKit")>-1&&!(e.indexOf("Chrome")>-1)}(),a=navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1,o={},s=function(){},l=!1;DayPilot.Scheduler=function(t,l){function u(e){e.div.style.right=e.right+"px",e.div.style.height=e.height+"px",e.div.style.top=e.top+"px",f.lo(e.div,e.enabled()),e.divHeader.style.height=e.heightRes+"px",e.divHeader.style.top=e.top+"px",f.lo(e.divHeader,e.enabled()),e.divSpace&&(e.divSpace.style.top=e.height+"px")}function h(e,t){return 1-e/t}this.v="2021.1.4880";var f=this;this.id=t,this.isScheduler=!0,this.allowDefaultContextMenu=!1,this.allowEventOverlap=!0,this.allowMultiMove=!1,this.allowMultiRange=!1,this.allowMultiResize=!1,this.allowMultiSelect=!0,this.api=2,this.autoRefreshCommand="refresh",this.autoRefreshEnabled=!1,this.autoRefreshInterval=60,this.autoRefreshMaxCount=20,this.autoScroll="Drag",this.blockOnCallBack=!1,this.navigatorBackSync=null,this.backendUrl=null,this.beforeCellRenderCaching=!0,this.businessBeginsHour=9,this.businessEndsHour=18,this.businessWeekends=!1,this.cellDuration=60,this.cellGroupBy="Day",this.cellSweeping=!0,this.cellSweepingCacheSize=1e3,this.cellWidth=40,this.cellWidthMin=1,this.cellWidthSpec="Fixed",this.cellsMarkBusiness=!0,this.cornerText="",this.cornerHtml=null,this.crosshairTimeHeaderLevel="Last",this.crosshairType="Header",this.cssClassPrefix="scheduler_default",this.days=1,this.doubleClickTimeout=300,this.dragOutAllowed=!1,this.drawBlankCells=!0,this.durationBarHeight=3,this.durationBarVisible=!0,this.durationBarMode="Duration",this.dynamicEventRendering="Progressive",this.dynamicEventRenderingMargin=50,this.dynamicEventRenderingMarginX=null,this.dynamicEventRenderingMarginY=null,this.dynamicEventRenderingCacheSweeping=!1,this.dynamicEventRenderingCacheSize=200,this.dynamicLoading=!1,this.eventEditMinWidth=100,this.eventEditTabNext=!1,this.eventEndSpec="DateTime",this.eventHeight=35,this.eventHtmlLeftMargin=10,this.eventHtmlRightMargin=10,this.eventMarginLeft=0,this.eventMarginRight=0,this.eventMarginBottom=0,this.eventMinWidth=1,this.eventMoveMargin=5,this.eventMoveToPosition=!1,this.eventMoveSkipNonBusiness=!1,this.eventResizeMargin=5,this.eventStackingLineHeight=100,this.eventTapAndHoldHandling="Move",this.eventTextWrappingEnabled=!1,this.eventUpdateInplaceOptimization=!1,this.eventsLoadMethod="GET",this.eventVersionHeight=25,this.eventVersionMargin=2,this.eventVersionPosition="Above",this.eventVersionsEnabled=!1,this.eventVersionsReserveSpace=!1,this.floatingEvents=!a,this.floatingTimeHeaders=!0,this.groupConcurrentEvents=!1,this.groupConcurrentEventsLimit=1,this.headerHeight=30,this.heightSpec="Max",this.height=600,this.hideBorderFor100PctHeight=!1,this.hideUntilInit=!0,this.infiniteScrollingEnabled=!1,this.infiniteScrollingMargin=50,this.infiniteScrollingStepDays=30,this.initEventEnabled=!0,this.jointEventsResize=!0,this.jointEventsMove=!0,this.keyboardEnabled=!1,this.keyboardTarget="document",this.layout="Auto",this.linkCreateHandling="Disabled",this.linkBottomMargin=17,this.linkPointSize=10,this.linksLoadMethod="GET",this.locale="en-us",this.loadingLabelText="Loading...",this.loadingLabelHtml=null,this.loadingLabelVisible=!0,this.overrideWheelScrolling=!1,this.messageBarPosition="Top",this.messageHideAfter=5e3,this.messageHideOnMouseOut=!0,this.multiMoveVerticalMode="Disabled",this.moveBy="Full",this.notifyCommit="Immediate",this.progressiveRowRendering=!0,this.progressiveRowRenderingPreload=25,this.rectangleSelectMode="Free",this.rectangleSelectHandling="Disabled",this.rowCreateHeight=null,this.rowCreateHtml="New row...",this.rowDragHandleWidth=10,this.rowFilterParentsAlwaysVisible=!0,this.rowHeaderColumnDefaultWidth=80,this.rowHeaderHideIconEnabled=!1,this.rowHeaderScrolling=!1,this.rowHeaderSplitterWidth=3,this.rowHeaderWidthAutoFit=!0,this.rowHeaderWidthMarginRight=0,this.rowHeaderColumnsResizable=!0,this.rowHeaderColumnsMode="Tabular",this.rowHeaderColumns=null,this.rowHeaderWidth=80,this.rowMarginBottom=0,this.rowMarginTop=0,this.rowMinHeight=0,this.rowsLoadMethod="GET",this.rowSortingMode="LeavesOnly",this.scale="CellDuration",this.scaleManualLimitBeyond=!0,this.scrollDelayDynamic=500,this.scrollDelayEvents=200,this.scrollDelayCells=a?100:0,this.scrollDelayFloats=0,this.scrollDelayRows=0,this.scrollStep=null,this.scrollX=0,this.scrollY=0,this.selectedRows=[],this.separators=[],this.showNonBusiness=!0,this.showNonBusinessForceHours=!1,this.showToolTip=!0,this.snapToGrid=!0,this.snapToGridTimeRangeSelecting=!0,this.snapToGridEventMoving=!0,this.snapToGridEventResizing=!0,this.startDate=DayPilot.Date.today(),this.syncResourceTree=!1,this.tapAndHoldTimeout=300,this.timeHeaders=[{"groupBy":"Default"},{"groupBy":"Cell"}],this.timeHeaderPosition="Top",this.timeHeaderTextWrappingEnabled=!1,
this.treeAnimation=!0,this.treeAutoExpand=!0,this.treeEnabled=!1,this.treeIndent=20,this.treeImageMarginLeft=0,this.treeImageMarginTop=3,this.treeImageMarginRight=5,this.treeImageWidth=10,this.treeImageHeight=10,this.treePreventParentUsage=!1,this.timeFormat="Auto",this.timeline=null,this.useEventBoxes="Always",this.viewType="Resources",this.visible=!0,this.watchWidthChanges=!0,this.weekStarts="Auto",this.width=null,this.xssProtection="Enabled",this.zoomLevels=[],this.zoomPosition="left",this.eventClickHandling="Enabled",this.eventDeleteHandling="Disabled",this.eventHoverHandling="Bubble",this.eventDoubleClickHandling="Disabled",this.eventEditHandling="Update",this.eventMoveHandling="Update",this.eventResizeHandling="Update",this.eventRightClickHandling="ContextMenu",this.eventSelectHandling="Update",this.resourceCollapseHandling="Enabled",this.resourceExpandHandling="Enabled",this.rowClickHandling="Enabled",this.rowDoubleClickHandling="Disabled",this.rowRightClickHandling="ContextMenu",this.rowCreateHandling="Disabled",this.rowEditHandling="Update",this.rowHeaderColumnResizedHandling="Update",this.rowSelectHandling="Update",this.rowMoveHandling="Disabled",this.timeHeaderClickHandling="Enabled",this.timeHeaderRightClickHandling="Enabled",this.timeRangeClickHandling="Enabled",this.timeRangeDoubleClickHandling="Disabled",this.timeRangeSelectedHandling="Enabled",this.timeRangeRightClickHandling="ContextMenu",this.timeRangeSelectingStartEndEnabled=!1;this.timeRangeSelectingStartEndFormat="MMMM d, yyyy";this.eventMovingStartEndEnabled=!1,this.eventMovingStartEndFormat="MMMM d, yyyy",this.eventResizingStartEndEnabled=!1,this.eventResizingStartEndFormat="MMMM d, yyyy","function"==typeof DayPilot.Bubble?this.bubble=new DayPilot.Bubble:this.bubble=null,this.cellBubble=null,this.resourceBubble=null,this.linkBubble=null,this.contextMenu=null,this.contextMenuResource=null,this.contextMenuSelection=null,this.contextMenuLink=null,DayPilot.browser.ie&&(this.scrollDelayCells=100,this.scrollDelayFloats=100),1===f.api&&(this.onEventMove=function(){},this.onEventResize=function(){},this.onResourceExpand=function(){},this.onResourceCollapse=function(){}),this.onEventClick=null,this.onEventClicked=null,this.onEventMove=null,this.onEventMoved=null,this.onEventMoving=null,this.onEventResize=null,this.onEventResized=null,this.onEventResizing=null,this.onEventRightClick=null,this.onEventRightClicked=null,this.onEventMouseOver=null,this.onEventMouseOut=null,this.onIncludeTimeCell=null,this.onLinkClick=null,this.onLinkClicked=null,this.onRowClick=null,this.onRowClicked=null,this.onRowDoubleClick=null,this.onRowDoubleClicked=null,this.onRowMouseOver=null,this.onRowMouseOut=null,this.onRowRightClick=null,this.onRowRightClicked=null,this.onTimeHeaderClick=null,this.onTimeHeaderClicked=null,this.onTimeHeaderRightClick=null,this.onTimeHeaderRightClicked=null,this.onTimeRangeClick=null,this.onTimeRangeClicked=null,this.onTimeRangeDoubleClick=null,this.onTimeRangeDoubleClicked=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.onTimeRangeSelecting=null,this.onTimeRangeRightClick=null,this.onTimeRangeRightClicked=null,this.onRowHeaderColumnResized=null,this.onRowHeaderResized=null,this.onCellMouseOver=null,this.onCellMouseOut=null,this.onGridMouseDown=null,this.onBeforeCellRender=null,this.onBeforeCornerRender=null,this.onBeforeCornerDomAdd=null,this.onBeforeCornerDomRemove=null,this.onBeforeEventRender=null,this.onBeforeEventDomAdd=null,this.onBeforeEventDomRemove=null,this.onBeforeGridLineRender=null,this.onBeforeTimeHeaderRender=null,this.onBeforeTimeHeaderDomAdd=null,this.onBeforeTimeHeaderDomRemove=null,this.onBeforeResHeaderRender=null,this.onBeforeRowHeaderRender=null,this.onBeforeRowHeaderColumnRender=null,this.onBeforeRowHeaderDomAdd=null,this.onBeforeRowHeaderDomRemove=null,this.onBeforeCellExport=null,this.onBeforeEventExport=null,this.onBeforeTimeHeaderExport=null,this.onBeforeRowHeaderExport=null,this.onAfterEventRender=null,this.onAfterCellRender=null,this.onAfterEventEditRender=null,this.onEventFilter=null,this.onRowFilter=null,this.onRectangleSelecting=null,this.onRectangleSelect=null,this.onRectangleSelected=null,this.onDimensionsChanged=null,this.onAfterUpdate=null,this.R=0,this.Hh=!0,this.Ih=!1,this.Jh=!1,this.Kh=!1,this.Lh=-1,this.Mh=-1,this.T=!1,this.Nh=-1,this.Oh=!1,this.Ph=!0,this.rowlist=DayPilot.list(),this.itline=DayPilot.list(),this.events={},this.cells={},this.elements={},this.elements.events=[],this.elements.bars=[],this.elements.text=[],this.elements.cells=[],this.elements.linesVertical=[],this.elements.separators=[],this.elements.range=[],this.elements.breaks=[],this.elements.links=[],this.elements.linkpoints=[],this.elements.rectangle=[],this.elements.hover=[],this.elements.timeHeader=[],this.P={},this.P.cells=[],this.P.linesVertical={},this.P.linesHorizontal={},this.P.timeHeaderGroups=[],this.P.timeHeader={},this.P.pixels=[],this.P.breaks=[],this.P.events=[],this.clientState={},this.members={},this.members.obsolete=["Init","cleanSelection","cssClassPrefix","getHScrollPosition","setHScrollPosition","getVScrollPosition","setVScrollPosition","showBaseTimeHeader"],this.members.ignoreFilter=function(e){return 0===e.indexOf("div")},this.members.ignore=["internal","nav","debug","temp","elements","members","cellProperties","itline","rowlist","timeHeader","timeouts","rowHeaderCols"],this.members.noCssOnly=[],this.U="javasc",this.nav={},this.la=function(e,t){var e=JSON.parse(e);if(f.onScrollCalled=!1,e.VsUpdate){var n=document.createElement("input");n.type="hidden",n.name=f.id+"_vsupdate",n.id=n.name,n.value=e.VsUpdate,f.tg.innerHTML="",f.tg.appendChild(n)}if(e.CallBackRedirect)return void(document.location.href=e.CallBackRedirect);if("function"==typeof f.onCallBackResult){var i={};if(i.result=e,i.preventDefault=function(){i.preventDefault.value=!0},f.onCallBackResult(i),i.preventDefault.value)return f.Kb(),f.Ga(),f.bb(),e.Message&&f.message&&f.message(e.Message),f.Ha(e.CallBackData,!0),f.Qh(),void f.ba()}if(e.BubbleGuid){var a=e.BubbleGuid,r=this.bubbles[a];return delete this.bubbles[a],f.Ga(),"undefined"!=typeof e.Result.BubbleHTML&&r&&r.updateView(e.Result.BubbleHTML,r),void f.Qh()}return"undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),"undefined"!=typeof e.ClientState&&(null===e.ClientState?f.clientState={}:f.clientState=e.ClientState),"None"===e.UpdateType?(f.Ga(),f.Qh(),e.Message&&f.message(e.Message),void f.Ha(e.CallBackData,!0)):("undefined"!=typeof e.TagFields&&(f.tagFields=e.TagFields),"undefined"!=typeof e.SortDirections&&(f.sortDirections=e.SortDirections),f.P.drawArea=null,"Full"===e.UpdateType&&(f.resources=e.Resources,f.colors=e.Colors,f.palette=e.Palette,f.dirtyColors=e.DirtyColors,f.cellProperties=e.CellProperties,f.cellConfig=e.CellConfig,f.separators=e.Separators,f.timeline=e.Timeline,f.timeHeader=e.TimeHeader,f.timeHeaders=e.TimeHeaders,"undefined"!=typeof e.Links&&(f.links.list=e.Links),"undefined"!=typeof e.RowHeaderColumns&&(f.rowHeaderColumns=e.RowHeaderColumns),f.startDate=e.StartDate?new DayPilot.Date(e.StartDate):f.startDate,f.days=e.Days?e.Days:f.days,f.cellDuration=e.CellDuration?e.CellDuration:f.cellDuration,f.cellGroupBy=e.CellGroupBy?e.CellGroupBy:f.cellGroupBy,f.cellWidth=e.CellWidth?e.CellWidth:f.cellWidth,"undefined"!=typeof e.CellWidthSpec&&(f.cellWidthSpec=e.CellWidthSpec),"undefined"!=typeof e.Scale&&(f.scale=e.Scale),f.viewType=e.ViewType?e.ViewType:f.viewType,"undefined"!=typeof e.ShowNonBusiness&&(f.showNonBusiness=e.ShowNonBusiness),f.businessBeginsHour=e.BusinessBeginsHour?e.BusinessBeginsHour:f.businessBeginsHour,f.businessEndsHour=e.BusinessEndsHour?e.BusinessEndsHour:f.businessEndsHour,"undefined"!=typeof e.DynamicLoading&&(f.dynamicLoading=e.DynamicLoading),"undefined"!=typeof e.TreeEnabled&&(f.treeEnabled=e.TreeEnabled),f.locale=e.Locale?e.Locale:f.locale,"undefined"!=typeof e.TimeZone&&(f.timeZone=e.TimeZone),f.timeFormat=e.TimeFormat?e.TimeFormat:f.timeFormat,f.rowHeaderCols=e.RowHeaderCols?e.RowHeaderCols:f.rowHeaderCols,"undefined"!=typeof e.DurationBarMode&&(f.durationBarMode=e.DurationBarMode),"undefined"!=typeof e.CornerHTML&&(f.cornerHtml=e.CornerHTML),f.hashes=e.Hashes,f.Rh(),f.Sh(),f.Th(),f.La()),"Scroll"!==e.Action&&f.Ma(e.Events),"Full"===e.UpdateType&&(f.Uh(),f.Vh(),f.Wh()),f.Xh(),f.Ya(),f._a(),f.P.drawArea=null,"Scroll"!==e.Action?(f.Yh(),f.Na(),"Auto"!==f.heightSpec&&"Max"!==f.heightSpec||f.Ua(),f.Zh(),f.pa(),f.$h(),f.multiselect.clear(!0),f.multiselect._h(e.SelectedEvents),f.ai(),f.bi(),f.Za()):(f.multiselect.clear(!0),f.multiselect._h(e.SelectedEvents),f.ci(e.Events)),"HoldForever"!==f.timeRangeSelectedHandling&&f.di(),"Full"===e.UpdateType&&(f.setScroll(e.ScrollX,e.ScrollY),f.nh()),f.ei(),f.Kb(),e.SelectedRows&&f.fi(e.SelectedRows),f.Ga(),"Full"===e.UpdateType&&navigator.appVersion.indexOf("MSIE 7.")!==-1&&window.setTimeout(function(){f.Uh(),f.Ua()},0),f.bb(),e.Message&&f.message&&f.message(e.Message),f.Ha(e.CallBackData,!0),f.Qh(),f.ba(),void("Full"!==e.UpdateType||"Scroll"===e.Action||f.onScrollCalled||setTimeout(function(){f.gi()},0)))},this.Kb=function(){if(f.todo&&f.todo.del){var e=f.todo.del;e.parentNode.removeChild(e),f.todo.del=null}},this.Ha=function(e,t){var n=function(e,t){return function(){if(f.cb()){if("function"==typeof f.onAfterRender){var n={};n.isCallBack=t,n.isScroll=!1,n.data=e,f.onAfterRender(n)}}else f.afterRender&&f.afterRender(e,t)}};window.setTimeout(n(e,t),0)},this.scrollTo=function(e,t,n){if(f.infiniteScrollingEnabled){if(f.S){if(!DayPilot.Util.overlaps(f.visibleStart(),f.visibleEnd(),e,e))return void f.infinite.scrollTo(e)}return void f.hi(e,t,n)}f.ii.enabled?(f.ii.scrollToRequested=e,setTimeout(function(){var e=f.ii.scrollToRequested;e&&(f.ji=null,f.hi(e,t,n))},0)):f.hi(e,t,n)},this.hi=function(e,t,n){if(e){if(!f.S)return void(f.ji={"date":e,"animated":t,"position":n});if("Days"===f.viewType){var i=f.ki(new DayPilot.Date(e));if(!i)return;return void setTimeout(function(){var e=i.top;f.nav.scroll.scrollTop=e},100)}var a;if(e instanceof DayPilot.Date)a=this.getPixels(e).left;else if("string"==typeof e)a=this.getPixels(new DayPilot.Date(e)).left;else{if("number"!=typeof e)throw new DayPilot.Exception("Invalid scrollTo() parameter. Accepted parameters: string (ISO date), number (pixels), DayPilot.Date object");a=e}var r=f.li.clientWidth,o=f.nav.scroll.clientWidth;switch(n=n||"left",n.toLowerCase()){case"left":break;case"middle":a-=o/2;break;case"right":a-=o}if(a<0&&(a=0),a>r-o&&(a=r-o),!t)return void f.mi(a);var s=Math.abs(f.nav.scroll.scrollLeft-a),l=s/r,d=50;if("number"==typeof t)d=t;else if("string"==typeof t)switch(t){case"fast":d=30;break;case"normal":d=50;break;case"slow":d=100;break;case"linear":d=Math.floor(100*l)}l>.6&&(d=Math.min(d,80)),f.ni(a,d)}},this.ni=function(e,t){function n(e){var t=e.next();return"undefined"==typeof t?void(e.finished&&e.finished()):(f.setScrollX(t),window.clearTimeout(f.refreshTimeout),void setTimeout(function(){n(e)},e.delay))}var i={};i.steps=[],i.index=0,i.delay=10,i.next=function(){var e=i.steps[i.index];return i.index+=1,e},i.finished=function(){f.gi()};for(var a=f.getScrollX(),t=t||100,r=e-a,o=0;o<t;o++){var s=o/t,l=2*(s-.5)/(Math.pow(2*(s-.5),2)+1)+.5;i.steps.push(a+r*l)}i.steps.push(e),n(i)},this.scrollToResource=function(e){DayPilot.complete(function(){var t;if("string"==typeof e||"number"==typeof e)t=f.oi(e);else{if(!(e instanceof DayPilot.Row))throw new DayPilot.Exception("Invalid scrollToResource() argument: id or DayPilot.Row expected");t=f.oi(e.id)}t&&setTimeout(function(){var e=t.top;f.nav.scroll.scrollTop=e},100)})},this.pi=function(){if(this.floatingTimeHeaders&&this.timeHeader){var e=f.X();if(e){f.qi();for(var t=e.pixels.left+p.ri,n=e.pixels.right+p.ri+e.sw,i=[],a=0;a<this.timeHeader.length;a++)for(var r=0;r<this.timeHeader[a].length;r++){var o=this.timeHeader[a][r],s=o.left,l=o.left+o.width,d=null;if(s<t&&t<l&&(d={},d.x=r,d.y=a,d.marginLeft=t-s,d.marginRight=0,d.div=f.P.timeHeader[r+"_"+a],i.push(d)),s<n&&n<l){d||(d={},d.x=r,d.y=a,d.marginLeft=0,d.div=f.P.timeHeader[r+"_"+a],i.push(d)),d.marginRight=l-n;break}}for(var c=0;c<i.length;c++){var d=i[c];f.si(d.div,d.marginLeft,d.marginRight)}}}},this.ei=function(){f.pi(),f.vi()},this.wi={};var v=f.wi;v.xi=function(e,t,n,i){var a=e,r=e+n,o=t,s=t+i;return DayPilot.list(f.elements.events).filter(function(e){var t=e.event,n=t.part.left,i=t.part.left+t.part.width,l=f.rowlist[t.part.dayIndex],d=l.top+t.part.top,c=d+t.part.height;if(DayPilot.Util.overlaps(n,i,a,r)&&DayPilot.Util.overlaps(d,c,o,s))return!0})},v.yi=function(e){var t=[],e=e||"All",n=f.X();if(!n)return DayPilot.list(t);for(var i=n.pixels.left,a=n.pixels.right,r=0;r<f.elements.events.length;r++){var o=f.elements.events[r],s=o.event,l=s.part.left,d=s.part.left+s.part.width;switch(e){case"Left":l<i&&i<d&&t.push(o);break;case"All":DayPilot.Util.overlaps(l,d,i,a)&&t.push(o)}}return DayPilot.list(t).addProps({"area":n})},this.vi=function(){if(this.floatingEvents){var e=v.yi("Left");f.zi(),e.filter(function(e){return"Milestone"!==e.event.data.type}).forEach(function(t){var n=t.event,i=e.area.pixels.left,a=n.part.left,r=i-a;f.Ai(t,r,0)})}},this.elements.sections=[],this.elements.hsections=[],this.si=function(e,t,n){var i=document.createElement("div");i.setAttribute("unselectable","on"),i.className=f.G("_timeheader_float"),i.style.position="absolute",i.style.left=t+"px",i.style.right=n+"px",i.style.top="0px",i.style.bottom="0px",i.style.overflow="hidden";var a=document.createElement("div");a.className=f.G("_timeheader_float_inner"),a.setAttribute("unselectable","on");var r=e.cell.th;if(a.innerHTML=f.ca(r.text,r.innerHTML),r.fontColor&&(a.style.color=r.fontColor),i.appendChild(a),e.section=i,e.insertBefore(i,e.firstChild.nextSibling),e.domArgs&&e.domArgs.element){var o=e.firstChild&&e.firstChild.firstChild;o&&(o.style.display="none")}else e.firstChild.innerHTML="";this.elements.hsections.push(e)},this.qi=function(){for(var e=0;e<this.elements.hsections.length;e++){var t=this.elements.hsections[e],n=t.cell;if(n&&t.firstChild)if(t.domArgs&&t.domArgs.element){var i=t.firstChild&&t.firstChild.firstChild;i&&(i.style.display="")}else t.firstChild.innerHTML=f.ca(n.th.text,n.th.innerHTML);DayPilot.de(t.section),t.section=null}this.elements.hsections=[]},this.Ai=function(e,t,n){var i=document.createElement("div");i.setAttribute("unselectable","on"),i.className=f.G(H.eventFloat),i.style.position="absolute",i.style.left=t+"px",i.style.right=n+"px",i.style.top="0px",i.style.bottom="0px",i.style.overflow="hidden";var a=document.createElement("div");if(a.className=f.G(H.eventFloatInner),a.setAttribute("unselectable","on"),a.innerHTML=e.event.client.html(),i.appendChild(a),e.section=i,e.insertBefore(i,e.firstChild.nextSibling),e.domArgs&&e.domArgs.element){var r=e&&e.firstChild&&e.firstChild.firstChild;r&&(r.style.display="none")}else e.firstChild.innerHTML="";var o=e.event,s=o.cache||o.data,l=o.cache?o.cache.areas:o.data.areas;l=l||[],s.fontColor&&(a.style.color=s.fontColor);var d={"offsetX":f.Bi(a),"eventDiv":e,"areas":l.filter(function(e){return!(e.start||e.end)})};DayPilot.Areas.attach(i,e.event,d),DayPilot.Areas.disable(e),this.elements.sections.push(e)},this.Ci=null,this.Bi=function(e){return null===f.Ci&&(f.Ci=parseInt(new DayPilot.StyleReader(e).get("padding-left"))),f.Ci},this.zi=function(){for(var e=0;e<this.elements.sections.length;e++){var t=this.elements.sections[e],n=t.event;if(n)if(t.domArgs&&t.domArgs.element){var i=t&&t.firstChild&&t.firstChild.firstChild;i&&(i.style.display="")}else t.firstChild.innerHTML=n.client.html();DayPilot.de(t.section),DayPilot.Areas.enable(t),t.section=null}this.elements.sections=[]},this.setScrollX=function(e){f.ii.enabled?(f.ii.scrollXRequested=e,setTimeout(function(){var e=f.ii.scrollXRequested;"number"==typeof e&&f.mi(e)},0)):f.mi(e)},this.mi=function(e){var t=f.nav.scroll,n=f.Di();t.clientWidth+e>n&&(e=n-t.clientWidth),f.divTimeScroll.scrollLeft=e,t.scrollLeft=e},this.setScrollY=function(e){f.ii.enabled?(f.ii.scrollYRequested=e,setTimeout(function(){var e=f.ii.scrollYRequested;"number"==typeof e&&f.Ei(e)},0)):f.Ei(e)},this.Ei=function(e){var t=f.nav.scroll,n=f.Nh;t.clientHeight+e>n&&(e=n-t.clientHeight),f.divResScroll.scrollTop=e,t.scrollTop=e},this.setScroll=function(e,t){f.setScrollX(e),f.setScrollY(t)},this.Fi=function(){return f.Gi()+N.Hi()-1},this.message=function(e,t){if(null!==e&&f.S){var n,i={};"object"==typeof arguments[1]?(i=arguments[1],n=i.delay):n=t;var a="";a=i.rawHtml?e:DayPilot.Util.escapeHtml(e),n=n||this.messageHideAfter||2e3;var r,o=f.Ii()+1,s=f.Fi(),l=DayPilot.sw(f.nav.scroll)+1,d=DayPilot.sh(f.nav.scroll);if(this.nav.message)r=f.nav.message;else{r=document.createElement("div"),r.style.position="absolute",r.style.left=s+"px",r.style.right=l+"px",r.style.display="none",DayPilot.re(r,DayPilot.touch.start,function(e){f.nav.message.style.display="none",e.preventDefault(),e.stopPropagation()}),r.onmousemove=function(){f.messageHideOnMouseOut&&r.messageTimeout&&!r.status&&clearTimeout(r.messageTimeout)},r.onmouseout=function(){f.messageHideOnMouseOut&&"none"!==f.nav.message.style.display&&(r.messageTimeout=setTimeout(f.nb,500))};var c=document.createElement("div");c.onclick=function(){f.nav.message.style.display="none"},c.className=f.G("_message"),r.appendChild(c);var u=document.createElement("div");u.style.position="absolute",u.className=f.G("_message_close"),u.onclick=function(){f.nav.message.style.display="none"},r.appendChild(u),this.nav.top.appendChild(r),this.nav.message=r}var h=function(){var e=f.nav.message;e.firstChild.className=f.G("_message"),i.cssClass&&DayPilot.Util.addClass(e.firstChild,i.cssClass),f.nav.message.firstChild.innerHTML=a;var t=DayPilot.sw(f.nav.scroll);f.nav.message.style.right=t+"px";var r=f.messageBarPosition||"Top";"Bottom"===r?(f.nav.message.style.bottom=d+"px",f.nav.message.style.top=""):"Top"===r&&(f.nav.message.style.bottom="",f.nav.message.style.top=o+"px");var s=function(){e.messageTimeout=setTimeout(f.nb,n)};DayPilot.fade(f.nav.message,.2,s)};clearTimeout(r.messageTimeout),"none"!==this.nav.message.style.display?DayPilot.fade(f.nav.message,-.2,h):h()}},this.nb=function(){if(f.nav&&f.nav.message){var e=function(){f.nav.message.style.display="none"};DayPilot.fade(f.nav.message,-.2,e)}},this.Ji=function(){f.nav&&f.nav.message&&(f.nav.message.style.display="none")},this.message.show=function(e){f.message(e)},this.message.hide=function(){f.nb()},this.Ki=null,this.Ua=function(){if(this.nav.scroll){!function(){var e=f.Di();f.li.style.height=f.Nh+"px",f.li.style.width=e+"px","Auto"!==f.cellWidthSpec||f.Li?e>f.nav.scroll.clientWidth?f.nav.scroll.style.overflowX="auto":f.nav.scroll.style.overflowX="hidden":(f.nav.scroll.style.overflowX="hidden",f.nav.scroll.scrollLeft=0)}();var e="None"===f.timeHeaderPosition?0:1;null!==this.Ki&&(this.nav.top.style.border=this.Ki,this.Ki=null),"Parent100Pct"!==this.heightSpec&&"Max100Pct"!==this.heightSpec||(this.nav.top.style.height="100%",this.hideBorderFor100PctHeight&&(this.Ki=this.nav.top.style.border,this.nav.top.style.border="0 none"),this.height=parseInt(this.nav.top.clientHeight,10)-this.Ii()-e),this.nav.scroll.style.height="30px";var t=this.dd(),n=t+this.Ii()+e;if(t>=0&&(this.nav.scroll.style.height=t+"px",this.Mi.style.height=t+"px"),this.nav.divider&&((!n||isNaN(n)||n<0)&&(n=0),this.nav.divider.style.height=n+"px"),"Parent100Pct"!==this.heightSpec&&(this.nav.top.style.height=n+"px"),f.nav.resScrollSpace){var i=30+f.Ni.bottom.height;"Auto"===f.heightSpec&&(i=DayPilot.sh(f.nav.scroll)),f.nav.resScrollSpace.style.height=i+"px"}for(var a=0;a<this.elements.separators.length;a++)this.elements.separators[a].style.height=this.Nh+"px";for(var a=0;a<this.elements.linesVertical.length;a++)this.elements.linesVertical[a].style.height=this.Nh+"px";f.Oi(),f.Pi()}},this.Sh=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart(),this.P.pixels=[],this.itline=DayPilot.list();var e="Auto"===this.cellWidthSpec;if(function(){if(e){var t=0;f.I()&&f.timeline?t=f.timeline.length:"Manual"===f.scale?t=f.timeline.length:(f.Qi(),t=f.itline.length,f.itline=DayPilot.list());var n=f.Ri();if(t>0&&n>0){var i=n/t;f.cellWidth=DayPilot.Util.atLeast(i,f.cellWidthMin),f.Li=i<f.cellWidthMin}}}(),this.I()&&this.timeline){if(this.timeline){this.itline=DayPilot.list();for(var t=null,n=0,i=0;i<this.timeline.length;i++){var a=this.timeline[i],r={};if(r.start=new DayPilot.Date(a.start),r.end=a.end?new DayPilot.Date(a.end):r.start.addMinutes(this.cellDuration),a.width)r.left=a.left||n,r.width=a.width||this.cellWidth,n+=r.width;else{var o=Math.floor(n+this.cellWidth),s=o-Math.floor(n);r.left=Math.floor(n),r.width=s,n+=this.cellWidth}r.breakBefore=t&&t.ticks!==r.start.ticks,t=r.end,this.itline.push(r)}}e&&this.Si()}else{if(this.timeHeader=[],"Manual"===this.scale){this.itline=DayPilot.list();for(var n=0,t=null,i=0;this.timeline&&i<this.timeline.length;i++){var a=this.timeline[i],r={};if(r.start=new DayPilot.Date(a.start),r.end=a.end?new DayPilot.Date(a.end):r.start.addMinutes(this.cellDuration),t&&r.start.ticks<t.ticks)throw new DayPilot.Exception("The timeline must be sequential");var l=a.width||this.cellWidth,o=Math.floor(n+l),s=o-Math.floor(n);r.left=Math.floor(n),r.width=s,n+=l,r.breakBefore=t&&t.ticks!==r.start.ticks,t=r.end,this.itline.push(r)}}else this.Qi();this.Ti()}},this.infinite={},this.infinite.shiftStart=function(e){p.Ui(e)},this.infinite.scrollTo=function(e){p.Vi(e)},this.Wi={};var p=this.Wi;p.ri=0,p.of=!1,p.Xi=function(){f.Yi().forEach(function(e,t){e.start=f.kb(),e.data=null,f.Zi(e.index,e.grid)})},p.$i=function(){return f.infiniteScrollingEnabled&&!f.I()},p.Vi=function(e){var e=new DayPilot.Date(e),t=e.addDays(-f.infiniteScrollingStepDays).getDatePart(),n=new DayPilot.Duration(t.getTime()-f.startDate.getDatePart().getTime()).totalDays();p.Ui(n,e)},p.Ui=function(e,t){var n;p.of=!0;var i=f.startDate,a=f.startDate.addDays(e);e>0&&(n=-f.getPixels(a).left),f.startDate=f.startDate.addDays(e),f.itline=DayPilot.list(),f.P.pixels=[],f._i={},f.Qi(),p.Xi(),e<0&&(n=f.getPixels(i).left),f.timeHeader=[],f.Ti(),f.Wh(),f.cellProperties={},f.Zh(),f.$h(),f.Ma(),f.pa(),f.Xh(),f.Yh(),f.Ua(),"undefined"!=typeof t?(f.scrollTo(new DayPilot.Date(t)),f.gi()):f.nav.scroll.scrollLeft+=n,f.bi(),f.Za(),p.of=!1},this.Qi=function(){!f.S&&p.$i()&&(this.startDate=this.startDate.addDays(-this.infiniteScrollingStepDays));for(var e="Days"!==this.viewType?this.startDate.addDays(this.days):this.startDate.addDays(1),t=this.startDate,n=this.aj(t),i=!1,a=0,r=null;n.ticks<=e.ticks&&n.ticks>t.ticks;){var o=t,s=n;f.showNonBusinessForceHours&&"Day"==f.scale&&(o=t.addHours(f.businessBeginsHour),s=t.addHours(f.businessEndsHour));var l=this.bj(o,s,!0);if(!l.cell.start||!l.cell.end)throw new DayPilot.Exception("Invalid timeline cell start/end: start and/or end not specified");if(l.cell.start=new DayPilot.Date(l.cell.start),l.cell.end=new DayPilot.Date(l.cell.end),l.cell.start>=l.cell.end)throw new DayPilot.Exception("Invalid timeline cell start/end: end before start");if(r&&r.ticks>l.cell.start.ticks)throw new DayPilot.Exception("Invalid timeline cell start/end: overlapping cells");i=!!(r&&r.ticks<l.cell.start.ticks);var d=l.cell.width||f.cellWidth;if(l.cell.visible){var c=Math.floor(a+d),u=c-Math.floor(a),h={};h.start=l.cell.start,h.end=l.cell.end,h.left=Math.floor(a),h.width=u,h.breakBefore=i,this.itline.push(h),a+=d,r=l.cell.end}t=n,n=this.aj(t)}},this.Si=function(){if(this.timeHeader)for(var e=0;e<this.timeHeader.length;e++)for(var t=this.timeHeader[e],n=0;n<t.length;n++){var i=t[n];i.left=this.getPixels(new DayPilot.Date(i.start)).left;var a=this.getPixels(new DayPilot.Date(i.end)).left,r=a-i.left;i.width=r}},this.Ti=function(){var e=this.timeHeaders;if(e||(e=[{"groupBy":this.cellGroupBy},{"groupBy":"Cell"}]),this.itline.isEmpty()){this.timeHeader=[];for(var t=0;t<e.length;t++)this.timeHeader[t]=[]}else for(var n=f.cj(),t=0;t<e.length;t++){var i=e[t].groupBy,a=e[t].format;"Default"===i&&(i=this.cellGroupBy);for(var r=[],o=this.kb();o.ticks<n.ticks;){var s={};if(s.start=o,s.end=this.dj(s.start,i),s.start.ticks===s.end.ticks)break;s.left=this.getPixels(s.start).left;var l=this.getPixels(s.end).left,d=l-s.left;if(s.width=d,s.colspan=Math.ceil(d/(1*this.cellWidth)),"string"==typeof a?s.text=s.start.toString(a,N.ej()):s.text=this.fj(s,i),d>0){if("function"==typeof this.onBeforeTimeHeaderRender){var c={};c.start=s.start,c.end=s.end,c.text=s.text,c.html=null,c.toolTip=f.ca(s.text),c.backColor=null,c.fontColor=null,c.level=this.timeHeader.length,c.cssClass=null;var u={};u.header=c,u.control=f,this.onBeforeTimeHeaderRender(u),s.innerHTML=f.ca(c.text,c.html),s.backColor=c.backColor,s.fontColor=c.fontColor,s.toolTip=c.toolTip,s.areas=c.areas,s.cssClass=c.cssClass}r.push(s)}o=s.end}this.timeHeader.push(r)}},this.bj=function(e,t){var n={};n.start=e,n.end=t,n.visible=!0,n.width=null;var i={};if(i.cell=n,"function"==typeof this.onIncludeTimeCell)return this.onIncludeTimeCell(i),i;if(this.showNonBusiness)return i;var a="Days"===f.viewType;return i.cell.visible=this.isBusiness({"start":e,"end":t},a),i},this.getPixels=function(e){var t=e.ticks,n=this.P.pixels[t];if(n)return n;var i=2218768416e5;if(0===this.itline.length||t<this.itline[0].start.ticks){var a={};return a.cut=!1,a.left=0,a.boxLeft=a.left,a.boxRight=a.left,a.i=null,a}for(var r=this.gj(e),o=DayPilot.Util.atLeast(r.i-1,0),s=o;s<this.itline.length;s++){var l=this.itline[s],d=l.start.ticks,c=l.end.ticks;if(d<t&&t<c){var u=t-d,a={};a.cut=!1,a.left=l.left+this.Ld(l,u),a.boxLeft=l.left,a.boxRight=l.left+l.width,a.i=s;break}if(d===t){var a={};a.cut=!1,a.left=l.left,a.boxLeft=a.left,a.boxRight=a.left+l.width,a.i=s;break}if(c===t){var a={};a.cut=!1,a.left=l.left+l.width,a.boxLeft=a.left,a.boxRight=a.left,a.i=s+1;break}if(t<d&&t>i){var a={};a.cut=!0,a.left=l.left,a.boxLeft=a.left,a.boxRight=a.left,a.i=s;break}i=c}if(!a){var h=this.itline[this.itline.length-1],a={};a.cut=!0,a.left=h.left+h.width,a.boxLeft=a.left,a.boxRight=a.left,a.i=null}return this.P.pixels[t]=a,a},this.getDate=function(e,t,n){var i=this.hj(e,n);if(!i)return null;var a=i.x,r=this.itline[a];if(!r)return null;var o=n&&!t?r.end:r.start;return t?o.addTime(this.ij(i.cell,i.offset)):o},this.hj=function(e,t){if(0===this.itline.length)return null;for(var n=0,i=0,a=0;a<this.itline.length;a++){var r=this.itline[a];if(n+=r.width||this.cellWidth,e<n||t&&e===n){var o={};return o.x=a,o.offset=e-i,o.cell=r,o}i=n}var r=f.itline.last(),o={};return o.x=this.itline.length-1,o.offset=r.width||this.cellWidth,o.cell=r,o},this.jj=function(e){return this.gj(e)},this.gj=function(e){var t=new DayPilot.Date(e),n=0,i=this.itline[0];if(t.ticks<i.start.ticks){var a={};return a.hidden=!0,a.previous=null,a.current=null,a.next=this.itline[0],a.i=-1,a}var r=this.itline.length-1,o=this.itline[r];if(t.ticks>o.end.ticks){var a={};return a.past=!0,a.previous=this.itline[this.itline.length-1],a.i=this.itline.length,a}if(t.ticks===o.end.ticks){var a={};return a.past=!1,a.current=this.itline[this.itline.length-1],a.i=this.itline.length-1,a}for(var s=function(){for(var e,i=f.itline;n<=r;)if(e=Math.floor((n+r)/2),i[e].start.ticks>t.ticks)r=e-1;else{if(!(i[e].end.ticks<t.ticks))return e;n=e+1}return n}(),l=s;l<this.itline.length;l++){var d=this.itline[l];if(d.start.ticks<=t.ticks&&t.ticks<d.end.ticks){var a={};return a.hidden=!1,a.current=d,a.i=l,a}if(t.ticks<d.start.ticks){var a={};return a.hidden=!0,a.previous=l>0?this.itline[l-1]:null,a.current=null,a.next=this.itline[l],a.i=l,a}}var a={};return a.past=!0,a.previous=this.itline[this.itline.length-1],a.i=this.itline.length,a},this.Ld=function(e,t){var n=e.width||this.cellWidth,i=e.end.ticks-e.start.ticks;return Math.floor(n*t/i)},this.ij=function(e,t){var n=e.end.ticks-e.start.ticks,i=e.width||this.cellWidth;return Math.floor(t/i*n)},this.Jg=function(e){DayPilot.Global.touch.start||o.preventEventClick||(f.kj={},f.pb(this,e))},this.eventClickPostBack=function(e,t){this.fa("EventClick",e,t)},this.eventClickCallBack=function(e,t){this.ha("EventClick",e,t)},this.pb=function(e,t){var n=e.event;if(n){if("undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),!n.client.doubleClickEnabled())return void f.qb(e,t);f.timeouts.click||(f.timeouts.click=[]);var i=function(e,t){return function(){f.qb(e,t)}};f.timeouts.click.push(window.setTimeout(i(e,t),f.doubleClickTimeout))}},this.lj=function(e){return f.itline[e]},this.qb=function(e,t){if("boolean"==typeof t)throw new DayPilot.Exception("Invalid _eventClickSingle parameters");var n=e.event;if(n){var i=t.ctrlKey,a=t.metaKey;if(n.client.clickEnabled())if(f.mj(t),f.cb()){var r={};if(r.e=n,r.div=e,r.originalEvent=t,r.ctrl=i,r.meta=a,r.shift=t.shiftKey,r.preventDefault=function(){this.preventDefault.value=!0},r.control=f,r.toJSON=function(){return DayPilot.Util.copyProps(r,{},["e","ctrl","meta","shift"])},"function"==typeof f.onEventClick&&(f.onEventClick(r),r.preventDefault.value))return;switch(f.eventClickHandling){case"PostBack":f.eventClickPostBack(n);break;case"CallBack":f.eventClickCallBack(n);break;case"Edit":f.rb(e);break;case"Select":f.sb(e,n,i,a);break;case"ContextMenu":var o=n.client.contextMenu();o?o.show(n):f.contextMenu&&f.contextMenu.show(n);break;case"Bubble":f.bubble&&f.bubble.showEvent(n);break;case"RectangleSelect":if("Disabled"!==N.nj())return R.start(),!1}"function"==typeof f.onEventClicked&&f.onEventClicked(r)}else switch(f.eventClickHandling){case"PostBack":f.eventClickPostBack(n);break;case"CallBack":f.eventClickCallBack(n);break;case"JavaScript":f.onEventClick(n);break;case"Edit":f.rb(e);break;case"Select":f.sb(e,n,i,a);break;case"ContextMenu":var o=n.client.contextMenu();o?o.show(n):f.contextMenu&&f.contextMenu.show(n);break;case"Bubble":f.bubble&&f.bubble.showEvent(n);break;case"RectangleSelect":if("Disabled"!==N.nj())return R.start(),!1}}},this.zb=function(e){if(f.cb()){var t={};if(t.e=e,t.preventDefault=function(){this.preventDefault.value=!0},t.control=f,t.toJSON=function(){return DayPilot.Util.copyProps(t,{},["e"])},"function"==typeof f.onEventDelete&&(f.onEventDelete(t),t.preventDefault.value))return;switch(f.eventDeleteHandling){case"PostBack":f.eventDeletePostBack(e);break;case"CallBack":f.eventDeleteCallBack(e);break;case"Update":f.events.remove(e),"undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive()}"function"==typeof f.onEventDeleted&&f.onEventDeleted(t)}else switch(f.eventDeleteHandling){case"PostBack":f.eventDeletePostBack(e);break;case"CallBack":f.eventDeleteCallBack(e);break;case"JavaScript":f.onEventDelete(e)}},this.eventDeletePostBack=function(e,t){this.fa("EventDelete",e,t)},this.eventDeleteCallBack=function(e,t){this.ha("EventDelete",e,t)},this.setHScrollPosition=function(e){this.nav.scroll.scrollLeft=e},this.getScrollX=function(){return this.nav.scroll.scrollLeft},this.getHScrollPosition=this.getScrollX,this.getScrollY=function(){return this.nav.scroll.scrollTop},this.sb=function(e,t,n,i){f.Tb(e,t,n,i)},this.eventSelectPostBack=function(e,t,n){var i={};i.e=e,i.change=t,this.fa("EventSelect",i,n)},this.eventSelectCallBack=function(e,t,n){var i={};i.e=e,i.change=t,this.ha("EventSelect",i,n)},this.Tb=function(e,t,n,i){var a=f.multiselect,r=a.isSelected(t);if(n||i||!r||1!==a.Ub.length)if(f.cb()){a.tc=a.events();var o={};if(o.e=t,o.selected=r,o.ctrl=n,o.meta=i,o.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onEventSelect&&(f.onEventSelect(o),o.preventDefault.value))return;switch(f.eventSelectHandling){case"PostBack":f.eventSelectPostBack(t,s);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",window.Wb=[],WebForm_InitCallback()),f.eventSelectCallBack(t,s);break;case"Update":a.Xb(e,n,i)}"function"==typeof f.onEventSelected&&(o.change=a.isSelected(t)?"selected":"deselected",o.selected=a.isSelected(t),f.onEventSelected(o))}else{a.tc=a.events(),a.Xb(e,n,i);var s=a.isSelected(t)?"selected":"deselected";switch(f.eventSelectHandling){case"PostBack":f.eventSelectPostBack(t,s);break;case"CallBack":"undefined"!=typeof WebForm_InitCallback&&(window.Vb="",
window.Wb=[],WebForm_InitCallback()),f.eventSelectCallBack(t,s);break;case"JavaScript":f.onEventSelect(t,s)}}},this.eventRightClickPostBack=function(e,t){this.fa("EventRightClick",e,t)},this.eventRightClickCallBack=function(e,t){this.ha("EventRightClick",e,t)},this.ub=function(e){if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){var t=this.event;if(e.cancelBubble=!0,!this.event.client.rightClickEnabled())return!1;if(f.mj(e),f.cb()){var n={};if(n.e=t,n.div=this,n.originalEvent=e,n.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onEventRightClick&&(f.onEventRightClick(n),n.preventDefault.value))return!1;switch(f.eventRightClickHandling){case"PostBack":f.eventRightClickPostBack(t);break;case"CallBack":f.eventRightClickCallBack(t);break;case"ContextMenu":var i=t.client.contextMenu();i?i.show(t):f.contextMenu&&f.contextMenu.show(this.event);break;case"Bubble":f.bubble&&f.bubble.showEvent(t)}"function"==typeof f.onEventRightClicked&&f.onEventRightClicked(n)}else switch(f.eventRightClickHandling){case"PostBack":f.eventRightClickPostBack(t);break;case"CallBack":f.eventRightClickCallBack(t);break;case"JavaScript":f.onEventRightClick(t);break;case"ContextMenu":var i=t.client.contextMenu();i?i.show(t):f.contextMenu&&f.contextMenu.show(this.event);break;case"Bubble":f.bubble&&f.bubble.showEvent(t)}return!1}},this.eventDoubleClickPostBack=function(e,t){this.fa("EventDoubleClick",e,t)},this.eventDoubleClickCallBack=function(e,t){this.ha("EventDoubleClick",e,t)},this.tb=function(e){if("undefined"!=typeof DayPilot.Bubble&&DayPilot.Bubble.hideActive(),f.timeouts.click){for(var t in f.timeouts.click)window.clearTimeout(f.timeouts.click[t]);f.timeouts.click=null}var n=this.event;if(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,f.cb()){var i={};if(i.e=n,i.originalEvent=e,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onEventDoubleClick&&(f.onEventDoubleClick(i),i.preventDefault.value))return;switch(f.eventDoubleClickHandling){case"PostBack":f.eventDoubleClickPostBack(n);break;case"CallBack":f.eventDoubleClickCallBack(n);break;case"Edit":f.rb(this);break;case"Select":f.sb(div,n,e.ctrlKey,e.metaKey);break;case"Bubble":f.bubble&&f.bubble.showEvent(n);break;case"ContextMenu":var a=n.client.contextMenu();a?a.show(n):f.contextMenu&&f.contextMenu.show(n)}"function"==typeof f.onEventDoubleClicked&&f.onEventDoubleClicked(i)}else switch(f.eventDoubleClickHandling){case"PostBack":f.eventDoubleClickPostBack(n);break;case"CallBack":f.eventDoubleClickCallBack(n);break;case"JavaScript":f.onEventDoubleClick(n);break;case"Edit":f.rb(this);break;case"Select":f.sb(div,n,e.ctrlKey,e.metaKey);break;case"Bubble":f.bubble&&f.bubble.showEvent(n);break;case"ContextMenu":var a=n.client.contextMenu();a?a.show(n):f.contextMenu&&f.contextMenu.show(n)}},this.eventResizePostBack=function(e,t,n,i){this.Gb("PostBack",e,t,n,i)},this.eventResizeCallBack=function(e,t,n,i){this.Gb("CallBack",e,t,n,i)},this.Gb=function(e,t,n,i,a){var r=t&&!!t.preventDefault,o={};if(r){var s=t;o.e=s.e,o.newStart=s.newStart,o.newEnd=s.newEnd,o.multiresize=[],s.multiresize.forEach(function(e){var t={};t.e=e.event,t.newStart=e.start,t.newEnd=e.end,o.multiresize.push(t)})}else o.e=t,o.newStart=n,o.newEnd=i;this.Ab(e,"EventResize",o,a)},this.Eb=function(e,t,n,i){if("Disabled"!==this.eventResizeHandling){n=f.Yg(n);var a={};a.e=e,a.async=!1,a.loaded=function(){o()},a.newStart=t,a.newEnd=n,a.what=i,a.preventDefault=function(){this.preventDefault.value=!0},a.multiresize=DayPilot.list(x.list),a.control=f,a.toJSON=function(){return DayPilot.Util.copyProps(a,{},["e","async","newStart","newEnd","multiresize"])};var r={};if(r.event=e,r.start=t,r.end=n,a.multiresize.splice(0,0,r),f.cb()){var o=function(){if(A.hg(),!a.preventDefault.value){switch(a.loaded={},t=a.newStart,n=a.newEnd,f.eventResizeHandling){case"PostBack":f.eventResizePostBack(a);break;case"CallBack":f.eventResizeCallBack(a);break;case"Notify":f.eventResizeNotify(a);break;case"Update":f.oj(a)}"function"==typeof f.onEventResized&&f.onEventResized(a)}};"function"==typeof f.onEventResize&&f.onEventResize(a),a.async?f.blockOnCallBack&&A.Ya():o()}else switch(f.eventResizeHandling){case"PostBack":f.eventResizePostBack(a);break;case"CallBack":f.eventResizeCallBack(a);break;case"JavaScript":f.onEventResize(e,t,n);break;case"Notify":f.eventResizeNotify(a);break;case"Update":f.oj(a)}}},this.eventMovePostBack=function(e,t,n,i,a,r){this.Lb("PostBack",e,t,n,i,a,r)},this.eventMoveCallBack=function(e,t,n,i,a,r){this.Lb("CallBack",e,t,n,i,a,r)},this.Lb=function(e,t,n,i,a,r,o){var s=t&&!!t.preventDefault,l={};if(s){var d=t;l.e=d.e,l.newStart=d.newStart,l.newEnd=d.newEnd,l.newResource=d.newResource,l.position=d.position,l.multimove=[],d.multimove.forEach(function(e){var t={};if(t.e=e.event,t.newStart=e.start,t.newEnd=e.end,t.newResource=e.event.resource(),t.e===d.e||t.e.data.id==d.e.data.id)t.newResource=d.newResource;else if(k.rowoffset){var n=e.event.part.dayIndex+k.rowoffset;t.newResource=f.rowlist[n].id}l.multimove.push(t)})}else l.e=t,l.newStart=n,l.newEnd=i,l.newResource=a,l.position=o;this.Ab(e,"EventMove",l,r)},this.pj=function(e,t,n){var i={};i.start=t.start,i.end=t.end,i.resource=t.resource,i.multirange=[],t.multirange.forEach(function(e){var t={};t.start=e.start,t.end=e.end,t.resource=e.resource,i.multirange.push(t)}),this.Ab(e,"TimeRangeSelected",i,n)},this.Ab=function(e,t,n,i){if("PostBack"===e)f.fa(t,n,i);else if("CallBack"===e)f.ha(t,n,i,"CallBack");else if("Immediate"===e)f.ha(t,n,i,"Notify");else if("Queue"===e)f.queue.add(new DayPilot.Action(this,t,n,i));else{if("Notify"!==e)throw new DayPilot.Exception("Invalid event invocation type");"Notify"===N.qj()?f.ha(t,n,i,"Notify"):f.queue.add(new DayPilot.Action(f,t,n,i))}},this.eventMoveNotify=function(e,t,n,i,a,r){if(e&&!!e.preventDefault){var o=e;o.old=new DayPilot.Event(o.e.copy(),f),o.multimove.forEach(function(e){e.old=new DayPilot.Event(e.event.copy(),f)}),f.oj(o),o.e=o.old,delete o.old,o.multimove.forEach(function(e){e.event=e.old,delete e.old})}else{e=new DayPilot.Event(e.copy(),f);var s=f.events.rj(e.data);e.start(t),e.end(n),e.resource(i),e.commit(),s=s.concat(f.events.sj(e.data)),f.tj(s),f.uj(),f.vj(s)}this.Lb("Notify",e,t,n,i,a,r)},this.eventResizeNotify=function(e,t,n,i){if(e&&!!e.preventDefault){var a=e;a.old=new DayPilot.Event(a.e.copy(),f),a.multiresize.forEach(function(e){e.old=new DayPilot.Event(e.event.copy(),f)}),f.oj(a),a.e=a.old,delete a.old,a.multiresize.forEach(function(e){e.event=e.old,delete e.old})}else{e=new DayPilot.Event(e.copy(),f);var r=f.events.rj(e.data);e.start(t),e.end(n),e.commit(),r=r.concat(f.events.sj(e.data)),f.tj(r),f.uj(),f.vj(r)}this.Gb("Notify",e,t,n,i)},this.zoom={},this.zoom.active=-1,this.zoom.setActive=function(e,t){var n;if("number"==typeof e)n=f.zoomLevels[e];else{if("string"!=typeof e)throw new DayPilot.Exception("Unexpected parameter type (string or number required): "+typeof e);var i=f.zoom.wj(e);n=f.zoomLevels[i]}if(!n)throw new DayPilot.Exception("Zoom level not found: "+e);if(e!==f.zoom.active){var a=f.zoom.zh(t);f.zoom.xj(e,a),f.S&&f.update(),a&&f.scrollTo(a,null,t||f.zoomPosition)}},this.zoom.wj=function(e){return DayPilot.list(f.zoomLevels).findIndex(function(t){return t.id===e})},this.zoom.zh=function(e){e=e||f.zoomPosition||"left";var t=null;if(!f.nav.scroll)return null;var n=f.getViewPort();switch(e){case"left":t=n.start;break;case"middle":t=n.start&&n.start.addTime((f.getViewPort().end.getTime()-f.getViewPort().start.getTime())/2);break;case"right":t=n.end}return t},this.zoom.xj=function(e,t){var n=f.zoomLevels.length-1;e>n&&(e=n),e<0&&(e=0),f.zoom.active=e;var i=f.zoomLevels[e],a={};return a.date=t||new DayPilot.Date(f.startDate),a.level=i,DayPilot.Util.ownPropsAsArray(i.properties).forEach(function(e){if(0!==e.key.indexOf("on"))return"function"==typeof e.val?void(f[e.key]=e.val(a)):void(f[e.key]=e.val)}),a},this.multiselect={},this.multiselect.Ub=[],this.multiselect.sc=[],this.multiselect.tc=[],this.multiselect._h=function(e){f.multiselect.Ub=DayPilot.list(e).map(function(e){return new DayPilot.Event(e,f)})},this.multiselect.uc=function(){var e=f.multiselect;return JSON.stringify(e.events())},this.multiselect.events=function(){var e=f.multiselect,t=DayPilot.list();t.ignoreToJSON=!0;for(var n=0;n<e.Ub.length;n++)t.push(e.Ub[n]);return t},this.multiselect.get=function(){return f.multiselect.events()},this.multiselect.vc=function(){},this.multiselect.Xb=function(e,t,n){var i=f.multiselect;if(i.isSelected(e.event))if(f.allowMultiSelect)if(t||n)i.remove(e.event,!0);else{var a=i.Ub.length;i.clear(),a>1&&i.add(e.event,!0)}else i.clear();else f.allowMultiSelect&&(t||n)?i.add(e.event,!0):(i.clear(),i.add(e.event,!0));i.Ic(e),i.vc()},this.multiselect.wc=function(e){var t=f.multiselect;return t.xc(e,t.Ub)},this.multiselect.yc=function(){for(var e=f.multiselect,t=[],n=0;n<e.Ub.length;n++){var i=e.Ub[n];t.push(i.value())}alert(t.join("\n"))},this.multiselect.add=function(e,t){var n=f.multiselect;n.zc(e)===-1&&n.Ub.push(e),t||n.yj(e)},this.multiselect.remove=function(e,t){var n=f.multiselect,i=n.zc(e);i!==-1&&n.Ub.splice(i,1),t||n.yj(e)},this.multiselect.clear=function(e){var t=f.multiselect;t.Ub=[],e||t.redraw()},this.multiselect.redraw=function(){var e=f.multiselect;e.sc=[];for(var t=0;t<f.elements.events.length;t++){var n=f.elements.events[t];n.event&&n.event.isEvent&&(e.isSelected(n.event)?e.Ac(n):e.Bc(n))}},this.multiselect.Ic=function(e){if(e){var t=f.multiselect;t.isSelected(e.event)?t.Ac(e):t.Bc(e)}},this.multiselect.yj=function(e){var t=f.multiselect,n=f.ze(e);t.Ic(n)},this.multiselect.Ac=function(e){var t=f.multiselect,n=f.G("_selected"),e=t.Cc(e);DayPilot.Util.addClass(e,n),t.sc.push(e)},this.multiselect.Cc=function(e){return e},this.multiselect.Dc=function(){for(var e=f.multiselect,t=0;t<e.sc.length;t++){var n=e.sc[t];e.Bc(n,!0)}e.sc=[]},this.multiselect.Bc=function(e,t){var n=f.multiselect,i=f.G("_selected");if(DayPilot.Util.removeClass(e,i),!t){var a=DayPilot.indexOf(n.sc,e);a!==-1&&n.sc.splice(a,1)}},this.multiselect.isSelected=function(e){return!!e&&(!!e.isEvent&&f.multiselect.xc(e,f.multiselect.Ub))},this.multiselect.zc=function(e){for(var t=e.data,n=0;n<f.multiselect.Ub.length;n++){var i=f.multiselect.Ub[n];if(f.Ec(i.data,t))return n}return-1},this.multiselect.xc=function(e,t){if(!t)return!1;for(var n=0;n<t.length;n++){var i=t[n];if(f.Ec(e,i))return!0}return!1},this.multiselect.startRectangle=function(){R.start()},this.zj=function(){this.$h(),this.bi()},this.Aj=function(){f.Bj(),f.Uh(),f.Yh(),f.Cj(),f.progressiveRowRendering&&f.Dj()},this.Ic=function(e){e=e||{};var t=!e.eventsOnly;window.clearTimeout(f.Ej),t&&(this.I()||(f.timeHeader=null,f.cellProperties={}),f._i={},f.Rh(),f.Sh(),e&&e.dontLoadResources||f.Th(),f.Fj!==f.timeHeaderPosition&&f.Gj(),f.events.Hj(),f.ea.wh(),f.clearSelection()),this.Ma(),this.Ij(),f.Xh(),f.Uh(),t&&(f.Ce(),f.Vh(),f.Wh(),f.fi(f.selectedRows),f.Jj()),f.Yh(),f.Cj(),f.Na(),g.Kj(),this.pa(),this.Zh(),this.ba(),this.La(),f.Ua(),this.ai(),this.zj(),e.immediateEvents||e.eventsOnly?f.Za():setTimeout(function(){f.Za()},100),this.visible?f.Ph!=f.visible&&this.show():this.hide(),this.Ph=this.visible,this.ei(),f.Ae.scope||f.ii.enabled?f.S?f.gi():p.$i()||f.gi():f.gi(),this.Lj(),this.bb()},this.Lj=function(){if("function"==typeof f.onAfterUpdate){var e={};f.onAfterUpdate(e)}},this.update=function(e){if(!f.S)throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that hasn't been initialized.");if(f.T)throw new DayPilot.Exception("You are trying to update a DayPilot.Scheduler object that has been disposed already. Calling .dispose() destroys the object and makes it unusable.");m.request(e)};var m={};m.timeout=null,m.options=null,m.enabled=!1,m.request=function(e){m.enabled?(clearTimeout(m.timeout),m.Mj(e),m.timeout=setTimeout(m.doit)):(m.Mj(e),m.doit())},m.Mj=function(e){if(e){m.options||(m.options={});for(var t in e)m.options[t]=e[t]}},m.doit=function(){var e=m.options;return m.options=null,f.S?DayPilot.Util.isOnlyProperty(e,"events")?(f.events.list=e.events,f.Ic({"eventsOnly":!0}),void P.Nj()):DayPilot.Util.isOnlyProperty(e,"separators")?(f.separators=e.separators,void f.zj()):DayPilot.Util.isOnlyProperty(e,"rowHeaderColumns")&&!f.Oj()?(f.rowHeaderColumns=e.rowHeaderColumns,void f.Aj()):(f.De(e),f.Ic({"immediateEvents":!0}),f.Me(),P.Nj(),void f.Ha(null,!1)):void f.De(e)},this.Pj=function(e){e.forEach(function(e){f.Qj(e.index,e.grid)})},this.Rj=function(e){return e&&0!==e.length?e[0].isRow?e:e.map(function(e){return f.rowlist[e]}):[]},this.vj=function(e,t,n){e=DayPilot.ua(e),e=f.Rj(e),f.Pj(e),this.Sj?(this.Xh(),this.Yh(),this.Zh(),this.$h(),e.forEach(function(e){f.Tj(e.index,e.grid)}),e.forEach(function(e){f.Uj(e.index,e.grid)}),this.ai(),this.bi(),this.Vj()):(e.forEach(function(e){t||f.Tj(e.index,e.grid),f.Uj(e.index,e.grid)}),e.forEach(function(e){f.Wj(e.index,e.grid)}),f.ai()),f.vi(),g.Xj(),f.multiselect.redraw(),n&&n(),this.ba()},this.Yg=function(e){return"DateTime"===f.eventEndSpec?e:e.getDatePart().ticks===e.ticks?e.addDays(-1):e.getDatePart()},this.zg=function(e){return"DateTime"===f.eventEndSpec?e:e.getDatePart().addDays(1)},this.$g=function(e){return"DateTime"===f.eventEndSpec?e:e.getDatePart()},this.Ib=function(e,t,n,i,a,r,o){if(f.Ca=null,"Disabled"!==f.eventMoveHandling){n=f.Yg(n);var s={};s.e=e,s.newStart=t,s.newEnd=n,s.newResource=i,s.external=a,s.ctrl=!1,s.meta=!1,s.shift=!1,r&&(s.shift=r.shiftKey,s.ctrl=r.ctrlKey,s.meta=r.metaKey),s.multimove=DayPilot.list(k.list),s.areaData=DayPilot.Global.movingAreaData,s.control=f,s.toJSON=function(){return DayPilot.Util.copyProps(s,{},["e","newStart","newEnd","newResource","external","ctrl","meta","shift","multimove","areaData"])};var l={};if(l.event=e,l.start=t,l.end=n,l.overlapping=!1,l.resource=i,s.multimove.splice(0,0,l),s.position=o,s.preventDefault=function(){this.preventDefault.value=!0},f.cb()){var d=function(){if(s.loaded=function(){},A.hg(),s.preventDefault.value)return void f.Jb();switch(t=s.newStart,n=s.newEnd,f.eventMoveHandling){case"PostBack":f.eventMovePostBack(s);break;case"CallBack":f.eventMoveCallBack(s);break;case"Notify":f.eventMoveNotify(s);break;case"Update":f.oj(s)}f.Jb(),"function"==typeof f.onEventMoved&&f.onEventMoved(s)};s.async=!1,s.loaded=function(){d()},"function"==typeof f.onEventMove&&f.onEventMove(s),s.async?f.blockOnCallBack&&A.Ya():d()}else{switch(f.eventMoveHandling){case"PostBack":f.eventMovePostBack(s);break;case"CallBack":f.eventMoveCallBack(s);break;case"JavaScript":f.onEventMove(e,t,n,i,a,!!r&&r.ctrlKey,!!r&&r.shiftKey,o);break;case"Notify":f.eventMoveNotify(s);break;case"Update":f.oj(s)}f.Jb()}}},this.oj=function(e){var t=e.e,n=e.newStart,i=e.newEnd,a=e.newResource,r=e.external;t.start(n),t.end(i),t.resource(a),r?(t.commit(),f.events.add(t)):f.events.update(t),e.multimove&&!e.multimove.isEmpty()&&e.multimove.forEach(function(e){e.event!==t&&(e.event.start(e.start),e.event.end(e.end),e.event.resource(e.resource),e.event.commit(),f.events.update(e.event))}),e.multiresize&&!e.multiresize.isEmpty()&&e.multiresize.forEach(function(e){e.event!==t&&(e.event.start(e.start),e.event.end(e.end),e.event.commit(),f.events.update(e.event))}),f.events.Yj(),f.Kb()},this.Mb=function(e,t){var n=f.Nb(t),i={};i.args=e,i.guid=n,f.ha("Bubble",i)},this.Nb=function(e){var t=DayPilot.guid();return this.bubbles||(this.bubbles=[]),this.bubbles[t]=e,t},this.eventMenuClickPostBack=function(e,t,n){var i={};i.e=e,i.command=t,this.fa("EventMenuClick",i,n)},this.eventMenuClickCallBack=function(e,t,n){var i={};i.e=e,i.command=t,this.ha("EventMenuClick",i,n)},this.Ob=function(e,t,n){switch(n){case"PostBack":f.eventMenuClickPostBack(t,e);break;case"CallBack":f.eventMenuClickCallBack(t,e)}},this.timeRangeSelectedPostBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.fa("TimeRangeSelected",a,i)},this.timeRangeSelectedCallBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.ha("TimeRangeSelected",a,i)},this.Zj=function(e){if(e){if(e.disabled)return void f.clearSelection();if(e.args)f.Qb(e.args.start,e.args.end,e.args.resource);else{var t=f.$j(e);if(!t)return;f.Qb(t.start,t.end,t.resource)}}},this.Qb=function(e,t,n){if("Disabled"!==f.timeRangeSelectedHandling){var i=t;t=f.Yg(i);var a={};if(a.control=f,a.start=e,a.end=t,a.resource=n,a.preventDefault=function(){this.preventDefault.value=!0},a.multirange=DayPilot.list(B.list).map(function(e){return f.$j(e)}),a.multirange.isEmpty()&&a.multirange.push({"start":a.start,"end":a.end,"resource":a.resource}),a.toJSON=function(){return DayPilot.Util.copyProps(a,{},["start","end","resource","multirange"])},f.cb()){if("function"==typeof f.onTimeRangeSelect){if(f.onTimeRangeSelect(a),a.preventDefault.value)return;e=a.start,t=a.end}switch(t=f.zg(t),f._j(f.rangeHold,e,t,a.multirange),f.ak(f.rangeHold),f.timeRangeSelectedHandling){case"PostBack":f.pj("PostBack",a);break;case"CallBack":f.pj("CallBack",a)}"function"==typeof f.onTimeRangeSelected&&f.onTimeRangeSelected(a)}else switch(f.timeRangeSelectedHandling){case"PostBack":f.pj("PostBack",a);break;case"CallBack":f.pj("CallBack",a);break;case"JavaScript":f.onTimeRangeSelected(e,t,n,a.multirange);break;case"Hold":}}},this._j=function(e,t,n,i){if(e&&!(i&&i.length>1)){var a,r,o=n,s=0;if("Days"===f.viewType){s=f.ki(t).start.getTime()-f.kb().getTime()}t.getTime()<f.itline[0].start.getTime()?(e.start.x=0,e.start.time=f.itline[0].start.getTime()):(a=f.jj(t.addTime(-s)),r=a.current||a.previous,e.start.x=DayPilot.indexOf(f.itline,r),e.start.time=t),a=f.jj(o.addMilliseconds(-1).addTime(-s)),a.past?(e.end.x=f.itline.length-1,e.end.time=f.itline[f.itline.length-1].end.getTime()):(r=a.current||a.next,e.end.x=DayPilot.indexOf(f.itline,r),e.end.time=n)}},this.ki=function(e){var t=e.getDatePart();return DayPilot.list(f.rowlist).find(function(e){return e.start.getDatePart()===t})},this.timeRangeDoubleClickPostBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.fa("TimeRangeDoubleClick",a,i)},this.timeRangeDoubleClickCallBack=function(e,t,n,i){var a={};a.start=e,a.end=t,a.resource=n,this.ha("TimeRangeDoubleClick",a,i)},this.Rb=function(e,t,n){if(t=f.Yg(t),f.cb()){var i={};if(i.start=e,i.end=t,i.resource=n,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onTimeRangeDoubleClick&&(f.onTimeRangeDoubleClick(i),i.preventDefault.value))return;switch(f.timeRangeDoubleClickHandling){case"PostBack":f.timeRangeDoubleClickPostBack(e,t,n);break;case"CallBack":f.timeRangeDoubleClickCallBack(e,t,n)}"function"==typeof f.onTimeRangeDoubleClicked&&f.onTimeRangeDoubleClicked(i)}else switch(f.timeRangeDoubleClickHandling){case"PostBack":f.timeRangeDoubleClickPostBack(e,t,n);break;case"CallBack":f.timeRangeDoubleClickCallBack(e,t,n);break;case"JavaScript":f.onTimeRangeDoubleClick(e,t,n)}},this.timeRangeMenuClickPostBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.fa("TimeRangeMenuClick",i,n)},this.timeRangeMenuClickCallBack=function(e,t,n){var i={};i.selection=e,i.command=t,this.ha("TimeRangeMenuClick",i,n)},this.Pb=function(e,t,n){switch(n){case"PostBack":f.timeRangeMenuClickPostBack(t,e);break;case"CallBack":f.timeRangeMenuClickCallBack(t,e)}},this.linkMenuClickPostBack=function(e,t,n){var i={};i.link=e,i.command=t,this.fa("LinkMenuClick",i,n)},this.linkMenuClickCallBack=function(e,t,n){var i={};i.link=e,i.command=t,this.ha("LinkMenuClick",i,n)},this.bk=function(e,t,n){switch(n){case"PostBack":f.linkMenuClickPostBack(t,e);break;case"CallBack":f.linkMenuClickCallBack(t,e)}},this.rowMenuClickPostBack=function(e,t,n){var i={};i.resource=e,i.command=t,this.fa("RowMenuClick",i,n)},this.resourceHeaderMenuClickPostBack=this.rowMenuClickPostBack,this.rowMenuClickCallBack=function(e,t,n){var i={};i.resource=e,i.command=t,this.ha("RowMenuClick",i,n)},this.resourceHeaderMenuClickCallBack=this.rowMenuClickCallBack,this.ck=function(e,t,n){switch(n){case"PostBack":f.rowMenuClickPostBack(t,e);break;case"CallBack":f.rowMenuClickCallBack(t,e)}},this.dk=function(e,t){var n=f.ek(e);n.data.name=t,n.data.html=f.ca(t),f.rows.update(n)},this.fk=function(e,t){if(t){var n={};if(n.text=t,n.preventDefault=function(){this.preventDefault.value=!0},"function"!=typeof f.onRowCreate||(f.onRowCreate(n),!n.preventDefault.value)){switch(f.rowCreateHandling){case"CallBack":f.rowCreateCallBack(n.text);break;case"PostBack":f.rowCreatePostBack(n.text)}"function"==typeof f.onRowCreated&&f.onRowCreated(n)}}},this.gk=function(e,t,n){if(e.isNewRow)return void(n||f.fk(e,t));var i=DayPilot.indexOf(f.rowlist,e),a=f.ek(e,i);if(f.cb()){var r={};r.resource=a,r.row=a,r.newText=t,r.canceled=n,r.preventDefault=function(){this.preventDefault.value=!0},r.async=!1,r.loaded=function(){o()};var o=function(){if(!n){switch(f.rowEditHandling){case"PostBack":f.rowEditPostBack(a,t);break;case"CallBack":f.rowEditCallBack(a,t);break;case"Update":f.dk(e,t)}"function"==typeof f.onRowEdited&&f.onRowEdited(r)}};if("function"==typeof f.onRowEdit&&(f.onRowEdit(r),r.preventDefault.value))return;r.async||o()}else switch(f.rowEditHandling){case"PostBack":f.rowEditPostBack(a,t);break;case"CallBack":f.rowEditCallBack(a,t);break;case"JavaScript":f.onrowEdit(a,t)}},this.rowCreatePostBack=function(e,t){var n={};n.text=e,this.fa("RowCreate",n,t)},this.rowCreateCallBack=function(e,t){var n={};n.text=e,this.ha("RowCreate",n,t)},this.rowEditPostBack=function(e,t,n){var i={};i.resource=e,i.newText=t,this.fa("RowEdit",i,n)},this.rowEditCallBack=function(e,t,n){var i={};i.resource=e,i.newText=t,this.ha("RowEdit",i,n)},this.rowMovePostBack=function(e,t,n,i){var a={};a.source=e,a.target=t,a.position=n,this.fa("RowMove",a,i)},this.rowMoveCallBack=function(e,t,n,i){var a={};a.source=e,a.target=t,a.position=n,this.ha("RowMove",a,i)},this.rowMoveNotify=function(e,t,n,i){var a={};a.source=e,a.target=t,a.position=n,this.ha("RowMove",a,i,"Notify")},this.rowClickPostBack=function(e,t){var n={};n.resource=e,this.fa("RowClick",n,t)},this.resourceHeaderClickPostBack=this.rowClickPostBack,this.rowClickCallBack=function(e,t){var n={};n.resource=e,this.ha("RowClick",n,t)},this.resourceHeaderClickCallBack=this.rowClickCallBack,this.hk=function(e,t){if("Disabled"===f.rowDoubleClickHandling)return void f.ik(e,t);f.timeouts.resClick||(f.timeouts.resClick=[]);var n=function(e,t){return function(){f.ik(e,t)}};f.timeouts.resClick.push(window.setTimeout(n(e,t),f.doubleClickTimeout))},this.ik=function(e,t){var n=f.resourceHeaderClickHandling||f.rowClickHandling;if(f.cb()){var i={};if(i.resource=e,i.row=e,i.ctrl=t.ctrlKey,i.shift=t.shiftKey,i.meta=t.metaKey,i.originalEvent=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onRowClick&&(f.onRowClick(i),i.preventDefault.value))return;if("function"==typeof f.onResourceHeaderClick&&(f.onResourceHeaderClick(i),i.preventDefault.value))return;switch(n){case"PostBack":f.rowClickPostBack(e);break;case"CallBack":f.rowClickCallBack(e);break;case"Select":f.jk(e.$.row,t.ctrlKey,t.shiftKey,t.metaKey);break;case"Edit":f.kk.edit(e.$.row)}"function"==typeof f.onRowClicked&&f.onRowClicked(i),"function"==typeof f.onResourceHeaderClicked&&f.onResourceHeaderClicked(i)}else switch(n){case"PostBack":f.rowClickPostBack(e);break;case"CallBack":f.rowClickCallBack(e);break;case"JavaScript":f.onRowClick(e);break;case"Select":f.jk(e.$.row,t.ctrlKey,t.shiftKey);break;case"Edit":f.kk.edit(e.$.row)}},this.timeHeaderClickPostBack=function(e,t){var n={};n.header=e,this.fa("TimeHeaderClick",n,t)},this.timeHeaderClickCallBack=function(e,t){var n={};n.header=e,this.ha("TimeHeaderClick",n,t)},this.lk=function(e){if(f.cb()){var t={};if(t.header=e,t.control=f,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onTimeHeaderClick&&(f.onTimeHeaderClick(t),t.preventDefault.value))return;switch(this.timeHeaderClickHandling){case"PostBack":f.timeHeaderClickPostBack(e);break;case"CallBack":f.timeHeaderClickCallBack(e)}"function"==typeof f.onTimeHeaderClicked&&f.onTimeHeaderClicked(t)}else switch(this.timeHeaderClickHandling){case"PostBack":f.timeHeaderClickPostBack(e);break;case"CallBack":f.timeHeaderClickCallBack(e);break;case"JavaScript":f.onTimeHeaderClick(e)}},this.resourceCollapsePostBack=function(e,t){var n={};n.resource=e,this.fa("ResourceCollapse",n,t)},this.resourceCollapseCallBack=function(e,t){var n={};n.resource=e,this.ha("ResourceCollapse",n,t)},this.mk=function(e){if(f.cb()){var t={};if(t.resource=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onResourceCollapse&&(f.onResourceCollapse(t),t.preventDefault.value))return;switch(this.resourceCollapseHandling){case"PostBack":f.resourceCollapsePostBack(e);break;case"CallBack":f.resourceCollapseCallBack(e)}}else switch(this.resourceCollapseHandling){case"PostBack":f.resourceCollapsePostBack(e);break;case"CallBack":f.resourceCollapseCallBack(e);break;case"JavaScript":f.onResourceCollapse(e)}},this.resourceExpandPostBack=function(e,t){var n={};n.resource=e,this.fa("ResourceExpand",n,t)},this.resourceExpandCallBack=function(e,t){var n={};n.resource=e,this.ha("ResourceExpand",n,t)},this.nk=function(e){if(f.cb()){var t={};if(t.resource=e,t.row=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onResourceExpand&&(f.onResourceExpand(t),t.preventDefault.value))return;switch(this.resourceExpandHandling){case"PostBack":f.resourceExpandPostBack(e);break;case"CallBack":f.resourceExpandCallBack(e)}}else switch(this.resourceExpandHandling){case"PostBack":f.resourceExpandPostBack(e);break;case"CallBack":f.resourceExpandCallBack(e);break;case"JavaScript":f.onResourceExpand(e)}},this.eventEditPostBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.fa("EventEdit",i,n)},this.eventEditCallBack=function(e,t,n){var i={};i.e=e,i.newText=t,this.ha("EventEdit",i,n)},this.eventEditNotify=function(e,t,n,i){var a=new DayPilot.Event(e.copy(),this);e.text(t),f.events.update(e,null,i);var r={};r.e=a,r.newText=t,this.ha("EventEdit",r,n,"Notify")},this.Sb=function(e,t,n){if(P.ok(),f.cb()){var i={};i.e=e,i.newText=t,i.canceled=n,i.preventDefault=function(){this.preventDefault.value=!0},i.async=!1,i.loaded=function(){a()};var a=function(){if(i.loaded=function(){},!n)switch(f.eventEditHandling){case"PostBack":f.eventEditPostBack(e,i.newText);break;case"CallBack":f.eventEditCallBack(e,i.newText);break;case"Update":e.text(i.newText),f.events.update(e,null,{"inplace":!0})}"function"==typeof f.onEventEdited&&f.onEventEdited(i)};if("function"==typeof f.onEventEdit&&(f.onEventEdit(i),i.preventDefault.value))return;i.async||a()}else switch(f.eventEditHandling){case"PostBack":f.eventEditPostBack(e,i.newText);break;case"CallBack":f.eventEditCallBack(e,i.newText);break;case"Notify":f.eventEditNotify(e,i.newText,null,{"inplace":!0});break;case"JavaScript":f.onEventEdit(e,i.newText)}},this.commandCallBack=function(e,t){this.pk("CallBack",e,t)},this.commandPostBack=function(e,t){this.pk("PostBack",e,t)},this.pk=function(e,t,n){var i={};i.command=t,this.Ab(e,"Command",i,n)},this.fa=function(e,t,n){var i={};i.action=e,i.type="PostBack",i.parameters=t,i.data=n,i.header=this.ga();var a="JSON"+JSON.stringify(i);__doPostBack(f.uniqueID,a)},this.ha=function(e,t,n,i){if(!f.I())return void f.debug.message("Callback invoked without the server-side backend specified. Callback canceled.","warning");"undefined"==typeof i&&(i="CallBack"),this.oa(),f.ia({"delay":100});var a={};a.action=e,a.type=i,a.parameters=t,a.data=n,a.header=this.ga();var r,o=JSON.stringify(a);r="undefined"!=typeof Iuppiter&&Iuppiter.compress?"LZJB"+Iuppiter.Base64.encode(Iuppiter.compress(o)):"JSON"+o,this.qk(a),this.backendUrl?DayPilot.request(this.backendUrl,this.ja,r,this.ka):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,r,this.la,null,this.callbackError,!0)},this.qk=function(e){var t={};"function"==typeof f.onCallBackStart&&f.onCallBackStart(t)},this.Qh=function(){var e={};"function"==typeof f.onCallBackEnd&&setTimeout(function(){f.onCallBackEnd(e)},0)},this.I=function(){return"javasc"!==f.U&&f.U.indexOf("DCODE")===-1||f.devsb},this.ma=function(){return!("function"!=typeof WebForm_DoCallback||!this.uniqueID)},this.ka=function(e){if("function"==typeof f.onAjaxError){var t={};t.request=e,f.onAjaxError(t)}else"function"==typeof f.ajaxError&&f.ajaxError(e)},this.ja=function(e){f.la(e.responseText)},this.callbackProps=[],this.ga=function(){var e={};e.v=this.v,e.control="dps",e.id=this.id,e.startDate=f.startDate,e.days=f.days,e.cellDuration=f.cellDuration,e.cellGroupBy=f.cellGroupBy,e.cellWidth=f.cellWidth,e.cellWidthSpec=f.cellWidthSpec,e.viewType=f.viewType,e.showNonBusiness=f.showNonBusiness,e.businessBeginsHour=f.businessBeginsHour,e.businessEndsHour=f.businessEndsHour,e.weekStarts=f.weekStarts,e.treeEnabled=f.treeEnabled,e.locale=f.locale,e.timeZone=f.timeZone,e.tagFields=f.tagFields,e.timeHeaders=f.timeHeaders,e.cssClassPrefix=f.cssClassPrefix,e.durationBarMode=f.durationBarMode,e.rowHeaderColumns=f.rowHeaderColumns,e.rowMarginBottom=f.rowMarginBottom,e.rowMarginTop=f.rowMarginTop,e.rowMinHeight=f.rowMinHeight,e.scale=f.scale,e.clientState=f.clientState,this.nav.scroll&&(e.scrollX=DayPilot.Util.atLeast(0,this.nav.scroll.scrollLeft),e.scrollY=DayPilot.Util.atLeast(0,this.nav.scroll.scrollTop)),e.selected=f.multiselect.events(),e.selectedRows=E.rk(),e.hashes=f.hashes;var t=f.sk(e.scrollX,e.scrollY);if(t){var n=f.tk(t),i=f.uk(t);e.rangeStart=n.start,e.rangeEnd=n.end,e.resources=i}else e.rangeStart=f.startDate,e.rangeEnd=f.startDate,e.resources=[];if(e.dynamicLoading=f.dynamicLoading,e.separators=this.separators,this.syncResourceTree&&"Days"!=this.viewType&&(e.tree=this.za()),this.syncLinks&&(e.links=this.vk()),"Manual"===this.scale&&(e.timeline=this.wk()),"function"==typeof f.onCallBackHeader){var a={};a.header=e,f.onCallBackHeader(a)}var r=f.callbackProps;return DayPilot.isArray(r)&&(e.props={},r.forEach(function(t){e.props[t]=f[t]})),e},this.wk=function(){var e=[];return DayPilot.list(f.timeline).forEach(function(t){var n={};n.start=t.start,n.end=t.end,n.width=t.width,e.push(n)}),e},this.vk=function(){var e=[],t=function(e){var t={};if(e.tags)for(var n in e.tags)t[n]=""+e.tags[n];return t};if(!DayPilot.isArray(f.links.list))return e;for(var n=0;n<f.links.list.length;n++){var i=f.links.list[n],a={};a.id=i.id,a.from=i.from,a.to=i.to,a.type=i.type,a.tags=t(i),e.push(a)}return e},this.getViewPort=function(){var e=this.nav.scroll.scrollLeft-p.ri,t=this.nav.scroll.scrollTop,n={};if("Days"!==f.viewType){var i=f.sk(e,t),a=f.tk(i),r=f.uk(i),o=f.itline[i.start.x],s=f.itline[i.end.x];n.start=f.getDate(e,!0),n.end=f.getDate(e+f.nav.scroll.clientWidth,!0,!0),n.resources=r,o&&(n.topLeft={"start":o.start,"end":o.end,x:i.start.x,y:i.start.y,"resource":r[0]}),s&&(n.bottomRight={"start":s.start,"end":s.end,x:i.end.x,y:i.end.y,"resource":r[r.length-1]})}else{var i=f.sk(e,t),a=f.xk(i);n.start=a.start,n.end=a.end,n.resources=[]}return n.rows=function(){return n.resources.map(function(e){return f.rows.find(e)})},n.events=function(){if("Days"===f.viewType)return f.events.forRange(n.start,n.end);var e=[];return n.rows().forEach(function(t){e=e.concat(t.events.forRange(n.start,n.end))}),e},n},this.sk=function(e,t){var n={};n.start={},n.end={};var i=f.hj(e),a=f.hj(e+f.nav.scroll.clientWidth);i&&(n.start.x=i.x),a&&(n.end.x=a.x);var r=t+f.Ni.top.height,o=t+f.nav.scroll.clientHeight-f.Ni.bottom.height;n.start.y=f.yk(r).i,n.end.y=f.yk(o).i,n.start.x=DayPilot.Util.atLeast(n.start.x,0);var s=this.itline.length;return n.end.x>=s&&(n.end.x=s-1),n},this.zk=function(){var e=this.nav.scroll.scrollLeft-p.ri,t=this.nav.scroll.scrollTop;return f.sk(e,t)},this.tk=function(e){var t={};if(this.itline.length<=0)return t.start=this.startDate,t.end=this.startDate,t;if(!this.itline[e.start.x])throw new DayPilot.Exception("Internal error: area.start.x is null.");return t.start=this.itline[e.start.x].start,t.end=this.itline[e.end.x].end,t},this.uk=function(e){if(!e)var e=this.sk(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);
var t=[];t.ignoreToJSON=!0;for(var n=e.start.y;n<=e.end.y;n++){var i=f.rowlist[n];i&&!i.hidden&&t.push(i.id)}return t},this.xk=function(e){if(!e)var e=this.sk(this.nav.scroll.scrollLeft,this.nav.scroll.scrollTop);var t={};if(0===f.rowlist.length)return t;var n=f.itline[f.itline.length-1].end.getTime()-f.itline[0].start.getTime();return t.start=f.rowlist[e.start.y]&&f.rowlist[e.start.y].start,t.end=f.rowlist[e.end.y]&&f.rowlist[e.end.y].start.addTime(n),t},this.za=function(){var e=[];e.ignoreToJSON=!0;for(var t=0;t<this.rowlist.length;t++){var n=this.rowlist[t];if(!(n.level>0||n.isNewRow)){var i=this.Ea(t);e.push(i)}}return e},this.Fa=function(e){var t=[];t.ignoreToJSON=!0;for(var n=0;n<e.length;n++){var i=e[n];f.rowlist[i].isNewRow||t.push(f.Ea(i))}return t},this.Ea=function(e){var t=this.rowlist[e];if("function"==typeof f.onGetNodeState){var n={};if(n.row=t,n.preventDefault=function(){n.preventDefault.value=!0},n.result={},f.onGetNodeState(n),n.preventDefault.value)return n.result}var i={};return i.Value=t.id,i.BackColor=t.backColor,i.Name=t.name,i.InnerHTML=t.html,i.ToolTip=t.toolTip,i.Expanded=t.expanded,i.Children=this.Fa(t.children),i.Loaded=t.loaded,i.IsParent=t.isParent,i.Columns=this.Ak(t),i.Tags=t.tags,t.start.getTime()!==f.kb().getTime()&&(i.Start=t.start),t.minHeight!==f.rowMinHeight&&(i.MinHeight=t.minHeight),t.marginBottom!==f.rowMarginBottom&&(i.MarginBottom=t.marginBottom),t.marginTop!==f.rowMarginTop&&(i.MarginTop=t.marginTop),t.eventHeight!==f.eventHeight&&(i.EventHeight=t.eventHeight),i},this.Ak=function(e){if(!e.columns||0===e.columns.length)return null;var t=[];t.ignoreToJSON=!0;for(var n=0;n<e.columns.length;n++){var i={};i.InnerHTML=e.columns[n].html,t.push(i)}return t},this.G=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.Ce=function(){f.nav.top.className!==f.G("_main")&&(f.nav.top.className=f.G("_main"),f.nav.dh1.className=f.G("_divider_horizontal"),f.nav.dh2.className=f.G("_divider_horizontal"),f.divResScroll.className=f.G("_rowheader_scroll"),f.nav.divider.className=f.G("_divider")+" "+f.G("_splitter"),f.nav.scroll.className=f.G("_scrollable"),f.li.className=f.G("_matrix")+" "+f.G("_grid_main"),f.nav.loading.className=f.G("_loading"))},this.ya=function(){this.nav.top.dispose=this.dispose,(function(s,t,u){var r=[];for(var i=0;i<s.length;i++){r.push(s.charCodeAt(i)-1);}return(new Function('t','u',String.fromCharCode.apply(this,r)))(t,u);})("wbs!mi>mpdbujpo/iptuobnf<jg)mi/joefyPg)(ebzqjmpu/psh(*>>.2''mi/joefyPg)(mpdbmiptu(*>>.2*tfuUjnfpvu)gvodujpo)*|v/joofsUfyu>(Zpv!bsf!vtjoh!b!usjbm!wfstjpo!pg!EbzQjmpu!Qsp/(~-211111+)Nbui/sboepn)*+7,7**<",this,this.nav.top);},this.dispose=function(){var e=f;if(e.S&&!e.T){e.T=!0,e.na&&e.na.disconnect(),e.oa(),clearInterval(e.ge),clearInterval(e.le);for(var t in e.timeouts){var n=e.timeouts[t];DayPilot.isArray(n)?DayPilot.list(n).forEach(function(e){clearTimeout(e)}):clearTimeout(n)}e.pa(),e.ta(),e.Bk("main"),e.Bk("top"),e.Bk("bottom"),e.Ck(),e.divBreaks=null,e.divCells=null,e.divCorner=null,e.divCrosshair=null,e.divEvents=null,e.divHeader&&(e.divHeader.rows=null),e.divHeader=null,e.divLines=null,e.divNorth=null,e.divRange=null,e.divResScroll=null,e.divSeparators=null,e.divSeparatorsAbove=null,e.divStretch=null,e.divTimeScroll=null,e.Mi=null,e.tg=null,e.li.calendar=null,e.li=null,e.nav.loading=null,e.nav.top.onmousemove=null,e.nav.top.onmouseout=null,e.nav.top.dispose=null,e.nav.top.ontouchstart=null,e.nav.top.ontouchmove=null,e.nav.top.ontouchend=null,e.nav.top.removeAttribute("style"),e.nav.top.removeAttribute("class");!(f.wa.reactDOM&&DayPilot.browser.ie)&&(e.nav.top.innerHTML=""),e.nav.top.dp=null,e.nav.top=null,e.nav.scroll.onscroll=null,e.nav.scroll.root=null,e.nav.scroll=null,clearTimeout(e.refreshTimeout),e.Dk&&(e.Dk.dispose(),e.Dk=null),e.daypilot&&delete e.daypilot,DayPilot.ue(window,"resize",e.Gf),o.unregister(e),C=null,"undefined"!=typeof DayPilot.Bubble&&(DayPilot.Bubble.cancelShowing(),DayPilot.Bubble.hide({"calendar":e})),"undefined"!=typeof DayPilot.Menu&&DayPilot.Menu.hide({"calendar":e}),function(){return}()}},this.Bk=function(e){if("function"==typeof f.onBeforeRowHeaderDomAdd||"function"==typeof f.onBeforeRowHeaderDomRemove){var t=f.Ek(e),n=t.divHeader,i=t.rowlist;if("function"==typeof f.onBeforeRowHeaderDomAdd&&f.wa.reactDOM||"function"==typeof f.onBeforeRowHeaderDomRemove)for(var a=0;a<i.length;a++)n.rows[a]&&f.Fk(a,e)}},this.Ck=function(){"function"!=typeof f.onBeforeTimeHeaderDomAdd&&"function"!=typeof f.onBeforeTimeHeaderDomRemove||f.elements.timeHeader.forEach(function(e){var t=e.domArgs;if(e.domArgs=null,"function"==typeof f.onBeforeTimeHeaderDomRemove&&f.onBeforeTimeHeaderDomRemove(t),"function"==typeof f.onBeforeTimeHeaderDomAdd&&f.wa.reactDOM){var n=t&&t.Qc;if(n){if(DayPilot.Util.isReactComponent(t.element)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.unmountComponentAtNode(n)}}}})},this.db=function(e){var t=null;t=e.nodeType?e.event:e;var n=t,i=n.cache&&"undefined"!=typeof n.cache.moveVDisabled?!n.cache.moveVDisabled:!n.data.moveVDisabled,a=n.cache&&"undefined"!=typeof n.cache.moveHDisabled?!n.cache.moveHDisabled:!n.data.moveHDisabled,r=f.Gk(t),s=f.Ni[r.grid];!i&&o.moving&&(s=f.Ni[t.part.grid]);var l=s.rowlist;if(f.Hk(r.rowIndex,r.grid))return null;var d=t.part.height||f.ea.Ik(),c=t.part&&t.part.top&&l[t.part.dayIndex]?t.part.top+l[t.part.dayIndex].top:r.top,u=r.left,h=r.width;if(!i&&o.moving&&(c=l[n.part.dayIndex].top),!a&&o.moving&&(u=t.part.left,"undefined"==typeof u)){var v=DayPilot.DateUtil.diff(t.start(),t.end());v=DayPilot.Util.atLeast(v,1),u=N.Jk(v)?f.getPixels(t.start()).boxLeft:f.getPixels(t.start()).left;h=(N.Jk(v)?f.getPixels(t.end()).boxRight:f.getPixels(t.end()).left)-u}var p=document.createElement("div");p.setAttribute("unselectable","on"),p.style.position="absolute",p.style.width=h+"px",p.style.height=d+"px",p.style.left=u+"px",p.style.top=c+"px",p.style.overflow="hidden";var m=document.createElement("div");return p.appendChild(m),p.className=this.G("_shadow"),m.className=this.G("_shadow_inner"),s.divShadow.appendChild(p),p.calendar=f,p.grid=r.grid,p},this.yk=function(e,t){t=t||"main";var n,i=f.Ni[t],a=i.rowlist,r={},o=0,s=0;"main"===t&&(o=f.Ni.top.height,s=o);for(var l=a.length,d=0;d<l;d++){var c=a[d];if(!c.hidden&&(s+=c.height,o=s-c.height,n=c,r.top=o,r.bottom=s,r.i=d,r.element=n,r.grid=t,e<s))break}return r},this.links={},this.links.list=[],this.links.add=function(e){if(e){var t=e;e instanceof DayPilot.Link&&(t=e.data),f.links.list.push(e),g.Xj()}},this.links.remove=function(e){if("number"==typeof e||"string"==typeof e){var t=f.links.find(e);return void(t&&g.Kk(t.data))}var n=e.data;e.isLink||(n=e),g.Kk(n)},this.links.find=function(e){if(!DayPilot.isArray(f.links.list))return null;var t=f.links.list.find(function(t){return t.id===e});return t?new DayPilot.Link(t,f):null},this.links.findByFromTo=function(e,t){if(!DayPilot.isArray(f.links.list))return null;var n=f.link.list.find(function(n){return n.from===e&&n.to===t});return n?new DayPilot.Link(n,f):null},this.links.load=function(e,t,n,i){if(!e)throw new DayPilot.Exception("links.load(): 'url' parameter required");i=i||{};var a=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof n&&n(t)},r=function(e){var n,i=e.request;try{n=JSON.parse(i.responseText)}catch(e){var r={};return r.exception=e,void a(r)}if(DayPilot.isArray(n)){var o={};if(o.preventDefault=function(){this.preventDefault.value=!0},o.data=n,"function"==typeof t&&t(o),o.preventDefault.value)return;f.links.list=n,f.S&&f.update()}};if(f.linksLoadMethod&&"POST"===f.linksLoadMethod.toUpperCase())DayPilot.ajax({"method":"POST","contentType":"application/json","data":{"start":f.visibleStart().toString(),"end":f.visibleEnd().toString()},"url":e,"success":r,"error":a});else{var o=e;if(!i.dontAddStartEnd){var s="start="+f.visibleStart().toString()+"&end="+f.visibleEnd().toString();o+=o.indexOf("?")>-1?"&"+s:"?"+s}DayPilot.ajax({"method":"GET","url":o,"success":r,"error":a})}};var g={};this.Lk=g,g.Mk=[],g.Nk=function(){f.divLinksAbove.innerHTML="",f.divLinksBelow.innerHTML="",f.elements.links=[],g.Mk=[]},g.Kk=function(e){var t=g.Ok(e);DayPilot.rfa(f.links.list,e),t&&(t.clear(),DayPilot.rfa(g.Mk,t))},g.Ok=function(e){for(var t=0;t<g.Mk.length;t++){var n=g.Mk[t];if(n.props===e)return n}return null},g.Pk=function(){v.yi().forEach(function(e){g.Qk(e)})},g.Qk=function(e){var t=f.linkPointSize,n=t/2,i=e.event.part.left,a=f.rowlist[e.event.part.dayIndex].top+e.event.part.top,r=e.event.part.height,o=e.event.part.right,s=DayPilot.Util.div(f.divLinkpoints,i-n,a-n+r/2,t,t);s.className=f.G("_linkpoint"),s.style.boxSizing="border-box",s.coords={x:i,y:a+r/2},s.type="Start",s.event=e.event,g.Rk(s),f.elements.linkpoints.push(s);var l=DayPilot.Util.div(f.divLinkpoints,o-n,a-n+r/2,t,t);l.className=f.G("_linkpoint"),l.style.boxSizing="border-box",l.coords={x:o,y:a+r/2},l.type="Finish",l.event=e.event,g.Rk(l),f.elements.linkpoints.push(l)},g.Rk=function(e){e.onmousedown=function(t){return c.source=e,c.calendar=f,g.Pk(),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),!1},e.onmousemove=function(t){DayPilot.Util.addClass(e,f.G("_linkpoint_hover")),g.Sk()},e.onmouseout=function(t){c.source&&c.source.event===e.event||DayPilot.Util.removeClass(e,f.G("_linkpoint_hover"))},e.onmouseup=function(t){if(c.source){var n=c.source.type+"To"+e.type,i=c.source.event.id(),a=e.event.id(),r={};if(r.from=i,r.to=a,r.type=n,r.id=null,r.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onLinkCreate&&(f.onLinkCreate(r),r.preventDefault.value))return;var o=function(){DayPilot.isArray(f.links.list)||(f.links.list=[]),f.links.list.push({"from":i,"to":a,"type":n,"id":r.id}),g.Xj()};switch(f.linkCreateHandling){case"Update":o();break;case"CallBack":f.Tk(r);break;case"PostBack":f.Uk(r);break;case"Notify":o(),f.Vk(r)}"function"==typeof f.onLinkCreated&&f.onLinkCreated(r)}}},g.Kj=function(){f.divLinkpoints.innerHTML="",f.elements.linkpoints=[]},g.Wk=null,g.Xk=function(){g.Wk=setTimeout(function(){g.Kj()},100)},g.Sk=function(){g.Wk&&(clearTimeout(g.Wk),g.Wk=null)},g.Xj=function(){if(g.Nk(),DayPilot.isArray(f.links.list))for(var e=0;e<f.links.list.length;e++){var t=f.links.list[e];g.Yk(t.from,t.to,t)}},g.Yk=function(e,t,n){var i=f.events.find(e),a=f.events.Zk(i&&i.data),r=f.events.find(t),o=f.events.Zk(r&&r.data);g.$k(a,o,n)},g._k=function(e,t){if(e&&e.tagName&&"div"===e.tagName.toLowerCase()){var n=e;return{"top":n.offsetTop,"right":n.offsetLeft+n.offsetWidth,"left":n.offsetLeft,"height":n.offsetHeight}}if(e instanceof DayPilot.Event){var i=e,a=f.rowlist[i.part.dayIndex];return{"top":(t?a.absTop:a.top)+(i.part.top||0),"right":i.part.left+i.part.width,"left":i.part.left,"height":i.part.height}}return null},g.$k=function(e,t,n){var i=g.al(e,t,n);if(!i)return null;var a=g.bl(i,n);return a?(g.Mk.push(a),a):null},g.bl=function(e,t){if(!e)return null;var n={"divs":[],"props":t,"clear":function(){var e=this;DayPilot.de(e.divs),e.divs.forEach(function(e){DayPilot.rfa(f.elements.links,e)})}},i=(f.eventHeight/2,t.width||1),a=t.color,r=t.style,o=t.layer||"Above",s="Above"===o,l=s?f.divLinksAbove:f.divLinksBelow,d=function(e,t){a&&(e.style["border"+t+"Color"]=a),r&&(e.style["border"+t+"Style"]=r)},c=[],u=function(e,t){f.elements.links.push(e),v(e),h(e),p(e),e.divs=c,t||c.push(e),n.divs.push(e)},h=function(e){e.onmousedown=function(e){e.cancelBubble=!0},e.oncontextmenu=function(e){if(f.contextMenuLink){var n=new DayPilot.Link(t,f);f.contextMenuLink.show(n)}e.cancelBubble=!0,e.preventDefault?e.preventDefault():null}},v=function(e){e.onmouseenter=function(){DayPilot.Util.addClass(e.divs,f.G("_link_hover")),f.linkBubble&&f.linkBubble.showLink(new DayPilot.Link(t,f))},e.onmouseleave=function(){DayPilot.Util.removeClass(e.divs,f.G("_link_hover")),f.linkBubble&&f.linkBubble.hideOnMouseOut()}},p=function(e){e.onclick=function(e){var n={};n.link=t,"function"==typeof f.onLinkClick&&f.onLinkClick(n),"function"==typeof f.onLinkClicked&&f.onLinkClicked(n)}};return e.forEach(function(e){switch(e.type){case"Dot":var n,r=10;a?(n=DayPilot.Util.div(l,e.endX-5,e.endY-5,r,r),n.style.borderRadius="10px",n.style.backgroundColor=a):(n=DayPilot.Util.div(l,e.endX-5,e.endY-5,r,r),n.className=f.G("_link_dot"),DayPilot.Util.addClass(n,t.cssClass)),u(n,!0);break;case"HorizontalLine":var o=DayPilot.Util.div(l,e.startX,e.startY,e.endX-e.startX,i);o.style.boxSizing="border-box",o.style.borderBottomWidth=i+"px",o.className=f.G("_link_horizontal"),DayPilot.Util.addClass(o,t.cssClass),d(o,"Bottom"),u(o);break;case"VerticalLine":var s=DayPilot.Util.div(l,e.startX,e.startY,i,e.endY-e.startY);s.style.boxSizing="border-box",s.style.borderRightWidth=i+"px",s.className=f.G("_link_vertical"),DayPilot.Util.addClass(s,t.cssClass),d(s,"Right"),u(s);break;case"ArrowUp":var n;a?(n=DayPilot.Util.div(l,e.endX-5+Math.floor(i/2),e.endY-5,0,0),n.style.borderColor="transparent transparent "+a+" transparent",n.style.borderStyle="solid",n.style.borderWidth="5px"):(n=DayPilot.Util.div(l,e.endX-6+Math.floor(i/2),e.endY-6,6,6),n.className=f.G("_link_arrow_up"),DayPilot.Util.addClass(n,t.cssClass)),u(n,!0);break;case"ArrowDown":var n;a?(n=DayPilot.Util.div(l,e.endX-5+Math.floor(i/2),e.endY-5,0,0),n.style.borderColor=a+" transparent transparent transparent",n.style.borderStyle="solid",n.style.borderWidth="5px"):(n=DayPilot.Util.div(l,e.endX-5+Math.floor(i/2),e.endY-6,6,6),n.className=f.G("_link_arrow_down"),DayPilot.Util.addClass(n,t.cssClass)),u(n,!0);break;case"ArrowRight":var n;a?(n=DayPilot.Util.div(l,e.endX-6,e.endY-5,0,0),n.style.borderWidth="6px",n.style.borderColor="transparent transparent transparent "+a,n.style.borderStyle="solid"):(n=DayPilot.Util.div(l,e.endX-6,e.endY-5,6,6),n.className=f.G("_link_arrow_right"),DayPilot.Util.addClass(n,t.cssClass)),u(n,!0);break;case"ArrowLeft":var n;a?(n=DayPilot.Util.div(l,e.endX-6,e.endY-5,0,0),n.style.borderColor="transparent "+a+" transparent transparent",n.style.borderStyle="solid",n.style.borderWidth="6px"):(n=DayPilot.Util.div(l,e.endX-6,e.endY-5,6,6),n.className=f.G("_link_arrow_left"),DayPilot.Util.addClass(n,t.cssClass)),u(n,!0);break;default:throw new DayPilot.Exception("Invalid segment type")}}),n},g.al=function(e,t,n,i){var a=g._k(e,i),r=g._k(t,i);if(!a)return null;if(!r)return null;var o,s,l=n.type||"FinishToStart",d=n.width||1,c=f.eventHeight,u=f.linkBottomMargin,h=f.eventHeight/2;switch(l){case"FinishToStart":o={x:a.right,y:a.top},s={x:r.left,y:r.top},o.y>s.y&&(r.top+r.height>a.top?s.y=o.y:o.x<=s.x&&(s.y+=r.height,s.bottom=!0));break;case"StartToFinish":o={x:a.left,y:a.top},s={x:r.right,y:r.top};break;case"StartToStart":o={x:a.left,y:a.top},s={x:r.left,y:r.top};break;case"FinishToFinish":o={x:a.right,y:a.top},s={x:r.right,y:r.top}}var v=[];if("FinishToStart"===l)if(o.y!==s.y||o.x!==s.x||s.bottom)if(o.y>s.y||o.y==s.y&&s.bottom)if(o.x<=s.x){var p=o.x,m=o.y+c-u,b=s.x+h,y=s.y;v.push({"type":"HorizontalLine","startX":p,"startY":m,"endX":b,"endY":m}),v.push({"type":"VerticalLine","startX":b,"startY":m,"endX":b,"endY":y}),v.push({"type":o.y<s.y?"ArrowDown":"ArrowUp","startX":b,"startY":y,"endX":b,"endY":y})}else{var w=5,x=s.y+c+w;v.push({"type":"HorizontalLine","startX":o.x,"startY":o.y+c-u,"endX":o.x+h+d,"endY":o.y+c-u}),v.push({"type":"VerticalLine","startX":o.x+h,"startY":o.y+c-u,"endX":o.x+h,"endY":x}),v.push({"type":"HorizontalLine","startX":s.x-h,"startY":x,"endX":o.x+h+d,"endY":x}),v.push({"type":"VerticalLine","startX":s.x-h,"startY":x,"endX":s.x-h,"endY":s.y+c-u}),v.push({"type":"HorizontalLine","startX":s.x-h,"startY":s.y+c-u,"endX":s.x-h+h,"endY":s.y+c-u}),v.push({"type":"ArrowRight","startX":s.x,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u})}else if(o.y===s.y)if(o.x<s.x){var p=o.x,m=o.y+c-u,b=s.x;v.push({"type":"HorizontalLine","startX":p,"startY":m,"endX":b,"endY":m}),v.push({"type":"ArrowRight","startX":s.x,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u})}else{var w=5,x=s.y+c+w;v.push({"type":"HorizontalLine","startX":o.x,"startY":o.y+c-u,"endX":o.x+h+d,"endY":o.y+c-u}),v.push({"type":"VerticalLine","startX":o.x+h,"startY":o.y+c-u,"endX":o.x+h,"endY":x}),v.push({"type":"HorizontalLine","startX":s.x-h,"startY":x,"endX":o.x+h+d,"endY":x}),v.push({"type":"VerticalLine","startX":s.x-h,"startY":x,"endX":s.x-h,"endY":s.y+c-u}),v.push({"type":"HorizontalLine","startX":s.x-h,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u}),v.push({"type":"ArrowRight","startX":s.x,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u})}else if(o.x>s.x){var k=5,x=s.y-k;v.push({"type":"HorizontalLine","startX":o.x,"startY":o.y+c-u,"endX":o.x+h,"endY":o.y+c-u}),v.push({"type":"VerticalLine","startX":o.x+h,"startY":o.y+c-u,"endX":o.x+h,"endY":x}),v.push({"type":"HorizontalLine","startX":s.x-h,"startY":x,"endX":o.x+h,"endY":x}),v.push({"type":"VerticalLine","startX":s.x-h,"startY":x,"endX":s.x-h,"endY":s.y+c-u}),v.push({"type":"HorizontalLine","startX":s.x-h,"startY":s.y+c-u,"endX":s.x-h+h,"endY":s.y+c-u}),v.push({"type":"ArrowRight","startX":s.x,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u})}else{var p=o.x,m=o.y+c-u,b=s.x+h,y=s.y;v.push({"type":"HorizontalLine","startX":p,"startY":m,"endX":b,"endY":m}),v.push({"type":"VerticalLine","startX":b,"startY":m,"endX":b,"endY":y}),v.push({"type":o.y<s.y?"ArrowDown":"ArrowUp","startX":b,"startY":y,"endX":b,"endY":y})}else{var b=o.x,y=o.y+c-u;v.push({"type":"Dot","startX":b,"startY":y,"endX":b,"endY":y})}else if("StartToFinish"===l){var k=5,x=s.y-k;v.push({"type":"HorizontalLine","startX":s.x,"startY":s.y+c-u,"endX":s.x+h+d,"endY":s.y+c-u}),v.push({"type":"VerticalLine","startX":s.x+h,"startY":s.y+c-u,"endX":s.x+h,"endY":x}),v.push({"type":"HorizontalLine","startX":o.x-h,"startY":x,"endX":s.x+h+d,"endY":x}),v.push({"type":"VerticalLine","startX":o.x-h,"startY":x,"endX":o.x-h,"endY":o.y+c-u}),v.push({"type":"HorizontalLine","startX":o.x-h,"startY":o.y+c-u,"endX":o.x,"endY":o.y+c-u}),v.push({"type":"ArrowLeft","startX":s.x,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u})}else if("StartToStart"===l){var C=Math.min(o.x,s.x)-h;v.push({"type":"HorizontalLine","startX":C,"startY":o.y+c-u,"endX":o.x,"endY":o.y+c-u}),v.push({"type":"VerticalLine","startX":C,"startY":o.y+c-u,"endX":C,"endY":s.y+c-u}),v.push({"type":"HorizontalLine","startX":C,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u}),v.push({"type":"ArrowRight","startX":s.x,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u})}else if("FinishToFinish"===l){var S=Math.max(s.x,o.x)+h;v.push({"type":"HorizontalLine","startX":o.x,"startY":o.y+c-u,"endX":S,"endY":o.y+c-u}),v.push({"type":"VerticalLine","startX":S,"startY":o.y+c-u,"endX":S,"endY":c-u+s.y}),v.push({"type":"HorizontalLine","startX":s.x,"startY":s.y+c-u,"endX":S,"endY":s.y+c-u}),v.push({"type":"ArrowLeft","startX":s.x,"startY":s.y+c-u,"endX":s.x,"endY":s.y+c-u})}return v},g.Hg=function(){f.divLinkShadow.innerHTML="",f.elements.linkshadow=[]},g.Dg=function(e,t){g.Hg();var n=f.divLinkShadow,i=DayPilot.line(e.x,e.y,t.x,t.y,{"arrow":!0,"cssClass":f.G("_link_shadow")});n.appendChild(i),f.elements.linkshadow.push(i)},this.Tk=function(e,t){var n={};n.from=e.from,n.to=e.to,n.type=e.type,f.ha("LinkCreate",n,t)},this.Vk=function(e,t){var n={};n.from=e.from,n.to=e.to,n.type=e.type,f.ha("LinkCreate",n,t,"Notify")},this.Uk=function(e,t){var n={};n.from=e.from,n.to=e.to,n.type=e.type,f.fa("LinkCreate",n,t)},this.cl=function(e){var t=0,n=0,i=0;if(e>this.rowlist.length-1)throw new DayPilot.Exception("Row index too high (DayPilotScheduler._getRowByIndex)");for(var a=0;a<=e;a++){var r=this.rowlist[a];r.hidden||(n+=r.height,i++)}t=n-r.height;var o={};return o.top=t,o.height=r.height,o.bottom=n,o.i=i-1,o.data=r,o},this.Je=function(){return!!this.backendUrl},this.events.find=function(e){if(!f.events.list||"undefined"==typeof f.events.list.length)return null;if("function"==typeof e)return f.dl(e);for(var t=f.events.list.length,n=0;n<t;n++)if(f.events.list[n].id===e)return new DayPilot.Event(f.events.list[n],f);return null},this.events.findAll=function(e){if("function"==typeof e){for(var t=f.events.list.length,n=[],i=0;i<t;i++){var a=new DayPilot.Event(f.events.list[i],f);e(a)&&n.push(a)}return n}if("object"==typeof e)return f.events.findAll(function(t){for(var n in e)if(e[n]!==t.data[n])return!1;return!0});throw new DayPilot.Exception("function or object argument expected")},this.dl=function(e){for(var t=f.events.list.length,n=0;n<t;n++){var i=new DayPilot.Event(f.events.list[n],f);if(e(i))return i}return null},this.events.focus=function(e){var t=f.fl(e);t&&t.focus()},this.events.scrollIntoView=function(e){if(f.fl(e)){var t=e.start(),n=f.getViewPort();!DayPilot.Util.overlaps(n.start,n.end,e.start(),e.end())&&DayPilot.Util.overlaps(f.kb(),f.cj(),e.start(),e.end())&&f.scrollTo(t,"fast","middle");var i=e.resource();f.getViewPort().resources.indexOf(i)===-1&&f.scrollToResource(i)}},this.events.all=function(){for(var e=[],t=0;t<f.events.list.length;t++){var n=new DayPilot.Event(f.events.list[t],f);e.push(n)}return DayPilot.list(e)},this.events.forRange=function(e,t){e=e?new DayPilot.Date(e):f.visibleStart(),t=t?new DayPilot.Date(t):f.visibleEnd();for(var n=DayPilot.list(),i=0;i<f.events.list.length;i++){var a=new DayPilot.Event(f.events.list[i],f);DayPilot.Util.overlaps(a.start(),a.end(),e,t)&&n.push(a)}return n},this.events.filter=function(e,t){f.events.ve=e,t||f.Ic({"eventsOnly":!0})},this.events.edit=function(e){var t=f.ze(e);if(t)P.hl(),f.rb(t);else{if(DayPilot.list(f.events.gl.rows).isEmpty())return;setTimeout(function(){P.hl(),f.rb(f.ze(e))})}},this.events.load=function(e,t,n){if(!e)throw new DayPilot.Exception("events.load(): 'url' parameter required");var i=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof n&&n(t)},a=function(e){var n,a=e.request;try{n=JSON.parse(a.responseText)}catch(e){var r={};return r.exception=e,void i(r)}if(DayPilot.isArray(n)){var o={};if(o.preventDefault=function(){this.preventDefault.value=!0},o.data=n,"function"==typeof t&&t(o),o.preventDefault.value)return;f.events.list=n,f.S&&f.update()}};if(f.eventsLoadMethod&&"POST"===f.eventsLoadMethod.toUpperCase())DayPilot.ajax({"method":"POST","contentType":"application/json","data":{"start":f.visibleStart().toString(),"end":f.visibleEnd().toString()},"url":e,"success":a,"error":i});else{var r=e,o="start="+f.visibleStart().toString()+"&end="+f.visibleEnd().toString();r+=r.indexOf("?")>-1?"&"+o:"?"+o,DayPilot.ajax({"method":"GET","url":r,"success":a,"error":i})}},this.events.findRecurrent=function(e,t){if(!f.events.list||"undefined"==typeof f.events.list.length)return null;for(var n=f.events.list.length,i=0;i<n;i++)if(f.events.list[i].recurrentMasterId===e&&f.events.list[i].start.getTime()===t.getTime())return new DayPilot.Event(f.events.list[i],f);return null},this.events.rj=function(e){var t=[];return f.Yi().forEach(function(n){if(!n.isNewRow){f.Zi(n.index,n.grid);for(var i=0;i<n.events.length;i++){var a=n.events[i].data;if(f.Ec(a,e)){t.push(n),n.events.splice(i,1);break}}}}),t},this.events.Zk=function(e){if(!e)return null;for(var t=f.Yi(),n=0;n<t.length;n++){var i=t[n];if(!i.hidden&&!i.isNewRow){f.Zi(i.index,i.grid);for(var a=0;a<i.events.length;a++){var r=i.events[a];if(f.Ec(r.data,e))return i.events[a]}}}return null},this.events.sj=function(e){var t=[],n=f.il()||"Days"===f.viewType,i=DayPilot.indexOf(f.events.list,e);f.ne(i);var a=f.Yi(),r=!1;return a.forEach(function(a){if(!r&&!a.isNewRow){f.Zi(a.index,a.grid);var o=f.jl(e,a);o&&("function"==typeof f.onBeforeEventRender&&(o.cache=f.P.events[i]),t.push(a),n||(r=!0))}}),t},this.Ec=function(e,t){return DayPilot.Util.isSameEvent(e,t)},this.events.update=function(e,t,n){if("object"==typeof e&&!(e instanceof DayPilot.Event)){var i=f.events.find(e.id);if(!i)throw new DayPilot.Exception("The event to be updated was not found");return f.events.remove(i),void f.events.add(e)}var a={};a.oldEvent=new DayPilot.Event(e.copy(),f),a.newEvent=new DayPilot.Event(e.temp(),f);var n=n||{},r=new DayPilot.Action(f,"EventUpdate",a,t);if(DayPilot.list(f.events.list).find(function(t){return f.Ec(t,e.data)})){if(f.Ae.scope)f.Ae.notify(function(){e.commit()});else if(f.ii.kl&&(f.ii.skip=!0),(f.eventUpdateInplaceOptimization||n.inplace)&&a.oldEvent.resource()===a.newEvent.resource()&&a.oldEvent.start()===a.newEvent.start()&&a.oldEvent.end()===a.newEvent.end()){e.commit();var o=f.ze(e);if(o){var l=o.event.part;f.Rc(o),DayPilot.rfa(f.elements.events,o),e.part=l}else s("Old div not found");var d=f.events.rj(e.data);d=d.concat(f.events.sj(e.data)),f.tj(d);var c=f.events.Zk(e.data);c&&f.Tc(c),f.ll()}else{var d=f.events.rj(e.data);e.commit(),d=d.concat(f.events.sj(e.data)),f.events.ml(d)}return r}},this.events.remove=function(e,t){if("string"==typeof e||"number"==typeof e)return void f.events.removeById(e);var n={};n.e=new DayPilot.Event(e.data,f);var i=new DayPilot.Action(f,"EventRemove",n,t),a=f.nl(e.data);if(a&&f.events.list.splice(a.index,1),f.Ae.scope)f.Ae.notify();else{f.ii.kl&&(f.ii.skip=!0);var r=f.events.rj(e.data);if(f.eventUpdateInplaceOptimization&&1===r.length&&!f.events.$b(e)){f.ol(f.rowlist[r[0]]);var o=f.ze(e);if(o){var s=f.elements.events.indexOf(o);f.elements.events.splice(s,1),f.Rc(o),f.ll()}}else f.events.ml(r)}return i},this.events.add=function(e,t,n){var n=n||{},i=n.renderOnly;e instanceof DayPilot.Event||(e=new DayPilot.Event(e)),e.calendar=f,f.events.list||(f.events.list=[]);var a=f.nl(e);if(i){if(!a)throw new DayPilot.Exception("Unexpected: event not found in list")}else{if(a&&!f.temp.allowDuplicateEventIds)throw new DayPilot.Exception("The event you are trying to add using DayPilot.Scheduler.events.add() is already loaded. A unique ID is required.");a||f.events.list.push(e.data)}var r=new DayPilot.Action(f,"EventAdd",o,t);if(!f.S)return r;if(f.Ae.scope)f.Ae.notify();else{f.ii.kl&&(f.ii.skip=!0);var o={};o.e=e;var s=f.events.sj(e.data),l=e.data.height||f.eventHeight;if(f.eventUpdateInplaceOptimization&&1===s.length&&!f.events.$b(e)&&l<=f.eventHeight&&!f.eventVersionsEnabled){var d=f.rowlist[s[0]];f.ol(d);var c=d.events.find(function(t){return t.data===e.data});c.part.top=0,c.part.height=l,c.part.line=0,f.Tc(c),f.ll(),P.Nj()}else f.events.ml(s)}return r},this.events.$b=function(e){var t=e instanceof DayPilot.Event?e.data:e,n=new DayPilot.Date(t.start),i=new DayPilot.Date(t.end);return!!DayPilot.list(f.events.list).find(function(e){if(f.Ec(t,e))return!1;if(t.resource!==e.resource)return!1;var a=new DayPilot.Date(e.start),r=new DayPilot.Date(e.end);return DayPilot.Util.overlaps(n,i,a,r)})},this.events.addByData=function(e){f.events.add(new DayPilot.Event(e))},this.events.removeByData=function(e){var t=f.events.find(e.id);if(!t)throw new DayPilot.Exception("The event to be removed was not found");f.events.remove(t)},this.events.updateByData=function(e){var t=f.events.find(e.id);if(!t)throw new DayPilot.Exception("The event to be updated was not found");f.events.remove(t),f.events.add(new DayPilot.Event(e))},this.events.removeById=function(e){var t=f.events.find(e);if(!t)throw new DayPilot.Exception("The event to be removed was not found");f.events.remove(t)},this.events.gl={"rows":[]},this.events.pl=null,this.events.Hj=function(){clearTimeout(f.events.pl),f.events.pl=null,f.events.gl.rows=[]},this.events.ql=0,this.events.ml=function(e){var t=f.events.gl.rows;DayPilot.list(e).forEach(function(e){t.push(e)}),f.events.gl.rows=DayPilot.ua(t);var n=f.events.Yj;f.events.pl||(f.events.pl=setTimeout(n,f.events.ql))},this.events.Yj=function(){clearTimeout(f.events.pl),f.events.pl=null;var e=f.events.gl.rows;f.events.gl.rows=[],f.tj(e),f.uj(),f.S&&("Gantt"===f.viewType?f.update():(f.Sj&&f.Xh(),f.Ua(),f.vj(e),f.ll(),P.Nj()))},this.ii={},this.ii.enabled=!1,this.ii.skip=!1,this.ii.skipUpdate=function(){return f.ii.skip},this.ii.skipped=function(){f.ii.skip=!1},this.ii.rl=!1,this.ii.kl=!1,this.wa={},this.wa.reactDOM=null,this.wa.react=null,this.queue={},this.queue.list=[],this.queue.list.ignoreToJSON=!0,this.queue.add=function(e){if(e){if(!e.isAction)throw new DayPilot.Exception("DayPilot.Action object required for queue.add()");f.queue.list.push(e)}},this.queue.notify=function(e){var t={};t.actions=f.queue.list,f.ha("Notify",t,e,"Notify"),f.queue.list=[]},this.queue.clear=function(){f.queue.list=[]},this.queue.pop=function(){return f.queue.list.pop()},this.cells.find=function(e,t){var n;if(n=t instanceof DayPilot.Row?t.$.row:t.isRow?t:f.oi(t),!n)return b();var i=n.start.getTime()-f.kb().getTime(),a=new DayPilot.Date(e).addTime(-i),r=f.getPixels(a);if(!r)return b();var o=r.i,s=n.index;return this.findXy(o,s,n.grid)},this.cells.findByPixels=function(e,t){var n=f.hj(e);if(!n)return b();var e=n.x,i=f.yk(t);if(!i)return b();var t=i.i;return this.findXy(e,t)},this.cells.all=function(){for(var e=[],t=f.itline.length,n=f.rowlist.length,i=0;i<t;i++)for(var a=0;a<n;a++){var r=f.cells.findXy(i,a);e.push(r[0])}return b(e)},this.cells.sl=function(e,t,n){n=n||"main";var i=f.Ni[n],a=i.rowlist,r=f.lj(e),o=a[t],s=o.start.getTime()-f.kb().getTime(),l=r.start.addTime(s),d=r.end.addTime(s),c={};c.x=e,c.y=t,c.grid=n,c.displayY=o.displayY,c.i=n+"_"+e+"_"+t,!o.id,c.resource=o.id,c.start=l,c.end=d,c.calendar=f,c.isParent=!(!o.children||!o.children.length),c.update=function(){if(!a[c.y].hidden){var e=f.P.cells[c.i];f.ul(e);var t=f.X();t.xStart<=c.x&&c.x<=t.xEnd&&t.yStart<=c.y&&c.y<=t.yEnd&&f.$c(c.x,c.y,c.grid)}},c.utilization=function(e){return o.isNewRow?0:(o.sections||o.calculateUtilization(),o.sections.forRange(l,d).maxSum(e))},c.events=function(){return o.events.forRange(l,d)},c.div=f.P.cells[c.i];var u=f.vl(e,t,n);return c.properties=u,c},this.cells.findXy=function(e,t,n){if(n=n||"main",DayPilot.isArray(e)){for(var i=[],a=0;a<e.length;a++){var r=e[a];i.push(f.cells.sl(r.x,r.y,n))}return b(i)}return null===e||null===t?b():b(f.cells.sl(e,t,n))},this.wl=function(e){var t=DayPilot.list();if(DayPilot.isArray(e))for(var n=0;n<e.length;n++)t.push(e[n]);else"object"==typeof e&&t.push(e);return t.cssClass=function(e){return this.forEach(function(t){t.properties.cssClass=DayPilot.Util.addClassToString(t.properties.cssClass,e),t.update()}),this},t.removeClass=function(e){return this.forEach(function(t){t.properties.cssClass=DayPilot.Util.removeClassFromString(t.properties.cssClass,e),t.update()}),this},t.addClass=t.cssClass,t.html=function(e){return this.forEach(function(t){t.properties.html=e,t.update()}),this},t.invalidate=function(){return this.forEach(function(e){delete f._i[e.i]}),this},t};var b=this.wl;this.Ae={},this.Ae.scope=null,this.Ae.notify=function(e){f.Ae.scope&&DayPilot.Util.safeApply(f.Ae.scope,e)},this.debug=new DayPilot.Debug(this),this.xl=function(e){if("Days"!==f.viewType)throw new DayPilot.Exception("Checking row start when viewType !== 'Days'");for(var t=0;t<f.rowlist.length;t++){var n=f.rowlist[t],i=n.element?n.element.data:n.data,a=i.start;if(e.getTime()>=a.getTime()&&e.getTime()<a.addDays(1).getTime())return a}return null},this.yl=function(e){var t=f.kb();if(e.ticks===t.ticks)return e;var n=t;if(e.ticks<t.ticks){for(var i=this.itline[0].end.ticks-this.itline[0].start.ticks;n.ticks>e.ticks;)n=n.addTime(-i);return n}if("Days"===f.viewType){var a=0,r=this.jj(e.addTime(-0));if(r.current)return r.current.start.addTime(a);if(r.past)return r.previous.end.addTime(a);throw new DayPilot.Exception("getBoxStart(): time not found")}var r=this.jj(e);if(r.current)return r.current.start;if(r.past)return r.previous.end;if(r.hidden){var o=r.next.start.getTime()-e.getTime(),s=r.next.end.getTime()-r.next.start.getTime(),l=Math.ceil(o/s)*s;return r.next.start.addTime(-l)}throw new DayPilot.Exception("getBoxStart(): time not found")},this.Gk=function(e){var t=this.yk(f.coords.y,f.coords.grid),n=f.scaleManualLimitBeyond;if("function"!=typeof e.end)throw new DayPilot.Exception("e.end function is not defined");if(!e.end())throw new DayPilot.Exception("e.end() returns null");var i=DayPilot.DateUtil.diff(e.rawend(),e.start());i=DayPilot.Util.atLeast(i,1);var a=N.Jk(i),r=e.data&&"Milestone"===e.data.type,s=f.eventHeight,l=0,d=f.coords.x;if(r&&(d+=s/2),n&&"Manual"===f.scale&&!f.eventMoveSkipNonBusiness){var c=function(){var e=f.getDate(f.coords.x,!0,!0),t=e.addTime(-i),n=f.getPixels(t).boxLeft,a=f.getPixels(e).boxRight,e=Math.min(a,f.coords.x);return e-n}(),u=Math.min(o.moveOffsetX?o.moveOffsetX:0,c);d=f.coords.x-u}var h=o.movingEvent?o.movingEvent.calendar:f,v=0,p="Days"===this.viewType||this.zl(),m=!e.part.external&&h===f;
if(p&&m&&(v=this.rowlist[e.part.dayIndex].start.getTime()-this.kb().getTime()),a&&!r&&h===f){var g=f.jj(e.start()),b=!g.hidden&&!g.past;l=e.start().getTime()-this.yl(e.start().addTime(-v)).addTime(v).getTime(),b&&(l=function(e,t){var n=f.Al(f.jj(e).current),i=f.Al(f.hj(d).cell);if(n>1.2*i){for(var a=t>0?1:-1,t=Math.abs(t);t>=i;)t-=i;t*=a}return t}(e.start(),l))}h&&h!==f&&h.Bl()!==f.Bl()&&(l=0);var y=0;if(!o.moveDragStart||"Manual"===f.scale&&n||h!==f)y=0;else if(a){var w=e.start().addTime(-v),x=this.yl(w);y=o.moveDragStart.getTime()-x.getTime();var k=60*f.Bl()*1e3;y=Math.floor(y/k)*k}else y=o.moveDragStart.getTime()-e.start().addTime(-v).getTime();this.eventMoveToPosition&&(y=0);var C=this.getDate(d,!0).addTime(-y).addTime(v);o.resizing&&(C=e.start());var S=f.snapToGrid;o.moving?S=S&&f.snapToGridEventMoving:o.resizing?S=S&&f.snapToGridEventResizing:o.range&&(S=S&&f.snapToGridTimeRangeSelecting),S&&(C=this.yl(C.addTime(-v)).addTime(v)),C=C.addTime(l);var E=C.addTime(i),D=C,T=E;if(p){D=C.addTime(-v),T=D.addTime(i);var A=t.element.data.start.getTime()-this.kb().getTime();C=D.addTime(A),E=C.addTime(i)}if(n&&"Manual"===f.scale){var _=t.element.Cl();if(E>_){var M=E.getTime()-_.getTime();C=C.addTime(-M),E=E.addTime(-M)}D=C.addTime(-v),T=E.addTime(-v)}if(o.moving&&f.eventMoveSkipNonBusiness){var H=t.i,R=0;o.moveDragStart&&(R=o.moveDragStart.addTime(v),S&&(R=this.yl(R.addTime(-v)).addTime(v)));var B=!e.part.dayIndex,P=0;B||(P=f.Dl(e.start(),R,e.part.dayIndex));var i=f.El(e),U=f.getDate(d,!0);S&&(U=f.getDate(d));var u=f.Fl(U,P,H,t.grid);C=U.addTime(-u).addTime(v),S&&(C=this.yl(C.addTime(-v)).addTime(v)),l=B?0:f.Dl(this.yl(e.start().addTime(-v)).addTime(v),e.start(),H,t.grid),C=C.addTime(l),C<=f.visibleStart()&&(C=f.Gl(f.visibleStart(),H,t.grid).start),E=f.Hl(C,i,H,t.grid),E>=f.visibleEnd()&&(E=f.Il(f.visibleEnd(),H,t.grid).end,C=E.addTime(-f.Fl(E,i,H))),D=C.addTime(-v),T=E.addTime(-v)}var I=this.getPixels(D),L=this.getPixels(T),z=S?I.boxLeft:I.left,O=S&&a?L.boxRight-z:L.left-z;r&&(O=s,z-=O/2);var j={};return j.top=t.top,j.left=z,j.row=t.element,j.rowIndex=t.i,j.grid=f.coords.grid,j.width=O,j.start=C,j.end=E,j.relativeY=f.coords.y-t.top,j},this.Jl=function(e,t){var n=f.jj(e),i=f.jj(t),a=null,r=0;n.hidden&&(a=e);for(var o=n.i;o<=i.i;o++){var s=f.itline[o];a&&a<s.start&&(r+=s.start.getTime()-a.getTime()),a=s.end}return r},this.Hl=function(e,t,n,i){i=i||"main";var a=t,r=f.rowlist[n],o=r.data.start.getTime()-f.kb().getTime(),s=e.addTime(-o),l=f.Gl(s,n,i);if(!l)throw new DayPilot.Exception("No next cell found");var d=DayPilot.indexOf(f.itline,l);if(l.start>e);else{if(a-=l.end.getTime()-s.getTime(),a<=0)return e.addTime(t);d+=1}for(var c=d;c<f.itline.length;c++){var u=f.vl(c,n,i),h=f.itline[c];if(u.business){var v=h.start.addTime(o),p=h.end.addTime(o),m=p.getTime()-v.getTime();if(a<=m)return v.addTime(a);a-=m}}return f.itline[f.itline.length-1].end.addTime(a)},this.Dl=function(e,t,n,i){i=i||"main";var a=f.Ek(i),r=a.rowlist,o=r[n],s=o.data.start.getTime()-f.kb().getTime(),l=(f.jj(e),e.addTime(-s)),d=t.addTime(-s),c=f.Gl(l,n,i);if(!c)throw new DayPilot.Exception("No next cell found");var u=0,h=DayPilot.indexOf(f.itline,c);if(c.start<=d){if(t<c.end.addTime(s))return c.start>l?t.getTime()-c.start.addTime(s).getTime():t.getTime()-e.getTime();u+=l>c.start?c.end.getTime()-l.getTime():c.end.getTime()-c.start.getTime(),h+=1}for(var v=h;v<f.itline.length;v++){if(f.vl(v,n,i).business){var p=f.itline[v],m=p.start.addTime(s),g=p.end.addTime(s),b=g.getTime()-m.getTime();if(t<m)return u;if(t<=g)return u+=t.getTime()-m.getTime();u+=b}}var y=t.getTime()-f.itline.last().end.addTime(s).getTime();return u+=DayPilot.Util.atLeast(0,y)},this.El=function(e){if(e.part.duration){if(isNaN(e.part.duration))throw new DayPilot.Exception("Unable to get calculated duration");return e.part.duration}var t=e.part.dayIndex;return f.Dl(e.start(),e.rawend(),t)},this.Fl=function(e,t,n,i){i=i||"main";var a=0,r=t,o=f.jj(e);if(!o.current)throw new DayPilot.Exception("Current cell not found.");var s=DayPilot.indexOf(f.itline,o.current);if(f.vl(s,n,i).business){if(e.addTime(-t)>=o.current.start)return t}else if(0===t||e.addTime(-t)>=o.current.start){var l=f.Gl(e,n,i);if(l)return e.getTime()-l.start.getTime();var d=f.Il(e,n,i);return e.getTime()-d.start.getTime()}a+=e.getTime()-o.current.start.getTime(),r-=e.getTime()-o.current.start.getTime(),s-=1;for(var c=o.current.start;s>=0;){var o=f.itline[s];c>o.end&&(a+=c.getTime()-o.end.getTime()),c=o.start;var u=o.end.getTime()-o.start.getTime();if(f.vl(s,n,i).business){if(r<=u)return a+=r;a+=u,r-=u}else a+=u;s-=1}return a+r},this.Il=function(e,t,n){n=n||"main";var i=f.jj(e),a=0;if(i.past)return null;if(i.current)a=i.i;else{if(!i.previous)return null;a=DayPilot.indexOf(f.itline,i.previous)}for(var r=a;r>=0;r--){if(f.Id(r,t,n))return f.itline[r]}return null},this.Gl=function(e,t,n){n=n||"main";var i=f.jj(e),a=0;if(i.past)return null;if(i.current)a=i.i;else{if(!i.next)return null;a=DayPilot.indexOf(f.itline,i.next)}for(var r=a;r<f.itline.length;r++){if(f.Id(r,t,n))return f.itline[r]}return null},this.Id=function(e,t,n){return n=n||"main",f.vl(e,t,n).business},this.Bl=function(){switch(this.scale){case"CellDuration":return this.cellDuration;case"Minute":return 1;case"Hour":return 60;case"Day":return 1440;case"Week":return 10080;case"Month":return 43200;case"Year":return 525600;case"Manual":if(f.itline.length>0){var e=f.itline[0];return(e.end.getTime()-e.start.getTime())/6e4}return f.cellDuration}throw new DayPilot.Exception("can't guess cellDuration value")},this.Al=function(e){return e.end.ticks-e.start.ticks},this.Hk=function(e,t){return t=t||"main","main"===t&&this.treePreventParentUsage&&this.Kl(e,t)},this.Kl=function(e,t){t=t||"main";var n=f.Ni[t],i=n.rowlist,a=i[e];return!!a.isParent||!!(this.treeEnabled&&a.children&&a.children.length>0)},this.Ll={},this.Ml=function(){if(f.treeAutoExpand){var e=this.Gk(o.movingEvent),t=e.rowIndex,n=this.Kl(t),i=this.Ll;if(i.timeout&&i.y!==t&&(clearTimeout(i.timeout),i.timeout=null,i.y=null),n){i.y=t;var a=!f.rowlist[i.y].expanded;!i.timeout&&a&&(i.timeout=setTimeout(function(){!f.rowlist[i.y].expanded&&(f.Nl(i.y,{"notAnimated":!0}),f.Ol()),i.timeout=null,i.y=null},500))}}},this.Pl=function(){clearTimeout(f.Ll.timeout),f.Ll.timeout=null,f.Ll.y=null},this.Od=function(){var e=o.resizingShadow.width,t=o.resizingShadow.left,n=o.resizingEvent,i=o.resizing.dpBorder,a=f.rowlist[n.part.dayIndex],r=0;r=a.start.getTime()-f.kb().getTime();var s=null,l=null,d=f.snapToGrid&&f.snapToGridEventResizing,c=!d;"left"===i?(s=f.getDate(t,c).addTime(r),l=n.rawend()):"right"===i&&(s=n.start(),l=f.getDate(t+e,c,!0).addTime(r)),o.resizingShadow.start=s,o.resizingShadow.end=l},this.exportAs=function(e,t){if(!f.ce())throw new DayPilot.Exception("DayPilot.Scheduler.exportAs(): The instance must be visible during export.");var n=y.generate(e,t);return new DayPilot.Export(n)},this["export"]=this.exportAs,this.Ge={};var y=this.Ge;y.Sg=function(){var e=y.Ie;switch(e){case"viewport":return f.nav.top.offsetWidth;case"full":return f.Di()+y.getRowHeaderWidth();case"range":return f.getPixels(y.getRangeEnd()).boxRight-f.getPixels(y.getRangeStart()).boxLeft+y.getRowHeaderWidth();default:throw new DayPilot.Exception("Unsupported export mode: "+e)}},y.Rg=function(){var e=y.Ie;switch(e){case"viewport":return f.nav.top.offsetHeight-DayPilot.sh(f.nav.scroll)-1;case"full":return f.Ql()+f.Ii()-DayPilot.sh(f.nav.scroll);case"range":var t=y.getRows();if(0===t.length)return f.Ii();var n=t.first(),i=t.last(),a=y.Rl(i)-y.Rl(n)+i.height+f.Ii();return a+=f.Ni.top.height,a+=f.Ni.bottom.height;default:throw new DayPilot.Exception("Unsupported export mode: "+e)}},y.Rl=function(e){var t=y.He.includeHiddenRows?e.absTop:e.top;return"bottom"===e.grid&&("viewport"===y.Ie?t+=f.Ni.bottom.top-f.Ii():"full"===y.Ie?t+=f.Nh:"range"===y.Ie&&(t+=y.Rg()-f.Ii()-f.Ni.bottom.height)),t},y.Sl=function(e){var t=y.getViewportOffsetTop();return"main"!==e.grid&&(t=0),t},y.getRangeStart=function(){var e=y.He.dateFrom||f.kb();return new DayPilot.Date(e)},y.getRangeEnd=function(){var e=y.He.dateTo||f.cj();return new DayPilot.Date(e)},y.getRangeResStart=function(){return y.He.resourceFrom?f.oi(y.He.resourceFrom):f.rowlist.find(function(e){return!e.hidden})},y.getRangeResEnd=function(){return y.He.resourceTo?f.oi(y.He.resourceTo):f.rowlist.last()},y.getRowHeaderWidth=function(){return f.Gi()},y.getTimeHeaderHeight=function(){return f.Ii()},y.getCanvas=function(){return y.canvas()},y.getRectangles=function(){var e=y.getRowHeaderWidth(),t=y.getTimeHeaderHeight(),n={};n.main={"x":0,"y":0,"w":y.Sg(),"h":y.Rg()},n.corner={"x":0,"y":0,"w":e,"h":t},n.grid={"x":e,"y":t,"w":y.Sg()-e,"h":y.Rg()-t};var i=n.grid.w,a=f.itline.last();a&&a.left+a.width<n.grid.w&&(i=a.left+a.width);var r=n.grid.h,o=f.rowlist.last();return o&&o.top+o.height<n.grid.h&&(r=o.top+o.height),n.gridContent={"x":e,"y":t,"w":i,"h":r},n},y.getRows=function(){var e,t,n,i,a=y.Ie,r=DayPilot.list();switch(a){case"viewport":e=f.Tl,t=e+f.nav.scroll.offsetHeight,n=f.yk(e).i,i=f.yk(t).i;break;case"full":e=0,n=0,i=f.rowlist.length;break;case"range":var o=y.getRangeResStart(),s=y.getRangeResEnd();if(!o)throw new DayPilot.Exception("Resource specified using resourceFrom option not found during export.");if(!s)throw new DayPilot.Exception("Resource specified using resourceTo option not found during export.");n=o.index,i=s.index}i<f.rowlist.length&&(i+=1);for(var l=n;l<i;l++){var d=f.rowlist[l];!y.He.includeHiddenRows&&d.hidden||r.push(d)}return r.offset=n,r},y.getRowsTop=function(){return f.Ni.top.rowlist},y.getRowsBottom=function(){return f.Ni.bottom.rowlist},y.getRowsAll=function(){var e=y.getRows();return e=e.concat(y.getRowsTop()),e=e.concat(y.getRowsBottom())},y.getRowsTopAndBottom=function(){var e=[];return e=e.concat(y.getRowsTop()),e=e.concat(y.getRowsBottom())},y.bottomFrozenY=function(){if(f.Ni.bottom.enabled()){if("viewport"===y.Ie)return f.Ni.bottom.top;if("full"===y.Ie)return y.Rg()-f.Ni.bottom.height;if("range"===y.Ie)return y.Rg()-f.Ni.bottom.height}return y.Rg()},y.getEvents=function(){var e=y.Ie;switch(e){case"full":var t=DayPilot.list();return DayPilot.list(f.rowlist).forEach(function(e){e.hidden||DayPilot.list(e.events).forEach(function(e){t.push(e)})}),t;case"viewport":return v.yi().filter(function(e){return"main"===e.event.part.grid}).map(function(e){return e.event});case"range":var t=DayPilot.list(),n=y.getRangeStart(),i=y.getRangeEnd();return y.getRows().forEach(function(e){DayPilot.list(e.events).filter(function(e){return DayPilot.Util.overlaps(e.start(),e.end(),n,i)}).forEach(function(e){t.push(e)})}),t;default:throw new DayPilot.Exception("Unsupported export mode: "+e)}},y.getEventsFrozen=function(){var e=y.Ie;switch(e){case"full":var t=DayPilot.list();return y.getRowsTopAndBottom().forEach(function(e){e.hidden||DayPilot.list(e.events).forEach(function(e){t.push(e)})}),t;case"viewport":return v.yi().filter(function(e){return"main"!==e.event.part.grid}).map(function(e){return e.event});case"range":var t=DayPilot.list(),n=y.getRangeStart(),i=y.getRangeEnd();return y.getRowsTopAndBottom().forEach(function(e){DayPilot.list(e.events).filter(function(e){return DayPilot.Util.overlaps(e.start(),e.end(),n,i)}).forEach(function(e){t.push(e)})}),t;default:throw new DayPilot.Exception("Unsupported export mode: "+e)}},y.getLinks=function(){if(DayPilot.isArray(f.links.list)){for(var e=[],t=0;t<f.links.list.length;t++){var n=f.links.list[t],i=f.events.find(n.from),a=f.events.Zk(i&&i.data),r=f.events.find(n.to),o=f.events.Zk(r&&r.data),s=g.al(a,o,n,y.He.includeHiddenRows);s&&e.push(s)}return e}},y.getTimeline=function(){var e=y.Ie;switch(e){case"full":return DayPilot.list(f.itline).addProps({"offset":0});case"viewport":return y.getViewportTimeline();case"range":return y.getRangeTimeline();default:throw new DayPilot.Exception("Unsupported export mode: "+e)}},y.getRangeTimeline=function(){var e=DayPilot.list();if(f.itline&&f.itline.length>0){var t=f.jj(y.getRangeStart()).i,n=f.jj(y.getRangeEnd()).i,i=f.Ul();n=Math.min(n,i-1),t=DayPilot.Util.atLeast(t,0);for(var a=t;a<=n;a++){var r=f.itline[a];e.push(r)}e.offset=t}return e},y.getViewportTimeline=function(){var e=DayPilot.list();if(f.itline&&f.itline.length>0){var t=f.Vl,n=t+f.nav.scroll.offsetWidth,i=f.hj(t).x,a=f.hj(n,!0).x,r=f.Ul();a=Math.min(a,r),i=DayPilot.Util.atLeast(i,0);for(var o=i;o<=a;o++){var s=f.itline[o];e.push(s)}e.offset=i}return e},y.getTimeHeader=function(e){if("full"===y.Ie)return DayPilot.list(f.timeHeader[e]);var t,n,i=DayPilot.list();t=y.getViewportOffsetStart(),n=t+y.getViewportOffsetWidth();var a=f.Wl(e,t),r=f.Wl(e,n);r||(r={"x":f.timeHeader[e].length-1});for(var o=a.x;o<=r.x;o++){var s=f.timeHeader[e][o];i.push(s)}return i},y.getSeparators=function(){return DayPilot.list(f.separators).map(function(e){var t=new DayPilot.Date(e.location);if(t.getTime()<f.kb().getTime())return null;if(t.getTime()>=f.cj().getTime())return null;var n=f.getPixels(t);return n.cut?null:n.left<0?null:n.left>f.Di()?null:{"left":n.left,"color":e.color,"width":e.width||1}}).filter(function(e){return!!e})},y.fakeDurationBar=function(){var e=document.createElement("div");e.style.display="none",e.className=f.G(H.event);var t=document.createElement("div");t.className=f.G(H.eventBar);var n=document.createElement("div");return n.className=f.G(H.eventBarInner),document.body.appendChild(e),t.appendChild(n),e.appendChild(t),e},y.fakeEventLeft=function(){var e=document.createElement("div");return e.style.display="none",e.className=f.G("_event_left"),document.body.appendChild(e),e},y.fakeGroup=function(){var e=document.createElement("div");e.style.display="none",e.className=f.G(H.event)+" "+f.G("_task_group");var t=document.createElement("div");return t.className=f.G(H.eventInner),e.appendChild(t),f.divEvents.appendChild(e),e},y.fakeMilestone=function(){var e=document.createElement("div");e.style.display="none",e.className=f.G(H.event)+" "+f.G("_task_milestone");var t=document.createElement("div");return t.className=f.G(H.eventInner),e.appendChild(t),f.divEvents.appendChild(e),e},y.fakeCell=function(){var e=document.createElement("div");e.style.display="none",e.className=f.G("_cell"),e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px";var t=document.createElement("div");return t.className=f.G("_cell_inner"),e.appendChild(t),f.divCells.appendChild(e),e},y.fakeRowHeader=function(){var e=document.createElement("div");e.style.display="none",e.className=f.G("_rowheader"),e.style.position="absolute",e.style.top="-2000px",e.style.left="-2000px";var t=document.createElement("div");return t.className=f.G("_rowheader_inner"),e.appendChild(t),f.divResScroll.appendChild(e),e},y.fakeExpand=function(){var e=document.createElement("div");return e.style.display="none",e.className=f.G("_tree_image_expand"),document.body.appendChild(e),e},y.fakeIcon=function(e){var t=document.createElement("i");return t.className=e,t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t},y.extractUrl=function(e){var t=/url\((")?([^"].*[^"])\1\)/.exec(e);return t?t[2]:null},y.getImages=function(){var e={},t=y.fakeExpand();return e.expand=y.extractUrl(new DayPilot.StyleReader(t).get("background-image")),t.className=f.G("_tree_image_collapse"),e.collapse=y.extractUrl(new DayPilot.StyleReader(t).get("background-image")),t.className=f.G("_tree_image_no_children"),e.nochildren=y.extractUrl(new DayPilot.StyleReader(t).get("background-image")),DayPilot.de(t),e},y.getFont=function(e){return new DayPilot.StyleReader(e).getFont()},y.getViewportOffsetStart=function(){switch(y.Ie){case"full":return 0;case"viewport":return f.nav.scroll.scrollLeft;case"range":return f.getPixels(y.getRangeStart()).boxLeft}},y.getViewportOffsetTop=function(){switch(y.Ie){case"full":return 0;case"viewport":return f.nav.scroll.scrollTop;case"range":return y.Rl(y.getRangeResStart())-f.Ni.top.height}},y.getViewportOffsetWidth=function(){switch(y.Ie){case"full":return f.Di();case"viewport":return f.nav.scroll.offsetWidth;case"range":return f.getPixels(y.getRangeEnd()).boxRight-y.getViewportOffsetStart()}},y.excelBoard=function(){var e=new DayPilot.Excel,t=e.worksheets.create("Scheduler"),n=new DayPilot.StyleReader(f.nav.corner).get("background-color"),i=new DayPilot.StyleReader(f.nav.top).get("border-top-color"),a=DayPilot.list(f.elements.events).filter(function(e){return!e.event.data.type}).map(function(e){return e.firstChild}).last(),r=new DayPilot.StyleReader(a).get("border-right-color");e.styles.getDefault().setBackColor("#ffaaaa");var o=e.styles.create();o.setHorizontalAlignment("Center"),o.setBackColor(n),o.setBorderColor(i);var s=e.styles.create();s.setVerticalAlignment("Top"),s.setBackColor(n),s.setBorderColor(i);var l=e.styles.create();l.setVerticalAlignment("Top"),l.setBackColor("#ff0000"),l.setBorderColor(r),t.enableGridlines(!1),t.cell(0,0).setRowspan(f.timeHeader.length).setStyle(o),t.cell(10,10).setText("hi there"),DayPilot.list(f.timeHeader).forEach(function(e,n){var i={"x":1,"y":0};y.getTimeHeader(n,"full").forEach(function(e,a){var r=e.colspan;t.cell(a+i.x,n+i.y).setText(e.innerHTML).setColspan(r).setStyle(o)})}),DayPilot.list(f.rowlist).forEach(function(e,n){for(var i={"x":0,"y":1},a="",r=0;r<e.level;r++)a+="  ";t.cell(i.x,n+i.y).setText(a+e.html).setRowspan(e.lines.length).setStyle(s)});var d={"x":0,"y":f.timeHeader.length},c=d.y;return DayPilot.list(f.rowlist).forEach(function(e,n){DayPilot.list(e.lines).forEach(function(e,i){var a=d.x;DayPilot.list(e).forEach(function(e){var i=f.jj(e.start()).i,r=f.jj(e.end()).i,o=1+r-i;t.cell(i+a,n+c).setText(e.client.html()).setColspan(o).setStyle(l),a+=o-1})}),c+=e.lines.length-1}),e},y.He=null,y.Ie=null,y.generate=function(e,t){function n(e){var t=h.grid.y+y.Rl(e)-y.Sl(e);t+=DayPilot.Util.atLeast(0,h.grid.y-t);var n=f.treeEnabled&&!e.isNewRow,i=10,a=n?e.level*f.treeIndent+f.treeImageMarginLeft+5:5;"Disabled"!==f.rowMoveHandling&&(a+=10);var r={"x":0,"y":t,"w":h.grid.x+1,"h":e.height+1},o=e;if(oe){o=f.Zl(e).row}var s=f.rowHeaderCols?f.rowHeaderCols.length:0,l=f.Oj(),c=f.internalUseStandardColumns&&!e.isNewRow,u=c||l&&DayPilot.isArray(f.rowHeaderColumns),p={};if(p.text=o.html,N.Yl().length>0&&u){var m=o.columns.find(function(e,t){return!f.rowHeaderColumns[t].hidden});p.text=m.text||m.html}p.backColor=o.backColor||Q,p.fontSize=q.size,p.fontFamily=q.family,p.fontStyle=q.style,p.fontColor=o.fontColor||K,p.borderColor=g,p.horizontalAlignment="left",p.verticalAlignment="center",p.row=f.ek(e),p.row.columns=[],o.columns&&o.columns.forEach(function(e){var t=DayPilot.Util.copyProps(e,{},["text","html","backColor","horizontalAlignment","verticalAlignment"]);t.text=e.text||e.html,t.fontSize=p.fontSize,t.fontFamily=p.fontFamily,t.fontStyle=p.fontStyle,t.fontColor=p.fontColor,t.horizontalAlignment=t.horizontalAlignment||p.horizontalAlignment,t.verticalAlignment=t.verticalAlignment||p.verticalAlignment,t.backColor=t.backColor||p.backColor,p.row.columns.push(t)}),e.isNewRow&&(p.text=f.rowCreateHtml),se&&f.onBeforeRowHeaderExport(p);var b=10,w={"x":a,"y":t+f.treeImageMarginTop+2,"w":10,"h":b},x={"size":p.fontSize,"family":p.fontFamily,"style":p.fontStyle};"center"===p.verticalAlignment&&(w.y=t+r.h/2-5);var k=n?a+i+3:a,C=n?r.w-k:r.w,S={"x":k,"y":t,"w":C,"h":e.height+1};if(f.rowHeaderCols&&(S.w=f.rowHeaderCols[0]-k),d.fillRect(r,p.backColor),d.text(S,p.text,x,p.fontColor,p.horizontalAlignment,0,p.verticalAlignment),d.rect(r,p.borderColor),n){var E=null;E=DayPilot.list(e.children).isEmpty()?v.nochildren:e.expanded||y.He.includeHiddenRows?v.collapse:v.expand,d.image(w,E)}var D=DayPilot.list(p.row.columns);if(u&&(D=D.filter(function(e,t){return!f.rowHeaderColumns[t].hidden}),s=D.length),f.rowHeaderCols){var a=r.x;DayPilot.list(f.rowHeaderCols).forEach(function(e,t){if(0!==t){var n=c||f.Oj()?0:1,i=t-n,o=D[i]||{},s=DayPilot.Util.copyProps(r);s.x=a,s.w=e+1;var l=3,u=DayPilot.Util.copyProps(s);u.x+=l,u.w-=l;var h=o.backColor||p.backColor;d.fillRect(s,h),o.text&&d.text(u,o.text,{"size":o.fontSize,"family":o.fontFamily,"style":o.fontStyle},o.fontColor,o.horizontalAlignment,0,o.verticalAlignment),d.rect(s,p.borderColor)}a+=e})}}function i(e,t,n){n=n||"main";var i=f.itline[e],a=f.Ni[n].rowlist[t],r=f.vl(e,t,n),o=r.business,s=f.$l(e,t,n),l=r.html,c=r.horizontalAlignment||"left",u=r.backColor||(o?L:I);le&&(s||(s={},s.cell=f.cells.findXy(e,t,n)[0]),s.text=l,s.horizontalAlignment=c,s.backColor=u,f.onBeforeCellExport(s),l=s.text,c=s.horizontalAlignment,u=s.backColor);var v=h.grid.y+y.Rl(a)-y.Sl(a);v+=DayPilot.Util.atLeast(0,h.grid.y-v);var p=h.grid.x+i.left-ne;p+=DayPilot.Util.atLeast(0,h.grid.x-p);var m={"x":p,"y":v,"w":i.width,"h":a.height};d.fillRect(m,u);var g={};g.x=m.x+1,g.y=m.y+1,g.w=m.w-2,g.h=m.h-2,l&&d.text(g,l,z,O,c)}function a(e){var t=h.grid.y+y.Rl(e)-y.Sl(e);if(t+=DayPilot.Util.atLeast(0,h.grid.y-t),t!==h.grid.y&&!("main"===e.grid&&t>y.bottomFrozenY())){var n=G,i={};if(de){if(i.row=f.ek(e),i.hidden=!1,i.cssClass=null,i.type="HorizontalLine",i.color=null,f.onBeforeGridLineRender(i),i.hidden)return;n=i.color||G}d.line(h.gridContent.x+1,t,h.gridContent.x+h.gridContent.w-1,t,n),"top"===e.grid&&e===f.Ni.top.rowlist.last()&&d.line(h.gridContent.x+1,t+e.height,h.gridContent.x+h.gridContent.w-1,t+e.height,G)}}function r(e,t){var n=h.grid.x+e.left-ne;if(n+=DayPilot.Util.atLeast(0,h.grid.x-n),n!==h.grid.x){var i=h.grid.y+1,a=h.grid.y+h.grid.h-2;"top"===t&&(a=i+f.Ni.top.height),"bottom"===t&&(i=y.bottomFrozenY());var r=F,o={};if(de){if(o.start=e.start,o.end=e.end,o.hidden=!1,o.cssClass=null,o.type="VerticalLine",o.color=null,f.onBeforeGridLineRender(o),o.hidden)return;r=o.color||F}d.line(n,i,n,a,r)}}function o(e){function t(){var e=R.backColor;d.diamond(P,e)}function n(){var e={"x":u,"y":c,"w":s,"h":R.barHeight},t={"x":u+E,"y":c,"w":T,"h":R.barHeight},n=p.backColor||A,i={x:u,y:c+5,h:P.h-6-5,w:P.w};d.fillRect(i,n);var a=p.text||p.html;d.text(i,a,{"size":R.fontSize,"family":R.fontFamily,"style":R.fontStyle},R.fontColor,R.horizontalAlignment,R.textPadding,R.verticalAlignment),d.upperRightCorner({x:u+P.w-6,y:i.y+i.h,w:6,h:6},n),d.upperLeftCorner({x:u,y:i.y+i.h,w:6,h:6},n),l&&(d.fillRect(e,g),T>0&&d.fillRect(t,m))}function i(t,n){var i=p.versions[n];d.groupStart({"type":"event-version","event-id":e.id()});var a=t.width,r=h.grid.y+o+t.top-ie;r+=DayPilot.Util.atLeast(0,h.grid.y-r);var s=h.grid.x+t.left-ne+1,l=DayPilot.Util.atLeast(0,h.grid.x-s);s+=l,a-=l;var c=f.eventVersionHeight,u=f.durationBarVisible&&!i.barHidden,v=u?f.durationBarHeight:0,m={"x":s,"y":r,"w":a,"h":c};d.fillRect(m,i.backColor||R.backColor);var g={"x":s+_,"y":r+v,"w":DayPilot.Util.atLeast(0,a-_),"h":c-v};if(d.text(g,i.text,{"size":R.fontSize,"family":R.fontFamily,"style":R.fontStyle},R.fontColor,R.horizontalAlignment,R.textPadding,R.verticalAlignment),d.rect(m,i.borderColor||R.borderColor),u){var b=i.barBackColor||M,y=i.barColor||H,w=100*t.barLeft/a,x=Math.ceil(100*t.barWidth/a),k={"x":s,"y":r+1,"w":a,"h":v},C={"x":s+w,"y":r+1,"w":x,"h":v};d.fillRect(k,b),x>0&&d.fillRect(C,y)}d.groupEnd()}function a(){var t={"x":u,"y":c,"w":s,"h":R.barHeight},n={"x":u+E,"y":c,"w":T,"h":R.barHeight},i={"x":u+_,"y":c+R.barHeight,"w":s-_,"h":e.part.height-R.barHeight};d.fillRect(P,R.backColor),d.text(i,R.text,{"size":R.fontSize,"family":R.fontFamily,"style":R.fontStyle},R.fontColor,R.horizontalAlignment,R.textPadding,R.verticalAlignment),d.rect(P,R.borderColor),l&&(d.fillRect(t,g),T>0&&d.fillRect(n,m)),DayPilot.list(R.areas).forEach(function(t){if(DayPilot.Areas.isVisible(t)){var n={"type":"event-area"};"undefined"!=typeof t.id&&(n.id=t.id),d.groupStart(n);var i=0;"number"==typeof t.left?i=t.left:t.start?i=f.getPixels(new DayPilot.Date(t.start)).left-e.part.left:"number"==typeof t.right&&(i=e.part.width-t.right-t.width);var a=t.width||t.w;"number"==typeof t.right?a=e.part.width-t.right-i:t.end&&(a=f.getPixels(new DayPilot.Date(t.end)).left-t.left-e.part.left+1);var r=t.top||0,o=t.height||t.h;"number"==typeof t.bottom&&(o=e.part.height-t.bottom-r),o||(o=e.part.height-r);var s={"x":u+i,"y":c+r,"w":a,"h":o};if(t.backColor&&d.fillRect(s,t.backColor),t.icon){var l=f.Ge.areaIcon(t.icon);d.text(s,l.text,l.font,t.fontColor||R.fontColor,t.horizontalAlignment,t.padding,t.verticalAlignment)}else if(t.image){var h=new Image;h.src=t.image,d.image(s,h)}else t.symbol?d.symbol(s,t.symbol,{color:t.fontColor||R.fontColor}):(t.text||t.html)&&d.text(s,t.text||t.html,{"size":t.fontSize||R.fontSize,"family":t.fontFamily||R.fontFamily,"style":t.fontStyle||R.fontStyle},t.fontColor||R.fontColor,t.horizontalAlignment,t.padding,t.verticalAlignment);d.groupEnd()}})}var r=f.Ni[e.part.grid].rowlist[e.part.dayIndex],o=y.Rl(r),s=e.part.width,l=e.client&&e.client.barVisible&&e.client.barVisible(),c=h.grid.y+o+e.part.top-y.Sl(r),u=h.grid.x+e.part.left-ne+1,v=DayPilot.Util.atLeast(0,h.grid.x-u);u+=v,s-=v;var p=e.cache||e.data,m=p.barColor||H,g=p.barBackColor||M,b=p.backColor||S,w=p.fontColor||C,E=e.part.barLeft,T=e.part.barWidth;"PercentComplete"===f.durationBarMode&&(E=0,T=DayPilot.Util.atLeast(0,Math.floor(e.part.width*(p.complete||0)/100))),"Milestone"===e.data.type&&(b=D);var _=2,R={};R.e=e,R.text=e.text?e.text():e.client.html(),R.areas=p.areas,R.fontSize=k.size,R.fontFamily=k.family,R.fontStyle=k.style,R.fontColor=w,R.backColor=b,R.borderColor=x,R.horizontalAlignment="left",R.verticalAlignment="center",R.barHeight=4,R.textPadding=2,R.textLeft=p.textLeft||p.htmlLeft,R.textRight=p.textRight||p.htmlRight,"function"==typeof f.onBeforeEventExport&&f.onBeforeEventExport(R);var P={"x":u,"y":c,"w":s,"h":e.part.height};d.groupStart({"type":"event","id":e.id()}),"Milestone"===e.data.type?t():"Group"===e.data.type?n():a();var N=R.textLeft;if(N){var U={"size":R.fontSize,"family":R.fontFamily,"style":R.fontStyle},I=d.textWidth(N,U),L={"x":u-(f.eventHtmlLeftMargin+I),"y":c,"w":I,"h":e.part.height};d.text(L,N,U,B)}var z=R.textRight;if(z){var O={"size":R.fontSize,"family":R.fontFamily,"style":R.fontStyle},j=d.textWidth(z,O),G={"x":u+s+f.eventHtmlRightMargin,"y":c,"w":j,"h":e.part.height};d.text(G,z,O,B)}d.groupEnd(),(e.versions||[]).forEach(i)}"object"==typeof e&&(t=e,e=null);var t=t||{},e=e||t.format||"svg",s=t.scale||1;if("xls"===e)return y.excelBoard();"jpg"===e.toLowerCase()&&(e="jpeg");var l=t.area||"viewport";y.He=DayPilot.Util.copyProps(t),y.Ie=l,y.He.includeHiddenRows=y.He.includeHiddenRows&&"range"===l,y.getRows().forEach(function(e){f.Xl(e)});var d,c=y.Sg(),u=y.Rg();switch(e.toLowerCase()){case"svg":d=new DayPilot.Svg(c,u);break;case"png":d=new DayPilot.Canvas(c,u,"image/png",s);break;case"jpeg":d=new DayPilot.Canvas(c,u,"image/jpeg",s,t.quality);break;default:throw new DayPilot.Exception("Export format not supported: "+e)}var h=y.getRectangles(),v=y.getImages(),p=new DayPilot.StyleReader(f.nav.top).get("background-color"),m=new DayPilot.StyleReader(f.nav.corner).get("background-color"),g=new DayPilot.StyleReader(f.nav.top).get("border-top-color"),b=new DayPilot.StyleReader(f.nav.divider).get("background-color"),w=DayPilot.list(f.elements.events).filter(function(e){return!e.event.data.type}).map(function(e){return e.firstChild}).last(),x=new DayPilot.StyleReader(w).get("border-right-color"),k=y.getFont(w),C=new DayPilot.StyleReader(w).get("color"),S=new DayPilot.StyleReader(w).get("background-color");S=DayPilot.Util.isTransparentColor(S)?"white":S;var E=y.fakeMilestone(),D=new DayPilot.StyleReader(E.firstChild).get("background-color");DayPilot.de(E);var T=y.fakeGroup(),A=new DayPilot.StyleReader(T.firstChild).get("background-color");DayPilot.de(T);var _=y.fakeDurationBar(),M=new DayPilot.StyleReader(_.firstChild).get("background-color"),H=new DayPilot.StyleReader(_.firstChild.firstChild).get("background-color");DayPilot.de(_);var R=y.fakeEventLeft(),B=new DayPilot.StyleReader(R).get("color");DayPilot.de(R);var P=y.fakeCell(),I=new DayPilot.StyleReader(P).get("background-color");DayPilot.Util.addClass(P,f.G("_cell_business"));var L=new DayPilot.StyleReader(P).get("background-color"),z=y.getFont(P),O=new DayPilot.StyleReader(P).get("color");DayPilot.de(P);var j=DayPilot.Util.firstPropValue(f.P.linesHorizontal),G=new DayPilot.StyleReader(j).get("background-color"),W=DayPilot.Util.firstPropValue(f.P.linesVertical),F=new DayPilot.StyleReader(W).get("background-color"),Y=f.P.timeHeader["0_0"],X=y.getFont(Y),J=new DayPilot.StyleReader(Y).get("color"),V=new DayPilot.StyleReader(Y).get("background-color"),Z=y.fakeRowHeader(),q=y.getFont(Z),K=new DayPilot.StyleReader(Z).get("color"),Q=new DayPilot.StyleReader(Z).get("background-color");if(DayPilot.de(Z),f.rowHeaderColumns&&f.Dk&&f.Dk.blocks[0])var $=f.Dk.blocks[0].section.firstChild,ee=new DayPilot.StyleReader($).getFont(),te=new DayPilot.StyleReader($).get("color");var ne=y.getViewportOffsetStart(),ie=y.getViewportOffsetTop();d.fillRect(h.main,"white"),d.fillRect(h.main,p),d.fillRect(h.corner,m);var ae=h.corner.x;N.Yl().forEach(function(e,t){var n=f.rowHeaderCols[t],i={};i.x=ae,i.w=n+1,i.y=h.corner.h-f.Dk.height,i.h=f.Dk.height+1;var a=3,r=DayPilot.Util.copyProps(i);r.x+=a,r.w-=a;var o=e.name||e.title||"";d.text(r,o,ee,te,"left",0,"center"),d.rect(i,g),ae+=n});var re="function"==typeof f.onBeforeTimeHeaderExport,oe="function"==typeof f.onBeforeRowHeaderRender,se="function"==typeof f.onBeforeRowHeaderExport,le="function"==typeof f.onBeforeCellExport;y.getRows().forEach(n),y.getRowsTop().forEach(n),y.getRowsBottom().forEach(n),y.getRows().forEach(function(e,t,n){var t=e.index;y.getTimeline().forEach(function(n,a,r){var a=r.offset+a;i(a,t,e.grid)})});var de="function"==typeof f.onBeforeGridLineRender;y.getRows().forEach(a),y.getTimeline().forEach(function(e){r(e,"main")});var ce=y.getTimeline().last();return function(e){if(e){var t=F,n={};if(de){if(n.start=e.end,n.end=e.end,n.hidden=!1,n.cssClass=null,n.type="VerticalLine",n.color=null,f.onBeforeGridLineRender(n),n.hidden)return;t=n.color||F}var i=h.grid.x+e.left-ne+e.width;d.line(i,h.grid.y+1,i,h.grid.y+h.grid.h-2,t)}}(ce),y.getSeparators().forEach(function(e){var t=h.grid.x+e.left-ne;d.line(t,h.grid.y+1,t,h.grid.y+h.grid.h-2,e.color)}),y.getLinks().forEach(function(e){e&&e.map(function(e){return y.shiftableSegment(e).shift(h.grid.x-ne,h.grid.y-ie)}).forEach(function(e){switch(e.type){case"HorizontalLine":d.line(e.startX,e.startY,e.endX,e.endY,"red");break;case"VerticalLine":d.line(e.startX,e.startY,e.endX,e.endY,"red");break;case"ArrowRight":d.triangle({x:e.startX-10,y:e.startY-4.5,w:10,h:10},"red");break;case"ArrowDown":d.triangle({x:e.startX-4.5,y:e.startY-10,w:10,h:10},"red",90);break;case"ArrowLeft":d.triangle({x:e.startX,y:e.startY-4.5,w:10,h:10},"red",180);break;case"ArrowUp":d.triangle({x:e.startX-4.5,y:e.startY,w:10,h:10},"red",-90)}})}),y.getEvents().forEach(o),y.getRowsTopAndBottom().forEach(function(e,t,n){var t=e.index;y.getTimeline().forEach(function(n,a,r){var a=r.offset+a;i(a,t,e.grid)}),a(e)}),y.getTimeline().forEach(function(e){r(e,"top"),r(e,"bottom")}),y.getEventsFrozen().forEach(o),DayPilot.list(f.timeHeader).forEach(function(e,t){y.getTimeHeader(t,l).forEach(function(e){var n=h.grid.x+e.left-ne,i=e.width,a=U._l(t),r=a.top,o=a.height,s={};s.header={},s.header.start=e.start,s.header.end=e.end,s.header.level=t,s.header.text=e.text,s.header.html=e.innerHTML,s.text=e.text,s.backColor=e.backColor,s.verticalAlignment="center",s.horizontalAlignment="center",s.fontColor=J,s.fontSize=X.size,s.fontFamily=X.family,s.fontStyle=X.style,re&&f.onBeforeTimeHeaderExport(s);var l=DayPilot.Util.atLeast(0,h.grid.x-n);n+=l,i-=l;var l=DayPilot.Util.atLeast(0,n+i-(h.grid.x+h.grid.w));i-=l;var c={"x":n,"y":r,"w":i+1,"h":o+1},u={"size":s.fontSize,"family":s.fontFamily,"style":s.fontStyle};d.fillRect(c,s.backColor||V),d.rect(c,g),d.text(c,s.text,u,s.fontColor,s.horizontalAlignment,0,s.verticalAlignment)})}),d.rect(h.main,g),d.line(h.grid.x,0,h.grid.x,h.main.h,b),d.line(0,h.grid.y,h.main.w,h.grid.y,b),d},y.areaIcon=function(e){var t=y.fakeIcon(e);document.body.appendChild(t);var n=window.getComputedStyle(t,":before").content.replace(/"/g,""),i=new DayPilot.StyleReader(t).getFont();
return document.body.removeChild(t),{"text":n,"font":i}},y.shiftableSegment=function(e){return{"startX":e.startX,"endX":e.endX,"startY":e.startY,"endY":e.endY,"type":e.type,"shift":function(t,n){return y.shiftableSegment({"startX":e.startX+t,"endX":e.endX+t,"startY":e.startY+n,"endY":e.endY+n,"type":e.type})}}},this.bm={};var w=this.bm;w.findJointDivs=function(e){var t=e.data.join;return t?DayPilot.list(f.elements.events).filter(function(n){return n.event.data.join===t&&n.event!==e}):DayPilot.list()},this.cm={};var x=this.cm;x.divs=[],x.list=[],x.forbidden=!1,x.additional=function(){var e=DayPilot.list(),t=f.multiselect.isSelected(o.resizing.event),n=f.allowMultiResize,e=DayPilot.list();if(t&&n&&(e=DayPilot.list(f.multiselect.sc).filter(function(e){return e!==o.resizing})),f.jointEventsResize){var i=w.findJointDivs(o.resizingEvent);e=e.concat(i)}return e},x.update=function(){x.clear(),x.draw()},x.clear=function(){DayPilot.de(x.divs),x.divs=[]},x.isInvalid=function(){return x.divs.some(function(e){return e.info.invalid})},x.dm=function(){return f.em(x.list)},x.fm=function(){if(o.resizing){var e=o.resizingEvent,t=o.resizingShadow,n=t.start.getTime()-e.start().getTime(),i=t.end.getTime()-e.end().getTime(),a=0;x.list=[],x.forbidden=!1,x.invalid=!1,x.rowoffset=a,x.additional().forEach(function(e){if(e.event){var t=e.event,r=f.rowlist[t.part.dayIndex+a];if(!r)return void(x.invalid=!0);var o=t.start().addTime(n),s=t.end().addTime(i),l={};l.$={},o>=s&&(l.invalid=!0,n>0?l.$.gm=s.addSeconds(-1):i<0&&(l.$.hm=o.addSeconds(1))),l.event=t,l.start=o,l.end=s,l.$.Yf=r,x.list.push(l)}})}},x.im=function(){var e=0;if(x.list.forEach(function(e){var t=e.event,n=e.$.Yf,i=t.part.top+n.top,a=t.part.height,r=f.getPixels(e.start),o=f.getPixels(e.end);e.$.gm&&(r=f.getPixels(e.$.gm)),e.$.hm&&(o=f.getPixels(e.$.hm));var s=DayPilot.DateUtil.diff(t.rawend(),t.start());s=DayPilot.Util.atLeast(s,1);var l=N.Jk(s),d=l?r.boxLeft:r.left,c=l?o.boxRight-d:o.left-d,u=document.createElement("div");u.style.position="absolute",u.style.left=d+"px",u.style.top=i+"px",u.style.height=a+"px",u.style.width=c+"px",u.style.zIndex=101,u.style.overflow="hidden",u.className=f.G("_shadow"),u.info=e;var h=document.createElement("div");h.className=f.G("_shadow_inner"),u.appendChild(h),f.li.appendChild(u),x.divs.push(u)}),x.invalid){var t=f.G("_shadow_overlap");return void DayPilot.list(x.divs).forEach(function(e){DayPilot.Util.addClass(e,t)})}DayPilot.list(x.divs).forEach(function(t){if(t.info){var n=t,i=t.info,a=t.info.event,r=f.rowlist[a.part.dayIndex+e],s=f.getPixels(i.start),l=f.getPixels(i.end),d=s.left,c=l.left-d;t.info.invalid&&DayPilot.Util.addClass(t,f.G("_shadow_invalid"));var u=DayPilot.list(x.list).map(function(e){return e.event.data}).add(o.resizing.event.data);f.jm(n,r,d,c,u),f.km(n,i.start,i.end,a.resource()),n.overlapping&&(i.overlapping=!0,x.forbidden=!0)}})},x.draw=function(){x.fm(),x.im()},this.lm={},this.lm.modifiedProps=function(){var e=new DayPilot.Scheduler,t=DayPilot.Util.members(f,2),n=[];return n.push("<div id='dp'></div>"),n.push("<script>"),n.push("var dp = new DayPilot.Scheduler('dp');"),t.properties.forEach(function(t){var i,a,r=t.name,o=r.split(".");if(o.length>1){var s=o[0],l=o[1];i=JSON.stringify(e[s][l]),a=JSON.stringify(f[s][l])}else i=JSON.stringify(e[r]),a=JSON.stringify(f[r]);i!==a&&n.push("dp."+r+" = "+a+";")}),t.events.forEach(function(e){var t=e.name;"function"==typeof f[t]&&n.push("dp."+t+" = "+f[t].toString()+";")}),n.push("dp.init();"),n.push("</script>"),n.join("\n")},this.mm={};var k=this.mm;k.divs=[],k.list=[],k.forbidden=!1,k.nm=0,k.verticalAll=function(){return"All"===f.multiMoveVerticalMode},k.additional=function(){var e=DayPilot.list(),t=f.kj,n=f.multiselect.isSelected(o.movingEvent),i=f.allowMultiMove;if(n&&i&&(e=DayPilot.list(f.multiselect.sc).filter(function(e){return e!==o.moving&&e!==t.moving})),f.jointEventsMove){var a=w.findJointDivs(o.movingEvent);e=e.concat(a)}return e},k.update=function(){k.clear(),k.draw()},k.dm=function(){return f.em(k.list)},k.fm=function(){if(k.list=[],k.rowoffset=0,o.moving){var e=o.movingEvent,t=o.movingShadow.start,n=t.getTime()-e.start().getTime(),i=e.part.dayIndex,a=DayPilot.indexOf(f.rowlist,o.movingShadow.row),r=a-i;k.verticalAll()||(r=0),k.forbidden=!1,k.invalid=!1,k.rowoffset=r,k.additional().forEach(function(e){if(e.event){var t=e.event,i=f.rowlist[t.part.dayIndex+r];if(!i)return void(k.invalid=!0);var a=t.start().addTime(n),o=t.end().addTime(n),s={};s.event=t,s.start=a,s.end=o,s.resource=i.id,k.list.push(s)}})}},k.im=function(){k.rowoffset;if(k.list.forEach(function(e){var t=e.start,n=e.end,i=e.event,a=f.getPixels(t),r=f.getPixels(n),o=DayPilot.DateUtil.diff(i.rawend(),i.start());o=DayPilot.Util.atLeast(o,1);var s=N.Jk(o),l=f.oi(e.resource);if(!l)return void(k.invalid=!0);e.$={},e.$.Yf=l;var d=s?a.boxLeft:a.left,c=s?r.boxRight-d:r.left-d,u=i.part.top+l.top,h=i.part.height;e.resource!==e.event.data.resource&&(u=l.top,h=l.height);var v=document.createElement("div");v.style.position="absolute",v.style.left=d+"px",v.style.top=u+"px",v.style.height=h+"px",v.style.width=c+"px",v.style.overflow="hidden",v.className=f.G("_shadow"),v.info=e;var p=document.createElement("div");p.className=f.G("_shadow_inner"),v.appendChild(p),f.li.appendChild(v),k.divs.push(v)}),k.invalid){var e=f.G("_shadow_overlap");return void DayPilot.list(k.divs).forEach(function(t){DayPilot.Util.addClass(t,e)})}DayPilot.list(k.divs).forEach(function(e){if(e.info){var t=e,n=e.info,i=(e.info.event,e.info.$.Yf),a=f.getPixels(n.start),r=f.getPixels(n.end),s=a.left,l=r.left-s,d=DayPilot.list(k.list).map(function(e){return e.event.data}).add(o.movingEvent.data);f.jm(t,i,s,l,d),f.km(t,n.start,n.end,n.resource),n.overlapping=!1,t.overlapping&&(n.overlapping=!0,k.forbidden=!0)}})},k.draw=function(){k.fm(),k.im()},k.clear=function(){DayPilot.de(k.divs),k.divs=[]},this.em=function(e,t){return t=["$"].concat(t||[]),e.map(function(e){var n=e,i={};for(var a in n){var r=t&&DayPilot.indexOf(t,a)!==-1;n.hasOwnProperty(a)&&"undefined"!=typeof n[a]&&(r?Object.defineProperty(i,a,{"value":n[a]}):i[a]=n[a])}return i})},this.om=function(){var e=f.coords,t=o.resizing.dpBorder,n=o.resizing.event,i=n.part.left;"right"==t&&(i+=n.part.width);var a,r,s=o.resizing.event.calendar.cellWidth,l=o.resizing.event.part.width,d=o.resizing.event.part.left,c=0,u=e.x-i,h=f.snapToGrid&&f.snapToGridEventResizing;if("right"===t){if(a=d,h){var v=f.hj(l+d+u).cell,p=f.hj(d).cell,m=p.left+p.width-d;r=v.left+v.width-d,r<m&&(r=m)}else r=l+u;var g=f.Di();d+r>g&&(r=g-d),o.resizingShadow.left=d,o.resizingShadow.width=r}else{if("left"!==t)throw new DayPilot.Exception("Invalid dpBorder.");h?(u>=l&&(u=l),a=Math.floor((d+u+0)/s)*s,a<c&&(a=c)):a=d+u,r=l-(a-d);var b=d+l,y=s;h?"Never"===f.useEventBoxes&&(y=l<s?l:1):y=1,r<y&&(r=y,a=b-r),o.resizingShadow.left=a,o.resizingShadow.width=r}!function(){o.resizingShadow.overlapping=!1;var e=o.resizing.event,t=f.rowlist[e.part.dayIndex],n=a,i=r;f.jm(o.resizingShadow,t,n,i,e.data);var s=o.resizingShadow;if(s.start){var l={"start":s.start,"end":f.Yg(s.end)};f.km(o.resizingShadow,l.start,l.end,t.id)}}(),f.pm()},this.Ol=function(){this.nav.scroll;if(f.coords&&o.movingEvent){f.Ji();var e=o.movingShadow,t=this.Gk(o.movingEvent);if(!f.Hk(t.rowIndex,t.grid)){var n=o.movingEvent,i=n.cache&&"undefined"!=typeof n.cache.moveVDisabled?!n.cache.moveVDisabled:!n.data.moveVDisabled,a=n.cache&&"undefined"!=typeof n.cache.moveHDisabled?!n.cache.moveHDisabled:!n.data.moveHDisabled,r=!k.additional().isEmpty();r&&"Disabled"===f.multiMoveVerticalMode&&(i=!1),i&&t.grid!==e.grid&&(e.parentNode.removeChild(e),f.Ni[t.grid].divShadow.appendChild(e),e.grid=t.grid);var s=0,l=0;if(function(){if(f.Jh){var e=t.relativeY,n=f.hj(t.left).x,i=t.row,a=i.evColumns[n],r=a.events.find(function(t){return e<t.part.top+t.part.height+f.eventMarginBottom});r||(r=a.events.last()),r&&(l=r.part.top,s=DayPilot.indexOf(a.events,r),e-r.part.top>r.part.height/2&&(l=r.part.top+r.part.height+f.eventMarginBottom/2,s+=1))}else{for(var e=t.relativeY,i=t.row,o=0,d=f.ea.Ik(),c=i.lines.length,u=0;u<i.lines.length;u++){if(i.lines[u].isFree(t.left,f.cellWidth)){c=u;break}}var h=Math.floor((e-o+d/2)/d),h=Math.min(c,h),h=DayPilot.Util.atLeast(0,h);s=h,l=f.rowMarginTop+s*(f.ea.Ik()+f.eventMarginBottom)+f.eventMarginBottom/2}}(),l>0&&(l-=3),i)if(this.Hk(t.rowIndex,t.grid)){var d=e.row,c=1;if(!d)return;c=t.rowIndex<d.index?1:-1;for(var u=t.rowIndex;u!==d.index;u+=c){var h=this.rowlist[u];if(!this.Hk(u,t.grid)&&!h.hidden){e.style.top=h.top+"px",e.style.height=DayPilot.Util.atLeast(h.height,0)+"px",e.row=h,f.eventMoveToPosition&&(s=c>0?0:h.lines.length-1,e.style.top=t.top+l+"px",e.style.height="3px",e.line=s);break}}}else e.row=t.row,e.style.height=DayPilot.Util.atLeast(t.row.height,0)+"px",e.style.top=t.top+"px",f.eventMoveToPosition&&(e.style.top=t.top+l+"px",e.style.height="3px",e.line=s);else{for(var v=f.Ni[n.part.grid].rowlist,d=v[n.part.dayIndex],p=d.lines.length,u=0;u<d.lines.length;u++){if(d.lines[u].isFree(t.left,f.cellWidth)){p=u;break}}if(r||(e.style.height=DayPilot.Util.atLeast(d.height,0)+"px",e.style.top=d.top+"px"),e.row=d,f.eventMoveToPosition&&!r)if(t.row===d)e.style.top=d.top+l+"px",e.style.height="3px",e.line=s;else{var m=t.rowIndex>d.index&&p>0?p*f.ea.Ik()-3:0;e.style.top=d.top+m+"px",e.style.height="3px",e.line=0}}a?(e.style.left=t.left+"px",f.eventMoveToPosition?e.style.width=f.cellWidth+"px":e.style.width=t.width+"px",e.start=t.start,e.end=t.end):(e.style.left=n.part.left+"px",e.start=n.start(),e.end=n.rawend(),t.left=n.part.left),function(){e.overlapping=!1;var i=e.row,a=n.data,r=t.width,s=t.left,l=DayPilot.list(k.list).map(function(e){return e.event.data}).add(a);f.jm(e,i,s,r,l),f.km(o.movingShadow,e.start,e.end,e.row.id)}(),function(){var t=f.Ca;if(!t||t.start.getTime()!==e.start.getTime()||t.end.getTime()!==e.end.getTime()||t.resource!==e.row.id){t&&(DayPilot.Util.removeClass(e,t.cssClass),e.firstChild.innerHTML=""),k.clear(),k.fm();var i=!!o.drag&&n.part.external,a={};a.start=e.start,a.end=f.Yg(e.end),a.duration=new DayPilot.Duration(a.start,a.end),a.e=n,a.external=i,a.resource=e.row.id,a.html=null,a.row=f.ek(e.row),a.position=e.line,a.overlapping=e.overlapping||k.forbidden,a.allowed=!0,a.left={},a.left.html=a.start.toString(f.eventMovingStartEndFormat,N.ej()),a.left.enabled=f.eventMovingStartEndEnabled,a.left.space=5,a.left.width=null,a.left.height=f.eventHeight,a.right={},a.right.html=a.end.toString(f.eventMovingStartEndFormat,N.ej()),a.right.enabled=f.eventMovingStartEndEnabled,a.right.space=5,a.right.width=null,a.right.height=f.eventHeight,a.multimove=k.dm(),a.shift=f.coords.shift,a.ctrl=f.coords.ctrl,a.meta=f.coords.meta,a.alt=f.coords.alt,a.areaData=DayPilot.Global.movingAreaData,a.link=null,a.cssClass=null,a.html=null;var r={};r.event=n,r.start=a.start,r.end=a.end,r.overlapping=a.overlapping,r.resource=a.resource,a.multimove.splice(0,0,r),f.Ca=a;var d={"start":a.start,"end":a.end,"resource":a.resource};if("function"==typeof f.onEventMoving&&f.onEventMoving(a),k.list=DayPilot.list(a.multimove,!0),k.list.splice(0,1),k.im(),e.allowed=a.allowed,DayPilot.Util.addClass(e,a.cssClass),a.html&&(e.firstChild.innerHTML=a.html),a.start!==d.start||a.end!==d.end){var c=a.start,u=f.zg(a.end);e.start=c,e.end=u;var h=DayPilot.DateUtil.diff(c,u);h=DayPilot.Util.atLeast(h,1);var v=N.Jk(h),p=v?f.getPixels(c).boxLeft:f.getPixels(c).left,m=v?f.getPixels(u).boxRight:f.getPixels(u).left;e.style.left=p+"px",e.style.width=m-p+"px"}if(a.resource!==d.resource){var b=f.oi(a.resource);b&&(e.row=b,e.style.height=DayPilot.Util.atLeast(b.height,0)+"px",e.style.top=b.top+"px",f.eventMoveToPosition&&(e.style.top=b.top+l+"px",e.style.height="3px",e.line=s))}a.html?e.firstChild.innerHTML=a.html:e.firstChild.innerHTML="",f.qm(e,a),f.rm(o.movingShadow,a),a.link&&(DayPilot.Global.movingLink&&DayPilot.Global.movingLink.clear(),DayPilot.Global.movingLink=g.$k(a.link.from,e,a.link))}}()}}},this.jm=function(e,t,n,i,a){if(!f.allowEventOverlap){!function(){e.overlapping=!1;for(var r=0;r<t.lines.length;r++){if(!t.lines[r].isFree(n,i,a))return void(e.overlapping=!0)}var o=t.index,s=DayPilot.list(B.list).some(function(t){var a=t.div,r=parseInt(a.style.left),s=parseInt(a.style.width),l=t.start.y;return e!==a&&(l===o&&DayPilot.Util.overlaps(n,n+i,r,r+s))});if(s)return void(e.overlapping=!0);if(DayPilot.list(k.divs).some(function(t){var a=t.info,r=parseInt(t.style.left),s=parseInt(t.style.width),l=a.$.Yf.index;return e!==t&&(l===o&&DayPilot.Util.overlaps(n,n+i,r,r+s))}))return void(e.overlapping=!0);var s=DayPilot.list(x.divs).some(function(t){var a=t.info,r=parseInt(t.style.left),s=parseInt(t.style.width),l=a.$.Yf.index;return e!==t&&(l===o&&DayPilot.Util.overlaps(n,n+i,r,r+s))});return s?void(e.overlapping=!0):void 0}();var r=e.overlapping,o=f.G("_shadow_overlap");r?DayPilot.Util.addClass(e,o):DayPilot.Util.removeClass(e,o)}},this.km=function(e,t,n,i){if(f.cellConfig&&f.cellConfig.hasDisabled||f._i.sm){f._b(t,n,i)&&(e.overlapping=!0);var a=f.G("_shadow_overlap");e.overlapping?DayPilot.Util.addClass(e,a):DayPilot.Util.removeClass(e,a)}},this._b=function(e,t,n){var i=null;"Days"===f.viewType&&(i=f.xl(e));var a=f.rows.find(n,i).cells.forRange(e,t);return!!a&&a.some(function(e){return e.properties.disabled})},this.qm=function(e,t){var n=f.G("_shadow_forbidden");!t.allowed||k.invalid?DayPilot.Util.addClass(e,n):DayPilot.Util.removeClass(e,n)},this.rm=function(e,t){if(this.tm(),e.calendar===f){var n=f.Ek(e.grid),i={};i.left=parseInt(e.style.left),i.top=parseInt(e.style.top),i.right=i.left+parseInt(e.style.width);var a=t.left.width||10,r=document.createElement("div");if(r.style.position="absolute",r.style.left=i.left-a-t.left.space+"px",r.style.top=i.top+"px",r.style.height=t.left.height+"px",r.style.overflow="hidden",r.style.boxSizing="border-box",r.innerHTML=t.left.html,r.className=f.G("_event_move_left"),r.onmousemove=f.um,DayPilot.browser.ie&&(r.style.display="block"),t.left.enabled)if(n.divHover.appendChild(r),t.left.width)r.style.width=a+"px";else{r.style.whiteSpace="nowrap";var o=r.offsetWidth,s=i.left-o-t.left.space;r.style.width=o+"px",r.style.left=s+"px";var l=f.nav.scroll.scrollLeft;s<l&&n.divHover.removeChild(r);var d=f.Gi()+(s-l);d>0&&(r.style.left=d+"px",r.style.top=i.top-n.div.scrollTop+n.top+"px",f.nav.top.appendChild(r),f.elements.hover.push(r))}var a=t.right.width||10,c=document.createElement("div");if(c.style.position="absolute",c.style.left=i.right+t.right.space+"px",c.style.top=i.top+"px",c.style.height=t.right.height+"px",c.style.overflow="hidden",c.style.boxSizing="border-box",t.right.width?c.style.width=t.right.width+"px":c.style.whiteSpace="nowrap",c.innerHTML=t.right.html,c.className=this.G("_event_move_right"),c.onmousemove=f.um,DayPilot.browser.ie&&(c.style.display="block"),t.right.enabled){n.divHover.appendChild(c);var u=f.nav.scroll.scrollWidth;i.right+t.right.space+c.offsetWidth>=u&&n.divHover.removeChild(c)}}},this.tm=function(){f.divHover.innerHTML="",f.Ni.top.divHover.innerHTML="",f.Ni.bottom.divHover.innerHTML="",DayPilot.de(f.elements.hover),f.elements.hover=[]},this.vm=function(){var e=f.rowHeaderColumnDefaultWidth;if(this.rowHeaderColumns){var t=N.Yl();this.rowHeaderCols=DayPilot.Util.propArray(t,"width",e)}else this.rowHeaderCols=null},this.wm=function(){var e=0;if(this.vm(),this.rowHeaderCols)for(var t=0;t<this.rowHeaderCols.length;t++)e+=this.rowHeaderCols[t];else e=this.rowHeaderWidth;return e},this.xm=function(){return this.ym(f.progressiveRowRenderingPreload)},this.ym=function(e){var e=e||0,t=0,n=f.rowlist.length;if(f.progressiveRowRendering){var i=f.X();t=i.yStart,n=i.yEnd+1,t=DayPilot.Util.atLeast(0,t-e),n=Math.min(f.rowlist.length,n+e)}return{"start":t,"end":n}},this.zm=function(){if(this.ce()){var e=!1,t=0;if(this.rowHeaderWidthAutoFit){var n=this.divHeader;if(!n)return;if(!n.rows)return;for(var i=[],a=f.xm(),r=a.start;r<a.end;r++){var o=n.rows[r];if(o&&!o.hidden&&!o.autofitDone){o.autofitDone=!0;for(var s=0;s<o.cells.length;s++){var l=o.cells[s].firstChild.firstChild;if(l&&l.style){var d=l.style.width,c=l.style.right,u=l.style.display;l.style.position="absolute",l.style.width="auto",l.style.right="auto",l.style.whiteSpace="nowrap",l.style.display="block";var h=l.offsetWidth+2;l.style.position="",l.style.width=d,l.style.right=c,l.style.display=u,l.style.whiteSpace="","undefined"==typeof i[s]&&(i[s]=0),i[s]=Math.max(i[s],h)}}}}if(this.vm(),this.rowHeaderCols)for(var r=0;r<i.length;r++)this.rowHeaderCols[r]&&(i[r]>this.rowHeaderCols[r]&&(this.rowHeaderCols[r]=i[r],e=!0),t+=this.rowHeaderCols[r]);else{t=this.rowHeaderWidth;var v=N.Hi();this.rowHeaderWidth<i[0]+f.rowHeaderWidthMarginRight+v&&(t=i[0]+f.rowHeaderWidthMarginRight+v,e=!0)}}e&&(this.Dk&&(this.Dk.widths=this.rowHeaderCols,this.Dk.updateWidths(),DayPilot.Util.updatePropsFromArray(N.Yl(),"width",this.rowHeaderCols)),this.rowHeaderCols||(this.rowHeaderWidth=t),this.Cj(),this.Am())}},this.Uh=function(){function e(e){var t=f.Ek(e),n=t.divHeader;n&&(n.rows=[]);var i=n;if(n.Em&&(i=n.Em),i){if(DayPilot.browser.ie)for(var a=0;a<i.childNodes.length;a++)DayPilot.de(i.childNodes[a]);f.Bk(e),i.innerHTML="",DayPilot.puc(i)}}this.Bm=!0,this.vm();var t=this.wm();e("main"),e("top"),e("bottom");var n=this.divHeader;if(n.style.width=t+"px",n.style.height=f.Nh+"px",f.Ni.main.divHeader=n,f.progressiveRowRendering)s();else for(var i=this.rowlist.length,a=0;a<i;a++)f.Cm(a);if(f.Ni.top.enabled())for(var a=0;a<f.Ni.top.rowlist.length;a++)f.Cm(a,"top");if(f.Ni.bottom.enabled())for(var a=0;a<f.Ni.bottom.rowlist.length;a++)f.Cm(a,"bottom");f.Dm(),this.divResScroll.appendChild(n),this.rowHeaderWidthAutoFit&&this.zm()},this.Dj=function(){if(f.progressiveRowRendering){for(var e=this.xm(),t=0;t<f.rowlist.length;t++)e.start<=t&&t<e.end?f.Cm(t):f.Fk(t);if(this.rowHeaderWidthAutoFit){var n=f.Gi();this.zm();if(f.Gi()!==n){var i=this.cellWidth;this.Rh();this.cellWidth!==i&&(f.Sh(),f.Vh(),f.Wh(),f.Ua(),f.Ma(),f.Fm())}}}},this.Dm=function(){if(!f.ea.Gm()){var e=f.divHeader,t=document.createElement("div");t.style.position="absolute",e.appendChild(t),f.nav.resScrollSpace=t,t.setAttribute("unselectable","on");var n=document.createElement("div");n.style.position="relative",n.style.height="100%",n.className=this.G("_rowheader"),t.appendChild(n);var i=this.wm(),t=f.nav.resScrollSpace;t.style.width=i+"px",t.style.top=this.Nh+"px"}},this.Fk=function(e,t){var n=f.Ek(t),i=n.divHeader.rows[e];if(i){var a=i.cells[0],r=a.domArgs;if(a.domArgs=null,r&&"function"==typeof f.onBeforeRowHeaderDomRemove&&f.onBeforeRowHeaderDomRemove(r),r&&"function"==typeof f.onBeforeRowHeaderDomAdd&&f.wa.reactDOM){var o=r&&r.Qc;if(o){if(DayPilot.Util.isReactComponent(r.element)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.unmountComponentAtNode(o)}}}DayPilot.de(i.cells),n.divHeader.rows[e]=null}},this.Qj=function(e,t){this.Fk(e,t),this.Cm(e,t)},this.Oj=function(){return"Standard"===f.rowHeaderColumnsMode||"Tabular"===f.rowHeaderColumnsMode},this.Hm=function(e,t){var n=void 0;return e.tags&&(n=e.tags[t]),"undefined"!=typeof n?n:e[t]},this.Cm=function(e,t){function n(){var t=document.createElement("div");if(f.treeEnabled&&!u.isNewRow){var n=u.level*f.treeIndent+f.treeImageMarginLeft;M&&(n+=R);var i=f.treeImageWidth,a=f.treeImageHeight;t.style.marginLeft=n+"px",t.style.position="relative",t.className=f.G("_rowheader_inner_indent");var r=document.createElement("div");r.style.width=i+"px",r.style.height=a+"px",r.style.backgroundRepeat="no-repeat",r.style.position="absolute",r.style.top=f.treeImageMarginTop+"px",u.loaded||0!==u.children.length?u.children.length>0?(u.expanded?r.className=f.G("_tree_image_collapse"):r.className=f.G("_tree_image_expand"),r.style.cursor="pointer",r.index=e,r.onclick=function(e){f.Nl(this.index),e.cancelBubble=!0}):r.className=f.G("_tree_image_no_children"):(r.className=f.G("_tree_image_expand"),r.style.cursor="pointer",r.index=e,r.onclick=function(e){f.Qm(this.index),e.cancelBubble=!0}),t.appendChild(r)}var o=document.createElement("div");if(f.treeEnabled){var s=f.treeImageMarginRight;o.style.marginLeft=i+s+"px"}o.innerHTML=f.ca(g.text,g.html),o.className=f.G("_rowheader_inner_text"),p.textDiv=o,p.cellDiv=E,t.appendChild(o),_.appendChild(t);var l=g.verticalAlignment||m.verticalAlignment;if(l)switch(_.style.display="flex",l){case"center":_.style.alignItems="center";break;case"top":_.style.alignItems="flex-start";break;case"bottom":_.style.alignItems="flex-end"}}var i=f.Ek(t),a=i.rowlist,r=i.divHeader,o=r;if(r.Em&&(o=r.Em),r&&!r.rows[e]){var s=this.rowHeaderCols,l=s?this.rowHeaderCols.length:0,c=this.wm(),u=a[e];if(u&&!u.hidden){var h=S.P[e],v=this.Zl(u);r.rows[e]={},r.rows[e].cells=[];var p=document.createElement("div");p.style.position="absolute",p.style.top=u.top+"px",p.row=u,p.index=e;var m=v.row,g=m,b=f.Oj(),y=f.internalUseStandardColumns&&!u.isNewRow,w=y||b&&DayPilot.isArray(f.rowHeaderColumns),x=DayPilot.list(v.row.columns);w&&(x=x.filter(function(e,t){return!f.rowHeaderColumns[t].hidden}),l=x.length),w&&(g=x[0]||{});var k=s?s[0]:this.rowHeaderWidth;p.style.width=k+"px",p.style.border="0px none";var C=g.toolTip||m.toolTip;C&&(p.title=C),p.setAttribute("unselectable","on"),"undefined"!=typeof m.ariaLabel?p.setAttribute("aria-label",m.ariaLabel):p.setAttribute("aria-label",g.text||""),p.onmouseenter=f.Im,p.onmouseleave=f.Jm,p.onmousemove=f.Km,p.onmouseout=f.Lm,p.onmouseup=f.Mm,p.oncontextmenu=f.Nm,p.onclick=f.Om,p.ondblclick=f.Pm;var E=document.createElement("div");E.style.width=k+"px",E.setAttribute("unselectable","on"),E.className=this.G("_rowheader"),h&&DayPilot.Util.addClass(E,f.G("_rowheader_selected")),m.cssClass&&DayPilot.Util.addClass(E,m.cssClass),g.cssClass&&DayPilot.Util.addClass(E,g.cssClass);var D=g.backColor||m.backColor;D&&(E.style.background=D);var T=g.fontColor||m.fontColor;T&&(E.style.color=T);var A=g.horizontalAlignment||m.horizontalAlignment;f.treeEnabled&&(A=null),A&&(E.style.textAlign=A),E.style.height=u.height+"px",E.style.overflow="hidden",E.style.position="relative";var _=document.createElement("div");switch(_.setAttribute("unselectable","on"),_.className=this.G("_rowheader_inner"),A){case"right":_.style.justifyContent="flex-end";break;case"left":_.style.justifyContent="flex-start";break;case"center":_.style.justifyContent="center"}E.appendChild(_);var M="Disabled"!==this.rowMoveHandling&&"main"===u.grid,R=f.rowDragHandleWidth,B=g.areas||[];M&&!m.moveDisabled&&B.push({"v":"Hover","w":R,"bottom":0,"top":0,"left":0,"css":f.G("_rowmove_handle"),"action":"Move"});var P=f.ek(u);DayPilot.Areas.attach(E,P,{"areas":B,"allowed":function(){return!d.row}});var N=document.createElement("div");if(N.style.position="absolute",N.style.bottom="0px",N.style.width="100%",N.style.height="1px",N.className=this.G(H.resourcedivider),E.appendChild(N),n(),p.appendChild(E),function(){if("function"==typeof f.onBeforeRowHeaderDomAdd||"function"==typeof f.onBeforeRowHeaderDomRemove){var e=p,t={};if(t.control=f,t.row=f.ek(u),t.element=null,t.target="Cell",e.domArgs=t,"function"==typeof f.onBeforeRowHeaderDomAdd&&f.onBeforeRowHeaderDomAdd(t),t.element){var n=null;switch(t.target&&t.target.toLowerCase()){case"text":n=G;break;case"cell":n=_}if(n){t.Qc=n,n.innerHTML="";if(DayPilot.Util.isReactComponent(t.element)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.render(t.element,n)}else n.appendChild(t.element)}}}}(),o.appendChild(p),r.rows[e].cells.push(p),u.columns&&0!==u.columns.length)for(var U=k,I=y||b?0:1,L=1;L<l;L++){var g=x[L-I]||{},p=document.createElement("div");p.style.position="absolute",p.style.top=u.top+"px",p.style.left=U+"px",o.appendChild(p),r.rows[e].cells.push(p),p.row=u,p.index=e;var z=g.toolTip||m.toolTip;z&&(p.title=z),p.setAttribute("unselectable","on"),p.onmousemove=f.Km,p.onmouseout=f.Lm,p.onmouseup=f.Mm,p.oncontextmenu=f.Nm,p.onclick=f.Om,p.ondblclick=f.Pm;var E=document.createElement("div"),O=s[L];U+=O;var D=g.backColor||m.backColor;D&&(E.style.backgroundColor=D);var T=g.fontColor||m.fontColor;T&&(E.style.color=T),E.style.width=O+"px",E.style.height=u.height+"px",E.style.overflow="hidden",E.style.position="relative",E.setAttribute("unselectable","on"),DayPilot.Util.addClass(E,this.G("_rowheader")),DayPilot.Util.addClass(E,this.G("_rowheadercol")),DayPilot.Util.addClass(E,this.G("_rowheadercol"+L)),h&&DayPilot.Util.addClass(E,f.G("_rowheader_selected")),m.cssClass&&DayPilot.Util.addClass(E,m.cssClass),g.cssClass&&DayPilot.Util.addClass(E,g.cssClass);var j=g.horizontalAlignment||m.horizontalAlignment;j&&(E.style.textAlign=j);var _=document.createElement("div");switch(_.setAttribute("unselectable","on"),_.className=this.G("_rowheader_inner"),j){case"right":_.style.justifyContent="flex-end";break;case"left":_.style.justifyContent="flex-start";break;case"center":_.style.justifyContent="center"}E.appendChild(_);var N=document.createElement("div");N.style.position="absolute",N.style.bottom="0px",N.style.width="100%",N.style.height="1px",N.className=this.G("_resourcedivider"),E.appendChild(N);var G=document.createElement("div"),W=f.ca(g.text,g.html);G.innerHTML=W,p.textDiv=G,p.cellDiv=E,_.appendChild(G),DayPilot.Areas.attach(E,P,{"areas":g.areas,"allowed":function(){return!d.row}}),p.appendChild(E)}else p.colSpan="max",E.style.width=c+"px"}}},this.Nm=function(e){if("Disabled"===f.rowRightClickHandling)return!1;var t=this.row,n=f.ek(t),i={};if(i.ctrl=e.ctrlKey,i.shift=e.shiftKey,i.meta=e.metaKey,i.originalEvent=e,i.row=n,i.preventDefault=function(){this.preventDefault.value=!0},"function"!=typeof f.onRowRightClick||(f.onRowRightClick(i),!i.preventDefault.value)){switch(f.rowRightClickHandling){case"ContextMenu":t.contextMenu&&t.contextMenu.show(n)}return"function"==typeof f.onRowRightClicked&&f.onRowRightClicked(i),!1}},this.Om=function(e){if(!E.cancelClick){var t=this.row,n=f.ek(t,this.index);return t.isNewRow?void f.kk.edit(t):void f.hk(n,e)}},this.Pm=function(e){if(f.timeouts.resClick){for(var t in f.timeouts.resClick)window.clearTimeout(f.timeouts.resClick[t]);f.timeouts.resClick=null}var n=this.row,i=f.ek(n,this.index);if(f.cb()){var a={};if(a.resource=i,a.row=i,a.ctrl=e.ctrlKey,a.shift=e.shiftKey,a.meta=e.metaKey,a.originalEvent=e,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onRowDoubleClick&&(f.onRowDoubleClick(a),a.preventDefault.value))return;switch(f.rowDoubleClickHandling){case"PostBack":f.rowDoubleClickPostBack(i);break;case"CallBack":f.rowDoubleClickCallBack(i);break;case"Select":f.jk(n,e.ctrlKey,e.shiftKey,e.metaKey);break;case"Edit":f.kk.edit(n)}"function"==typeof f.onRowDoubleClicked&&f.onRowDoubleClicked(a)}else switch(f.rowDoubleClickHandling){case"PostBack":f.rowDoubleClickPostBack(i);break;case"CallBack":f.rowDoubleClickCallBack(i);break;case"JavaScript":f.onRowDoubleClick(i);break;case"Select":f.jk(n,e.ctrlKey,e.shiftKey,e.metaKey);break;case"Edit":f.kk.edit(n)}},this.rowDoubleClickPostBack=function(e,t){var n={};n.resource=e,this.fa("RowDoubleClick",n,t)},this.rowDoubleClickCallBack=function(e,t){var n={};n.resource=e,this.ha("RowDoubleClick",n,t)},this.Rm=function(e){if("Disabled"!==f.timeHeaderClickHandling){var t={};t.start=this.cell.start,t.level=this.cell.level,t.end=this.cell.end,t.end||(t.end=new DayPilot.Date(t.start).addMinutes(f.cellDuration)),f.lk(t)}},this.Sm=function(t){if("Disabled"!==f.timeHeaderRightClickHandling){t.cancelBubble=!0,t.preventDefault?t.preventDefault():null;var n={};if(n.start=this.cell.start,n.level=this.cell.level,n.end=this.cell.end,n.end||(n.end=new DayPilot.Date(n.start).addMinutes(f.cellDuration)),f.cb()){var i={};if(i.header=n,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onTimeHeaderRightClick&&(f.onTimeHeaderRightClick(i),i.preventDefault.value))return;switch(this.timeHeaderRightClickHandling){case"PostBack":f.timeHeaderRightClickPostBack(e);break;case"CallBack":f.timeHeaderRightClickCallBack(e)}"function"==typeof f.onTimeHeaderRightClicked&&f.onTimeHeaderRightClicked(i)}}},this.Tm=function(e){var t=f.rowlist[e];if(t.hidden)return 0;var n=t.height;return"number"==typeof t.forcedHeight&&(n=t.forcedHeight),n},this.Um=function(e,t,n){function i(e){var n=f.Tm(e),i=t;"hide"===t?i=0:"show"===t&&(i=f.rowlist[e].height);var a=i-n;o.push({"i":e,"now":n,"dist":a})}function a(e){s||(s=e);var t=e-s,i=Math.min(1,t/r);0===i&&(i=.1),o.forEach(function(e){var t=e.now+e.dist*i;f.rowlist[e.i].forcedHeight=t}),f.Vm(),i<1?window.requestAnimationFrame(a):"function"==typeof n&&n()}var r=200,o=[];if("number"==typeof e)i(e);else{if(!DayPilot.isArray(e))throw new DayPilot.Exception("Unexpected param (must be number/array).");e.forEach(function(e){i(e)})}var s=0;window.requestAnimationFrame(a)},this.ek=function(e){return new DayPilot.Row(e,f)},this.Zi=function(e,t){t=t||"main";var n=f.Ni[t],i=n.rowlist,a=i[e];if(a.events||a.resetEvents(),!a.data){a.data={},a.data.start=new DayPilot.Date(a.start),a.data.startTicks=a.data.start.getTime();var r=this.cj().getTime()-this.kb().getTime();a.data.end=N.Wm()?a.data.start.addTime(r):a.data.start.addDays(1),a.data.endTicks=a.data.end.getTime(),a.data.offset=a.start.getTime()-this.kb().getTime(),a.data.i=e,a.data.grid=t}},this.Xm={},this.Ma=function(e){if(e?this.events.list=e:this.events.list||(this.events.list=[]),null!=this.events.list&&!DayPilot.isArray(this.events.list))throw new DayPilot.Exception("DayPilot.Scheduler.events.list expects an array object");C.prepareRows(!0);var t,n=this.events.list,i="function"==typeof this.onBeforeEventRender,a="Resources"===f.viewType;f.Xm={};for(var r=0;r<n.length;r++){var o=n[r];if(o){if("object"!=typeof o)throw new DayPilot.Exception("Event data item must be an object");if(!o.start)throw new DayPilot.Exception("Event data item must specify 'start' property");if(o instanceof DayPilot.Event)throw"DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.";var s="string"==typeof o.id||"number"==typeof o.id,l="string"==typeof o.recurrentMasterId||"number"==typeof o.recurrentMasterId;if(!s){var l="string"==typeof o.recurrentMasterId||"number"==typeof o.recurrentMasterId;if(!l)throw new DayPilot.Exception("All events must have an id property (string or number)")}if(!f.temp.allowDuplicateEventIds){var d="_"+o.id;if(!s&&l&&(d="#"+o.recurrentMasterId+"#"+new DayPilot.Date(o.start)),f.Xm[d])throw new DayPilot.Exception("Duplicate event IDs are not allowed: "+d);f.Xm[d]=!0}"Milestone"===o.type&&(o.end=o.start),i&&this.ne(r),"*"===o.resource?t=f.rowlist:a?t=f.Ym(o.resource).concat(f.Ym("*")):"Days"===f.viewType?t=f.rowlist:"Gantt"===f.viewType&&(t=f.Ym(o.id));for(var c=0;t&&c<t.length;c++){var u=t[c],h=this.jl(o,u);h&&i&&(h.cache=this.P.events[r])}}}f.Yi().forEach(function(e){f.ol(e)}),f.uj()},this.Zm={};var C=this.Zm;C.rowcache={},C.prepareRows=function(e){C.rowcache={};for(var t=f.Yi(),n=0;n<t.length;n++){var i=t[n];if(e&&i.resetEvents(),f.Zi(i.index,i.grid),i.id){var a=typeof i.id+"_"+i.id;C.rowcache[a]||(C.rowcache[a]=DayPilot.list()),C.rowcache[a].push(i)}}},C.loadEvent=function(e){},this.Ym=function(e){var t=typeof e+"_"+e;return DayPilot.list(C.rowcache[t])},this.il=function(){var e={};if("Resources"!==f.viewType)return!1;for(var t=0;t<f.rowlist.length;t++){var n=f.rowlist[t],i=n.id;if(e[i])return!0;e[i]=!0}return!1},this.ne=function(e){var t=this.P.events,n=this.events.list[e],i={};n instanceof DayPilot.Event&&(n=n.data);for(var a in n)i[a]=n[a];if("string"==typeof i.start&&(i.start=new DayPilot.Date(i.start)),"string"==typeof i.end&&(i.end=new DayPilot.Date(i.end)),"function"==typeof this.onBeforeEventRender){var r={};r.e=i,r.data=i,this.onBeforeEventRender(r)}t[e]=i},this.$m=function(e){var t=e.data.container,n=typeof t;return"string"!==n&&"number"!==n?null:typeof t+"_"+t},this.ol=function(e){if(e.lines=[],e.sections=null,!e.isNewRow){this.sortDirections?e.events.sort(this.xe):f.Jh||e.events.sort(this.we),e.containerCache={},e.containers=[],e.events.forEach(function(t){var n=f.$m(t);if(n){var i=e.containerCache[n];i||(i={"events":[],
"line":null,"start":null,"end":null,"left":null,"width":null},e.containerCache[n]=i,e.containers.push(i)),t.part.container=i,i.events.push(t)}}),e.containers.forEach(function(e){var t=e.events[0],n=e.events[e.events.length-1];e.start=t.part.start,e.end=n.part.end,e.left=t.part.left,e.width=n.part.right-t.part.left,e.right=n.part.right});if(f.Jh)return void _.loadRow(e);var t=f.groupConcurrentEvents;if(t)for(var n=0;n<e.blocks.length;n++)e.blocks[n].clear();DayPilot.list(e.events).forEach(function(t){if(!t.part.height)return e.eventHeight?void(t.part.height=e.eventHeight):void(t.part.height=N.Ik())});var i=function(e){return"number"==typeof e.data.line};e.events.filter(i).forEach(function(t){e.putIntoLine(t)});for(var a=0;a<e.events.length;a++){var r=e.events[a];e.putIntoLine(r),t&&e.putIntoBlock(r)}for(var o=0,n=0;n<e.lines.length;n++){var s=e.lines[n];s.top=o,o+=(s.height||e.eventHeight)*e.eventStackingLineHeight/100}if(t)for(var a=0;a<e.blocks.length;a++){var l=e.blocks[a];l.lines=[],l.events.sort(this.xe);for(var d=0;d<l.events.length;d++){var r=l.events[d];l.putIntoLine(r)}l.lines.length<=f.groupConcurrentEventsLimit&&(l.expanded=!0);var c=DayPilot.list(l.events).map(function(e){return e.id()}).some(function(e){return DayPilot.contains(f._m,e)});c&&(l.expanded=!0);for(var o=0,n=0;n<l.lines.length;n++){var s=l.lines[n];s.top=o,o+=(s.height||e.eventHeight)*e.eventStackingLineHeight/100}}}},this.tj=function(e){e=DayPilot.ua(e),e=f.Rj(e),e.forEach(function(e){f.ol(e)}),f.Jh?_.calculateEventPositions():e.forEach(function(e){f.Xl(e)})},this.zl=function(){var e="Manual"===f.scale?f.itline[0].start:f.startDate;return DayPilot.list(f.rowlist).some(function(t){return!!t.start&&t.start.getTime()!==new DayPilot.Date(e).getTime()})},this.jl=function(e,t){if(!t.hideEvents){var n=new DayPilot.Date(e.start),i=new DayPilot.Date(e.end);i=f.zg(i);var a=n.ticks,r=i.ticks;if(r<a)return null;var o=null;if("function"==typeof f.onBeforeEventRender){var s=DayPilot.indexOf(f.events.list,e);o=f.P.events[s]}if(o){if(o.hidden)return null}else if(e.hidden)return null;var l=!1;switch(this.viewType){case"Days":l=!(r<=t.data.startTicks||a>=t.data.endTicks)||a===r&&a===t.data.startTicks;break;case"Resources":l=(t.id===e.resource||"*"===t.id||"*"===e.resource)&&(!(r<=t.data.startTicks||a>=t.data.endTicks)||a===r&&a===t.data.startTicks);break;case"Gantt":l=t.id===e.id&&!(r<=t.data.startTicks||a>=t.data.endTicks)}if(!l)return null;var d=new DayPilot.Event(e,f);d.part.dayIndex=t.data.i,d.part.grid=t.data.grid,d.part.start=t.data.startTicks<a?n:t.data.start,d.part.end=t.data.endTicks>r?i:t.data.end;var c=this.getPixels(d.part.start.addTime(-t.data.offset)),u=this.getPixels(d.part.end.addTime(-t.data.offset));d.part.start===d.part.end&&(u=this.getPixels(d.part.end.addTime(-t.data.offset).addMilliseconds(1))),o&&o.height?d.part.height=o.height:e.height&&(d.part.height=e.height);o||d.data;d.part.an=function(){var e=this.height;if(f.eventVersionsEnabled&&!DayPilot.list(d.versions).isEmpty()){var t=d.versions.length;e+=t*f.eventVersionHeight,e+=t*f.eventVersionMargin}return e+f.eventMarginBottom};var h=c.left,v=u.left;if(d.part.startPixels=c,d.part.endPixels=u,h===v){if(c.cut||u.cut)return null;var p=(d.part.start.addTime(-t.data.offset).getTime()+d.part.end.addTime(-t.data.offset).getTime())/2;if(f.getPixels(new DayPilot.Date(Math.floor(p))).cut)return null}d.part.box=N.Jk(r-a);var m=f.eventHeight;if("Milestone"===e.type){var g=e.width||m;d.part.end=d.part.start,d.part.left=h-g/2,d.part.width=g,d.part.barLeft=0,d.part.barWidth=g}else if(d.part.box){var b=c.boxLeft,y=u.boxRight;d.part.left=b,d.part.width=y-b,d.part.barLeft=DayPilot.Util.atLeast(h-d.part.left,0),d.part.barWidth=DayPilot.Util.atLeast(v-h,1)}else d.part.left=h,d.part.width=DayPilot.Util.atLeast(v-h,1),d.part.barLeft=0,d.part.barWidth=DayPilot.Util.atLeast(v-h-1,1);var w=f.eventMinWidth;if(d.part.width=Math.max(d.part.width,w),d.part.right=d.part.left+d.part.width,d.cache=o,f.eventVersionsEnabled&&f.bn(d,t),"function"==typeof f.onEventFilter&&f.events.ve){var x={};if(x.filter=f.events.ve,x.filterParam=f.events.ve,x.visible=!0,x.e=d,f.onEventFilter(x),!x.visible)return null}return t.events.push(d),d}},this.bn=function(e,t){e.versions=[];var n=e.cache||e.data,i=DayPilot.list(n.versions);if(!i.isEmpty()){var a=e.part.left,r=e.part.left+e.part.width;i.forEach(function(n){var i=new DayPilot.Date(n.start),o=new DayPilot.Date(n.end),s=f.getPixels(i.addTime(-t.data.offset)),l=f.getPixels(o.addTime(-t.data.offset));i.ticks===o.ticks&&(l=f.getPixels(o.addTime(-t.data.offset).addTime(1)));var d=s.left,c=l.left;if(d===c&&(s.cut||l.cut))return null;var u={};u.left=d,u.continueLeft=i<t.data.start,u.right=c,u.continueRight=o>t.data.end,u.width=c-d,e.versions.push(u),u.left<a&&(a=u.left),u.right>r&&(r=u.right)}),f.eventVersionsReserveSpace?(e.part.versionsLeft=a,e.part.versionsRight=r,e.part.versionsWidth=r-a):(e.part.versionsLeft=e.part.left,e.part.versionsRight=e.part.left+e.part.width,e.part.versionsWidth=e.part.width)}},this.we=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var n=e.start().ticks-t.start().ticks;return 0!==n?n:t.end().ticks-e.end().ticks},this.xe=function(e,t){if(!e||!t)return 0;var n=e.cache||e.data,i=t.cache||t.data;if(!(n.sort&&n.sort.length>0&&i.sort&&i.sort.length>0))return f.we(e,t);for(var a=0,r=0;0===a&&"undefined"!=typeof n.sort[r]&&"undefined"!=typeof i.sort[r];)a=n.sort[r]===i.sort[r]?0:"number"==typeof n.sort[r]&&"number"==typeof i.sort[r]?n.sort[r]-i.sort[r]:f.ye(n.sort[r],i.sort[r],f.sortDirections[r]),r++;return a},this.ye=function(e,t,n){var i="desc"!==n,a=i?-1:1,r=-a;if(null===e&&null===t)return 0;if(null===t)return r;if(null===e)return a;var o=[];return o[0]=e,o[1]=t,o.sort(),e===o[0]?a:r},this.jk=function(e,t,n,i){if(f.cb()){var a=DayPilot.indexOf(f.rowlist,e),r=f.ek(e,a),o=DayPilot.indexOf(E.selected,e)!==-1,s=o?"deselected":"selected",l={};if(l.row=r,l.selected=o,l.ctrl=t,l.shift=n,l.meta=i,l.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onRowSelect&&(f.onRowSelect(l),l.preventDefault.value))return;var d=n&&!t&&!i;if(n||(E.cn={"row":e,"index":a}),d){E.fixRowSelectLast();var c=E.cn.index,u=a;E.selectRange(c,u)}switch(f.rowSelectHandling){case"PostBack":f.rowSelectPostBack(r,s);break;case"CallBack":f.rowSelectCallBack(r,s);break;case"Notify":!d&&E.select(e,t,n,i),f.rowSelectNotify(r,s);break;case"Update":!d&&E.select(e,t,n,i)}"function"==typeof f.onRowSelected&&(l.selected=DayPilot.indexOf(E.selected,e)!==-1,f.onRowSelected(l))}else{E.select(e,t,n);var a=DayPilot.indexOf(f.rowlist,e),r=f.ek(e,a),o=DayPilot.indexOf(E.selected,e)!==-1,s=o?"deselected":"selected";switch(f.rowSelectHandling){case"PostBack":f.rowSelectPostBack(r,s);break;case"CallBack":f.rowSelectCallBack(r,s);break;case"Notify":f.rowSelectNotify(r,s);break;case"JavaScript":f.onRowSelect(r,s)}}},this.rowSelectPostBack=function(e,t,n){var i={};i.resource=e,i.change=t,this.fa("RowSelect",i,n)},this.rowSelectCallBack=function(e,t,n){var i={};i.resource=e,i.change=t,this.ha("RowSelect",i,n)},this.rowSelectNotify=function(e,t,n){var i={};i.resource=e,i.change=t,this.ha("RowSelect",i,n,"Notify")},this.rows={},this.rows.selection={};var S=this.rows.selection;S.P=[],S.get=function(){var e=[];return DayPilot.list(E.selected).forEach(function(t){e.push(f.ek(t))}),e},S.clear=function(){E.clearSelection()},S.add=function(e){if(!e||!e.isRow)throw new DayPilot.Exception("DayPilot.Scheduler.rows.selection.add(): DayPilot.Row object expected");DayPilot.list(E.selected).some(function(t){return t===e.$.row})||(E.selected.push(e.$.row),S.dn(),E.en(e.$.row))},S.remove=function(e){if(!e||!e.isRow)throw new DayPilot.Exception("DayPilot.Scheduler.rows.selection.remove(): DayPilot.Row object expected");S.isSelected(e)&&(DayPilot.rfa(E.selected,e.$.row),S.dn(),E.en(e.$.row))},S.isSelected=function(e){if(!e||!e.isRow)throw new DayPilot.Exception("DayPilot.Scheduler.rows.selection.isSelected(): DayPilot.Row object expected");return DayPilot.indexOf(E.selected,e.$.row)!==-1},S.dn=function(){f.selectedRows=DayPilot.list(E.selected).map(function(e){return e.id}),S.P=[],E.selected.forEach(function(e){S.P[e.index]=!0})},this.rows.all=function(){for(var e=DayPilot.list(),t=0;t<f.rowlist.length;t++){var n=f.ek(f.rowlist[t]);e.push(n)}return e},this.rows.visible=function(){for(var e=DayPilot.list(),t=0;t<f.rowlist.length;t++){var n=f.rowlist[t];if(!n.hidden){var n=f.ek(f.rowlist[t]);e.push(n)}}return e},this.rows.each=function(e){f.rows.all().forEach(e)},this.rows.forEach=function(e){f.rows.all().forEach(e)},this.rows.filter=function(e,t){f.rows.ve=e,t||f.S&&f.Ic({"immediateEvents":!0})},Object.defineProperty(f.rows,"filterParam",{get:function(){return f.rows.ve}}),this.rows.sort=function(e){var t=f.rows.sortParam;if("string"==typeof e)f.rows.gn={"field":e,"order":"asc"};else if("object"==typeof e){var n=DayPilot.Util.copyProps(e);n.order||(n.order="asc"),f.rows.gn=n}else f.rows.gn=null;if(f.S&&f.Ic({"immediateEvents":!0}),"function"==typeof f.onRowSorted){var i={};i.oldSortParam=t,f.onRowSorted(i)}},Object.defineProperty(f.rows,"sortParam",{get:function(){return{"order":f.rows.hn(),"field":f.rows.in()}}}),this.rows.in=function(){var e=f.rows.gn;return e?e.field:null},this.rows.hn=function(){var e=f.rows.gn;return e?e.order:"asc"},this.rows.find=function(e,t){if("string"==typeof e||"number"==typeof e||!e&&t){var n=f.Ym(e);e||(n=f.rowlist);var i=null;return"string"==typeof t||t instanceof DayPilot.Date?(t=new DayPilot.Date(t),i=n.find(function(e){return t===e.start})):i=n.first(),i?new DayPilot.Row(i,f):null}if("function"!=typeof e)throw new DayPilot.Exception("Invalid rows.find() argument: id or function expected");var a=t||0,r=f.rowlist.find(function(t,n){return!(n<a)&&e(f.ek(t))});if(r)return f.ek(r)},this.rows.load=function(e,t,n){if(!e)throw new DayPilot.Exception("rows.load(): 'url' parameter required");var i=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof n&&n(t)},a=function(e){var n,a=e.request;try{n=JSON.parse(a.responseText)}catch(e){var r={};return r.exception=e,void i(r)}if(DayPilot.isArray(n)){var o={};if(o.preventDefault=function(){this.preventDefault.value=!0},o.data=n,"function"==typeof t&&t(o),o.preventDefault.value)return;f.resources=o.data,f.S&&f.update()}};f.rowsLoadMethod&&"POST"===f.rowsLoadMethod.toUpperCase()?DayPilot.ajax({"method":"POST","url":e,"success":a,"error":i}):DayPilot.ajax({"method":"GET","url":e,"success":a,"error":i})},this.rows.expand=function(e){for(var t=[],n=e||1,i=0;i<f.rowlist.length;i++){var a=f.rowlist[i],r=n===-1;a.level<n&&(r=!0),r&&!a.expanded&&a.children&&a.children.length>0&&t.push(a.index)}if(0!==t.length)if(1===t.length)f.Nl(t[0]);else{for(var i=0;i<t.length;i++){var o=t[i],s=f.rowlist[o].resource;s.expanded=!0}f.Ic()}},this.rows.expandAll=function(){f.rows.expand(-1)},this.rows.collapseAll=function(){f.rowlist.forEach(function(e){e.resource.expanded=!1}),f.Ic()},this.rows.headerHide=function(){f.jn=!0,f.kn(),f.Am(),f.Pi()},this.rows.headerShow=function(){f.jn=!1,f.kn(),f.Am(),f.Pi()},this.rows.headerToggle=function(){f.jn?f.rows.headerShow():f.rows.headerHide()},this.rows.edit=function(e){E.edit(e.$.row)},this.rows.remove=function(e){if("number"==typeof e||"string"==typeof e){var t=f.rows.find(e);if(!t)throw new DayPilot.Exception("The row to be removed was not found");return void f.rows.remove(t)}var n=e.$.row.resource,i=T.findParentArray(n);if(!i)throw new DayPilot.Exception("Cannot find source node parent");var a=DayPilot.indexOf(i,n);i.splice(a,1),f.update()},this.rows.update=function(e){if(!(e instanceof DayPilot.Row))throw new DayPilot.Exception("DayPilot.Scheduler.rows.update() expects a DayPilot.Row object.");var t=e.index,n=f.Ek(e.grid).rowlist,i=n[t],a=e.data,r=e.parent()?e.parent().$.row:null,o=f.ln(a),e=f.mn(o,r);e.hidden=i.hidden,e.level=i.level,e.children=i.children,e.index=t,e.top=i.top,e.height=i.height,e.grid=i.grid,n[t]=e,e.resetEvents(),f.Zi(e.index,e.grid),f.nn(e),f.ol(e),f.Qj(e.index,e.grid),f.Zh(),f.ai()},this.nn=function(e){for(var t=f.events.list,n=t.length,i="function"==typeof f.onBeforeEventRender,a=0;a<n;a++){var r=t[a];if(r){if(r instanceof DayPilot.Event)throw new DayPilot.Exception("DayPilot.Scheduler: DayPilot.Event object detected in events.list array. Use raw event data instead.");if("Days"===f.viewType)throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Days'.");if("Gantt"===f.viewType)throw new DayPilot.Exception(".rows.update() not supported for viewType = 'Gantt'.");if("*"===r.resource||"*"===e.id||r.resource===e.id){i&&this.ne(a);var o=this.jl(r,e);o&&i&&(o.cache=this.P.events[a])}}}},this.on=function(){var e=d.source,t=d.target,n=d.position,i=d.sourceCalendar;if(E.resetMoving(),f.cb()){var a={};if(a.source=f.ek(e),a.source.calendar=i,a.target=f.ek(t),a.position=n,a.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onRowMove&&(f.onRowMove(a),a.preventDefault.value))return;switch(f.rowMoveHandling){case"Update":E.move(a);break;case"CallBack":f.rowMoveCallBack(a.source,a.target,a.position);break;case"PostBack":f.rowMovePostBack(a.source,a.target,a.position);break;case"Notify":E.move(a),f.rowMoveNotify(a.source,a.target,a.position)}"function"==typeof f.onRowMoved&&f.onRowMoved(a)}else{var e=f.ek(e),t=f.ek(t),n=n;switch(f.rowMoveHandling){case"CallBack":f.rowMoveCallBack(e,t,n);break;case"PostBack":f.rowMovePostBack(e,t,n);break;case"JavaScript":f.onRowMove(e,t,n)}}},this.fi=function(e){var t=DayPilot.list(e);E.selected=[],t.isEmpty()||(f.Hh=!1,f.La()),t.forEach(function(e){var t=f.oi(e);t&&E.selected.push(t)}),E.pn()},this.kk={};var E=this.kk;E.edit=function(e){E.qn(e)},E.rowSelectLastSetDefault=function(){E.cn={"row":f.rowlist[0],"index":0}},E.rowSelectSetLast=function(e){var t=DayPilot.indexOf(f.rowlist,e);if(t===-1)throw new DayPilot.Exception("DayPilot.Scheduler: Row not found when selecting a range");E.cn={"row":e,"index":t}},E.fixRowSelectLast=function(){E.cn||E.rowSelectLastSetDefault();var e=DayPilot.indexOf(f.rowlist,E.cn.row);if(!(e>-1)){var t=f.oi(E.cn.row.id);t?(e=DayPilot.indexOf(f.rowlist,t),E.cn={"row":t,"index":e}):E.rowSelectLastSetDefault()}},E.createOverlay=function(e){var t=f.wm(),n=f.G("_rowmove_source"),i=DayPilot.Util.div(f.divHeader,0,e.top,t,e.height);i.className=n,e.moveOverlay=i},E.deleteOverlay=function(e){e&&(DayPilot.de(e.moveOverlay),e.moveOverlay=null)},E.qn=function(e){var t=E.rn(e),n=t.cells[0];if(n.input)return n.input;DayPilot.Areas.disable(n.firstChild);var i=n.clientWidth;e.isNewRow&&(i=f.Gi());var a=document.createElement("input");a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.width=i+"px",a.style.height=e.height-1+"px",a.style.border="0px none",a.style.overflow="hidden",a.style.boxSizing="border-box",a.style.resize="none",a.style.paddingLeft=e.level*f.treeIndent+"px",a.style.outline="none";var r=n.textDiv;a.style.fontFamily=DayPilot.gs(r,"fontFamily")||DayPilot.gs(r,"font-family"),a.style.fontSize=DayPilot.gs(r,"fontSize")||DayPilot.gs(r,"font-size"),a.value=e.name||"",n.firstChild.appendChild(a),n.input=a;var o=function(){try{n.input.parentNode.removeChild(n.input)}catch(e){s()}n.input=null};return a.focus(),a.onblur=function(){a.onblur=null;var t=a.value;o(),DayPilot.Areas.enable(n.firstChild),f.gk(e,t,a.canceled)},a.onkeydown=function(e){var t=e.keyCode;return 27===t&&(a.canceled=!0,o()),13!==t||(a.onblur(),!1)},a.setSelectionRange?a.setSelectionRange(0,9999):a.select(),a},E.selected=[],E.select=function(e,t,n,i){var a=DayPilot.indexOf(E.selected,e)!==-1;if(t||i){if(a)return DayPilot.rfa(E.selected,e),S.dn(),void E.en(e)}else a=!1,E.clearSelection();a||E.selected.push(e),S.dn(),E.en(e)},E.selectRange=function(e,t){E.clearSelection();for(var n=Math.min(e,t),i=Math.max(e,t),a=n;a<=i;a++){var r=f.rowlist[a];E.selected.push(r)}S.dn();for(var a=n;a<=i;a++){var r=f.rowlist[a];E.en(r)}},E.pn=function(){for(var e=0;e<E.selected.length;e++){var t=E.selected[e];E.en(t)}},E.en=function(e){var t=DayPilot.indexOf(f.rowlist,e);if(t===-1){var n=f.oi(e.id);if(!n)return;t=n.index}f.Wj(t),f.ai(),f.Fk(t),f.Cm(t)},E.rk=function(){var e=[];if(!E.selected)return e;for(var t=0;t<E.selected.length;t++){var n=E.selected[t],i=DayPilot.indexOf(f.rowlist,n),a=f.ek(n,i);e.push(a.toJSON())}return e},E.cn=null,E.clearSelection=function(){var e=E.selected;if(E.selected=[],f.selectedRows=[],S.P=[],e.length<=5)e.forEach(function(e){E.en(e)});else{f.Zh(),f.ai();for(var t=0;t<f.rowlist.length;t++)f.divHeader.rows[t]&&f.Qj(t)}},E.rn=function(e){for(var t=f.divHeader,n=0;n<t.rows.length;n++){var i=t.rows[n];if(i&&i.cells[0]&&i.cells[0].row===e)return i}return null},E.startMoving=function(e){var t=DayPilot.Global.rowmoving;t.row=e,t.sourceCalendar=f,t.cursor=f.divResScroll.style.cursor,f.divResScroll.style.cursor="move",E.createOverlay(e)},E.resetMoving=function(){f.divResScroll.style.cursor=d.cursor,DayPilot.de(d.div),E.deleteOverlay(d.row),DayPilot.Global.rowmoving=d={}},E.sn=function(e){var t=DayPilot.mo3(f.divHeader,e),n=f.yk(t.y),i=f.rowlist[n.i];if(i&&!i.isNewRow){var a=t.y-n.top,r=n.bottom-n.top,o=r/3,s=2*o,l=r/2,c="before",u=i.children&&i.children.length>0,h=u&&i.expanded,v=function(){for(var e=n.i,t=i.level;e>=0;){var a=f.rowlist[e];if(e--,!(t<=a.level)){if(a===d.row)return!0;if(0===a.level)return!1;t=a.level}}return!1}(),p=f.treeEnabled;c=v||n.i===d.row.index?"forbidden":p?u&&h?a<l?"before":"child":a<o?"before":a<s?"child":"after":u?"before":a<l?"before":"after",d.row.moveDisabled&&(c="forbidden"),d.calendar=f,d.source=d.row,d.target=f.rowlist[n.i],d.position=c;if(function(){return!d.last||(d.last.target!==d.target||d.last.position!==d.position)}()){if("function"==typeof f.onRowMoving){var m={};m.source=f.ek(d.source),m.target=f.ek(d.target),m.position=c,f.onRowMoving(m),d.position=m.position}}else d.last&&(d.position=d.last.position);d.last={},d.last.target=d.target,d.last.position=d.position,function(){d.div&&DayPilot.de(d.div);var e=n.top,t=d.position,i=f.rowlist[n.i],a=i.level,r=a*f.treeIndent;switch(t){case"before":e=n.top;break;case"child":e=n.top+l;break;case"after":e=n.bottom;break;case"forbidden":e=n.top+l}var o=f.wm()-r,s=document.createElement("div");s.style.position="absolute",s.style.left=r+"px",s.style.width=o+"px",s.style.top=e+"px",s.className=f.G("_rowmove_position_"+t),d.div=s,f.divResScroll.appendChild(s)}()}},E.move=function(e){var t=e.source.$.row.resource,n=e.target.$.row.resource,i=e.position;if("forbidden"!==i){var a=e.source.calendar.tn.findParentArray(t);if(!a)throw new DayPilot.Exception("Cannot find source node parent");var r=DayPilot.indexOf(a,t);a.splice(r,1);var o=T.findParentArray(n);if(!o)throw new DayPilot.Exception("Cannot find target node parent");var s=DayPilot.indexOf(o,n);switch(i){case"before":o.splice(s,0,t);break;case"after":o.splice(s+1,0,t);break;case"child":n.children||(n.children=[],n.expanded=!0),n.children.push(t)}f.update()}};var D={};this.un=D,D.uf=function(e){};var T={};this.tn=T,T.findParentArray=function(e){return T.findInArray(f.resources,e)},T.findInArray=function(e,t){if(DayPilot.indexOf(e,t)!==-1)return e;for(var n=0;n<e.length;n++){var i=e[n];if(i.children&&i.children.length>0){var a=T.findInArray(i.children,t);if(a)return a}}return null},this.Th=function(){var e=this.resources,t=this.I();t||("Gantt"===this.viewType?e=this.vn():"Days"===this.viewType&&(e=this.wn())),!t||"Days"!==this.viewType||e&&0!==e.length||(e=this.wn());var n={};if(n.i=0,null!=e&&!DayPilot.isArray(e))throw new DayPilot.Exception("DayPilot.Scheduler.resources expects an array object");e=e||[];var i=e.filter(function(e){return"top"!==e.frozen&&"bottom"!==e.frozen});f.rowlist=DayPilot.list(),this.xn(i,n,0,null,this.treeEnabled,!1,"main");var a=e.filter(function(e){return"string"==typeof e.frozen&&"top"===e.frozen.toLowerCase()});f.Ni.top.rowlist=DayPilot.list(),f.Ni.top.height=0,this.xn(a,{"i":0},0,null,!1,!1,"top");var r=e.filter(function(e){return"string"==typeof e.frozen&&"bottom"===e.frozen.toLowerCase()});f.Ni.bottom.rowlist=DayPilot.list(),f.Ni.bottom.height=0,this.xn(r,{"i":0},0,null,!1,!1,"bottom"),"Disabled"!==f.rowCreateHandling&&this.yn()},this.yn=function(){var e={};e.id="NEW",e.isNewRow=!0,e.html="",e.index=f.rowlist.length,e.loaded=!0,e.start=this.startDate,e.children=[],e.height=f.eventHeight,e.marginBottom=0,e.marginTop=0,e.getHeight=function(){return f.rowCreateHeight?f.rowCreateHeight:f.eventHeight+f.rowMarginBottom+f.rowMarginTop},e.putIntoLine=function(){},e.resetEvents=function(){},this.rowlist.push(e)},this.vn=function(){var e=[];if(this.Oh&&this.resources)for(var t=0;t<this.resources.length;t++)e.push(this.resources[t]);if(this.events.list){for(var t=0;t<this.events.list.length;t++){var n=this.events.list[t],i={};i.id=n.id,i.name=n.text,i.columns=n.columns,e.push(i)}return e}},this.wn=function(){for(var e=[],t=f.kb(),n=this.ea.ej(),i=0;i<this.days;i++){var a=t.addDays(i);if(f.showNonBusiness||f.businessWeekends||0!=a.dayOfWeek()&&6!=a.dayOfWeek()){var r={};r.name=a.toString(n.datePattern,n),r.start=a,e.push(r)}}return e},this.kb=function(){return this.itline&&this.itline.length>0?this.itline[0].start:new DayPilot.Date(this.startDate)},this.cj=function(){if(this.itline&&this.itline.length>0){var e=f.itline[this.itline.length-1].end;return"Days"!==f.viewType?e:e.addDays(f.days-1)}return new DayPilot.Date(f.startDate).addDays(f.days)},this.visibleStart=function(){return this.kb()},this.visibleEnd=function(){return this.cj()},this.mn=function(e,t){var n={};if(n.backColor=e.backColor,n.fontColor=e.fontColor,n.cssClass=e.cssClass,n.expanded=e.expanded,n.name=e.name,n.html=f.ca(e.name,e.html),n.eventHeight="undefined"!=typeof e.eventHeight?e.eventHeight:f.ea.Ik(),n.minHeight="undefined"!=typeof e.minHeight?e.minHeight:f.rowMinHeight,n.marginBottom="undefined"!=typeof e.marginBottom?e.marginBottom:f.rowMarginBottom,n.marginTop="undefined"!=typeof e.marginTop?e.marginTop:f.rowMarginTop,n.eventStackingLineHeight="undefined"!=typeof e.eventStackingLineHeight?e.eventStackingLineHeight:f.eventStackingLineHeight,n.loaded=!e.dynamicChildren,n.id=e.id||e.value,n.toolTip=e.toolTip,n.children=[],n.columns=[],n.start=e.start?new DayPilot.Date(e.start):this.kb(),n.isParent=e.isParent,n.contextMenu=e.contextMenu?DayPilot.Util.evalVariable(e.contextMenu):this.contextMenuResource,n.areas=e.areas,n.moveDisabled=e.moveDisabled,n.bubbleHtml=e.bubbleHtml,n.cellsDisabled=e.cellsDisabled,n.tags=e.tags,n.task=e.task,n.swimlane=e.swimlane,n.hideEvents=e.hideEvents,n.height=n.eventHeight,n.level=0,n.resource=e.zn,n.lines=[],n.blocks=[],n.containers=[],n.containerCache={},n.isRow=!0,n.getHeight=function(){var e=0;if(f.groupConcurrentEvents)for(var t=0;t<this.blocks.length;t++){var n=this.blocks[t];e=Math.max(e,n.getHeight())}else if(this.lines.length>0){var i=this.lines.length-1,a=this.lines[i],r=a.height||this.eventHeight,o=a.top||0;e=o+r}return 0===e&&(e=this.eventHeight),e>this.minHeight?e:this.minHeight},n.Cl=function(){var e=n.start.getTime()-f.kb().getTime();return f.itline[f.itline.length-1].end.addTime(e)},n.resetEvents=function(){var e=this;e.events=DayPilot.list(),e.events.forRange=function(t,n){t=new DayPilot.Date(t),n=n?new DayPilot.Date(n):e.Cl();for(var i=DayPilot.list(),a=0;a<e.events.length;a++){var r=e.events[a],o=f.zg(r.end());DayPilot.Util.overlaps(r.start(),o,t,n)&&i.push(r)}return i}},n.calculateUtilization=function(){function e(){for(var e=[],t=0;t<n.events.length;t++){var i=n.events[t];DayPilot.contains(e,i.start().toString())||e.push(i.start().toString()),DayPilot.contains(e,i.rawend().toString())||e.push(i.rawend().toString())}return e.sort(),e}function t(){for(var t=e(),i=[],a={"start":n.data.start},r=0;r<t.length;r++)a.end=new DayPilot.Date(t[r]),i.push(a),a={"start":new DayPilot.Date(t[r])};return a.end=n.data.end,i.push(a),i.forRange=function(e,t){for(var n=DayPilot.list(),i=0;i<this.length;i++){var a=this[i];DayPilot.Util.overlaps(e,t,a.start,a.end)&&n.push(a)}return n.maxSum=function(e){for(var t=0,n=0;n<this.length;n++){var i=this[n],a=i.sum(e);a>t&&(t=a)}return t},n},i}for(var n=this,i=n.sections=t(),a=0;a<i.length;a++){var r=i[a];r.events=DayPilot.list();for(var o=0;o<n.events.length;o++){var s=n.events[o];DayPilot.Util.overlaps(r.start,r.end,s.start(),s.rawend())&&r.events.push(s)}r.sum=function(e){for(var t=0,n=0;n<this.events.length;n++){var i=this.events[n],a=0;"undefined"==typeof e?a=1:i.tag(e)?a=i.tag(e):i.data[e]&&(a=i.data[e]),"number"==typeof a&&(t+=a)}return t}}},n.An=function(){var e=[];return e.height=0,e.add=function(t){this.push(t);var n=t.part.an();n>e.height&&(e.height=n)},e.isFree=function(e,t,n){for(var i=e+t-1,a=this.length,r=0;r<a;r++){var o=this[r];if(!(i<o.part.left||e>o.part.left+o.part.width-1)){if(DayPilot.contains(n,o.data))continue;return!1}if(o.part.container&&!(i<o.part.container.left||e>o.part.container.left+o.part.container.width-1))return!1;if(f.eventVersionsReserveSpace&&!(i<o.part.versionsLeft||e>o.part.versionsRight-1))return!1}return!0},e},n.findFreeLine=function(e,t,i){if("number"==typeof i){for(var a=0;a<=i;a++)this.lines[a]||(this.lines[a]=n.An());return i}if("dedicated"===i){var r=n.An();return r.isFree=function(){return!1},this.lines.push(r),this.lines.length-1}for(var a=0;a<this.lines.length;a++){var r=this.lines[a];if(r.isFree(e,t))return a}var r=n.An();return this.lines.push(r),this.lines.length-1},n.putIntoLine=function(e){var t=e.part.container;if(t){if(null===t.line&&("number"==typeof e.data.line||"dedicated"===e.data.line))return i=n.findFreeLine(t.left,t.width,e.data.line),this.lines[i].add(e),t.line=i,i}else if("number"==typeof e.data.line||"dedicated"===e.data.line)return i=n.findFreeLine(e.part.left,e.part.width,e.data.line),this.lines[i].add(e),i;var i=-1;if(t){if(null!==t.line)return this.lines[t.line].add(e),t.line;i=n.findFreeLine(t.left,t.width),t.line=i}else i=f.eventVersionsReserveSpace?n.findFreeLine(e.part.versionsLeft,e.part.versionsWidth):n.findFreeLine(e.part.left,e.part.width);return this.lines[i].add(e),i},n.putIntoBlock=function(e){for(var t=0;t<this.blocks.length;t++){var n=this.blocks[t];if(DayPilot.indexOf(n.events,e)!==-1)return;if(n.overlapsWith(e.part.left,e.part.width))return n.events.push(e),e.part.block=n,n.min=Math.min(n.min,e.part.left),n.max=Math.max(n.max,e.part.left+e.part.width),t}var n={};n.expanded=!1,n.row=this,n.events=DayPilot.list(),n.lines=DayPilot.list(),n.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var n=this.lines[t];if(n.isFree(e.part.left,e.part.width))return n.add(e),t}var n=[];n.height=0,n.add=function(e){this.push(e),e.part.height>n.height&&(n.height=e.part.height)},n.isFree=function(e,t){for(var n=e+t-1,i=this.length,a=0;a<i;a++){var r=this[a];if(!(n<r.part.left||e>r.part.left+r.part.width-1))return!1}return!0},n.add(e),this.lines.push(n)},n.overlapsWith=function(e,t){return!(e+t-1<this.min||e>this.max-1)},n.getHeight=function(){if(!this.expanded)return f.eventHeight;if(this.lines.length>0){var e=this.lines.length-1,t=this.lines[e],n=t.height||f.eventHeight;return(t.top||0)+n}return f.eventHeight},n.clear=function(){n.events=DayPilot.list(),n.min=null,n.max=null},n.events.push(e),e.part.block=n,n.min=e.part.left,n.max=e.part.left+e.part.width,this.blocks.push(n)},n.Bn=!1,n.Cn=t,n.Oc=function(){this.hidden=!this.Dn(),this.Bn=!1,this.Cn&&this.Cn.Oc()},n.Dn=function(){return!this.Cn||this.Cn.Dn()&&this.Cn.expanded},e.columns)for(var i=0;i<e.columns.length;i++)n.columns.push(e.columns[i]);return n},this.Ij=function(){f.rowlist.forEach(function(e){if(!e.isNewRow&&"function"==typeof f.onRowFilter&&f.rows.ve){var t=e.Cn,n={};if(n.visible=!0,n.row=f.ek(e),n.filter=f.rows.ve,n.filterParam=f.rows.ve,n.control=f,f.onRowFilter(n),e.Bn=!n.visible,n.visible){f.rowFilterParentsAlwaysVisible&&t&&t.Oc()}else e.hidden=!0}})},this.En=function(e){return!e.some(function(e){return e.children&&e.children.length})},this.Fn=function(e){return!e.some(function(e){return!e.children||0===e.children.length})},this.Ek=function(e){return e=e||"main",f.Ni[e]},this.xn=function(e,t,n,i,a,r,o){if(e){var s=!1;if(f.rows.gn)switch(f.rowSortingMode){case"LeavesOnly":s=f.En(e);break;case"ParentsOnly":s=f.Fn(e)}if(s){var l=f.rows.in(),d="desc"===f.rows.hn(),c=DayPilot.list(e,!0);c.sort(function(e,t){var n=f.Hm(e,l),i=f.Hm(t,l),a=0;return a=n===i?0:"number"==typeof n&&"number"==typeof i?n-i:f.ye(n,i,"asc"),d?-a:a}),e=c}for(var u=f.Ek(o).rowlist,h=0;h<e.length;h++)if(e[h]){var v={};if(v.level=n,v.hidden=r,v.index=t.i,!e[h].hidden){var p=this.ln(e[h],v),m=f.mn(p,i);if(r&&(m.hidden=!0),m.level=n,m.index=t.i,m.grid=o||"main",null!==i&&i.children.push(t.i),u.push(m),t.i++,a&&p.children&&p.children.length){var g=r||!m.expanded;this.xn(p.children,t,n+1,m,!0,g,o)}}}}},this.Gn=["text","html","backColor","cssClass","areas","horizontalAlignment","hidden"],this.Zl=function(e){if(e.isNewRow)return{"row":{"cssClass":f.G("_row_new"),"moveDisabled":!0,"html":f.rowCreateHtml||""}};var t={};t.row=this.ek(e),DayPilot.Util.copyProps(e,t.row,["html","backColor","fontColor","cssClass","toolTip","contextMenu","moveDisabled"]),t.row.columns=DayPilot.Util.createArrayCopy(e.columns,f.Gn),t.row.areas=DayPilot.Util.createArrayCopy(e.areas);var n=f.rowHeaderColumns;if("undefined"==typeof t.row.columns&&n.length>0){r.columns=[];for(var i=0;i<n.length;i++)r.columns.push({})}return"function"==typeof this.onBeforeRowHeaderRender&&this.onBeforeRowHeaderRender(t),t},this.ln=function(e,t){var n=this.Hn(e,t);if("function"==typeof this.onBeforeResHeaderRender){var i={};i.resource=n,this.onBeforeResHeaderRender(i)}return n},this.Hn=function(e,t){var n={get $data(){return this.zn}};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];if(n.html=f.ca(e.name,e.html),f.rowHeaderColumns&&f.rowHeaderColumns.length>0&&"undefined"==typeof n.columns){n.columns=[];var a=f.rowHeaderColumns;if(f.Oj()){for(var r=0;r<a.length;r++){var o=a[r],s=f.Hm(e,o.display);n.columns.push({"text":s})}n.columns[0]&&a[0]&&!a[0].display&&(n.columns[0].text=n.name)}else for(var r=0;r<a.length;r++)n.columns.push({})}return n.zn=e,n},this.Gj=function(){this.nav.top.dp=this,this.nav.top.innerHTML="",DayPilot.Util.addClass(this.nav.top,this.G("_main")),this.nav.top.setAttribute("role","region"),this.nav.top.setAttribute("aria-label","scheduler"),this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.webkitUserSelect="none",this.nav.top.style.WebkitTapHighlightColor="rgba(0,0,0,0)",this.nav.top.style.WebkitTouchCallout="none",this.width&&(this.nav.top.style.width=this.width),"Parent100Pct"===this.heightSpec&&(this.nav.top.style.height="100%"),this.nav.top.style.lineHeight="1.2",this.nav.top.style.position="relative",this.visible||(this.nav.top.style.display="none"),this.nav.top.onmousemove=this.Bh,this.nav.top.onmouseout=function(){f.Pl()},this.nav.top.ontouchstart=M.onMainTouchStart,this.nav.top.ontouchmove=M.onMainTouchMove,this.nav.top.ontouchend=M.onMainTouchEnd,this.hideUntilInit&&this.backendUrl&&(this.nav.top.style.visibility="hidden");var e=this.Gi(),t="Top"===f.timeHeaderPosition;if(f.Fj=f.timeHeaderPosition,"DivBased"===this.ea.In()){var n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.width=e+"px";var i=document.createElement("div");i.style.height="1px",i.className=this.G("_divider_horizontal"),this.nav.dh1=i,this.nav.left=n,"Top"===f.timeHeaderPosition?(n.appendChild(this.Ad()),n.appendChild(i),n.appendChild(this.Jn()),f.Ni.top.enabled(),n.appendChild(this.Kn()),n.appendChild(this.Ln())):"Bottom"===f.timeHeaderPosition?(n.appendChild(this.Jn()),n.appendChild(i),n.appendChild(this.Ad())):n.appendChild(this.Jn());var a=document.createElement("div");a.style.position="absolute",a.style.left=e+"px",a.style.width=N.Hi()+"px",a.style.height=this.Ii()+this.dd()+"px",a.className=this.G("_divider")+" "+this.G("_splitter"),a.setAttribute("unselectable","on"),this.nav.divider=a,this.rowHeaderScrolling&&this.Mn();var r=document.createElement("div");
r.style.marginLeft=e+N.Hi()+"px",r.style.marginRight="1px",r.style.position="relative",this.nav.right=r;var o=document.createElement("div");o.style.height="1px",t&&(o.style.position="absolute",o.style.top=this.Ii()+"px"),o.style.width="100%",o.className=this.G("_divider_horizontal"),this.nav.dh2=o,"Top"===f.timeHeaderPosition?(r.appendChild(f.Nn()),r.appendChild(o),r.appendChild(f.On()),f.Ni.top.enabled(),r.appendChild(f.Pn()),r.appendChild(f.Qn())):"Bottom"===f.timeHeaderPosition?(r.appendChild(f.On()),r.appendChild(o),r.appendChild(f.Nn())):r.appendChild(f.On());var s=document.createElement("div");s.style.clear="left";var l=document.createElement("div");l.style.height="1px",l.style.position="absolute",l.style.left="0px",l.style.right="0px",l.style.display="none",l.className=this.G("_divider_horizontal")+" "+this.G("_divider_horizontal_frozen_top"),l.onmousemove=function(e){e.cancelBubble=!0},this.nav.dividerTop=l;var d=document.createElement("div");d.style.height="1px",d.style.position="absolute",d.style.left="0px",d.style.right="0px",d.style.display="none",d.className=this.G("_divider_horizontal")+" "+this.G("_divider_horizontal_frozen_bottom"),d.onmousemove=function(e){e.cancelBubble=!0},this.nav.dividerBottom=d,this.nav.top.appendChild(n),this.nav.top.appendChild(a),this.nav.top.appendChild(r),this.nav.top.appendChild(s),this.nav.top.appendChild(l),this.nav.top.appendChild(d)}else{var c=document.createElement("table");c.cellPadding=0,c.cellSpacing=0,c.border=0,c.style.position="absolute";var u=c.insertRow(-1);u.insertCell(-1).appendChild(this.Ad()),u.insertCell(-1).appendChild(this.Nn());var h=c.insertRow(-1);h.insertCell(-1).appendChild(this.Jn()),h.insertCell(-1).appendChild(this.On()),this.nav.top.appendChild(c)}if(this.tg=document.createElement("div"),this.tg.style.display="none",this.nav.top.appendChild(this.tg),this.ma()){var v=document.createElement("input");v.type="hidden",v.id=this.id+"_state",v.name=this.id+"_state",this.nav.state=v,this.nav.top.appendChild(v)}var p=document.createElement("div");p.style.position="absolute",p.style.left=this.Gi()+N.Hi()+5+"px",p.style.top=this.Ii()+5+"px",p.style.display="none",p.innerHTML=f.ca(this.loadingLabelText,this.loadingLabelHtml),DayPilot.Util.addClass(p,this.G("_loading")),this.nav.loading=p,this.nav.top.appendChild(p),this.Rn(),f.Sn()},this.Bh=function(e){if(d.row)E.sn(e);else if(o.splitting){var t=DayPilot.mo3(f.nav.top,e).x,n=f.wm(),i=t-1;f.rowHeaderCols&&(i=Math.min(n,t-1)),i=Math.max(0,i),f.rowHeaderWidth=i,f.jn=!1,f.rowHeaderCols||f.Tn(),f.kn(),f.gi(),f.Nd()}},this.Na=function(){var e=this.Ii(),t="Top"===f.timeHeaderPosition;this.nav.corner&&(this.nav.corner.style.height=e+"px"),this.divTimeScroll&&(this.divTimeScroll.style.height=e+"px"),this.divNorth&&(this.divNorth.style.height=e+"px"),this.nav.dh1&&this.nav.dh2&&t&&(this.nav.dh1.style.top=e+"px",this.nav.dh2.style.top=e+"px"),this.nav.loading.style.top=e+5+"px",t&&(this.nav.scroll.style.top=e+1+"px")},this.Gi=function(){if(this.jn)return 0;var e=0,t=this.rowHeaderScrolling,n=this.wm();return e=t&&this.rowHeaderWidth<n?this.rowHeaderWidth:n},this.Mn=function(){var e=this.nav.divider;e.style.cursor="col-resize",e.setAttribute("unselectable","on"),e.onmousedown=function(e){var t=o.splitting={};return t.cursor=f.nav.top.style.cursor,t.cleanup=function(){if(f.Am(),f.nav.top.style.cursor=t.cursor,"function"==typeof f.onRowHeaderResized){var e={};f.onRowHeaderResized(e)}},f.nav.top.style.cursor="col-resize",!1}},this.kn=function(){var e=N.Hi(),t=this.Gi();if(this.nav.corner&&(this.nav.corner.style.width=t+"px"),this.nav.corner&&(this.divCorner.style.width=t+"px"),this.divResScroll.style.width=t+"px","DivBased"===N.In()&&(this.nav.left.style.width=t+"px",this.nav.divider.style.left=t-e+"px",this.nav.right.style.marginLeft=t+"px"),this.nav.message&&(this.nav.message.style.left=f.Fi()+"px"),this.nav.loading&&(this.nav.loading.style.left=t+e+5+"px"),this.nav.hideIcon){var n=this.nav.hideIcon,i=f.G("_header_icon_show"),a=f.G("_header_icon_hide");n.style.left=t-1+"px",f.jn?(DayPilot.Util.removeClass(n,a),DayPilot.Util.addClass(n,i)):(DayPilot.Util.removeClass(n,i),DayPilot.Util.addClass(n,a))}},this.Tn=function(){this.vm();var e=this.wm(),t=function(e,t,n){if(e&&e.style){var i=e.firstChild;f.Bm?(e.style.width=t+"px",i.style.width=t+"px","number"==typeof n&&(e.style.left=n+"px")):i.style.width=t+"px"}},n=function(n){var i=n.cells[0];if(i.colSpan>1||"max"===i.colSpan){var i=n.cells[0];t(i,e)}else if(f.rowHeaderCols)for(var a=0,r=0;r<n.cells.length;r++){var o=f.rowHeaderCols[r],i=n.cells[r];t(i,o,a),a+=o}else{var o=f.rowHeaderWidth,i=n.cells[0];t(i,o)}},i=this.divHeader;i.style.width=e+"px";for(var a=f.xm(),r=a.start;r<a.end;r++){var o=i.rows[r];o&&n(o)}if(f.Ni.top.enabled())for(var r=0;r<f.Ni.top.rowlist.length;r++){var o=f.Ni.top.divHeader.rows[r];n(o)}if(f.Ni.bottom.enabled())for(var r=0;r<f.Ni.bottom.rowlist.length;r++){var o=f.Ni.bottom.divHeader.rows[r];n(o)}if(f.nav.resScrollSpace&&(f.nav.resScrollSpace.style.width=e+"px"),f.Ni.bottom.enabled()){f.Ni.bottom.divSpace.style.width=e+"px"}this.Ba()},this.Cj=function(){this.kn(),this.Tn()},this.Bj=function(){var e=f.nav.corner,t=N.Yl(),n=document.createElement("div");n.style.position="absolute",n.style.bottom="0px",n.style.left="0px",n.style.width="100%",n.style.height=N.Un()+"px",n.style.overflow="hidden",f.nav.columnScroll=n;var i=document.createElement("div");i.style.position="absolute",i.style.bottom="0px",i.style.left="0px",i.style.width="5000px",i.style.height=N.Un()+"px",i.style.overflow="hidden",i.className=this.G("_columnheader"),n.appendChild(i);var a=document.createElement("div");a.style.position="absolute",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.className=this.G("_columnheader_inner"),i.appendChild(a),f.Dk&&(f.Dk.dispose(),f.Dk=null);var r=[];t.forEach(function(e){var t={};t.column={},t.column.html=f.ca(e.text||e.name||e.title,e.html),t.column.areas=null,t.column.sortingEnabled=!!e.sort,t.column.data=e,r.push(t),"function"==typeof f.onBeforeRowHeaderColumnRender&&f.onBeforeRowHeaderColumnRender(t)});var o=new DayPilot.Splitter(a);o.enabled=f.rowHeaderColumnsResizable,o.widths=DayPilot.Util.propArray(t,"width",f.rowHeaderColumnDefaultWidth),o.height=N.Un(),o.css.title=this.G("_columnheader_cell"),o.css.titleInner=this.G("_columnheader_cell_inner"),o.css.splitter=this.G("_columnheader_splitter");var s=f.rows.in(),l=f.rows.hn();o.titles=DayPilot.list(r).map(function(e){var t=e.column.data,n=e.column.html,i={};if(i.areas=[],t.sort&&e.column.sortingEnabled){var a=f.G("_sorticon");s===t.sort?(a+=" "+f.G("_sorticon_active"),a+="asc"===l?" "+f.G("_sorticon_asc"):" "+f.G("_sorticon_desc")):a+=" "+f.G("_sorticon_asc"),i.areas=[{right:5,top:0,bottom:0,width:10,cssClass:a,onClick:function(e){var n={};n.field=t.sort,s===t.sort?n.order="asc"===f.rows.hn()?"desc":"asc":n.order="asc",f.rows.sort(n)}}]}return DayPilot.isArray(e.column.areas)&&(i.areas=i.areas.concat(e.column.areas)),i.html=n,i}),o.data=DayPilot.list(t,!0),o.updating=function(e){f.ii.skip=!0,DayPilot.Util.updatePropsFromArray(N.Yl(),"width",this.widths),f.Cj(),"Auto"===f.cellWidthSpec},o.updated=function(e){if(f.Am(),f.cb()){if("function"==typeof f.onRowHeaderColumnResized){var t={};t.column=N.Yl()[e.index],f.onRowHeaderColumnResized(t)}}else switch(f.rowHeaderColumnResizedHandling){case"CallBack":break;case"PostBack":break;case"JavaScript":if("function"==typeof f.onRowHeaderColumnResized){var t={};t.column=N.Yl()[e.index],f.onRowHeaderColumnResized(t)}}},o.color="#000000",o.opacity=30,o.init(),e.appendChild(n),this.Dk=o},this.Vh=function(){var e=this.nav.corner;if(e){f.ta(),e.innerHTML="",e.className=this.G("_corner");var t=document.createElement("div");if(t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.right="0px",t.style.bottom="0px",t.className=this.G("_corner_inner"),this.divCorner=t,t.innerHTML="&nbsp;",this.rowHeaderColumns&&this.rowHeaderColumns.length>0){var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.bottom=N.Un()+1+"px",e.appendChild(n);var i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.height="1px",i.style.bottom=N.Un()+"px",i.className=this.G("_divider"),e.appendChild(i),n.appendChild(t),this.Bj()}else e.appendChild(t);!function(){var e={};e.control=f,e.html=f.ca(f.cornerText,f.cornerHtml),e.areas=null;var t=null;if("function"==typeof f.onBeforeCornerRender&&f.onBeforeCornerRender(e),"function"==typeof f.onBeforeCornerDomAdd&&(e.element=null,f.onBeforeCornerDomAdd(e),t=e.element),t){var n=f.divCorner;n.domArgs=e;if(DayPilot.Util.isReactComponent(t)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.render(t,n)}else n.appendChild(t)}else f.divCorner&&(f.divCorner.innerHTML=e.html||"");e.areas&&DayPilot.Areas.attach(f.nav.corner,{},{"areas":e.areas})}();var a=document.createElement("div");a.style.position="absolute",a.style.padding="2px",a.style.top="0px",a.style.left="1px",a.style.backgroundColor="#FF6600",a.style.color="white",a.innerHTML="\u0044\u0045"+"\u004D\u004F",DayPilot.Util.isNullOrUndefined(undefined)&&e.appendChild(a)}},this.Rn=function(){var e=3,t=this.Gi()+N.Hi()-1,n=10,i=20,a=this.Ii()+e,r=DayPilot.Util.div(this.nav.top,t,a,n,i);r.style.cursor="pointer",r.className=f.G("_header_icon"),DayPilot.Util.addClass(r,f.G("_header_icon_hide")),r.onclick=function(){f.rows.headerToggle()},this.nav.hideIcon=r},this.Jj=function(){f.nav.hideIcon&&(f.rowlist.length>0&&f.rowHeaderHideIconEnabled?f.nav.hideIcon.style.display="":f.nav.hideIcon.style.display="none")},this.Ad=function(){var e=this.Gi(),t=document.createElement("div");return f.nav.corner=t,t.style.width=e+"px",t.style.height=this.Ii()+"px",t.style.overflow="hidden",t.style.position="relative",t.setAttribute("unselectable","on"),t.onmousemove=function(){f.Aa()},t.oncontextmenu=function(){return!1},this.Vh(),t},this.Ii=function(){if("None"===f.timeHeaderPosition)return 0;if(f.timeHeaders){var e=U._l(f.timeHeaders.length-1);return e.top+e.height}return this.timeHeader?f.timeHeader.length*N.Un():0},this.Vn=null,this.Wn=function(){return f.scrollStep||f.eventHeight},this.Jn=function(){var e=document.createElement("div");e.style.width=this.Gi()+"px",e.style.height=this.dd()+"px",e.style.overflow="hidden",e.style.position="relative",e.className=f.G("_rowheader_scroll");var t=f.Wn(),n=f.ea.Gm();n&&(e.style.overflowY="auto"),e.onmousemove=function(){f.Aa()},e.ontouchstart=function(){o.Xn=!0},e.addEventListener("wheel",function(n){if(0!==f.Yn()){var i;i=f.overrideWheelScrolling||f.scrollStep?n.deltaY>0?t:-t:1===n.deltaMode?n.deltaY*N.Zn()*1.7:n.deltaY,f.nav.scroll.scrollTop=e.scrollTop+i,n.preventDefault&&n.preventDefault()}},!1),e.oncontextmenu=function(){return!1},e.onscroll=function(){if(f.Vn&&clearTimeout(f.Vn),n){var t=function(){var t=f.Ql()-f.nav.scroll.offsetHeight;e.scrollTop=Math.min(e.scrollTop,t),f.nav.scroll.scrollTop=e.scrollTop};a?o.Xn&&(f.Vn=setTimeout(t,10)):f.Vn=setTimeout(t,10)}else f.Vn=setTimeout(function(){f.nav.scroll.scrollTop=e.scrollTop},500)},f.$n(e),e.setAttribute("role","region"),e.setAttribute("aria-label","scheduler rows");var i=document.createElement("div");return i.onmousemove=function(){f.Aa()},this.divHeader=i,e.appendChild(i),this.divResScroll=e,this.Mi=e,e},this.$n=function(e){e.addEventListener("scroll",function(){f.rowHeaderScrolling&&(f.nav.columnScroll&&(f.nav.columnScroll.scrollLeft=e.scrollLeft),f.Ni.top.enabled()&&(f.Ni.top.divHeader.scrollLeft=e.scrollLeft),this!==f.divResScroll&&(f.divResScroll.scrollLeft=e.scrollLeft))}),e.onmouseenter=function(){f.rowHeaderScrolling&&(e.style.overflowX="auto")},e.onmouseleave=function(){f.rowHeaderScrolling&&(e.style.overflowX="hidden")}},this._n=function(e){if("TableBased"===N.In()){var t=parseInt(this.width,10),n=isNaN(t)||this.width.indexOf("%")!==-1,i=(/MSIE/i.test(navigator.userAgent),this.wm());n?this.nav.top&&this.nav.top.offsetWidth>0&&(e.style.width=this.nav.top.offsetWidth-6-i+"px"):e.style.width=t-i+"px"}},this.Gf=function(e){"function"!=typeof ResizeObserver&&(f._a(),f.gi())},this._a=function(){f.T||("TableBased"===f.ea.In()&&(f._n(f.nav.scroll),f._n(f.divTimeScroll)),f.Ua(),f.Am(),f.ao(),f.P.drawArea=null)},this.ke=null,this.le=null,this.na=null,this.fe=function(){var e=function(){f._a(),f.gi(null,{"dontHideBubble":!0})},t=function(){return f.ke?(f.ke.width!==f.nav.top.offsetWidth&&(f.ke.changed=!0,f.ke.width=f.nav.top.offsetWidth),void(f.ke.changed&&(f.ke.changed=!1,e()))):(f.ke={},f.ke.changed=!1,void(f.ke.width=f.nav.top.offsetWidth))};if(f.watchWidthChanges){if("function"==typeof ResizeObserver){if(f.na)return;var n=new ResizeObserver(t);return n.observe(f.nav.top),void(f.na=n)}if(!f.le){var i=function(){return f.nav&&f.nav.top?f.ke?(f.ke.width!==f.nav.top.offsetWidth&&(f.ke.changed=!0,f.ke.counter=0,f.ke.width=f.nav.top.offsetWidth),f.ke.changed&&(f.ke.counter+=1),void(f.ke.changed&&f.ke.counter>0&&(f.ke.changed=!1,e()))):(f.ke={},f.ke.counter=0,f.ke.changed=!1,void(f.ke.width=f.nav.top.offsetWidth)):void clearInterval(f.le)};this.le=setInterval(i,200),i()}}},this.ao=function(){var e=f.rangeHold;f.clearSelection(),f.rangeHold=e,f.ak(e,{"justDraw":!0})},this.Am=function(){"Auto"===f.cellWidthSpec&&(f.ma()&&f.Zh(),f.S&&(f.Rh(),f.Sh(),f.Wh(),f.Zh(),f.$h(),f.pa(),f.Ma(),f.Xh(),f.Yh(),f.uj(),f.Za(),f.ai(),f.bi(),f.Ua()))},this.Rh=function(){if("Auto"===this.cellWidthSpec){var e=this.nav.top.clientWidth,t=this.Gi(),n=f.Yn(),i=e-t-n;if(this.Ul()){var a=i/this.Ul();this.cellWidth=Math.max(a,f.cellWidthMin),f.Li=a<f.cellWidthMin}}},this.Yn=function(){if("Auto"===f.heightSpec)return 0;if("Max"===f.heightSpec||"Fixed"===f.heightSpec||"Parent100Pct"===f.heightSpec){return f.Ql()>f.height?DayPilot.sw(f.nav.scroll):0}return DayPilot.sw(f.nav.scroll)},this.Ri=function(){var e=this.nav.top.clientWidth,t=this.Gi(),n=this.dd(),i=this.Ql(),a="Auto"===f.heightSpec,r=0;return i>n&&!a&&(r=DayPilot.swa()),e-t-2-r},this.Nn=function(){var e="Top"===f.timeHeaderPosition,t=document.createElement("div");t.style.overflow="hidden",t.style.display="block",e?(t.style.position="absolute",t.style.top="0px"):t.style.position="relative",t.style.width="100%",t.style.height=this.Ii()+"px",t.style.overflow="hidden",t.onmousemove=function(){f.Aa(),f.cellBubble&&f.cellBubble.delayedHide()},t.className=f.G("_timeheader_scroll"),this._n(t),this.divTimeScroll=t;var n=document.createElement("div");return n.style.width=this.Di()+5e3+"px",this.divNorth=n,t.appendChild(n),t},this.dd=function(){var e=0,t=f.heightSpec;return"Fixed"===t||"Parent100Pct"===t?this.height?this.height:0:(e=f.Ql(),("Max"===t||"Max100Pct"===t)&&e>f.height?f.height:e)},this.bo=null,this.co=0,this.do=0,this.eo=0,this.Pi=function(){if("function"==typeof f.onHeightChanged||"function"==typeof f.onDimensionsChanged){f.bo&&clearTimeout(f.bo);var e=function(){var e=f.nav.top.offsetHeight,t=f.co;f.co=e;var n=f.nav.top.offsetWidth,i=f.do;f.do=n;var a=f.Gi(),r=f.eo;if(f.eo=a,"function"==typeof f.onHeightChanged&&e!==t){var o={};o.oldHeight=t,o.newHeight=e,f.onHeightChanged(o)}if("function"==typeof f.onDimensionsChanged&&(e!==t||n!==i||a!==r)){var o={};o.oldHeight=t,o.newHeight=e,o.oldWidth=i,o.newWidth=n,o.oldRowHeaderWidth=r,o.newRowHeaderWidth=a,f.onDimensionsChanged(o)}};f.bo=setTimeout(e,100)}},this.Ql=function(){var e;return this.Nh!==-1?(e=this.Nh,this.Nh>0&&"auto"===f.nav.scroll.style.overflowX&&(e+=DayPilot.sh(f.nav.scroll))):e=this.rowlist.length*this.ea.Ik(),e+=f.Ni.bottom.height},this.Aa=function(){f.fo&&(this.Ba(),this.go(),this.ho(),this.tm(),this.Pl(),f.cellBubble&&f.cellBubble.hideOnMouseOut(),f.bubble&&f.bubble.hideOnMouseOut(),f.fo=!1)},this.Ni={},this.Ni.top={},this.Ni.top.height=0,this.Ni.top.rowlist=[],this.Ni.top.enabled=function(){return this.rowlist&&this.rowlist.length>0},Object.defineProperty(f.Ni.top,"top",{get:function(){return f.Ii()+1}}),Object.defineProperty(f.Ni.top,"right",{get:function(){return f.Yn()}}),Object.defineProperty(f.Ni.top,"heightRes",{get:function(){return this.height}}),this.Ni.bottom={},this.Ni.bottom.height=0,this.Ni.bottom.rowlist=[],this.Ni.bottom.enabled=function(){return this.rowlist&&this.rowlist.length>0},Object.defineProperty(f.Ni.bottom,"top",{get:function(){return f.Ii()+f.dd()-this.height-DayPilot.sh(f.nav.scroll)+1}}),Object.defineProperty(f.Ni.bottom,"right",{get:function(){return f.Yn()}}),Object.defineProperty(f.Ni.bottom,"heightRes",{get:function(){return this.height+DayPilot.sh(f.nav.scroll)}}),this.Ni.main={},this.Sn=function(){var e=f.Ni.main;e.divCells=f.divCells,e.divLines=f.divLines,e.divHeader=f.divHeader,e.divEvents=f.divEvents,e.divShadow=f.divShadow,e.divHover=f.divHover,e.divCrosshair=f.divCrosshair,e.div=f.nav.scroll,Object.defineProperty(f.Ni.main,"rowlist",{get:function(){return f.rowlist}}),Object.defineProperty(f.Ni.main,"top",{get:function(){return f.Ii()+1}}),Object.defineProperty(f.Ni.main,"height",{get:function(){return f.Nh}})},this.Kn=function(){var e=f.Ni.top,t=e.top,n=e.height,i=document.createElement("div");return i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.top=t+"px",i.style.height=n+"px",i.style.overflow="hidden",i.style.boxSizing="border-box",i.rows=[],e.divHeader=i,i},this.Ln=function(){var e=f.Ni.bottom,t=e.top,n=e.height,i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.top=t+"px",i.style.height=n+"px",i.style.overflow="hidden",i.style.boxSizing="border-box";var a=document.createElement("div");a.style.position="absolute",a.style.height="500px",a.style.top=e.height+"px",a.style.left="0px",a.style.width=f.wm()+"px",a.className=f.G("_rowheader"),i.appendChild(a),i.rows=[];var r=document.createElement("div");return i.appendChild(r),i.Em=r,f.$n(i),e.divHeader=i,e.divSpace=a,i},this.Pn=function(){var e=f.Ni.top,t=e.top,n=e.height,i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.top=t+"px",i.style.height=n+"px",i.style.overflow="hidden",i.className=f.G("_grid_top"),i.onmousedown=f.io,i.onmousemove=f.um,i.oncontextmenu=f.jo,f.nav.fixedTop=i,e.div=i;var a=f.ko(i);return DayPilot.Util.copyProps(a,e),i},this.Qn=function(){var e=f.Ni.bottom,t=e.top,n=e.height,i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.right="0px",i.style.bottom=t+"px",i.style.height=n+"px",i.style.overflow="hidden",i.className=f.G("_grid_bottom"),i.onmousedown=f.io,i.onmousemove=f.um,i.oncontextmenu=f.jo,f.nav.fixedBottom=i,e.div=i;var a=f.ko(i);return DayPilot.Util.copyProps(a,e),i},this.ko=function(e){var t=document.createElement("div");t.style.position="absolute",e.appendChild(t);var n=document.createElement("div");n.style.position="absolute",e.appendChild(n);var i=document.createElement("div");i.style.position="absolute",e.appendChild(i);var a=document.createElement("div");a.style.position="absolute",e.appendChild(a);var r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.width="100000px",r.style.bottom="0px",r.style.height="1px",e.appendChild(r);var o=document.createElement("div");o.style.position="absolute",e.appendChild(o);var s=document.createElement("div");return s.style.position="absolute",e.appendChild(s),{"divCells":t,"divLines":n,"divEvents":a,"divShadow":s,"divHover":o,"divCrosshair":i}},this.Oi=function(){var e=f.Ni.top,t=f.Ni.bottom;u(e),u(t),f.divStretch.style.height=f.Nh+t.height+"px",f.nav.dividerTop.style.top=e.top+e.height-1+"px",f.nav.dividerTop.style.right=e.right+"px",f.lo(f.nav.dividerTop,e.enabled()),f.nav.dividerBottom.style.top=t.top-1+"px",f.nav.dividerBottom.style.right=t.right+"px",f.lo(f.nav.dividerBottom,t.enabled())},this.lo=function(e,t){e.style.display=t?"":"none"},this.Yi=function(){var e=f.rowlist;return e=e.concat(f.Ni.top.rowlist),e=e.concat(f.Ni.bottom.rowlist)},this.mo=function(){return f.rowlist.length>0||f.Ni.top.rowlist.length>0||f.Ni.bottom.rowlist.length>0},this.no=function(){this.bd(),this.oo()},this.On=function(){var e=document.createElement("div");if(e.style.overflow="auto",e.style.overflowX="auto",e.style.overflowY="auto",e.style.height=this.dd()+"px","Top"===f.timeHeaderPosition?(e.style.top=this.Ii()+1+"px",e.style.position="absolute"):e.style.position="relative",e.style.width="100%",e.className=this.G("_scrollable"),e.oncontextmenu=function(){return!1},this._n(e),f.overrideWheelScrolling){var t=f.Wn();e.onwheel=function(n){var i=n.deltaY>0?t:-t;f.nav.scroll.scrollTop=e.scrollTop+i,n.preventDefault&&n.preventDefault()},e.onmousewheel=function(n){var i=n.wheelDelta<0?t:-t;f.nav.scroll.scrollTop=e.scrollTop+i,n.preventDefault&&n.preventDefault(),n.returnValue=!1}}this.nav.scroll=e,this.li=document.createElement("div");var n=this.li;n.style.MozUserSelect="none",n.style.KhtmlUserSelect="none",n.style.webkitUserSelect="none",n.daypilotMainD=!0,n.calendar=this,n.style.minHeight="1px",i&&(n.style.webkitTransform="translateZ(0px)"),n.style.position="absolute";var a=this.Di();return a>0&&!isNaN(a)&&(n.style.width=a+"px"),n.setAttribute("unselectable","on"),n.onmousedown=this.io,n.onmousemove=this.um,n.onmouseup=this.po,n.oncontextmenu=this.jo,n.ondblclick=this.qo,n.className=this.G("_matrix"),this.divStretch=document.createElement("div"),this.divStretch.style.position="absolute",this.divStretch.style.height="1px",n.appendChild(this.divStretch),this.divCells=document.createElement("div"),this.divCells.style.position="absolute",this.divCells.oncontextmenu=this.jo,n.appendChild(this.divCells),this.divLines=document.createElement("div"),this.divLines.style.position="absolute",this.divLines.oncontextmenu=this.jo,n.appendChild(this.divLines),this.divBreaks=document.createElement("div"),this.divBreaks.style.position="absolute",this.divBreaks.oncontextmenu=this.jo,n.appendChild(this.divBreaks),this.divSeparators=document.createElement("div"),this.divSeparators.style.position="absolute",this.divSeparators.oncontextmenu=this.jo,n.appendChild(this.divSeparators),this.divLinksBelow=document.createElement("div"),this.divLinksBelow.style.position="absolute",n.appendChild(this.divLinksBelow),this.divCrosshair=document.createElement("div"),this.divCrosshair.style.position="absolute",this.divCrosshair.ondblclick=this.qo,this.divCrosshair.onmousedown=this.Td,n.appendChild(this.divCrosshair),this.divRange=document.createElement("div"),this.divRange.style.position="absolute",this.divRange.oncontextmenu=this.jo,n.appendChild(this.divRange),this.divEvents=document.createElement("div"),this.divEvents.style.position="absolute",n.appendChild(this.divEvents),this.divSeparatorsAbove=document.createElement("div"),this.divSeparatorsAbove.style.position="absolute",this.divSeparatorsAbove.oncontextmenu=this.jo,n.appendChild(this.divSeparatorsAbove),this.divLinksAbove=document.createElement("div"),this.divLinksAbove.style.position="absolute",n.appendChild(this.divLinksAbove),this.divLinkShadow=document.createElement("div"),this.divLinkShadow.style.position="absolute",n.appendChild(this.divLinkShadow),this.divLinkpoints=document.createElement("div"),this.divLinkpoints.style.position="absolute",n.appendChild(this.divLinkpoints),this.divRectangle=document.createElement("div"),this.divRectangle.style.position="absolute",n.appendChild(this.divRectangle),this.divHover=document.createElement("div"),this.divHover.style.position="absolute",n.appendChild(this.divHover),this.divShadow=document.createElement("div"),this.divShadow.style.position="absolute",n.appendChild(this.divShadow),e.appendChild(n),e},this.ro={};var A=this.ro;A.wf=function(){if(!f.nav.overlay){var e=document.createElement("div");e.style.position="absolute",e.style.left="0px",e.style.right="0px",e.style.top="0px",e.style.bottom="0px",e.className=f.G("_block"),f.nav.top.appendChild(e),f.nav.overlay=e}},A.Ya=function(){A.wf(),f.nav.overlay.style.display=""},A.hg=function(){f.nav.overlay&&(f.nav.overlay.style.display="none")},this.ia=function(e){e=e||{};var t=e.delay||0,n=f.ca(e.text||this.loadingLabelText,this.loadingLabelHtml),i="undefined"!=typeof e.block?e.block:f.blockOnCallBack;f.loadingTimeout&&window.clearTimeout(f.loadingTimeout);var a=function(){(f.loadingLabelVisible||e.text)&&(f.nav.loading.innerHTML=n,f.nav.loading.style.display=""),i&&A.Ya()};0===t?a():f.loadingTimeout=window.setTimeout(a,t)},this.Ga=function(e){this.loadingTimeout&&window.clearTimeout(this.loadingTimeout),this.nav.loading.style.display="none",(e||f.blockOnCallBack)&&A.hg()},this.loadingStart=function(e){f.ia(e)},this.loadingStop=function(){f.Ga(!0)},this.uiBlock=function(){A.Ya()},this.uiUnblock=function(){A.hg()},this.Be=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart()},this.Fe=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.top="-2000px",t.style.left="-2000px",t.className=this.G(e),document.body.appendChild(t);var n=t.offsetHeight,i=t.offsetWidth;document.body.removeChild(t);var a={};return a.height=n,a.width=i,a},this.bb=function(e){if(e&&(this.autoRefreshEnabled=!0),this.autoRefreshEnabled&&!(this.R>=this.autoRefreshMaxCount)){this.oa();var t=this.autoRefreshInterval;if(!t||t<10)throw new DayPilot.Exception("The minimum autoRefreshInterval is 10 seconds");this.autoRefreshTimeout=window.setTimeout(function(){f.je()},1e3*this.autoRefreshInterval)}},this.oa=function(){this.autoRefreshTimeout&&(window.clearTimeout(this.autoRefreshTimeout),this.autoRefreshTimeout=null)},this.autoRefreshStart=function(e){f.bb(e)},this.autoRefreshPause=function(){f.oa()},this.so=function(){return!(o.resizing||o.moving||o.drag||o.range)},this.je=function(){if(f.so()){var e=!1;if("function"==typeof this.onAutoRefresh){var t={};t.i=this.R,t.preventDefault=function(){this.preventDefault.value=!0},f.onAutoRefresh(t),t.preventDefault.value&&(e=!0)}!e&&this.I()&&this.commandCallBack(this.autoRefreshCommand),this.R++}this.R<this.autoRefreshMaxCount&&(this.autoRefreshTimeout=window.setTimeout(function(){f.je()},1e3*this.autoRefreshInterval))},this.me=function(){o.globalHandlers||(o.globalHandlers=!0,DayPilot.re(document,"mousemove",o.gMouseMove),DayPilot.re(document,"mouseup",o.gMouseUp),DayPilot.re(document,"mousedown",o.gMouseDown),DayPilot.re(document,"touchmove",o.gTouchMove),DayPilot.re(document,"touchend",o.gTouchEnd),DayPilot.re(window,"keyup",o.gKeyUp)),DayPilot.re(window,"resize",this.Gf)},this.uo=function(){this.nav.scroll.root=this,this.nav.scroll.onscroll=this.gi,f.Vl=this.nav.scroll.scrollLeft,f.Tl=this.nav.scroll.scrollTop,this.divNorth&&(f.vo=this.divNorth.clientWidth)},this.nh=function(){if(this.nav.state){var e={};e.scrollX=this.nav.scroll.scrollLeft,e.scrollY=this.nav.scroll.scrollTop;var t=f.sk(e.scrollX,e.scrollY),n=f.tk(t),i=f.uk(t);e.rangeStart=n.start,e.rangeEnd=n.end,e.resources=i,this.syncResourceTree&&(e.tree=this.za()),this.nav.state.value=DayPilot.he(JSON.stringify(e))}},this.bi=function(){if(this.separators)for(var e=0;e<this.separators.length;e++)this.te(e)},this.wo={},this.wo.step=300,this.wo.delay=10,this.wo.mode="display",this.wo.layers=!1,this.Xl=function(e){if(f.Jh)return void _.calculateEventPositionsRow(e);for(var t=0,n=0;n<e.lines.length;n++){var i=e.lines[n];i.height=0,i.top=t;for(var a=0;a<i.length;a++){var r=i[a];if(!r.part.top,!0){r.part.line=n,r.part.height||(r.part.height=e.eventHeight);var o=r.part.an();o>i.height&&(i.height=o),r.part.top=t+e.marginTop;var s="Above"===f.eventVersionPosition;if(f.eventVersionsEnabled&&!DayPilot.list(r.versions).isEmpty()){var l=r.cache||r.data,d=(l.versions.length,r.part.top);s||(d+=r.part.height+f.eventVersionMargin),DayPilot.list(l.versions).forEach(function(e,t){if(r.versions[t]){var n=t*(f.eventVersionHeight+f.eventVersionMargin);r.versions[t].top=d+n,s&&(r.part.top+=f.eventVersionHeight,r.part.top+=f.eventVersionMargin)}})}r.part.right=r.part.left+r.part.width,r.part.fullTop=e.top+r.part.top,r.part.fullBottom=r.part.fullTop+r.part.height}}t+=(i.height||e.eventHeight)*e.eventStackingLineHeight/100}};var _={};_.loadRow=function(e){e.evColumns=DayPilot.list(f.itline).map(function(e,t){return{"events":DayPilot.list()}}),DayPilot.list(e.events).forEach(function(t){var n=t.start(),i=f.jj(n);e.evColumns[i.i].events.push(t)})},_.calculateEventPositions=function(){var e=f.Kh,t=0;DayPilot.list(f.rowlist).forEach(function(n){var i=0;n.evColumns.forEach(function(t,a){var r=f.itline[a],o=f.rowMarginTop;t.events.forEach(function(t){t.part.left=r.left,t.part.width=r.width,t.part.top=o,t.part.height||(e?t.part.height=_.getEventAutoHeight(t)+f.durationBarHeight:t.part.height=n.eventHeight),o+=t.part.height+f.eventMarginBottom}),t.height=o,t.height>i&&(i=t.height)}),n.maxColumnHeight=i,n.top=t;var a=n.height;n.height=n.getHeight(),i>f.rowMarginTop&&(n.height=i+f.rowMarginBottom),a!==n.height&&(f.Sj=!0),t+=n.height}),f.Nh=t},_.getEventAutoHeight=function(e){var t=e.client.html(),n=document.createElement("div");n.style.position="absolute",n.style.top="-2000px",n.style.left="-2000px",n.style.width=e.part.width+"px",n.className=f.G(H.event);var i=document.createElement("div");i.className=f.G(H.eventInner),i.innerHTML=t,i.style.position="static",i.style.overflow="auto",n.appendChild(i);var a=f.divEvents;a.appendChild(n);var r=n.offsetHeight;return a.removeChild(n),r},_.calculateEventPositionsRow=function(e){_.calculateEventPositions()},_.drawEventsWithoutCheckingOverflow=function(){DayPilot.list(f.rowlist).forEach(function(e){_.drawEventsRow(e)})},_.drawEvents=function(){_.drawEventsWithoutCheckingOverflow(),_.checkOverflow(),f.Yh(),f.Ua()},_.checkOverflow=function(){if(f.Kh){var e=!1;DayPilot.list(f.elements.events).forEach(function(t){var n=t.firstChild,i=n.offsetHeight-n.clientHeight+t.offsetHeight-t.clientHeight,a=n.scrollHeight+i,r=t.event.part.height;t.event.part.height=a,r!==a&&(e=!0)}),e&&(f.pa(),_.calculateEventPositions(),_.drawEventsWithoutCheckingOverflow(),f.Zh(),f.ai())}},_.drawEventsRow=function(e){e.evColumns.forEach(function(e,t){e.events.forEach(function(e){f.Tc(e)})})},this.Ej=null,this.Za=function(e){if(!f.T){if(f.Jh)return void _.drawEvents();var t=this.wo.step;this.wo.layers&&(f.divEvents=document.createElement("div"),f.divEvents.style.position="absolute",f.li.insertBefore(this.divEvents,this.divSeparatorsAbove)),"display"===this.wo.mode?this.divEvents.style.display="none":"visibility"===this.wo.mode&&(this.divEvents.style.visibility="hidden"),this.divEvents.setAttribute("role","region"),this.divEvents.setAttribute("aria-label","scheduler events");var n="Progressive"===this.dynamicEventRendering,i=this.X(),a=i.pixels.top,r=i.pixels.bottom,o=f.allowMultiMove||f.allowMultiResize,s=f.rowlist.filter(function(e){var t=e.top-f.dynamicEventRenderingMargin,i=t+e.height+2*f.dynamicEventRenderingMargin;return!(n&&!o&&(r<=t||a>=i))});f.Ni.top.enabled()&&(s=s.concat(f.Ni.top.rowlist)),f.Ni.bottom.enabled()&&(s=s.concat(f.Ni.bottom.rowlist)),s.forEach(function(n){f.Xl(n);for(var i=0;i<n.lines.length;i++)for(var a=n.lines[i],r=0;r<a.length;r++){var o=a[r],s=f.Tc(o);if(e&&s&&(t--,t<=0))return f.divEvents.style.visibility="",f.divEvents.style.display="",void(f.Ej=window.setTimeout(function(){f.Za(e)},f.wo.delay))}}),this.divEvents.style.display="",DayPilot.list(f.multiselect.Ub).isEmpty()||f.multiselect.redraw(),this.vi(),g.Xj()}},this.Uj=function(e,t){var n=f.Ek(t),i=n.rowlist[e];if(f.Jh)return void _.drawEventsRow(i);this.divEvents=document.createElement("div"),this.divEvents.style.position="absolute",this.divEvents.style.display="none",this.li.insertBefore(this.divEvents,this.divSeparatorsAbove),this.Xl(i);for(var a=0;a<i.lines.length;a++)for(var r=i.lines[a],o=0;o<r.length;o++){var s=r[o];this.Tc(s)}this.divEvents.style.display=""},this.pa=function(){if(this.elements.events)for(var e=this.elements.events.length,t=0;t<e;t++){var n=this.elements.events[t];this.Rc(n)}this.elements.events=[]},this.Tj=function(e,t){if(t=t||"main",this.elements.events){for(var n=this.elements.events.length,i=[],a=0;a<n;a++){
var r=this.elements.events[a],o=r.event;o.part.dayIndex===e&&o.part.grid===t&&(this.Rc(r),i.push(a))}for(var a=i.length-1;a>=0;a--)this.elements.events.splice(i[a],1)}},this.Rc=function(e){var t=e.domArgs;if(e.domArgs=null,t&&"function"==typeof f.onDomRemoveEvent&&f.onDomRemoveEvent(t),t&&"function"==typeof f.onBeforeEventDomRemove&&f.onBeforeEventDomRemove(t),t&&"function"==typeof f.onBeforeEventDomAdd&&f.wa.reactDOM){var n=t&&t.Qc;if(n){if(DayPilot.Util.isReactComponent(t.element)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.unmountComponentAtNode(n)}}}e.parentNode&&e.parentNode.removeChild(e),e.onclick=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onmousemove=null,e.onmousedown=null,e.ondblclick=null,e.event&&(e.event.rendered=null,e.event=null),e.related&&DayPilot.de(e.related)},this.xo=function(e){e.event&&(e.event.rendered=!1),e.onclick=null,e.onmousedown=null,e.event=null,e.parentNode&&e.parentNode.removeChild(e)},this.yo=function(){if("Progressive"===this.dynamicEventRendering){if(f.dynamicEventRenderingCacheSweeping){var e=f.dynamicEventRenderingCacheSize||0;this.divEvents.style.display="none";for(var t=[],n=0,i=this.elements.events.length,a=i-1;a>=0;a--){var r=this.elements.events[a];this.zo(r.event)?e>0?(e--,t.unshift(r)):(this.Rc(r),n++):t.unshift(r)}this.elements.events=t,this.divEvents.style.display=""}}},this.Ao=function(e){for(var t=[],n=0,i=this.X(),a=this.elements.cells.length,r=a-1;r>=0;r--){var o=this.elements.cells[r];i.xStart<o.coords.x&&o.coords.x<=i.xEnd&&i.yStart<o.coords.y&&o.coords.y<=i.yEnd?t.unshift(o):e>0?(e--,t.unshift(o)):(this.ul(o),n++)}},this.ul=function(e){if(e&&e.coords){var t=e.coords.x,n=e.coords.y,i=e.coords.grid;DayPilot.rfa(f.elements.cells,e),DayPilot.de(e),f.P.cells[i+"_"+t+"_"+n]=null}},this.$h=function(){if(this.elements.separators)for(var e=0;e<this.elements.separators.length;e++){var t=this.elements.separators[e];DayPilot.de(t)}this.elements.separators=[]},this.Bo=function(){var e="Progressive"===this.dynamicEventRendering;if(!this.nav.scroll)return!1;for(var t=this.nav.scroll.scrollTop,n=t+this.nav.scroll.clientHeight,i=0;i<this.rowlist.length;i++){var a=this.rowlist[i],r=a.top,o=a.top+a.height;if(!e||!(n<=r||t>=o))for(var s=0;s<a.lines.length;s++)for(var l=a.lines[s],d=0;d<l.length;d++){var c=l[d];if(this.Co(c))return!0}}return!1},this.Co=function(e){if(e.rendered)return!1;var t="Progressive"===this.dynamicEventRendering,n=this.nav.scroll.scrollLeft,i=n+this.nav.scroll.clientWidth,a=e.part.left,r=e.part.left+e.part.width;return!t||!(i<=a||n>=r)},this.zo=function(e){if(!e.rendered)return!0;var t=this.X(),n=t.pixels.top,i=t.pixels.bottom,a=t.pixels.left-this.dynamicEventRenderingMargin,r=t.pixels.right+this.dynamicEventRenderingMargin,o=e.part.left,s=e.part.right,l=e.part.fullTop,d=e.part.fullBottom;return r<=o||a>=s||(i<=l||n>=d)},this._m=DayPilot.list(),this.Do=function(e){if(e.rendered)return!1;var t=e.row;if(t.hidden)return!1;var n=e.min,i=e.max-e.min,a=f.eventHeight,r=e.row.top;"number"==typeof t.forcedHeight&&(a=Math.min(t.forcedHeight,f.eventHeight));var o=document.createElement("div");o.style.position="absolute",o.style.left=n+"px",o.style.top=r+"px",o.style.width=i+"px",o.style.height=a+"px",o.className=f.G("_event_group"),o.style.cursor="pointer";var s={};s.group={},s.group.count=e.events.length,s.group.events=DayPilot.list(e.events,!0),s.group.html="&#x1F7A7; "+e.events.length+" events","function"==typeof f.onBeforeGroupRender&&f.onBeforeGroupRender(s);var l=document.createElement("div");return l.innerHTML=s.group.html,o.appendChild(l),o.onmousedown=function(e){e.cancelBubble=!0},o.onclick=function(e){var n=o.event;n.expanded=!0,f.xo(o);var i=DayPilot.indexOf(f.elements.events,o);i!==-1&&f.elements.events.splice(i,1);var a=f._m;DayPilot.list(n.events).forEach(function(e){a.push(e.id())}),f.uj(),f.vj([t]),f.Ua(),f.Za(),e.cancelBubble=!0},e.part={},e.part.left=n,e.part.width=i,e.part.height=f.eventHeight,e.part.dayIndex=DayPilot.indexOf(f.rowlist,e.row),e.part.top=0,e.part.isBlock=!0,e.part.grid=e.row.grid,e.client={},e.client.html=function(){return s.group.html},e.data={},o.event=e,this.elements.events.push(o),this.divEvents.appendChild(o),e.rendered=!0,!0},this.Tc=function(e,t){t=t||{};var n=t.forced;if(e.rendered)return!1;if(f.groupConcurrentEvents){var i=e.part.block;if(i.events.length>1&&!i.expanded)return f.Do(i)}var a="Progressive"===this.dynamicEventRendering,r=e.part.dayIndex,o=e.part.grid||"main",s=f.Ni[o],l=s.divEvents,d=s.rowlist,c=d[r];if(c.hidden)return!1;var u=c.top,h=this.X(),v=h.pixels.left-this.dynamicEventRenderingMargin,p=h.pixels.right+this.dynamicEventRenderingMargin,m=h.pixels.top,g=h.pixels.bottom,b=e.part.left,y=e.part.left+e.part.width,w=e.part.top+u,x=w+e.part.height,k=f.multiselect.wc(e),C=p<=b||v>=y,S="main"===o&&(g<=w||m>=x);if(!n&&!k&&a&&(C||S))return!1;var E="Milestone"===e.data.type,D=e.part.width,T=e.part.height,A=e.cache||e.data;D=DayPilot.Util.atLeast(0,D),T=DayPilot.Util.atLeast(0,T);var _=document.createElement("div");if(_.related=[],function(t){f.eventVersionsEnabled&&DayPilot.list(A.versions).forEach(function(n,i){if(n){var a=e.versions[i];if(a){var r=document.createElement("div");r.style.position="absolute",r.style.overflow="hidden",r.style.left=a.left+"px",r.style.top=u+a.top+"px",r.style.width=a.width+"px",r.style.height=f.eventVersionHeight+"px",r.className=f.G(H.event)+" "+f.G("_event_previous")+" "+f.G("_event_version"),r.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},n.toolTip&&(r.title=n.toolTip),n.cssClass&&DayPilot.Util.addClass(r,n.cssClass);var o=document.createElement("div");o.setAttribute("unselectable","on"),o.className=f.G(H.eventInner),o.innerHTML=f.ca(n.text,n.html),n.backColor&&(o.style.background=n.backColor),n.fontColor&&(o.style.color=n.fontColor),n.borderColor&&(o.style.borderColor=n.borderColor),n.backImage&&(o.style.backgroundImage="url("+n.backImage+")",n.backRepeat&&(o.style.backgroundRepeat=n.backRepeat)),r.appendChild(o),a.continueLeft&&!E&&DayPilot.Util.addClass(r,f.G("_event_continueleft")),a.continueRight&&!E&&DayPilot.Util.addClass(r,f.G("_event_continueright"));var s=f.durationBarVisible&&!n.barHidden,d=a.width;if(s&&d>0){var c=100*a.barLeft/d,h=Math.ceil(100*a.barWidth/d);"PercentComplete"===f.durationBarMode&&(c=0,h=n.complete||0);var v=document.createElement("div");v.setAttribute("unselectable","on"),v.className=f.G(H.eventBar),v.style.position="absolute",n.barBackColor&&(v.style.backgroundColor=n.barBackColor);var p=document.createElement("div");p.setAttribute("unselectable","on"),p.className=f.G(H.eventBarInner),p.style.left=c+"%",0<h&&h<=1?p.style.width="1px":p.style.width=h+"%",n.barColor&&(p.style.backgroundColor=n.barColor),n.barImageUrl&&(p.style.backgroundImage="url("+n.barImageUrl+")"),v.appendChild(p),r.appendChild(v)}if(n.htmlLeft){var m=f.eventHtmlLeftMargin,g=document.createElement("div");g.style.position="absolute",g.style.right=-(a.left-m)+"px",g.style.top=u+a.top+"px",g.style.height=f.eventHeight+"px",g.style.boxSizing="border-box",g.innerHTML=n.htmlLeft,g.className=f.G("_event_left"),g.type="divLeft",g.versionPart=a,t.related.push(g),l.appendChild(g)}if(n.htmlRight){var m=f.eventHtmlRightMargin,b=document.createElement("div");b.style.position="absolute",b.style.left=a.left+a.width+m+"px",b.style.top=u+a.top+"px",b.style.height=f.eventHeight+"px",b.style.boxSizing="border-box",b.innerHTML=n.htmlRight,b.className=f.G("_event_right"),b.type="divRight",b.versionPart=a,t.related.push(b),l.appendChild(b)}r.versionPart=a,r.type="version";var y=DayPilot.Areas.resolvePosition(n.areas,f,a.left,a.width);DayPilot.Areas.attach(r,n,{"areas":y}),t.related.push(r),l.appendChild(r)}}})}(_),A.htmlLeft){var R=f.eventHtmlLeftMargin,B=document.createElement("div");B.style.position="absolute",B.style.right=-(e.part.left-R)+"px",B.style.top=u+e.part.top+"px",B.style.height=f.eventHeight+"px",B.style.boxSizing="border-box",B.innerHTML=A.htmlLeft,B.className=f.G("_event_left"),B.type="divLeft",_.related.push(B),l.appendChild(B)}if(A.htmlRight){var R=f.eventHtmlRightMargin,P=document.createElement("div");P.style.position="absolute",P.style.left=e.part.left+e.part.width+R+"px",P.style.top=u+e.part.top+"px",P.style.height=f.eventHeight+"px",P.style.boxSizing="border-box",P.innerHTML=A.htmlRight,P.className=f.G("_event_right"),P.type="divRight",_.related.push(P),l.appendChild(P)}var m=u+e.part.top;if(f.treeAnimation){var N="number"==typeof c.forcedHeight?c.forcedHeight:c.height;e.part.top+e.part.height>N&&(T=Math.max(0,N-e.part.top))}_.style.position="absolute",_.style.left=e.part.left+f.eventMarginLeft+"px",_.style.top=u+e.part.top+"px",_.style.width=D-f.eventMarginLeft-f.eventMarginRight+"px",_.style.height=T+"px",f.eventTextWrappingEnabled||(_.style.whiteSpace="nowrap"),_.style.overflow="hidden",_.className=this.G(H.event),E&&DayPilot.Util.addClass(_,f.G("_task_milestone")),"Group"===e.data.type&&(DayPilot.Util.addClass(_,f.G("_task_parent")),DayPilot.Util.addClass(_,f.G("_task_group"))),A.cssClass&&DayPilot.Util.addClass(_,A.cssClass);"number"==typeof e.part.line&&DayPilot.Util.addClass(_,this.G(H.eventLine+e.part.line)),_.setAttribute("unselectable","on"),this.showToolTip&&!this.bubble&&(_.title=e.client.toolTip()||""),_.onmousemove=this.Uc,_.onmouseout=this.Vc,_.onmousedown=this.Wc,_.onmouseup=this.Eo,_.ontouchstart=M.onEventTouchStart,_.ontouchmove=M.onEventTouchMove,_.ontouchend=M.onEventTouchEnd,e.client.clickEnabled()&&(_.onclick=this.Jg),e.client.doubleClickEnabled()&&(_.ondblclick=this.tb),_.oncontextmenu=this.ub,"undefined"!=typeof A.ariaLabel?_.setAttribute("aria-label",A.ariaLabel):_.setAttribute("aria-label",A.text),_.setAttribute("tabindex","-1");var U=document.createElement("div");U.setAttribute("unselectable","on"),U.className=f.G(H.eventInner),A.backColor&&(U.style.background=A.backColor),A.fontColor&&(U.style.color=A.fontColor),"darker"===A.borderColor&&A.backColor?U.style.borderColor=DayPilot.ColorUtil.darker(A.backColor,2):U.style.borderColor=A.borderColor,A.backImage&&(U.style.backgroundImage="url("+A.backImage+")",A.backRepeat&&(U.style.backgroundRepeat=A.backRepeat)),_.appendChild(U);var I=e.start().getTime()===e.part.start.getTime(),L=e.rawend().getTime()===e.part.end.getTime();if(I||E||DayPilot.Util.addClass(_,this.G("_event_continueleft")),L||E||DayPilot.Util.addClass(_,this.G("_event_continueright")),e.client.barVisible()&&D>0&&!E){var z=100*e.part.barLeft/D,O=Math.ceil(100*e.part.barWidth/D);"PercentComplete"===this.durationBarMode&&(z=0,O=A.complete||0);var j=document.createElement("div");j.setAttribute("unselectable","on"),j.className=this.G(H.eventBar),j.style.position="absolute",A.barBackColor&&(j.style.backgroundColor=A.barBackColor);var G=document.createElement("div");G.setAttribute("unselectable","on"),G.className=this.G(H.eventBarInner),G.style.left=z+"%",0<O&&O<=1?G.style.width="1px":G.style.width=O+"%",A.barColor&&(G.style.backgroundColor=A.barColor),A.barImageUrl&&(G.style.backgroundImage="url("+A.barImageUrl+")"),j.appendChild(G),_.appendChild(j)}if(_.row=r,A.areas){var W=DayPilot.Areas.resolvePosition(A.areas,f,e.part.left,e.part.width);W=W.filter(function(e){return DayPilot.Areas.isVisible(e)}),W.forEach(function(t){var n=DayPilot.Areas.createArea(_,e,t);_.appendChild(n)})}if(_.event=e,k&&(f.multiselect.add(_.event,!0),f.multiselect.Ic(_)),function(){if("function"!=typeof f.onBeforeEventDomAdd&&"function"!=typeof f.onBeforeEventDomRemove)return void(E||(U.innerHTML=e.client.innerHTML()));var t={};if(t.control=f,t.e=e,t.element=null,_.domArgs=t,"function"==typeof f.onDomAddEvent&&f.onDomAddEvent(t),"function"==typeof f.onBeforeEventDomAdd&&f.onBeforeEventDomAdd(t),t.element){var n=U;if(n){t.Qc=n;if(DayPilot.Util.isReactComponent(t.element)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.render(t.element,n)}else n.appendChild(t.element)}}else E||(U.innerHTML=e.client.innerHTML())}(),this.elements.events.push(_),l.appendChild(_),e.rendered=!0,f.cb()){if("function"==typeof f.onAfterEventRender){var F={};F.e=_.event,F.div=_,f.onAfterEventRender(F)}}else f.afterEventRender&&f.afterEventRender(_.event,_);return!0},this.ca=function(e,t){return f.ea.da()?DayPilot.Util.escapeTextHtml(e,t):DayPilot.Util.isNullOrUndefined(t)?DayPilot.Util.isNullOrUndefined(e)?"":e:t},this.cb=function(){return 2===f.api},this.Vj=function(){for(var e=0;e<this.elements.events.length;e++){var t=this.elements.events[e],n=t.event,i=n.part.dayIndex,a=f.Ek(n.part.grid),r=a.rowlist[i],o=r.top,s=o+n.part.top,l="number"==typeof r.forcedHeight?r.forcedHeight:r.height,d=n.part.height,c=!1;n.part.top+n.part.height>l&&(d=Math.max(0,l-n.part.top),c=!0),t.style.top=s+"px",t.style.height=d+"px",DayPilot.list(t.related).filter(function(e){return!!e.versionPart}).forEach(function(e){var t=e.versionPart;e.style.top=o+t.top+"px"}),DayPilot.list(t.related).filter(function(e){return!e.versionPart&&("divLeft"===e.type||"divRight"===e.type)}).forEach(function(e){e.style.top=s+"px"})}},this.ze=function(e){if(!e)return null;for(var t=0;t<f.elements.events.length;t++){var n=f.elements.events[t];if(n.event===e||n.event.data===e.data)return n}return null},this.fl=function(e){var t=f.events.Zk(e.data);if(!t)return null;var n=f.rowlist[t.part.dayIndex];return f.Xl(n),f.Tc(t,{"forced":!0}),f.ze(t)},this.Vc=function(e){var t=this;DayPilot.Areas.hideAreas(t,e),t.active||(DayPilot.Util.removeClass(t,f.G("_event_hover")),f.Fo(t),c.source||g.Xk(),f.bubble&&"Bubble"===f.eventHoverHandling&&f.bubble.hideOnMouseOut())},this.Go=function(e){if("function"==typeof this.onEventMouseOver){var t={};t.div=e,t.e=e.event,this.onEventMouseOver(t)}},this.Fo=function(e){if("function"==typeof this.onEventMouseOut){var t={};t.div=e,t.e=e.event,this.onEventMouseOut(t)}},this.Ho=function(e){var t=e.row;if("function"==typeof this.onRowMouseOver){var n={};n.div=e,n.row=f.ek(t),this.onRowMouseOver(n)}},this.Io=function(e){var t=e.row;if("function"==typeof this.onRowMouseOut){var n={};n.div=e,n.row=f.ek(t),this.onRowMouseOut(n)}},this.Uc=function(e){f.cellBubble&&f.cellBubble.delayedHide();for(var t=this;t&&!t.event;)t=t.parentNode;var n=t.event;f.Jo(t,e);var i=t.event.cache?t.event.cache.deleteDisabled:t.event.data.deleteDisabled;if(!t.active){var a=[];if("Disabled"!==f.eventDeleteHandling&&!i){var r=f.durationBarVisible?f.durationBarHeight:0;a.push({"action":"JavaScript","v":"Hover","w":17,"h":17,"top":r+2,"right":2,"css":f.G(H.eventDelete),"js":function(e){f.zb(e)}})}var o=t.event.cache?t.event.cache.areas:t.event.data.areas;o&&o.length>0&&(o=DayPilot.Areas.resolvePosition(o,f,n.part.left,n.part.width),a=a.concat(o)),DayPilot.Areas.showAreas(t,t.event,null,a),DayPilot.Util.addClass(t,f.G("_event_hover")),f.Go(t)}"Disabled"===f.linkCreateHandling||c.source||(g.Sk(),g.Kj(),f.so()&&g.Qk(t)),f.mj(e),f.coords.insideEvent=t.event},this.kj={},this.Eo=function(e){var t=f.kj;if(f.ionicEventClickFix){var n=t.originalMouse;if(n){var i=DayPilot.mc(e);n.x===i.x&&n.y===i.y&&(f.Jg.call(this,e),e.preventDefault(),e.stopPropagation())}}},this.Wc=function(e){f.Aa(),"undefined"!=typeof DayPilot.Bubble&&(DayPilot.Bubble.hideActive(),DayPilot.Bubble.cancelShowing()),f.mj(e);var t=DayPilot.Util.mouseButton(e);if(e.preventDefault(),e.stopPropagation(),t.left){var n=e.shiftKey;if("Disabled"!==N.nj()&&n)return R.start(),!1;"w-resize"===this.style.cursor||"e-resize"===this.style.cursor?(o.preventEventClick=!0,o.resizing=this,o.resizingEvent=this.event,o.originalMouse=DayPilot.mc(e),document.body.style.cursor=this.style.cursor,g.Kj()):("move"===this.style.cursor||"Full"===f.moveBy&&this.event.client.moveEnabled())&&f.Ko(this,e)}DayPilot.Menu&&DayPilot.Menu.active&&(DayPilot.Menu.active.hide(),DayPilot.Menu.active=null)},this.Ko=function(e,t){var n=f.kj;f.mj(t),n.start=!0,n.moving=e,n.movingEvent=e.event,n.originalMouse=DayPilot.mc(t),n.moveOffsetX=DayPilot.mo3(e,t).x,n.moveDragStart=f.getDate(f.coords.x,!0),g.Kj()},this.Xc={};var M=f.Xc;"undefined"==typeof DayPilot.Global.touch&&(DayPilot.Global.touch={}),DayPilot.Global.touch.active=!1,DayPilot.Global.touch.start=!1,M.timeouts=[],M.onEventTouchStart=function(e){if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){DayPilot.Menu&&DayPilot.Menu.touchPosition(e),e.stopPropagation(),M.clearTimeouts(),DayPilot.Global.touch.start=!0,DayPilot.Global.touch.active=!1;var t=this;f.coords=M.relativeCoords(e);var i=f.tapAndHoldTimeout;M.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=!0,DayPilot.Global.touch.start=!1,e.preventDefault();var i=t.event;switch(f.eventTapAndHoldHandling){case"Move":if(i.client.moveEnabled()){var a=n(e);M.startMoving(t,a)}break;case"ContextMenu":DayPilot.Menu&&DayPilot.Menu.touchPosition(e);var r=i.client.contextMenu();r?r.show(i):f.contextMenu&&f.contextMenu.show(i)}},i))}},M.onEventTouchMove=function(e){M.clearTimeouts(),DayPilot.Global.touch.start=!1},M.onEventTouchEnd=function(e){if(!DayPilot.Util.isMouseEvent(e)){if(M.clearTimeouts(),DayPilot.Global.touch.start){DayPilot.Global.touch.start=!1,e.preventDefault(),e.stopPropagation();var t=this;window.setTimeout(function(){f.qb(t,e)})}window.setTimeout(function(){DayPilot.Global.touch.start=!1,DayPilot.Global.touch.active=!1},500)}},M.onMainTouchStart=function(e){if(!(DayPilot.Global.touch.active||DayPilot.Global.touch.start||e.touches.length>1||"Disabled"===f.timeRangeSelectedHandling)){M.clearTimeouts(),DayPilot.Global.touch.start=!0,DayPilot.Global.touch.active=!1;var t=f.tapAndHoldTimeout;M.timeouts.push(window.setTimeout(function(){DayPilot.Global.touch.active=!0,DayPilot.Global.touch.start=!1,e.preventDefault(),f.coords=M.relativeCoords(e),M.range=f.Lo()},t));f.coords=M.relativeCoords(e)}},M.onMainTouchMove=function(e){if(M.clearTimeouts(),DayPilot.Global.touch.start=!1,o.resizing)return e.preventDefault(),void M.updateResizing();if(DayPilot.Global.touch.active){if(e.preventDefault(),f.coords=M.relativeCoords(e),o.moving)return void M.updateMoving();if(M.range){var t=M.range;t.end={x:Math.floor(f.coords.x/f.cellWidth),"time":f.getDate(f.coords.x,!0)},f.ak(t)}}},M.debug=function(e){},M.onMainTouchEnd=function(e){M.clearTimeouts();if(DayPilot.Global.touch.active){if(o.moving){e.preventDefault();var t=o.movingEvent;if(f!==o.movingShadow.calendar)return;var n=o.movingShadow.start,i=o.movingShadow.end,a="Days"!==f.viewType?o.movingShadow.row.id:null,r=o.drag&&t.part.external,s=o.movingShadow.overlapping,l=!o.movingShadow.allowed;if(DayPilot.Util.removeClass(o.moving,f.G(f.Mo.eventMovingSource)),DayPilot.de(o.movingShadow),f.tm(),o.movingShadow.calendar=null,document.body.style.cursor="",o.moving=null,o.movingEvent=null,o.movingShadow=null,f.mm.clear(),s||l||f.mm.forbidden||f.mm.invalid)return;f.Ib(t,n,i,a,r)}if(M.range){var d=M.range;M.range=null;var c=f.elements.range2;c&&c.overlapping?f.clearSelection():f.Zj(d)}}else if(DayPilot.Global.touch.start){if(f.coords.x<f.getScrollX())return;var d=f.Lo();f.ak(d);var c=f.elements.range2;c&&c.overlapping?f.clearSelection():f.Zj(d)}window.setTimeout(function(){DayPilot.Global.touch.start=!1,DayPilot.Global.touch.active=!1},500)},M.clearTimeouts=function(){for(var e=0;e<M.timeouts.length;e++)clearTimeout(M.timeouts[e]);M.timeouts=[]},M.relativeCoords=function(e){function t(e,t,n){var i=DayPilot.abs(n);return{x:e-i.x,y:t-i.y,toString:function(){return"x: "+this.x+", y:"+this.y}}}var n=f.li,i=e.touches?e.touches[0]:e,a=i.pageX,r=i.pageY,o=t(a,r,n);if(o.grid="main",f.Ni.top.enabled()){var s=f.Ni.top,l=t(a,r,s.divCells);l.y>0&&l.y<=s.height&&(o=l,o.grid="top")}if(f.Ni.bottom.enabled()){var d=f.Ni.bottom,c=t(a,r,d.divCells);c.y>0&&c.y<=s.height&&(o=c,o.grid="bottom")}return o},M.startMoving=function(e,t){o.moving=e,o.movingEvent=e.event,o.originalMouse=t;var n=DayPilot.abs(e);o.moveOffsetX=t.x-n.x,o.moveDragStart=f.getDate(f.coords.x,!0),o.movingShadow=f.db(e),f.Ol()},M.startResizing=function(e,t){o.resizing=e,o.resizingEvent=e.event,o.resizing.dpBorder=t,o.resizingShadow||(o.resizingShadow=f.db(e)),f.om()},M.updateResizing=function(){if(!o.resizingShadow){var e=o.resizing;o.resizingShadow=f.db(e)}f.om();var t={x:f.coords.x,y:f.coords.y,"grid":f.coords.grid};f.No(t)},M.updateMoving=function(){if(o.movingShadow&&o.movingShadow.calendar!==f&&f.tm(),!o.movingShadow){var e=o.moving;o.movingShadow=f.db(e)}o.movingShadow.calendar.Ol();var t={x:f.coords.x,y:f.coords.y,"grid":f.coords.grid};f.No(t)},this.Jo=function(e,t){var n=this.eventResizeMargin,i=this.eventMoveMargin,a=e;if("undefined"!=typeof o){var r=DayPilot.mo3(e,t);if(r&&(f.eventOffset=r,!o.resizing&&!o.moving)){var s=a.event.part.start.toString()===a.event.start().toString(),l=a.event.part.end.toString()===a.event.rawend().toString();if("Top"===f.moveBy&&r.y<=i&&a.event.client.moveEnabled()&&"Disabled"!==f.eventMoveHandling?e.style.cursor="move":("Top"===f.moveBy||"Full"===f.moveBy)&&r.x<=n&&a.event.client.resizeEnabled()&&"Disabled"!==f.eventResizeHandling?s?(e.style.cursor="w-resize",e.dpBorder="left"):e.style.cursor="not-allowed":"Left"===f.moveBy&&r.x<=i&&a.event.client.moveEnabled()&&"Disabled"!==f.eventMoveHandling?e.style.cursor="move":e.offsetWidth-r.x<=n&&a.event.client.resizeEnabled()&&"Disabled"!==f.eventResizeHandling?l?(e.style.cursor="e-resize",e.dpBorder="right"):e.style.cursor="not-allowed":o.resizing||o.moving||(a.event.client.clickEnabled()&&"Disabled"!==f.eventClickHandling?e.style.cursor="pointer":e.style.cursor="default"),"undefined"!=typeof DayPilot.Bubble&&f.bubble&&"Bubble"===f.eventHoverHandling&&("default"===e.style.cursor||"pointer"===e.style.cursor)){this.oe&&r.x===this.oe.x&&r.y===this.oe.y;this.oe=r,f.bubble.showEvent(e.event)}}}},this.Ul=function(){return"Days"!==this.viewType?this.itline.length:Math.floor(1440/this.cellDuration)},this.$j=function(e){var e=e||o.range||f.rangeHold;if(!e)return null;var t=f.rowlist[e.start.y];if(!t)return null;var n=e.Oo?e.Oo:e,i=n.end.time>n.start.time,a=t.id,r=i?n.start.x:n.end.x,s=i?n.end.x:n.start.x,l=t.start.getTime()-this.kb().getTime(),d=f.snapToGrid&&f.snapToGridTimeRangeSelecting;e.forceSnap&&(d=!0);var c,u;d?(c=this.itline[r].start.addTime(l),u=this.itline[s].end.addTime(l)):i?(c=n.start.time,u=n.end.time):(c=n.end.time,u=n.start.time);var h=new DayPilot.Selection(c,u,a,f);return h.allowed=!e.div||!e.div.overlapping,h},this.rc=function(e){var t=e.parentNode,n=f.eventEditMinWidth,i=(e.event.text()||"").trim(),a=document.createElement("textarea");return a.style.position="absolute",a.style.width=(e.offsetWidth<n?n:e.offsetWidth-2)+"px",a.style.height=e.offsetHeight-2+"px",a.style.fontFamily=DayPilot.gs(e,"fontFamily")||DayPilot.gs(e,"font-family"),a.style.fontSize=DayPilot.gs(e,"fontSize")||DayPilot.gs(e,"font-size"),a.style.left=e.offsetLeft+"px",a.style.top=e.offsetTop+"px",a.style.border="1px solid black",a.style.padding="0px",a.style.marginTop="0px",a.style.backgroundColor="white",a.value=i,a.event=e.event,t.appendChild(a),a},this.Po=function(e){var t=v.yi();t.sort(function(e,t){var n=e.event,i=t.event;return n.part.dayIndex!==i.part.dayIndex?n.part.dayIndex-i.part.dayIndex:n.start()!==i.start()?n.start().getTime()-i.start().getTime():i.end().getTime()-n.end().getTime()});var n=t.indexOf(e);return n===-1?null:n+1<t.length?t[n+1]:t[0]},this.rb=function(e){if(e&&(o.editing&&o.editing.blur(),e.event)){var t=this.rc(e);if(o.editing=t,DayPilot.re(t,DayPilot.touch.start,function(e){e.stopPropagation()}),t.onblur=function(){if(t.onblur=null,o.editing===t&&(o.editing=null),t.parentNode&&t.parentNode.removeChild(t),e.event){var n=(e.event.text(),t.value);f.Sb(e.event,n,t.canceling)}},t.onmousedown=function(e){e.stopPropagation&&e.stopPropagation()},t.cancel=function(){o.editing&&(o.editing.canceling=!0,o.editing.blur())},t.onkeydown=function(t){var n=t.keyCode;if(13===n&&(t.stopPropagation(),this.onblur()),27===n)o.editing.cancel();else if(9===n&&f.eventEditTabNext){var i=f.Po(e);return o.editing.cancel(),i&&setTimeout(function(){f.rb(i)},0),!1}},"function"==typeof f.onAfterEventEditRender){var n={};n.element=t,n.e=e.event,f.onAfterEventEditRender(n)}t.select(),t.focus()}},this.Qo={},this.Qo.resource=function(){return"undefined"!=typeof DayPilot.Bubble?new DayPilot.Bubble:{"showResource":function(){},"hideOnMouseOut":function(){}}}(),this.Qo.cell=function(){return"undefined"!=typeof DayPilot.Bubble?new DayPilot.Bubble:{"showResource":function(){},"hideOnMouseOut":function(){}}}(),this.Km=function(e){var t=this,n=t.row;if("undefined"!=typeof DayPilot.Bubble){f.cellBubble;var i=f.ek(n);i.div=t,f.resourceBubble?f.resourceBubble.showResource(i):n.bubbleHtml&&f.Qo.resource.showResource(i)}},this.Im=function(e){var t=this;t.active||(t.active=!0,f.Ho(t))},this.Jm=function(e){var t=this;delete t.active,f.Io(t)},this.Lm=function(e){var t=this;"undefined"!=typeof DayPilot.Bubble&&f.resourceBubble?f.resourceBubble.hideOnMouseOut():f.Qo.resource.hideOnMouseOut();var n=t.firstChild;DayPilot.Areas.hideAreas(n,e),n.data=null},this.Mm=function(e){d.row&&(E.cancelClick=!0,setTimeout(function(){E.cancelClick=!1},100))},this.Wh=function(){if("None"!==f.timeHeaderPosition&&this.timeHeader){this.P.timeHeader={},f.elements.timeHeader.length>0&&(f.Ck(),f.elements.timeHeader=[]);var e=document.createElement("div");e.style.position="relative",this.nav.timeHeader=e;for(var t=0;t<this.timeHeader.length;t++)for(var n=this.timeHeader[t],i=0;i<n.length;i++)this.Ro(i,t);var a=this.divNorth;if(1===a.childNodes.length)a.replaceChild(e,a.childNodes[0]);else{if(DayPilot.browser.ie&&a&&a.firstChild){for(var r=[],o=0;o<a.firstChild.childNodes.length;o++)r.push(a.firstChild.childNodes[o]);DayPilot.de(r)}a.innerHTML="",a.appendChild(e)}var s=this.Di();a.style.width=s+5e3+"px",s>0&&(this.divStretch.style.width=s+"px")}},this.ta=function(){if(f.divCorner){var e=f.divCorner&&f.divCorner.domArgs;if(f.divCorner.domArgs=null,e&&("function"==typeof f.onBeforeCornerDomRemove&&f.onBeforeCornerDomRemove(e),"function"==typeof f.onBeforeCornerDomAdd&&f.wa.reactDOM)){var t=f.divCorner;if(t){if(DayPilot.Util.isReactComponent(e.element)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.unmountComponentAtNode(t)}}}}},this.fj=function(e,t){var n=null,i=this.ea.ej(),t=t||this.cellGroupBy,a=e.start;e.end;switch(t){case"Minute":n=a.toString("m");break;case"Hour":n="Clock12Hours"===f.ea.So()?a.toString("h tt",i):a.toString("H",i);break;case"Day":n=a.toString(i.datePattern);break;case"Week":n=1===N.To()?a.weekNumberISO():a.weekNumber();break;case"Month":n=a.toString("MMMM yyyy",i);break;case"Quarter":n="Q"+Math.floor(a.getMonth()/3+1);break;case"Year":n=a.toString("yyyy");break;case"None":n="";break;case"Cell":var r=(e.end.ticks-e.start.ticks)/6e4;n=this.Uo(a,r);break;default:throw new DayPilot.Exception("Invalid groupBy value: "+t)}return n},this.Uo=function(e,t){var n=this.ea.ej(),t=t||this.cellDuration;return t<1?e.toString("ss"):t<60?e.toString("mm"):t<1440?"Clock12Hours"===f.ea.So()?e.toString("h tt",n):e.toString("H",n):t<10080?e.toString("d"):10080===t?1===N.To()?e.weekNumberISO():e.weekNumber():e.toString("MMMM yyyy",n)},this.aj=function(e){var t=this.scale;switch(t){case"Cell":throw new DayPilot.Exception("Invalid scale: Cell");case"Manual":throw new DayPilot.Exception("Internal error (addScaleSize in Manual mode)");case"CellDuration":return e.addMinutes(this.cellDuration);default:return this.dj(e,t,!0)}},this.dj=function(e,t,n){var i,a;if(n){var r="Days"!==this.viewType?this.days:1;a=this.startDate.addDays(r),"Manual"===f.scale&&(a=f.cj())}else a=f.cj(),"Days"===f.viewType&&(a=f.startDate.addDays(1));var t=t||this.cellGroupBy,o=60;switch(t){case"Minute":e.getMinutes()+e.getSeconds()+e.getMilliseconds()>0&&(e=e.getDatePart().addHours(e.getHours()).addMinutes(e.getMinutes())),i=e.addMinutes(1);break;case"Hour":e.getHours()+e.getMinutes()+e.getSeconds()+e.getMilliseconds()>0&&(e=e.getDatePart().addHours(e.getHours())),i=e.addHours(1);break;case"Day":i=e.getDatePart().addDays(1);break;case"Week":for(i=e.getDatePart().addDays(1);i.dayOfWeek()!==N.To();)i=i.addDays(1);break;case"Month":e=e.getDatePart(),i=e.addMonths(1),i=i.firstDayOfMonth();for(var s=DayPilot.DateUtil.diff(i,e)/6e4%o===0;!s;)i=i.addHours(1),s=DayPilot.DateUtil.diff(i,e)/6e4%o===0;break;case"Quarter":for(e=e.getDatePart(),i=e.addMonths(1),i=i.firstDayOfMonth();i.getMonth()%3;)i=i.addMonths(1);for(var s=DayPilot.DateUtil.diff(i,e)/6e4%o===0;!s;)i=i.addHours(1),s=DayPilot.DateUtil.diff(i,e)/6e4%o===0;break;case"Year":e=e.getDatePart(),i=e.addYears(1),i=i.firstDayOfYear();for(var s=DayPilot.DateUtil.diff(i,e)/6e4%o===0;!s;)i=i.addHours(1),s=DayPilot.DateUtil.diff(i,e)/6e4%o===0;break;case"None":i=a;break;case"Cell":var l=this.jj(e);i=l.current?l.current.end:l.past?l.previous.end:l.next.start;break;default:throw n?new DayPilot.Exception("Invalid scale value: "+t):new DayPilot.Exception("Invalid groupBy value: "+t)}return i.getTime()>a.getTime()&&(i=a),i},this.Mo={},this.Mo.timeheadercol="_timeheadercol",this.Mo.timeheadercolInner="_timeheadercol_inner",this.Mo.resourcedivider="_resourcedivider",this.Mo.eventFloat="_event_float",this.Mo.eventFloatInner="_event_float_inner",this.Mo.event="_event",this.Mo.eventInner="_event_inner",this.Mo.eventBar="_event_bar",this.Mo.eventBarInner="_event_bar_inner",this.Mo.eventDelete="_event_delete",this.Mo.eventLine="_event_line",this.Mo.eventMovingSource="_event_moving_source";var H=this.Mo;this.Ro=function(e,t){var n=this.nav.timeHeader,i=this.timeHeader[t][e],a=t<this.timeHeader.length-1,r=i.left,o=i.width,s=U._l(t),l=s.top,d=s.height,c=document.createElement("div");c.style.position="absolute",c.style.top=l+"px",c.style.left=r+"px",c.style.width=o+"px",c.style.height=d+"px",i.toolTip&&(c.title=i.toolTip),c.setAttribute("aria-hidden","true"),i.cssClass&&DayPilot.Util.addClass(c,i.cssClass),c.setAttribute("unselectable","on"),c.style.KhtmlUserSelect="none",c.style.MozUserSelect="none",c.style.webkitUserSelect="none",c.oncontextmenu=function(){return!1},c.cell={},c.cell.start=i.start,c.cell.end=i.end,c.cell.level=t,c.cell.th=i,c.onclick=this.Rm,c.oncontextmenu=this.Sm,DayPilot.re(c,DayPilot.touch.start,function(e){e.stopPropagation()}),c.style.overflow="hidden",f.timeHeaderTextWrappingEnabled||(c.style.whiteSpace="nowrap");var u=document.createElement("div");u.setAttribute("unselectable","on"),u.innerHTML=f.ca(i.text,i.innerHTML),i.backColor&&(u.style.background=i.backColor),i.fontColor&&(u.style.color=i.fontColor);var h=this.G(H.timeheadercol),v=this.G(H.timeheadercolInner);a&&(h=this.G("_timeheadergroup"),v=this.G("_timeheadergroup_inner")),DayPilot.Util.addClass(c,h),DayPilot.Util.addClass(u,v),DayPilot.Util.addClass(c,f.G("_timeheader_cell")),DayPilot.Util.addClass(u,f.G("_timeheader_cell_inner")),function(){if("function"==typeof f.onBeforeTimeHeaderDomAdd||"function"==typeof f.onBeforeTimeHeaderDomRemove){var e={};if(e.control=f,e.header={},e.header.start=i.start,e.header.end=i.end,e.header.level=t,e.element=null,c.domArgs=e,"function"==typeof f.onBeforeTimeHeaderDomAdd){f.onBeforeTimeHeaderDomAdd(e);var n=e.element;if(n){u.innerHTML="";var a=document.createElement("div");u.appendChild(a),e.Qc=a;if(DayPilot.Util.isReactComponent(n)){if(!f.wa.reactDOM)throw new DayPilot.Exception("Can't reach ReactDOM");f.wa.reactDOM.render(n,a)}else a.appendChild(n)}}}}(),c.appendChild(u);var p=DayPilot.Areas.resolvePosition(i.areas,f,r,o);DayPilot.Areas.attach(c,i,{"areas":p}),this.P.timeHeader[e+"_"+t]=c,this.elements.timeHeader.push(c),n.appendChild(c)},this.uj=function(){return f.Jh?void _.calculateEventPositions():(f.Yi().forEach(function(e){var t=e.getHeight()+e.marginBottom+e.marginTop;e.height!==t&&(f.Sj=!0),e.height=t}),void(f.Sj&&(f.P.drawArea=null)))},this.Yh=function(){f.Yi().forEach(function(e){if(!e.hidden){var t=f.Ek(e.grid).divHeader;if(t){var n=e.index;if(t.rows[n])for(var i=0;i<t.rows[n].cells.length;i++){var a=t.rows[n].cells[i];f.Bm&&(a.style.top=e.top+"px");var r=e.height;a&&a.firstChild&&parseInt(a.firstChild.style.height,10)!==r&&(a.firstChild.style.height=r+"px");
}}}}),f.Bm&&f.nav.resScrollSpace&&(f.nav.resScrollSpace.style.top=f.Nh+"px")},this.te=function(e){var t=this.separators[e];t.location=t.location||t.Location,t.color=t.color||t.Color,t.layer=t.layer||t.Layer,t.width=t.width||t.Width,t.opacity=t.opacity||t.Opacity;var n=new DayPilot.Date(t.location),i=t.color,a=t.width?t.width:1,r=!!t.layer&&"AboveEvents"===t.layer,o=t.opacity?t.opacity:100;if(!(n.getTime()<f.kb().getTime()||n.getTime()>=f.cj().getTime())){var s=this.getPixels(n);if(!s.cut&&!(s.left<0||s.left>f.Di())){var l=document.createElement("div");l.style.width=a+"px",l.style.height=f.Nh+"px",l.style.position="absolute",l.style.left=s.left-1+"px",l.style.top="0px",l.style.backgroundColor=i,l.style.opacity=o/100,l.style.filter="alpha(opacity="+o+")",l.className=f.G("_separator"),t.cssClass&&(l.className+=" "+t.cssClass),r?this.divSeparatorsAbove.appendChild(l):this.divSeparators.appendChild(l),this.elements.separators.push(l)}}},this.Td=function(e){},this.qo=function(e){if("Disabled"===f.timeRangeDoubleClickHandling)return!1;o.timeRangeTimeout&&(clearTimeout(o.timeRangeTimeout),o.timeRangeTimeout=null);if(f.mj(e),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,f.Vo(f.coords)){var t=f.$j(f.rangeHold);f.Rb(t.start,t.end,t.resource)}else if(o.range=f.Lo(),o.range){o.rangeCalendar=f;var t=f.$j(o.range);f.Rb(t.start,t.end,t.resource),f.rangeHold=o.range}o.range=null},this.io=function(e){if(!DayPilot.Global.touch.start&&!DayPilot.Global.touch.active){if(o.timeRangeTimeout,1,f.Wo(),f.go(),f.mj(e),o.rectangleSelect)return!1;var t=DayPilot.Util.mouseButton(e);if(f.Xo())return!1;if(t.middle||t.right&&f.Vo(f.coords))return!1;if(f.Vo(f.coords))return!1;var n=t.left?"left":t.right?"right":t.middle?"middle":"unknown",i=e.ctrlKey,a=e.metaKey,r=e.shiftKey,s=i||a,l={};if(l.action="None","Disabled"!==N.nj()&&r?l.action="RectangleSelect":"Disabled"!==f.timeRangeSelectedHandling&&(l.action="TimeRangeSelect"),l.shift=r,l.ctrl=r,l.meta=a,l.originalEvent=e,l.button=n,l.preventDefault=function(){l.action="None"},"function"==typeof f.onGridMouseDown&&f.onGridMouseDown(l),"None"===l.action)return e.preventDefault(),e.stopPropagation(),!1;if("RectangleSelect"===l.action){var d={};return d.start=f.coords,d.calendar=f,o.rectangleSelect=d,!1}f.allowMultiRange&&!s&&B.clear();return!f.yk(f.coords.y,f.coords.grid).element.isNewRow&&(o.range=f.Lo(),o.range&&(o.range.ctrl=s,o.rangeCalendar=f),!1)}},this.Lo=function(){var e={},t=f.hj(f.coords.x).x,n=f.getDate(f.coords.x,!0);return e.start={y:f.yk(f.coords.y,f.coords.grid).i,x:t,"grid":f.coords.grid,"time":n},e.end={x:t,"time":n},f.Hk(f.yk(f.coords.y,f.coords.grid).i,f.coords.grid)?null:(e.calendar=f,f.ak(e),e)},this.pm=function(){f.Od();var e=o.resizingShadow,t=o.resizing;!function(){var n=f.Yo,i={"start":e.start,"end":f.Yg(e.end)};e.original=i;var a=e.original;if(!a||!n||n.start!==a.start||n.end!==a.end){x.clear(),x.fm(),n&&(DayPilot.Util.removeClass(e,n.cssClass),e.firstChild.innerHTML="");var r=t.event.part.dayIndex,s=f.rowlist[r],l={};l.start=i.start,l.end=i.end,l.duration=new DayPilot.Duration(l.start,l.end),l.row=f.ek(s),l.e=t.event,l.allowed=!0,l.resizing="left"===o.resizing.dpBorder?"start":"end",l.what="left"===o.resizing.dpBorder?"start":"end",l.anchor="end"===l.what?i.start:i.end,l.left={},l.left.html=l.start.toString(f.eventResizingStartEndFormat,N.ej()),l.left.enabled=f.eventResizingStartEndEnabled,l.left.space=5,l.left.width=null,l.left.height=f.eventHeight,l.right={},l.right.html=l.end.toString(f.eventResizingStartEndFormat,N.ej()),l.right.enabled=f.eventResizingStartEndEnabled,l.right.space=5,l.right.width=null,l.right.height=f.eventHeight,l.cssClass=null,l.html=null,l.overlapping=l.row.events.forRange(l.start,l.end).filter(function(e){return!f.Ec(e,l.e)}).length>0,l.shift=f.coords.shift,l.ctrl=f.coords.ctrl,l.meta=f.coords.meta,l.alt=f.coords.alt,l.multiresize=x.dm();var d={};d.event=t.event,d.start=l.start,d.end=l.end,l.multiresize.splice(0,0,d),f.Yo=i,"function"==typeof f.onEventResizing&&f.onEventResizing(l),x.list=DayPilot.list(l.multiresize,!0),x.list.splice(0,1),x.im(),e.allowed=l.allowed,DayPilot.Util.addClass(e,l.cssClass),l.html&&(e.firstChild.innerHTML=l.html);var c=l.start,u=f.zg(l.end);if(e.finalStart=c,e.finalEnd=u,"Days"===f.viewType){var h=s.start.getTime()-f.kb().getTime();c=c.addTime(-h),u=u.addTime(-h)}var v=DayPilot.DateUtil.diff(c,u);v=DayPilot.Util.atLeast(v,1);var p=(N.Jk(v),f.snapToGrid&&f.snapToGridEventResizing),m=p?f.getPixels(c).boxLeft:f.getPixels(c).left,g=p?f.getPixels(u).boxRight:f.getPixels(u).left;e.style.left=m+"px",e.style.width=g-m+"px",e.left=m,e.width=g-m,f.qm(o.resizingShadow,l),f.rm(o.resizingShadow,l)}}()},this.po=function(e){if(o.rectangleSelect)return e.cancelBubble=!0,e.preventDefault&&e.preventDefault(),o.gMouseUp(e),!1;if(f.kj={},f.rangeHold){var t=DayPilot.Util.mouseButton(e);if(t.left){var n=f.rangeHold;if(f.Vo(f.coords)){var i=function(e){return function(){o.timeRangeTimeout=null;var t=f.$j(e);if(t){var n={};n.start=t.start,n.end=t.end,n.resource=t.resource,n.preventDefault=function(){n.preventDefault.value=!0},"function"==typeof f.onTimeRangeClick&&f.onTimeRangeClick(n),n.preventDefault.value||"function"==typeof f.onTimeRangeClicked&&f.onTimeRangeClicked(n)}}};"Disabled"!=f.timeRangeClickHandling&&("Disabled"===f.timeRangeDoubleClickHandling?i(n)():(clearTimeout(o.timeRangeTimeout),o.timeRangeTimeout=setTimeout(i(n),f.doubleClickTimeout)))}}}var t=DayPilot.Util.mouseButton(e);t.right&&f.Zo(e)},this.Zo=function(e){if("Disabled"!==f.timeRangeSelectedHandling&&"Disabled"!==f.timeRangeRightClickHandling){var t=f.yk(f.coords.y);if(f.Hk(t.i))return void(o.range=null);var n=null;if(n=f.Vo(f.coords)?f.$j(f.rangeHold):f.$j(),!n)return void(o.range=null);if(f._b(n.start,n.end,n.resource))return o.range=null,void f.clearSelection();n.end=f.Yg(n.end);var i={};i.start=n.start,i.end=n.end,i.resource=n.resource,i.ctrl=e.ctrlKey,i.shift=e.shiftKey,i.meta=e.metaKey,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof f.onTimeRangeRightClick&&(f.onTimeRangeRightClick(i),i.preventDefault.value)||("ContextMenu"===f.timeRangeRightClickHandling&&f.contextMenuSelection&&f.contextMenuSelection.show(n),"function"==typeof f.onTimeRangeRightClicked&&f.onTimeRangeRightClicked(i))}},this.Xo=function(){return!!(o.resizing||o.moving||o.range||o.drag)||!!f.kj.start},this.dragInProgress=function(){return f.Xo()},this.mj=function(e){var t=DayPilot.mo3(f.li,e);if(t=t||{},t.grid="main",f.Ni.top.enabled()){var n=f.Ni.top,i=DayPilot.mo3(n.divCells,e);i&&i.y>0&&i.y<=n.height&&(t=i,t.grid="top")}if(f.Ni.bottom.enabled()){var a=f.Ni.bottom,r=DayPilot.mo3(a.divCells,e);r&&r.y>0&&r.y<=a.height&&(t=r,t.grid="bottom")}t.stamp=t.grid+"_"+t.x+"_"+t.y,f.coords&&f.coords.stamp===t.stamp||(f.coords=t)},this.getCoords=function(){if(!f.coords)return null;var e={};e.x=f.coords.x,e.y=f.coords.y,e.grid=f.coords.grid;var t=f.yk(e.y,e.grid).element;return e.row=t,e.time=f.getDate(e.x,!0),e.cell=f.cells.findByPixels(e.x,e.y,e.grid)[0],e.event=f.coords.insideEvent?f.coords.insideEvent:null,e.eventOffset=null,e.event&&(e.eventOffset=DayPilot.Util.copyProps(f.eventOffset,{},["x","y"])),e},this.fo=!0,this.um=function(e){if(!DayPilot.Global.touch.active){o.activeCalendar=f;var t=DayPilot.mc(e);if(f.mj(e),e.insideMainD=!0,f.fo=!0,window.event&&window.event.srcElement&&(window.event.srcElement.inside=!0),f.kj.start){DayPilot.distance(f.kj.originalMouse,t)>2&&(DayPilot.Util.copyProps(f.kj,o),document.body.style.cursor="move",f.kj={})}if(o.resizing&&o.resizingEvent.calendar===f)o.resizing.event||(o.resizing.event=o.resizingEvent),f.$o();else if(o.movingEvent){var n=o.movingEvent.calendar,i=n!==f;i&&n&&o.movingEvent.calendar.Aa(),o.movingEvent.part.external=i,f._o()}else if(o.range&&o.range.calendar===f)o.range.moved=!0,f.ap();else if(c.source){var a=c.source;g.Dg(a.coords,f.coords)}else o.rectangleSelect&&(o.rectangleSelect.moved=!0,clearTimeout(R.bp),R.bp=setTimeout(function(){R.draw()},0));"Disabled"!==f.crosshairType&&f.cp(),f.ep();var r=f.coords.insideEvent;if(f.cellBubble&&f.coords&&f.rowlist&&f.rowlist.length>0&&!r){var s=f.hj(f.coords.x).x,l=f.yk(f.coords.y).i;if(0<=l&&l<f.rowlist.length&&0<=s&&s<f.itline.length){var d={};d.calendar=f,d.start=f.itline[s].start,d.end=f.itline[s].end,d.resource=f.rowlist[l].id,d.toJSON=function(){var e={};return e.start=this.start,e.end=this.end,e.resource=this.resource,e},f.cellBubble.showCell(d)}}if(o.drag){if(f.Wo(),o.gShadow&&document.body.removeChild(o.gShadow),o.gShadow=null,!o.movingShadow&&f.coords&&f.rowlist.length>0){if(!o.movingEvent){o.moving=o.drag.schedulerSourceEvent||{};var u=o.drag.schedulerSourceEvent?o.drag.schedulerSourceEvent.event:null,h=u||o.drag.event;if(h)if(f!==h.calendar){var n=h.calendar,v=h,p=DayPilot.Util.copyProps(h.data);h=new DayPilot.Event(p),h.calendar=n,h.part.duration=n.El(v),h.part.external=!0}else h.part.external=!1;else{var m=f.itline[0].start,e={"id":o.drag.id,"start":m,"end":m.addSeconds(o.drag.duration),"text":o.drag.text},b=o.drag.data;if(b){var y=["duration","element","remove","duration","id","text"];for(var w in b)DayPilot.contains(y,w)||(e[w]=b[w])}h=new DayPilot.Event(e),h.calendar=f,h.calendar=null,h.part.duration=1e3*o.drag.duration,h.part.external=!0}o.moving.event||(o.moving.event=h),o.movingEvent=h}o.movingShadow=f.db(o.movingEvent)}e.cancelBubble=!0}var x={x:f.coords.x,y:f.coords.y,"grid":f.coords.grid};f.No(x)}},this.No=function(e){var t=e.grid,n=o.moving||o.resizing||o.range||o.rectangleSelect,i="Always"===f.autoScroll,a="Drag"===f.autoScroll&&n,r=i||a,s=o.resizing||o.range||"main"!==t;if(r){var l=f.nav.scroll;e.x-=l.scrollLeft,e.x+=p.ri,e.y-=l.scrollTop;var d=l.clientWidth,c=l.clientHeight,u=30,v=e.x<u?e.x:0,m=d-e.x<u?d-e.x:0,g=e.y<u?e.y:0,b=c-e.y<u?c-e.y:0,y=0,w=0,x=50;v&&(y=-50*h(v,u)),m&&(y=x*h(m,u)),g&&(w=-50*h(g,u)/2),b&&(w=x*h(g,u)/2),s&&(w=0),y||w?f.fp(y,w):f.go()}},this.ap=function(){var e=o.range,t=f.hj(f.coords.x).x,n=f.getDate(f.coords.x,!0);e.end={x:t,"time":n},f.ak(e)},this.$o=function(){o.resizingShadow||(o.resizingShadow=f.db(o.resizing)),f.om()},this._o=function(){if(o.movingShadow&&o.movingShadow.calendar!==f&&o.movingShadow.calendar&&(o.movingShadow.calendar.Aa(),o.movingShadow.calendar=null,DayPilot.de(o.movingShadow),o.movingShadow=null),!o.movingShadow){window.navigator.userAgent.indexOf("Chrome/61.0")>-1||DayPilot.Util.addClass(o.moving,f.G(H.eventMovingSource));var e=o.movingEvent;o.movingShadow=f.db(e)}f.Ml(),f.Ol()},this.gp={};var R=this.gp;R.start=function(){var e={};e.start=f.coords,e.calendar=f,o.rectangleSelect=e},R.draw=function(){var e=o.rectangleSelect;if(e){var t=o.rectangleSelect.start,n=f.coords;R.clear();var i,a,r,s,l,d,c,u,h={"x":e.x,"y":e.y,"width":e.width,"height":e.height};if(function(){l=Math.min(t.x,n.x),c=Math.max(t.x,n.x),"Free"===N.nj()?(d=Math.min(t.y,n.y),u=Math.max(t.y,n.y)):"Row"===N.nj()&&(d=t.y,u=t.y)}(),"Free"===N.nj())i=l,a=d,r=c-l,s=u-d;else{if("Row"!==N.nj())throw new DayPilot.Exception("Invalid DayPilot.Scheduler.rectangleSelectMode value: "+f.rectangleSelectMode);var p=f.yk(d).i,m=f.rowlist[p];a=m.top,s=m.height;if(f.snapToGrid&&f.snapToGridRectangleSelecting){i=f.hj(l).cell.left;var g=f.hj(c).cell;r=g.left+g.width-i}else i=l,r=c-l}var b=DayPilot.Util.div(f.divRectangle,i,a,r,s);if(b.style.boxSizing="border-box",b.className=f.G("_selectionrectangle"),e.x=i,e.y=a,e.width=r,e.height=s,!(e.x===h.x&&e.y===h.y&&e.width===h.width&&e.height===h.height||"function"!=typeof f.onRectangleEventSelecting&&"function"!=typeof f.onRectangleSelecting)){var y=f.yk(e.y).i,w=f.yk(e.y+e.height).i,x={"start":{"y":y},"end":{"y":w}},k=f.uk(x),C={};C.events=v.xi(e.x,e.y,e.width,e.height).map(function(e){return e.event}),C.start=f.getDate(e.x,!0),C.end=f.getDate(e.x+e.width,!0),C.resources=k,C.visible=!0,"function"==typeof f.onRectangleEventSelecting&&f.onRectangleEventSelecting(C),"function"==typeof f.onRectangleSelecting&&f.onRectangleSelecting(C),C.visible||(b.style.display="none")}}},R.clear=function(){f.divRectangle.innerHTML="",f.elements.rectangle=[]},this.hp=function(){if(!f.coords)return null;if(!f.mo())return null;if(!f.itline||0===f.itline.length)return null;var e=f.hj(f.coords.x).x,t=f.yk(f.coords.y,f.coords.grid).element;if(!t)return null;var n=t.index;return f.cells.findXy(e,n,f.coords.grid)[0]},this.ep=function(){var e=this.hp();if(this.hover.cell){if(this.hover.cell.x===e.x&&this.hover.cell.y===e.y&&this.hover.cell.grid===e.grid)return;this.ho()}if(this.hover.cell=e,"function"==typeof this.onCellMouseOver){var t={};t.cell=e,this.onCellMouseOver(t)}},this.ho=function(){if(this.hover.cell){if("function"==typeof this.onCellMouseOut){var e={};e.cell=this.hover.cell,this.onCellMouseOut(e)}this.hover.cell=null}},this.hover={},this.cp=function(){var e=f.ip();if(e){var t=f.hover.crosshair;t&&t.x===e.x&&t.y===e.y&&t.grid===e.grid&&t.thX===e.thX||(f.hover.crosshair=e,this.Nd())}},this.ip=function(){if(!f.coords)return null;if(!f.mo())return null;if(!f.itline||0===f.itline.length)return null;var e=f.yk(f.coords.y,f.coords.grid).element;if(!e)return null;var t=e.index,n=null,i=f.hj(f.coords.x);i&&(n=i.x);var a=f.jp(),r=null,o=f.Wl(a,f.coords.x);return o&&(r=o.x),{"x":n,"thX":r,"y":t,"grid":f.coords.grid}},this.Wo=function(){this.Ni.top.divCrosshair.innerHTML="",this.Ni.main.divCrosshair.innerHTML="",this.Ni.bottom.divCrosshair.innerHTML="",this.kp=null,this.lp=null},this.Ba=function(){if(this.Wo(),f.hover.crosshair=null,this.mp&&this.mp.parentNode&&(this.mp.parentNode.removeChild(this.mp),this.mp=null),this.np){for(var e=0;e<this.np.length;e++){var t=this.np[e];t.parentNode&&t.parentNode.removeChild(t)}this.np=null}this.Mh=-1,this.Lh=-1,this.pp=null},this.jp=function(){var e=this.timeHeader?this.timeHeader.length-1:1;return"number"==typeof f.crosshairTimeHeaderLevel&&f.crosshairTimeHeaderLevel<e&&f.crosshairTimeHeaderLevel>=0&&(e=f.crosshairTimeHeaderLevel),e},this.Nd=function(){function e(e,t){var n=f.Ni[e],i=n.height,a=t.left,r=f.kp[e];if(!r){var r=document.createElement("div");r.style.height=i+"px",r.style.position="absolute",r.style.top="0px",r.className=f.G("_crosshair_vertical"),f.kp[e]=r,n.divCrosshair.appendChild(r)}r.style.left=a+"px",r.style.width=t.width+"px"}if(f.coords&&f.mo()){var t=f.yk(f.coords.y,f.coords.grid).element;if(t){var n=f.hj(f.coords.x).x,i=t.index,a=t.grid,r=f.Ek(a),o=["top","main","bottom"],s=this.crosshairType;if(this.kp||(this.kp={}),"Full"===s){var l=this.itline[n];o.forEach(function(t){e(t,l)});var d=t.top,c=t.height,u=f.Di(),h=f.lp;if(h&&h.parentNode&&f.pp!==a&&(h.parentNode.removeChild(h),h=null),!h){var h=document.createElement("div");h.style.width=u+"px",h.style.height=c+"px",h.style.position="absolute",h.style.top=d+"px",h.style.left="0px",h.className=f.G("_crosshair_horizontal"),f.lp=h,r.divCrosshair.appendChild(h)}h.style.top=d+"px",h.style.height=c+"px"}var v=f.jp(),p=f.Wl(v,f.coords.x);if(p&&f.Mh!==p.x){f.mp&&this.mp.parentNode&&(f.mp.parentNode.removeChild(f.mp),f.mp=null);var c=U._l(v).height,h=document.createElement("div");h.style.width=p.cell.width+"px",h.style.height=c+"px",h.style.left="0px",h.style.top="0px",h.style.position="absolute",h.className=f.G("_crosshair_top"),f.mp=h;var m=this.divNorth,g=v;f.nav.timeHeader?f.P.timeHeader[p.x+"_"+g].appendChild(h):m&&m.firstChild.rows[g].cells[n]&&m.firstChild.rows[g].cells[n].firstChild.appendChild(h)}if(f.Lh!==i||f.pp!==a){if(f.np){for(var b=0;b<f.np.length;b++){var y=f.np[b];y.parentNode&&y.parentNode.removeChild(y)}f.np=null}this.rowHeaderCols?this.rowHeaderCols.length:1;if(f.np=[],r.divHeader.rows[i])for(var b=0;b<r.divHeader.rows[i].cells.length;b++){var u=f.Gi(),h=document.createElement("div");h.style.width=u+"px",h.style.height=t.height+"px",h.style.left="0px",h.style.top="0px",h.style.position="absolute",h.className=f.G("_crosshair_left"),f.np.push(h),r.divHeader.rows[i].cells[b].firstChild.appendChild(h)}}p&&(f.Mh=p.x),f.Lh=i,f.pp=a}}},this.Wl=function(e,t){var n=f.timeHeader[e];if(!n)return null;for(var i=0;i<n.length;i++){var a=n[i];if(t>=a.left&&t<a.left+a.width){var r={};return r.cell=a,r.x=i,r}}return null},this.qp=function(e){return f.Wl(f.timeHeader.length-1,e)},this.jo=function(e){if(e.cancelBubble=!0,!f.allowDefaultContextMenu)return!1},this.Vo=function(e){var t=f.rangeHold;if(!t||!t.start||!t.end)return!1;var n=this.cl(t.start.y),i=t.start.x<t.end.x,a=(i?t.start.x:t.end.x)*this.cellWidth,r=(i?t.end.x:t.start.x)*this.cellWidth+this.cellWidth,o=n.top,s=n.bottom;return e.x>=a&&e.x<=r&&e.y>=o&&e.y<=s&&e.grid===t.start.grid},this.ak=function(e,t){function n(e){var t,n,i,a,o=e.end.time>e.start.time,d=e.start.y,c=e.start.time&&e.end.time;if(r||!c){var u=o?e.start.x:e.end.x,h=o?e.end.x:e.start.x,v=f.itline[u],p=f.itline[h];t=v.left,n=p.left+p.width}else o?(i=e.start.time,a=e.end.time):(i=e.end.time,a=e.start.time),t=f.getPixels(i).left,n=f.getPixels(a).left;var m=n-t,g=f.elements.range2;if(!g){g=document.createElement("div"),g.style.position="absolute",g.setAttribute("unselectable","on");var b=document.createElement("div");b.className=f.G("_shadow_inner"),g.appendChild(b),s.divShadow.appendChild(g)}return g.grid!==e.start.grid&&(g.parentNode.removeChild(g),s.divShadow.appendChild(g)),g.className=f.G("_shadow"),g.firstChild.innerHTML="",g.style.left=t+"px",g.style.top=l[d].top+"px",g.style.width=m+"px",g.style.height=l[d].height-1+"px",g.calendar=f,g.grid=e.start.grid,f.elements.range2=g,function(){g.overlapping=!1;var n=l[d];f.jm(g,n,t,m,null);var i=o?e.start.time:e.end.time,a=o?e.end.time:e.start.time;f.km(g,i,a,n.id)}(),g}var e=e||o.range;if(e&&e.calendar===f){t=t||{};var i=t.justDraw,a=e.forceSnap,r=f.snapToGrid&&f.snapToGridTimeRangeSelecting;a&&(r=!0);var s=f.Ek(e.start.grid),l=s.rowlist;!function(){var t=e.end.time>=e.start.time,a=t?e.start.x:e.end.x,o=t?e.end.x:e.start.x,s=e.start.y,d=l[s];if(d&&!d.hidden){var c=f.itline[a],u=f.itline[o],h=f.rp,v=c.start.addTime(d.data.offset),p=u.end.addTime(d.data.offset);if(r||(t?(v=e.start.time,p=e.end.time):(v=e.end.time,p=e.start.time)),i||!h||h.start.getTime()!==v.getTime()||h.rawend.getTime()!==p.getTime()||h.resource!==l[s].id){var m={"start":v,"end":f.Yg(p),"rawend":p,"resource":l[s].id},g={};g.anchor=t?m.start:m.end,g.start=m.start,g.end=m.end,g.duration=new DayPilot.Duration(v,p),g.resource=l[s].id,g.row=f.ek(d),g.allowed=!0,g.left={},g.left.html=g.start.toString(f.timeRangeSelectingStartEndFormat,N.ej()),g.left.enabled=f.timeRangeSelectingStartEndEnabled,g.left.space=5,g.left.width=null,g.left.height=f.eventHeight,g.right={},g.right.html=g.end.toString(f.timeRangeSelectingStartEndFormat,N.ej()),g.right.enabled=f.timeRangeSelectingStartEndEnabled,g.right.space=5,g.right.width=null,g.right.height=f.eventHeight,g.overlapping=g.row.events.forRange(v,p).length>0,g.html=null,g.cssClass=null,f.rp=m,"function"!=typeof f.onTimeRangeSelecting||i||(f.onTimeRangeSelecting(g),g.resource=m.resource),g.end=f.zg(g.end),e.args=g;var b=f.sp(e);f._j(b,g.start,g.end);var y=n(b);g.html&&(y.firstChild.innerHTML=g.html),g.cssClass&&DayPilot.Util.addClass(y,g.cssClass),f.qm(y,g),e.Oo=b,e.disabled=!g.allowed,f.rm(y,g)}}}()}},this.sp=function(e){return{"start":{"x":e.start.x,"y":e.start.y,"time":e.start.time,"grid":e.start.grid},"end":{"x":e.end.x,"time":e.end.time},"disabled":e.disabled,"calendar":e.calendar,"args":e.args,"forceSnap":e.forceSnap}},this.range={},this.range.all=function(){return f.multirange.get()},this.multirange={},this.multirange.get=function(){return B.get(!0)},this.multirange.add=function(e){if(!e)throw new DayPilot.Exception("Range not specified");if(!e.start||!e.end||!e.resource)throw new DayPilot.Exception("Invalid range specified");if(DayPilot.list(B.list).isEmpty()){var t=f.$j();if(t){var n=f.tp(t.start,t.end,t.resource);f.up.add(n)}}var n=f.tp(e.start,e.end,e.resource);f.ak(n),f.up.add(n)},this.multirange.clear=function(){B.clear(),f.clearSelection(),f.rp=null},this.up={};var B=this.up;this.up.list=[],this.up.drawLaterTimeout=null,this.up.drawLater=function(){clearTimeout(f.up.drawLaterTimeout),f.up.drawLaterTimeout=setTimeout(function(){B.list.forEach(function(e){f.elements.range2=null,f.ak(e)})},0)},this.up.clear=function(){DayPilot.de(DayPilot.list(B.list).map(function(e){return e.div})),B.list=[]},this.up.add=function(e){e.div=f.elements.range2,f.elements.range2=null,f.tm(),B.list.push(e)},this.up.get=function(e){var t=DayPilot.list(B.list).map(function(e){return f.$j(e)});if(e&&t.isEmpty()){var n=f.$j();n&&t.push(n)}return t},this.up.dispatch=function(){if(f.allowMultiRange&&!o.range){var e=DayPilot.list(B.list).last();f.Zj(e)}},this.vp=function(e){if("Disabled"===f.timeRangeSelectedHandling)return!1;if(!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start){var t=DayPilot.Util.mouseButton(e);if(!o.range&&!o.rectangleSelect&&!(f.rangeHold&&f.Vo(f.coords)&&(t.right||t.middle)||f.Hk(f.yk(f.coords.y).i))){var n={},i=f.hj(f.coords.x).x;n.start={y:f.yk(f.coords.y).i,x:i,"grid":f.coords.grid},n.end={x:i},n.calendar=f,f.rangeHold=n,f.Zj(n)}}},this.timeouts={},this.timeouts.drawEvents=null,this.timeouts.drawCells=null,this.timeouts.drawRows=null,this.timeouts.click=null,this.timeouts.resClick=[],this.timeouts.updateFloats=null,this.timeouts.rsync=null,this.gi=function(e,t){if(!f.T){t=t||{},"undefined"==typeof DayPilot.Bubble||t.dontHideBubble||DayPilot.Bubble.hideActive(),f.ba();var n=f.nav.scroll;if(f.Vl=n.scrollLeft,f.Tl=n.scrollTop,f.vo=n.clientWidth,f.divTimeScroll&&(f.divTimeScroll.scrollLeft=f.Vl),f.Ni.top.enabled()&&(f.Ni.top.div.scrollLeft=f.Vl),f.Ni.bottom.enabled()&&(f.Ni.bottom.div.scrollLeft=f.Vl),a&&o.Xn?s():f.divResScroll.scrollTop=f.Tl,p.$i()&&f.S&&"Auto"!=f.cellWidthSpec&&!f.ji)if(p.of)s();else{if(f.nav.scroll.scrollLeft<f.infiniteScrollingMargin)return p.of=!0,f.nav.scroll.style.overflowX="hidden",void setTimeout(function(){p.Ui(-f.infiniteScrollingStepDays)},100);if(f.nav.scroll.scrollWidth-(f.nav.scroll.scrollLeft+f.nav.scroll.clientWidth)<f.infiniteScrollingMargin)return p.of=!0,f.nav.scroll.style.overflowX="hidden",void setTimeout(function(){p.Ui(f.infiniteScrollingStepDays)},100)}if(f.navigatorBackSync&&!function(){var e=DayPilot.Util.evalVariable(f.navigatorBackSync),t=f.getViewPort().start;e.select(t,{"dontNotify":!0,"dontFocus":!0})}(),f.progressiveRowRendering&&(f.timeouts.drawRows&&(clearTimeout(f.timeouts.drawRows),f.timeouts.drawRows=null),f.scrollDelayRows>0?f.timeouts.drawRows=setTimeout(function(){f.Dj()},f.scrollDelayRows):f.Dj()),f.timeouts.drawCells&&(clearTimeout(f.timeouts.drawCells),f.timeouts.drawCells=null),f.scrollDelayCells>0)f.timeouts.drawCells=setTimeout(f.wp(),f.scrollDelayCells);else{f.wp()()}if(f.dynamicLoading)return f.nh(),void f.xp();f.timeouts.drawEvents&&(clearTimeout(f.timeouts.drawEvents),f.timeouts.drawEvents=null),f.scrollDelayEvents>0?f.timeouts.drawEvents=setTimeout(f.yp(),f.scrollDelayEvents):f.Za(),f.timeouts.updateFloats&&(clearTimeout(f.timeouts.updateFloats),f.timeouts.updateFloats=null),f.scrollDelayFloats>0?f.timeouts.updateFloats=setTimeout(function(){f.ei()},f.scrollDelayFloats):f.ei(),f.onScrollCalled=!0}},this.wp=function(){return function(){f&&(f.nh(),f.ai())}},this.yp=function(){return function(){f&&(f.Bo()?window.setTimeout(function(){f.yo(),window.setTimeout(function(){f.Za(!0)},50)},50):f.vi())}},this.ba=function(){f.P.eventHeight=null,f.P.drawArea=null},this.show=function(){f.visible=!0,f.Ph=!0,f.nav.top.style.display="",f.Ya(),f._a(),f.ll(),f.gi()},this.hide=function(){f.visible=!1,f.Ph=!1,f.nav.top.style.display="none"},this.xp=function(){var e=f.nav.scroll;f.Vl=e.scrollLeft,f.Tl=e.scrollTop,f.vo=e.clientWidth,f.divTimeScroll.scrollLeft=f.Vl,f.divResScroll.scrollTop=f.Tl,f.refreshTimeout&&window.clearTimeout(f.refreshTimeout);var t=f.scrollDelayDynamic;f.refreshTimeout=window.setTimeout(f.zp(e.scrollLeft,e.scrollTop),t),f.ei()},this.nl=function(e){if(!f.events.list)return null;for(var t=0;t<this.events.list.length;t++){var n=this.events.list[t];if(f.Ec(n,e)){var i={};return i.ex=n,i.index=t,i.modified=!f.Ap(e,n),i}}return null},this.Ap=function(e,t){for(var n in e)if(("object"!=typeof e[n]||e[n]instanceof DayPilot.Date)&&e[n]!==t[n])return!1;for(var n in t)if("object"!=typeof t[n]&&e[n]!==t[n])return!1;return!0},this.ci=function(e,t,n){var i=n&&n.clearEvents,a=n&&n.remove,r=n&&n.dontForceCellRendering,o=[];if(f.events.list||(f.events.list=[]),i)f.Ma(e);else{var s=[];DayPilot.list(a).forEach(function(e){var t=DayPilot.list(f.events.list).find(function(t){return t.id===e});t&&s.push(t)}),s.forEach(function(e){var t=f.events.rj(e);o=o.concat(t),DayPilot.rfa(f.events.list,e)});for(var l=[],d=0;d<e.length;d++){var c=e[d];l[d]=f.nl(c)}for(var d=0;d<e.length;d++){var c=e[d],u=l[d],h=u&&u.modified,v=!u;if(h){this.events.list[u.index]=c;var p=f.events.rj(u.ex);o=o.concat(p)}else v&&this.events.list.push(c);(h||v)&&(o=o.concat(f.events.sj(c)))}f.tj(o),f.uj()}f.Xh(),f.Ua();if(i||r){f.pa();var m=f.Sj||!f.beforeCellRenderCaching;m&&f.Zh(),f.Yh(),m?f.ai():f.ll(),f.Za(),t&&t()}else f.vj(o,!1,function(){t&&t(),f.yo(),f.Za()}),f.ll()},this.zp=function(e,t){return f.I()?function(){f.scrollX=e,f.scrollY=t,f.ha("Scroll")}:function(){if("function"==typeof f.onScroll){var e=function(e){var t=function(){if(f.cb()&&"function"==typeof f.onAfterRender){var e={};e.isCallBack=!1,e.isScroll=!0,e.data=null,f.onAfterRender(e)}};f.ci(e.events,t,e)},t={};t.viewport=f.getViewPort(),t.async=!0,t.events=[],t.remove=[],t.clearEvents=!0,t.dontForceCellRendering=!1,t.loaded=function(){this.async&&e(t)},f.onScroll(t),t.async||e(t)}}},this.Bp=function(){var e=this.X(),t=e.xStart,n=e.xEnd-e.xStart,i=e.yStart,a=e.yEnd-e.yStart;this.cellProperties||(this.cellProperties={});for(var r=f.Ni.top,o=f.Ni.bottom,s=0;s<=n;s++){for(var l=t+s,d=0;d<a;d++){var c=i+d;this.rowlist[c].hidden||this.$c(l,c)}if(this.Cp(l),r.enabled()){for(var c=0;c<r.rowlist.length;c++)this.$c(l,c,"top");this.Cp(l,"top")}if(o.enabled()){for(var c=0;c<o.rowlist.length;c++)this.$c(l,c,"bottom");this.Cp(l,"bottom")}}for(var u=this.xm(),c=u.start;c<u.end;c++)this.rowlist[c].hidden||this.Dp(c);if(r.enabled())for(var c=0;c<r.rowlist.length;c++)r.rowlist[c].hidden||this.Dp(c,"top");if(o.enabled())for(var c=0;c<o.rowlist.length;c++)o.rowlist[c].hidden||this.Dp(c,"bottom")},this.ai=function(){if(!f.T){var e=f.Yi();if(e&&e.length>0){if(this.cellSweeping){var t=this.cellSweepingCacheSize;this.Ao(t)}P.hl(),this.Bp(),this.Ep(),P.ok({"dontFocus":!0})}this.Sj=!1}},this.Ep=function(){for(var e=this.X(),t=e.xStart;t<e.xEnd;t++){t<this.itline.length-1&&this.itline[t+1].breakBefore&&this.Fp(t)}},this.Fp=function(e){var t="x"+e;if(!f.P.breaks[t]){var n={};if("function"==typeof f.onBeforeGridLineRender){var i=f.itline[e],a=f.itline[e+1];if(n.start=i&&i.end,n.end=a&&a.start,n.hidden=!1,n.cssClass=null,n.type="VerticalBreak",n.color=null,f.onBeforeGridLineRender(n),n.hidden)return}var r=f.itline[e+1].left-1,o=f.Nh,s=document.createElement("div");s.style.left=r+"px",s.style.top="0px",s.style.width="1px",s.style.height=o+"px",s.style.fontSize="1px",s.style.lineHeight="1px",s.style.overflow="hidden",s.style.position="absolute",s.setAttribute("unselectable","on"),s.className=this.G("_matrix_vertical_break"),n.cssClass&&(s.className+=" "+n.cssClass),n.color&&(s.style.backgroundColor=n.color),this.divBreaks.appendChild(s),this.elements.breaks.push(s),this.P.breaks[t]=s}},this.X=function(){if(f.P.drawArea)return f.P.drawArea;if(!this.nav.scroll)return null;var e=f.Tl,t={},n=null!=this.dynamicEventRenderingMarginX?this.dynamicEventRenderingMarginX:this.dynamicEventRenderingMargin,i=null!=this.dynamicEventRenderingMarginY?this.dynamicEventRenderingMarginY:this.dynamicEventRenderingMargin,a=f.Vl-n-p.ri,r=a+f.vo+2*n,o=0,s=0;if(f.itline&&f.itline.length>0){o=f.hj(a).x,s=f.hj(r,!0).x;var l=this.Ul();s=Math.min(s,l),o=DayPilot.Util.atLeast(o,0)}var d=e-i,c=e+this.nav.scroll.offsetHeight+2*i,u=this.yk(d).i,h=this.yk(c).i;h<this.rowlist.length&&h++,t.xStart=o,t.xEnd=s,t.yStart=u,t.yEnd=h;var v=f.nav.scroll;return 0===v.clientWidth&&(v=f.divTimeScroll),t.pixels={},t.pixels.left=v.scrollLeft-p.ri,t.pixels.right=v.scrollLeft-p.ri+v.clientWidth,t.pixels.top=v.scrollTop,t.pixels.bottom=v.scrollTop+v.clientHeight,t.pixels.width=v.scrollWidth,t.sw=DayPilot.sw(f.nav.scroll),f.P.drawArea=t,t},this.Di=function(){var e=0,t=this.itline[this.itline.length-1];return e=t?t.left+t.width:0,(e<0||isNaN(e))&&(e=0),e},this.Dp=function(e,t){t=t||"main";var n=f.Ni[t],i=n.rowlist,a=n.divLines,r=t+"_y_"+e;if(!this.P.linesHorizontal[r]){var o=i[e],s={};if("function"!=typeof f.onBeforeGridLineRender||(s.row=f.ek(o),s.hidden=!1,s.cssClass=null,s.type="HorizontalLine",s.color=null,f.onBeforeGridLineRender(s),!s.hidden)){var l="number"==typeof o.forcedHeight?o.forcedHeight:o.height,d=o.top+l-1,c=this.Di(),u=document.createElement("div");u.style.left="0px",u.style.top=d+"px",u.style.width=c+"px",u.style.height="1px",u.style.fontSize="1px",u.style.lineHeight="1px",u.style.overflow="hidden",u.style.position="absolute",u.setAttribute("unselectable","on"),u.className=this.G("_matrix_horizontal_line"),s.cssClass&&(u.className+=" "+s.cssClass),s.color&&(u.style.backgroundColor=s.color),a.appendChild(u),this.P.linesHorizontal[r]=u}}},this.Cp=function(e,t){var n=this.itline[e];if(n){t=t||"main";var i=f.Ni[t],a=i.divLines,r="main"===t,o=r?f.Nh:i.height,s=t+"_x_"+e;if(!this.P.linesVertical[s]){var l={};if("function"!=typeof f.onBeforeGridLineRender||(l.start=n.start,l.end=n.end,l.hidden=!1,l.cssClass=null,l.type="VerticalLine",l.color=null,f.onBeforeGridLineRender(l),!l.hidden)){var d=n.left+n.width-1,c=document.createElement("div");c.style.left=d+"px",c.style.top="0px",c.style.width="1px",c.style.height=o+"px",c.style.fontSize="1px",c.style.lineHeight="1px",c.style.overflow="hidden",c.style.position="absolute",c.setAttribute("unselectable","on"),c.className=this.G("_matrix_vertical_line"),l.cssClass&&(c.className+=" "+l.cssClass),l.color&&(c.style.backgroundColor=l.color),a.appendChild(c),this.elements.linesVertical.push(c),this.P.linesVertical[s]=c}}}},this.Nl=function(e,t){function n(){var t=f.Gp(e,i.expanded,!1);if(!a)for(var n=0;n<t.length;n++){var r=t[n];f.Tj(r)}f.Vm(),f.nh();var o=f.ek(i,e);a?f.nk(o):f.mk(o)}f.ii.rl&&(f.ii.skip=!0);var i=this.rowlist[e],a=!i.expanded;if(i.expanded=a,i.resource&&(i.resource.expanded=a),t=t||{},f.treeAnimation&&!t.notAnimated){var r=this.Gp(e,i.expanded,!0);f.Um(r,a?"show":"hide",function(){n()})}else n()},this.Vm=function(){f.Xh(),f.Uh(),f.Ua(),f.ba(),f.Vj(),g.Xj(),f.Zh(),f.ai(),f.Dj(),f.Za(),f.ba()},this.Qm=function(e){var t={};if(t.index=e,"function"==typeof this.onLoadNode){var n={},i=this.rowlist[e].resource;n.resource=i,n.async=!1,n.loaded=function(){this.async&&(i.dynamicChildren=!1,i.expanded=!0,f.update())},this.onLoadNode(n),n.async||(i.dynamicChildren=!1,i.expanded=!0,this.update())}else this.ha("LoadNode",t)},this.Gp=function(e,t,n){var i=this.rowlist[e],a=[];if(null===i.children||0===i.children.length)return a;for(var r=0;r<i.children.length;r++){var o=i.children[r],s=this.rowlist[o],l=t&&i.expanded&&!s.Bn;t&&s.hidden&&(s.forcedHeight=0),n&&!t||(s.hidden=!l),n||delete s.forcedHeight,t===l&&a.push(o);var d=this.Gp(o,t);d.length>0&&(a=a.concat(d))}return a},this.fp=function(e,t){this.go(),this.Hp(e,t)},this.Ip=function(e){if(!e)return!1;var t=this.nav.scroll.scrollWidth,n=this.nav.scroll.scrollLeft,i=this.nav.scroll.clientWidth,a=n+i;return!(e<0&&n<=0)&&(!(e>0&&a>=t)&&(this.nav.scroll.scrollLeft+=e,f.coords.x+=e,f.Jp(),!0))},this.Kp=function(e){if(!e)return!1;var t=this.nav.scroll.scrollHeight,n=this.nav.scroll.scrollTop,i=this.nav.scroll.clientHeight,a=n+i;return!(e<0&&n<=0)&&(!(e>0&&a>=t)&&(this.nav.scroll.scrollTop+=e,f.coords.y+=e,f.Jp(),!0))},this.Jp=function(){o.resizing&&o.resizing.event.calendar===f?f.$o():o.moving&&(o.movingEvent.calendar===f||o.movingEvent.calendar&&o.movingEvent.calendar.dragOutAllowed)?(o.moving.event||(o.moving.event=o.movingEvent),f._o()):o.range&&o.range.calendar===f&&f.ap()},this.Hp=function(e,t){if(this.Ip(e)||this.Kp(t)){var n=function(e,t){
return function(){f.Hp(e,t)}};this.Lp=window.setTimeout(n(e,t),100)}},this.go=function(){f.Lp&&(window.clearTimeout(f.Lp),f.Lp=null)},this.Xh=function(){f.Ni.top.enabled()&&(f.Ni.top.height=f.Mp(f.Ni.top.rowlist,0)),f.Ni.bottom.enabled()&&(f.Ni.bottom.height=f.Mp(f.Ni.bottom.rowlist,0)),f.Nh=f.Mp(f.rowlist,f.Ni.top.height)},this.Mp=function(e,t){for(var n=0,i=t||0,t=t||0,a=0;a<e.length;a++){var r=e[a];r.hidden||(r.top=t,r.displayY=n,t+="number"==typeof r.forcedHeight?r.forcedHeight:r.height,n+=1),r.absTop=i,i+=r.height}return t},this.Zh=function(){DayPilot.browser.ie&&f.Np(),f.elements.cells=[],f.elements.breaks=[],f.P.cells=[],f.P.breaks=[],f.divBreaks.innerHTML="",f.divCells.innerHTML="",f.Ni.top.divCells.innerHTML="",f.Ni.bottom.divCells.innerHTML="",f.Fm()},this.Fm=function(){f.divLines.innerHTML="",f.Ni.top.divLines.innerHTML="",f.Ni.bottom.divLines.innerHTML="",f.P.linesVertical={},f.P.linesHorizontal={},f.elements.linesVertical=[]},this.Np=function(e){var t=DayPilot.list();for(var n in f.P.cells)t.push(f.P.cells[n]);t.forEach(function(e){f.ul(e)})},this.Wj=function(e,t){t=t||"main";var n=DayPilot.list();for(var i in f.P.cells)n.push(f.P.cells[i]);n.filter(function(n){return n&&n.coords&&n.coords.y===e&&n.coords.grid===t}).forEach(function(e){f.ul(e)})},this.Op=0,this.Pp=DayPilot.list(["html","cssClass","backColor","backImage","backRepeat","areas","disabled"]),this.Qp=f.Pp.add("business"),this.$c=function(e,t,n){if(this.S){var i=f.lj(e);if(i){n=n||"main";var a=this.Ni[n],r=a.rowlist,o=a.divCells,s="main"===n,l=n+"_"+e+"_"+t;if(!this.P.cells[l]){var d=this.vl(e,t,n);if(f.$l(e,t,n),!this.drawBlankCells){var c=!1;if(s&&this.Kl(t)?c=!1:this.Rp(d,f.Pp)||(c=!0),c)return}var u=document.createElement("div");u.style.left=i.left+"px",u.style.top=r[t].top+"px",u.style.width=i.width+"px",u.style.height=r[t].height+"px",u.style.position="absolute",d&&d.backColor&&(u.style.backgroundColor=d.backColor),u.setAttribute("unselectable","on"),u.className=this.G("_cell"),u.coords={},u.coords.x=e,u.coords.y=t,u.coords.grid=n,s&&f.Kl(t)&&DayPilot.Util.addClass(u,this.G("_cellparent")),S.P[t]&&DayPilot.Util.addClass(u,this.G("_cell_selected"));var h=f.cells.findXy(e,t,n)[0];if(d){d.cssClass&&DayPilot.Util.addClass(u,d.cssClass),DayPilot.Util.isNullOrUndefined(d.html)||(u.innerHTML=d.html),d.backImage&&(u.style.backgroundImage='url("'+d.backImage+'")'),d.backRepeat&&(u.style.backgroundRepeat=d.backRepeat),d.business&&f.cellsMarkBusiness&&DayPilot.Util.addClass(u,f.G("_cell_business")),d.disabled&&DayPilot.Util.addClass(u,f.G("_cell_disabled"));var v=DayPilot.Areas.resolvePosition(d.areas,f,i.left,i.width);DayPilot.Areas.attach(u,h,{"areas":v})}if(o.appendChild(u),this.elements.cells.push(u),this.P.cells[l]=u,"function"==typeof f.onAfterCellRender){var p={};p.cell=DayPilot.Util.copyProps(h,{},["x","y","displayY","start","end","resource","grid"]),p.div=u,f.onAfterCellRender(p)}}}}},this._i={},this.ll=function(){f.Sp(),f.Tp().forEach(function(e){f.Wj(e.y,e.grid)}),f.ai()},this.Sp=function(){function e(e){f.Ni[e].rowlist.forEach(function(t,n){t.isNewRow||t.resource.cellsAutoUpdated&&f.itline.forEach(function(t,i){var a=e+"_"+i+"_"+n;delete f._i[a]})})}e("main"),e("top"),e("bottom")},this.Tp=function(){function e(e,n,r){for(var o=0;o<r;o++)for(var s=n+o,l=f.Ni[e].rowlist[s],d=0;d<=a;d++){var c=i+d;if(!l.hidden&&!f._i[e+"_"+c+"_"+s]){t.push({"grid":e,"y":s});break}}}var t=DayPilot.list(),n=this.X(),i=n.xStart,a=n.xEnd-n.xStart;return e("main",n.yStart,n.yEnd-n.yStart),e("top",0,f.Ni.top.rowlist.length),e("bottom",0,f.Ni.bottom.rowlist.length),t},this.$l=function(e,t,n){if("function"==typeof this.onBeforeCellRender){n=n||"main";var i=n+"_"+e+"_"+t;if(f.beforeCellRenderCaching&&f._i[i])return;f._i[i]=!0;var a=f.lj(e);if(!a)return;var r=f.cells.findXy(e,t,n)[0],o={};return o.cell=r,o.control=f,o.getPixels=function(e){var e=new DayPilot.Date(e);return f.getPixels(e).left-a.left},this.onBeforeCellRender(o),DayPilot.Util.copyProps(o.cell,o.cell.properties,f.Qp),o.cell.properties.disabled&&(f._i.sm=!0),o}},this.Rp=function(e,t){if(t){for(var n=0;n<t.length;n++)if(!DayPilot.Util.isNullOrUndefined(e[t[n]]))return!0}else for(var i in e)if(!DayPilot.Util.isNullOrUndefined(e[i]))return!0;return!1},this.clearSelection=function(){this.di(),B.clear()},this.cleanSelection=this.clearSelection,this.tp=function(e,t,n){e=new DayPilot.Date(e),t=new DayPilot.Date(t);var i=f.oi(n),a=f.jj(e),r=a.current||a.next;if(!r)throw new DayPilot.Exception("Time range selection 'start' out of timeline");var o=f.jj(new DayPilot.Date(t).addMilliseconds(-1)),s=o.current||o.previous;if(!s)throw new DayPilot.Exception("Time range selection 'end' out of timeline");var l={};return l.start={y:i.index,x:DayPilot.indexOf(f.itline,r),"time":e,"grid":i.grid},l.end={x:DayPilot.indexOf(f.itline,s),"time":t},l.calendar=this,l},this.selectTimeRange=function(e,t,n,i){var a=f.tp(e,t,n);f.ak(a),i||setTimeout(function(){f.Zj(a)},0)},this.Jb=function(){var e=o.movingShadow&&o.movingShadow.source;e&&DayPilot.Util.removeClass(e,f.G(f.Mo.eventMovingSource)),DayPilot.de(o.movingShadow),o.movingShadow=null,f.tm(),f.mm.clear(),DayPilot.Global.movingLink&&(DayPilot.Global.movingLink.clear(),DayPilot.Global.movingLink=null)},this.di=function(){f.divShadow&&(f.divShadow.innerHTML=""),f.Ni.top.divShadow&&(f.Ni.top.divShadow.innerHTML=""),f.Ni.bottom.divShadow&&(f.Ni.bottom.divShadow.innerHTML=""),f.elements.range=[],f.elements.range2=null,f.tm(),f.rangeHold=null,f.rp=null};var P={};P.Up=null,P.ok=function(e){e=e||{};var t=e.dontFocus,n=P.Up;if(n){var i=n.x,a=n.y;if("cell"===n.type){var r=P.Vp(i,a),o=r.row,s=P.Wp(i,a);s&&DayPilot.Util.addClass(s,f.G("_cell_focus")),"top"===n.line&&o.marginTop&&DayPilot.Util.addClass(s,f.G("_cell_focus_top")),"bottom"===n.line&&o.marginBottom&&DayPilot.Util.addClass(s,f.G("_cell_focus_bottom"))}else{var s=f.ze(n.event);s&&DayPilot.Util.addClass(s,f.G("_event_focus"))}if(!t){var l=f.zk();if(l.start.x>=i){var d=f.itline[i].start;f.scrollTo(d)}else if(l.end.x<=i){var c=f.itline[i].end;f.scrollTo(c,!1,"right")}if(l.start.y>=a)f.nav.scroll.scrollTop=f.rowlist[a].top-f.Ni.top.height;else if(l.end.y<=a){var o=f.rowlist[a],u=o.top+o.height;f.nav.scroll.scrollTop=u-f.nav.scroll.clientHeight+f.Ni.bottom.height}}}},P.hl=function(){var e=P.Up;if(e)if("cell"===e.type){var t=P.Wp(P.Up.x,P.Up.y);t&&(DayPilot.Util.removeClass(t,f.G("_cell_focus")),DayPilot.Util.removeClass(t,f.G("_cell_focus_top")),DayPilot.Util.removeClass(t,f.G("_cell_focus_bottom")))}else{var t=f.ze(e.event);t&&DayPilot.Util.removeClass(t,f.G("_event_focus"))}},P.Vp=function(e,t){var n={},i=f.rowlist[t],a=f.itline[e],r=[],o=i.lines.map(function(e){var t=e.filter(function(e){return DayPilot.Util.overlaps(e.part.start,e.part.end,a.start,a.end)});return r=r.concat(t),t});return n.lines=o,n.thc=a,n.row=i,n.events=r,n},P.Nj=function(){var e=P.Up;e&&(P.hl(),P.Up=P.Xp(e.x,e.y,e.pixels,e.line),P.ok({"dontFocus":!0}))},P.Xp=function(e,t,n,i){var a={};n=n||f.itline[e].left,i=DayPilot.Util.isNullOrUndefined(i)?"top":i;var r=P.Vp(e,t),o=r.lines,s=r.row,l=r.events,d=s.marginTop||s.marginBottom,c=!1,u=l.length>0,h=i,v=null,p=null;if(u)if(s.marginTop&&"top"===i)c=!0,h="top";else if(s.marginBottom&&"bottom"===i)c=!0,h="bottom";else{if("top"===i)if(s.marginBottom){var m=r.lines.find(function(e){return e.find(function(e){return e.part.left<=n&&n<=e.part.right})});if(m)h=r.lines.indexOf(m);else{var g=r.lines.find(function(e){return e.find(function(e){return DayPilot.Util.overlaps(e.part.left,e.part.right,r.thc.left,r.thc.left+r.thc.right)})});g?(h=r.lines.indexOf(g),p=g[0]):h="bottom"}}else h=s.marginTop?"top":0;else if("bottom"===i)if(d){var m=r.lines.slice().reverse().find(function(e){return e.find(function(e){return e.part.left<=n&&n<=e.part.right})});h=r.lines.indexOf(m),h===-1&&(h=P.Yp(i,s))}else h=o.length-1;else h=i;var b=o[h];p||(p=b&&b.find(function(e){return e.part.left<=n&&n<=e.part.right})),p||(c=!0,h=P.Yp(h,s)),v=p}else c=!0,h=d?P.Yp(i,s):0;return a.x=e,a.y=t,c?(a.type="cell",a.pixels=n,a.line=h,a):(a.type="event",a.event=v,a.pixels=v.part.left,a.x=f.hj(v.part.left).x,a.line=h,a)},P.Zp=function(e){var t={},n=P.Up,i=f.rowlist[n.y],a=i.lines[n.line],r=P.Vp(n.x,n.y),o=i.marginTop||i.marginBottom;if("right"===e){if("event"===n.type){var s=n.event.part.end,l=n.event.part.right,d=f.jj(s),c=d.i,u=d.current.left+d.current.width,h=a.indexOf(n.event)+1,v=a[h],p=r.lines[n.line],m=p[p.indexOf(n.event)+1];if(v&&v.part.left===l)return t.x=c+1,t.y=n.y,t.type="event",t.line=n.line,t.pixels=v.part.left,t.event=v,t;if(m&&o)return t.x=c,t.y=n.y,t.type="event",t.line=n.line,t.pixels=m.part.left,t.event=m,t;if(u===l){var g=P.$p(c);return g===c?n:(t.x=c+1,t.y=n.y,t.type="cell",t.pixels=f.itline[t.x].left,t.line=n.line,i.marginTop?t.line="top":i.marginBottom&&(t.line="bottom"),t)}return t.x=c,t.y=n.y,t.type="cell",t.line=n.line,t.pixels=n.event.part.right,o&&(t.line=P.Yp(n.line,i)),t}var r=P.Vp(n.x,n.y),a=r.lines[n.line],v=a&&a.find(function(e){return e.part.left>n.pixels});if(v)return t.x=n.x,t.y=n.y,t.type="event",t.event=v,t.pixels=v.part.left,t.line=n.line,t;var g=P.$p(n.x);return g===n.x?n:P.Xp(n.x+1,n.y,null,n.line)}if("left"===e){var b=n.x;if("event"===n.type){b=f.hj(n.event.part.left).x;var d=f.itline[b];if(n.event.part.left!==d.left){var h=a.indexOf(n.event)-1,v=a[h];return v&&v.part.right===n.event.part.left?(d=f.hj(v.part.right,!0),t.x=d.x,t.y=n.y,t.type="event",t.line=n.line,t.pixels=v.part.right,t.event=v,t):(d=f.hj(n.event.part.left),t.x=d.x,t.y=n.y,t.type="cell",t.line=n.line,t.pixels=n.event.part.left,o&&(t.line=P.Yp(n.line,i)),t)}t=P.Xp(b-1,n.y,d.right,n.line)}else{var r=P.Vp(n.x,n.y),a=r.lines[n.line],v=a&&a.slice().reverse().find(function(e){return e.part.right<n.pixels});if(v)return t.x=n.x,t.y=n.y,t.type="event",t.event=v,t.pixels=v.part.right,t.line=n.line,t;var g=P._p(n.x);if(g===n.x)return n;var d=f.itline[b-1],u=d.left+d.width;t=P.Xp(b-1,n.y,u,n.line)}return t}if("down"===e){var r=P.Vp(n.x,n.y),y=r.lines.find(function(e){return e.find(function(e){return e.part.left<=n.pixels&&n.pixels<=e.part.right})});if("top"===n.line&&i.marginTop){if(y){var w=r.lines.indexOf(y);return t=P.Xp(n.x,n.y,n.pixels,w),t.pixels=n.pixels,t.x=n.x,t}var x=r.lines.find(function(e){return e.find(function(e){return DayPilot.Util.overlaps(e.part.left,e.part.right,r.thc.left,r.thc.left+r.thc.right)})});if(x){var k=x[0];return t=P.Xp(n.x,n.y,k.part.left,r.lines.indexOf(x)),t.pixels=n.pixels,t.x=n.x,t}var C=P.aq(n.y);return C===n.y?n:(t=P.Xp(n.x,n.y+1,n.pixels,"top"),t.pixels=n.pixels,t.x=n.x,t)}if("bottom"===n.line&&i.marginBottom){var C=P.aq(n.y);return C===n.y?n:(t=P.Xp(n.x,n.y+1,n.pixels,"top"),t.pixels=n.pixels,t.x=n.x,t)}if(n.line<i.lines.length-1){var S=n.y,E=n.line+1;i.marginTop&&"top"===n.line&&(E=0);var y=r.lines.slice(E).find(function(e){return e.find(function(e){return e.part.left<=n.pixels&&n.pixels<=e.part.right})});if(y)E=r.lines.indexOf(y);else if(i.marginBottom)E="bottom";else if(i.marginTop){var x=r.lines.slice(n.line+1).find(function(e){return e.find(function(e){return DayPilot.Util.overlaps(e.part.left,e.part.right,r.thc.left,r.thc.left+r.thc.right)})});if(x){var k=x[0];return t=P.Xp(n.x,n.y,k.part.left,r.lines.indexOf(x))}E="top",S+=1}else n.event?E=i.lines.length-1:(E=0,S+=1);return t=P.Xp(n.x,S,n.pixels,E),t.pixels=n.pixels,t.x=n.x,t}if(n.line===i.lines.length-1&&i.marginBottom)return t=P.Xp(n.x,n.y,n.pixels,"bottom"),t.pixels=n.pixels,t.x=n.x,t;var C=P.aq(n.y);return C===n.y?n:(t=P.Xp(n.x,n.y+1,n.pixels,"top"),t.pixels=n.pixels,t.x=n.x,t)}if("up"===e){var r=P.Vp(n.x,n.y),y=r.lines.slice().reverse().find(function(e){return e.find(function(e){return e.part.left<=n.pixels&&n.pixels<=e.part.right})});if("bottom"===n.line&&i.marginBottom&&y){var w=r.lines.indexOf(y);t=P.Xp(n.x,n.y,n.pixels,w)}else if(0===n.line&&i.marginTop)t=P.Xp(n.x,n.y,n.pixels,"top");else if(n.line>0){var E="bottom",S=n.y,y=r.lines.slice(0,n.line).reverse().find(function(e){return e.find(function(e){return e.part.left<=n.pixels&&n.pixels<=e.part.right})});y?E=r.lines.indexOf(y):i.marginTop?E="top":i.marginBottom?S-=1:E=0;var C=P.bq(S);if(C===S)return n;t=P.Xp(n.x,S,n.pixels,E)}else{var C=P.bq(n.y);if(C===n.y)return n;t=P.Xp(n.x,n.y-1,n.pixels,"bottom")}return t.x=n.x,t.pixels=n.pixels,t}return t},P.Yp=function(e,t){var n="top"===e&&t.marginTop||"bottom"===e&&t.marginBottom;if("number"==typeof e||!n){if(t.marginTop)return"top";if(t.marginBottom)return"bottom"}return e},P.Wp=function(e,t,n){n=n||"main";var i=n+"_"+e+"_"+t;return f.P.cells[i]},P.cq=function(){return P.Up},P._e=function(){var e=f.keyboardTarget;switch(e){case"component":return f.nav.top;case"document":return document}throw new DayPilot.Exception("Invalid keyboardTarget value: "+e)},P.dq=null,P.eq=function(){var e=P._e();e!==document&&f.nav.top.setAttribute("tabindex","-1"),f.I()||(e.addEventListener("keyup",function(e){if(16===e.keyCode){var t=P.dq;if(P.dq=null,!t||!t.end)return;var n=t.start.x<t.end.x,i=n?t.start.x:t.end.x,a=n?t.end.x:t.start.x;P.fq(i,t.start.y,a,{"forceSnap":!0})}}),e.addEventListener("keydown",function(e){var t=37,n=38,i=39,a=40,r=13,s=[t,n,i,a],l=[t,n,i,a,r];if(!o.editing){if(s.indexOf(e.keyCode)!==-1&&(e.preventDefault(),!P.Up))return void P.gq();if(l.indexOf(e.keyCode)!==-1){var d=e.shiftKey;if(P.Up){var c=f.Kl(P.Up.y),u=!(c&&f.treePreventParentUsage);d&&!P.Up.event&&!P.dq&&u&&(P.dq={"calendar":f,"forceSnap":!0,"start":{x:P.Up.x,y:P.Up.y,time:f.itline[P.Up.x].start}})}var h=!P.dq;switch(e.keyCode){case i:P.hl(),P.Up=P.Zp("right"),P.ok();break;case t:P.hl(),P.Up=P.Zp("left"),P.ok();break;case n:h&&(P.hl(),P.Up=P.Zp("up"),P.ok());break;case a:h&&(P.hl(),P.Up=P.Zp("down"),P.ok());break;case r:if(e.preventDefault(),P.Up&&P.Up.event){var v=f.ze(P.Up.event);P.hq(v,e)}else u&&P.fq(P.Up.x,P.Up.y)}e.keyCode!==t&&e.keyCode!==i||P.dq&&(P.dq.end={x:P.Up.x,y:P.Up.y,time:f.itline[P.Up.x].start},f.ak(P.dq)),P.dq}}}))},P.hq=function(e,t){f.qb(e,t)},P.fq=function(e,t,n){l=l||{};var i={};i.forceSnap=!0,i.start={y:t,x:e,time:f.itline[e].start},i.end={x:"undefined"==typeof n?e:n},i.end.time=f.itline[i.end.x].start,i.calendar=f,f.rangeHold=i,f.Zj(i)},P.gq=function(){var e=f.zk();P.Up=P.Xp(e.start.x,e.start.y),P.ok()},P.iq=function(){var e="Always"===f.useEventBoxes;e=e&&!f.I(),e&&(P.eq(),P._e()!==document&&f.nav.top.focus())},P.bq=function(e){if(e<=0)return e;for(var t=e;t>0;)if(t-=1,!f.rowlist[t].hidden)return t;return e},P.aq=function(e){var t=f.rowlist.length-1;if(e>=t)return e;for(var n=e;n<t;)if(n+=1,!f.rowlist[n].hidden)return n;return e},P.$p=function(e){return e>=f.itline.length-1?e:e+1},P._p=function(e){return e<=0?e:e+1},this.jq=P,this.ea={};var N=this.ea;N.wh=function(){delete f.P.eventHeight,delete f.P.headerHeight},N.da=function(){return"Disabled"!==f.xssProtection},N.ej=function(){return DayPilot.Locale.find(f.locale)},N.So=function(){return"Auto"!==f.timeFormat?f.timeFormat:N.ej().timeFormat},N.To=function(){if("Auto"===f.weekStarts){var e=N.ej();return e?e.weekStarts:0}return f.weekStarts||0},N.Gm=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("mobile")!==-1||e.indexOf("android")!=-1},N.In=function(){var e=/MSIE 6/i.test(navigator.userAgent);return"Auto"===f.layout?e?"TableBased":"DivBased":f.layout},N.qj=function(){var e;if("Immediate"===f.notifyCommit)e="Notify";else{if("Queue"!==f.notifyCommit)throw new DayPilot.Exception("Invalid notifyCommit value: "+f.notifyCommit);e="Queue"}return e},N.Wm=function(){return"Days"!==f.viewType},N.Jk=function(e){return"Always"===f.useEventBoxes||"Never"!==f.useEventBoxes&&e<60*f.Bl()*1e3},N.Ik=function(){if(f.P.eventHeight)return f.P.eventHeight;var e=f.Fe("_event_height").height;return e||(e=f.eventHeight),f.P.eventHeight=e,e},N.Un=function(){if(f.P.headerHeight)return f.P.headerHeight;var e=f.Fe("_header_height").height;return e||(e=f.headerHeight),f.P.headerHeight=e,e},N.Zn=function(){if(f.P.scrollLineHeight)return f.P.scrollLineHeight;var e=document.createElement("div");e.style.fontSize="initial",e.style.display="none",document.body.appendChild(e);var t=parseInt(window.getComputedStyle(e).fontSize)||16;return document.body.removeChild(e),f.P.headerHeight=t,t},N.Hi=function(){return f.rowHeaderScrolling?f.rowHeaderSplitterWidth:1},N.nj=function(){return"string"==typeof f.multiSelectRectangle?f.multiSelectRectangle:"Disabled"===f.rectangleSelectHandling?"Disabled":f.rectangleSelectMode},N.kq=function(){return"string"==typeof f.multiSelectRectangle?"Free"===f.multiSelectRectangle||"Row"===f.multiSelectRectangle?"EventSelect":"Disabled":f.rectangleSelectHandling},N.Yl=function(){return DayPilot.list(f.rowHeaderColumns).filter(function(e){return!e.hidden})},this.lq={};var U=this.lq;U._l=function(e){var t={};t.top=0,t.height=0;for(var n=N.Un(),i=0;i<=e;i++){var a=f.timeHeaders[i];t.top+=t.height,t.height=a.height||n}return t},this.vl=function(e,t,n){n=n||"main";var i=n+"_"+e+"_"+t,a=f.Ni[n],r=a.rowlist;if(f.cellConfig){i=e+"_"+t;for(var o=0,s=0;s<f.resources.length;s++)if(!f.resources[s].hidden){if(o===t){t=s;break}o+=1}}if(this.cellProperties||(this.cellProperties={}),this.cellProperties[i])return this.cellProperties[i];if(this.Hh&&(this.cellProperties[i]=f.mq(e,t)),!this.cellProperties[i]){var l=r[t],d=l.id,c=l.start.getTime()-f.kb().getTime(),u=f.lj(e),h=u.start.addTime(c),v=u.end.addTime(c),p={};p.start=h,p.end=v,p.resource=d;var m={};m.business=f.isBusiness(p),l.cellsDisabled&&(f._i.sm=!0,m.disabled=!0),this.cellProperties[i]=m}return this.cellProperties[i]},this.nq=function(e,t,n){var i=t+"_"+n;return this.cellProperties[i]={},DayPilot.Util.copyProps(e,this.cellProperties[i],f.Qp),this.cellProperties[i]},this.mq=function(e,t){if(!this.cellConfig)return null;var n=this.cellConfig,i=this.cellProperties[e+"_"+t];!i&&n.vertical&&(i=this.cellProperties[e+"_0"]),!i&&n.horizontal&&(i=this.cellProperties["0_"+t]),!i&&n["default"]&&(i=n["default"]);var a={};return DayPilot.Util.copyProps(i,a,f.Qp),a},this.La=function(){if(!this.Hh&&!this.Ih&&(this.Ih=!0,this.cellConfig)){var e=this.cellConfig;if(e.vertical)for(var t=0;t<e.x;t++){var n=this.cellProperties[t+"_0"];if(n)for(var i=1;i<e.y;i++)this.nq(n,t,i)}if(e.horizontal)for(var i=0;i<e.y;i++){var n=this.cellProperties["0_"+i];if(n)for(var t=1;t<e.x;t++)this.nq(n,t,i)}if(e["default"])for(var n=e["default"],i=0;i<e.y;i++)for(var t=0;t<e.x;t++)this.cellProperties[t+"_"+i]||this.nq(n,t,i)}},this.isBusiness=function(e,t){var n=e.start,i=e.end,a=(i.getTime()-n.getTime())/6e4;if(a<=1440&&!(f.businessWeekends||t||0!==e.start.dayOfWeek()&&6!==e.start.dayOfWeek()))return!1;if(a<720){var r=n.getHours();r+=n.getMinutes()/60,r+=n.getSeconds()/3600,r+=n.getMilliseconds()/36e5;var o=this.businessBeginsHour,s=this.businessEndsHour;if(0===s&&(s=24),o===s)return!1;if(!(o<s))return r<s||r>=o;if(r<o)return!1;if(s>=24)return!0;if(r>=s)return!1}return!0},this.bd=function(){switch(f.U){case"aspnet":if(!this.ma())throw new DayPilot.Exception("ASP.NET WebForms environment required. https://doc.daypilot.org/common/asp-net-webforms-required/");break;case"netmvc":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-asp-net-mvc/");break;case"javaxx":if(!this.backendUrl)throw new DayPilot.Exception("DayPilot.Scheduler.backendUrl required. https://doc.daypilot.org/common/backendurl-required-java/")}},this.Ya=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.ce=function(){var e=f.nav.top;return!!e&&(e.offsetWidth>0&&e.offsetHeight>0)},this.ee=function(){var e=f.ce;return e()?void f.fe():void(f.ge||(f.ge=setInterval(function(){e()&&(clearInterval(f.ge),f.show(),f.zm(),f.fe())},100)))},this.oq=function(e){"Parent100Pct"!==this.heightSpec&&(this.heightSpec="Fixed"),this.height=e-(this.Ii()+2),this.Ua()},this.setHeight=this.oq,this.oi=function(e){return f.Ym(e).first()},this.Ke=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw new DayPilot.Exception("DayPilot.Scheduler() constructor requires the target element or its ID as a parameter");if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw new DayPilot.Exception("DayPilot.Scheduler: The placeholder element not found: '"+t+"'.")}},this.pq=function(){this.rowHeaderColumnsMode="Legacy",this.Be(),this.Th(),this.Jj(),this._a(),this.me(),this.ya(),o.register(this),this.Ha(this.afterRenderData,!1),this.uo(),this.bb(),this.ha("Init")},this.init=function(){if(this.S)throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.");if(this.Ke(),this.nav.top.dp){if(this.nav.top.dp===f)return f;throw new DayPilot.Exception("The target placeholder was already initialized by another DayPilot component instance.")}return this.no(),this.qq(),this.ee(),this.rq(),this},this.rq=function(){f.keyboardEnabled&&P.iq()},this.sq=function(){f.multiselect._h(f.selectedEvents)},this.qq=function(){if(this.Gj(),this.Je())return this.pq(),this.S=!0,void this.ba();this.me(),this.ya(),o.register(this),this.uo(),this.sq(),f.zoomLevels&&f.zoomLevels[f.zoom.active]&&f.zoom.setActive(f.zoom.active),!f.S&&p.$i()&&(f.ji||(f.ji={"date":f.startDate})),this.Ic();var angular=f.Ae.scope||f.ii.enabled;f.scrollToDate?f.scrollTo(f.scrollToDate):f.scrollX||f.scrollY?f.setScroll(f.scrollX,f.scrollY):angular||f.gi(),f.scrollToResourceId&&(f.scrollToResource(f.scrollToResourceId),f.scrollToResourceId=null);var e=function(){f.scrollY&&f.setScroll(f.scrollX,f.scrollY)};window.setTimeout(e,200),this.messageHTML&&window.setTimeout(function(){f.message(f.messageHTML)},0),this.bb(),this.ba(),this.Ha(this.afterRenderData,!1),f.initEventEnabled&&setTimeout(function(){f.ha("Init")}),this.Me(),this.S=!0,this.tq=!0;var t=f.ji;t?f.scrollTo(t.date,t.animated,t.position):f.gi(),f.ji=null},this.oo=function(){f.I()&&delete f.infinite},this.Ne=null,this.De=function(e){if(e){var t={"resources":{"preInit":function(){var e=this.data;e&&(f.resources=e)}},"events":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?f.events.list=e.list:f.events.list=e)},"postInit":function(){}},"links":{"preInit":function(){var e=this.data;e&&(DayPilot.isArray(e.list)?f.links.list=e.list:f.links.list=e)},"postInit":function(){}},"scrollTo":{"preInit":function(){},"postInit":function(){this.data&&f.hi(this.data,e.scrollToAnimated,e.scrollToPosition)}},"scrollX":{"postInit":function(){this.data&&f.mi(this.data)}},"scrollY":{"postInit":function(){this.data&&f.Ei(this.data)}},"zoom":{"preInit":function(){var e=this.data;if("string"==typeof e){var t=e;e=f.zoom.wj(t)}var n=e!==f.zoom.active,i=f.zoom.zh();f.zoom.xj(e,i);n?this.date=i:this.date=null},"postInit":function(){this.date&&f.hi(this.date,!1,f.zoomPosition)}}};f.Ne=t,f.ii.scrollToRequested&&(t.scrollTo.data=f.ii.scrollToRequested,f.ii.scrollToRequested=null),f.ii.scrollXRequested&&(t.scrollX.data=f.ii.scrollXRequested,f.ii.scrollXRequested=null),f.ii.scrollYRequested&&(t.scrollY.data=f.ii.scrollYRequested,f.ii.scrollYRequested=null);for(var n in e)t[n]||(f[n]=e[n]);for(var n in e)if(t[n]){var i=t[n];i.data=e[n],i.preInit&&i.preInit()}}},this.Me=function(){var e=f.Ne;for(var t in e){var n=e[t];n.postInit&&n.postInit()}f.Ne={}},this.diag=function(){var e={};return e.dataEvents=f.events.list&&f.events.list.length,e.dataRows=f.rowlist&&f.rowlist.length,e.dataTimeline=f.itline&&f.itline.length,e.dataCells=e.dataTimeline*e.dataRows,e.renderedEvents=f.elements.events.length,e.renderedCells=f.elements.cells.length,e.renderedRows=f.divResScroll.firstChild.childNodes.length-1,e.domEvents=f.divEvents.getElementsByTagName("*").length,e.domCells=f.divCells.getElementsByTagName("*").length,e.domRows=f.divResScroll.getElementsByTagName("*").length,e},this.temp={},this.temp.allowDuplicateEventIds=!1,this.internal={},this.internal.initialized=function(){return f.S},this.internal.dragInProgress=this.Xo,this.internal.startMoving=this.Ko,this.internal.invokeEvent=this.Ab,this.internal.eventMenuClick=this.Ob,this.internal.timeRangeMenuClick=this.Pb,this.internal.resourceHeaderMenuClick=this.ck,this.internal.linkMenuClick=this.bk,this.internal.bubbleCallBack=this.Mb,this.internal.findEventDiv=this.ze,this.internal.rowtools=this.kk,this.internal.getNodeChildren=this.Fa,this.internal.callback=function(){f.ha.apply(f,arguments)},this.internal.createRowObject=this.ek,this.internal.restools=this.tn,this.internal.gantt=null,this.internal.adjustEndIn=f.zg,this.internal.adjustEndNormalize=f.$g,this.internal.xssTextHtml=f.ca,this.internal.touch=f.Xc,this.internal.cssNames=f.Mo,this.internal.enableCellStacking=function(e){f.Jh=!0,f.Kh=e},this.internal.deleteDragSource=function(){f.Kb()},this.internal.skipUpdate=f.ii.skipUpdate,this.internal.skipped=f.ii.skipped,this.internal.loadOptions=f.De,this.internal.postInit=f.Me,this.internal.enableAngular2=function(){f.ii.enabled=!0},this.internal.eventsFromAttr=function(){f.ii.kl=!0},this.internal.resourcesFromAttr=function(){f.ii.rl=!0},this.internal.evImmediateRefresh=function(){f.events.Yj()},this.internal.enableReact=function(e,t){f.wa.react=e,f.wa.reactDOM=t},this.internal.reactRefs=function(){return DayPilot.Util.copyProps(f.wa,{},["react","reactDOM"])},this.Init=this.init,this.De(l)},l="2021.1.4880"===(new DayPilot.Scheduler).v,DayPilot.Row=function(e,t){if(!e)throw new DayPilot.Exception("Now row object supplied when creating DayPilot.Row");if(!t)throw new DayPilot.Exception("No parent control supplied when creating DayPilot.Row");this.uq={};var n=this.uq;n.id=e.id,n.name=e.name,n.data=e.resource,n.tags=e.tags;var i=this;i.isRow=!0,i.menuType="resource",i.start=e.start,i.name=e.name,i.value=e.id,i.id=e.id,i.tags=e.tags,i.bubbleHtml=e.bubbleHtml,i.index=e.index,i.displayY=e.displayY,i.level=e.level,i.calendar=t,i.data=e.resource,i.grid=e.grid,i.Yf=e,i.$={},i.$.row=e,i.toJSON=function(e){var t={};return t.start=this.start,t.name=this.name,t.value=this.value,t.id=this.id,t.index=this.index,t},i.parent=function(){return i.Yf.Cn?t.ek(i.Yf.Cn):null},i.children=function(){var e=DayPilot.list(i.$.row.children).map(function(e){return t.ek(t.rowlist[e])});return e.add=function(e){var t=i.$.row.resource;t.children||(t.children=[]),t.children.push(e)},e},i.loaded=function(){return i.Yf.loaded},Object.defineProperty(i,"hidden",{get:function(){return i.Yf.hidden}}),Object.defineProperty(i,"hiddenUsingFilter",{get:function(){return i.Yf.Bn},set:function(e){i.Yf.Bn=e,e||(i.Yf.hidden=!i.Yf.Dn())}}),i.cells={},i.cells.all=function(){for(var e=[],n=t.itline.length,a=i.index,r=0;r<n;r++){var o=t.cells.findXy(r,a,i.grid);e.push(o[0])}return t.wl(e)},i.cells.forRange=function(e,n){var a=i,r=a.start.getTime()-t.kb().getTime();e=new DayPilot.Date(e),n=new DayPilot.Date(n);var o=t.kb().addTime(r),s=t.cj().addTime(r);e<o&&(e=o),n>s&&(n=s);var l=t.cells.find(e,i)[0],d=t.cells.find(n.addTime(-1),i)[0];if(!l)return null;if(!d)return null;if(l.y!==d.y)return null;for(var c=l.y,u=[],h=l.x;h<=d.x;h++)u.push(t.cells.sl(h,c,l.grid));return t.wl(u)},i.cells.totalDuration=function(){return new DayPilot.Duration(i.cells.all().map(function(e){return e.end.getTime()-e.start.getTime()}).reduce(function(e,t){return e+t},0))},i.events={},i.events.all=function(){for(var e=DayPilot.list(),t=0;t<i.Yf.events.length;t++)e.push(i.Yf.events[t]);return e},i.events.isEmpty=function(){return 0===i.Yf.events.length},i.events.forRange=function(e,t){return i.Yf.events.forRange(e,t)},i.events.totalDuration=function(){var e=0;return i.events.all().forEach(function(t){e+=t.part.end.getTime()-t.part.start.getTime()}),new DayPilot.Duration(e)},i.groups={},i.groups.collapseAll=function(){for(var e=0;e<i.Yf.blocks.length;e++){new a(i.Yf.blocks[e]).vq()}t.uj(),t.vj([i.Yf]),t.Ua()},i.groups.expandAll=function(){for(var e=0;e<i.Yf.blocks.length;e++){new a(i.Yf.blocks[e]).wq()}t.uj(),t.vj([i.Yf]),t.Ua(),t.Za()},i.groups.expanded=function(){for(var e=[],n=0;n<i.Yf.blocks.length;n++){var r=i.Yf.blocks[n];r.expanded&&r.lines.length>t.groupConcurrentEventsLimit&&e.push(new a(r))}return DayPilot.list(e)},i.groups.collapsed=function(){for(var e=[],t=0;t<i.Yf.blocks.length;t++){var n=i.Yf.blocks[t];n.expanded||e.push(new a(n))}return DayPilot.list(e)},i.groups.all=function(){for(var e=[],t=0;t<i.Yf.blocks.length;t++){var n=i.Yf.blocks[t];e.push(new a(n))}return DayPilot.list(e)},i.events.collapseGroups=i.groups.collapseAll,i.events.expandGroups=i.groups.expandAll,i.column=function(e){return new r(i,e)},i.toggle=function(){t.Nl(i.index)},i.collapse=function(){i.$.row.expanded&&i.toggle()},i.expand=function(){i.$.row.expanded||i.toggle()},i.remove=function(){t.rows.remove(i)},i.edit=function(){t.rows.edit(i)},i.addClass=function(e){var n=i,a=t.divHeader,n=a.rows[n.index];if(n){var r=DayPilot.list(n.cells).map(function(e){return e.cellDiv});DayPilot.Util.addClass(r,e)}i.$.row.cssClass=DayPilot.Util.addClassToString(i.$.row.cssClass,e),i.data.cssClass=e},i.removeClass=function(e){var n=i,a=t.divHeader,n=a.rows[n.index];if(n){var r=DayPilot.list(n.cells).map(function(e){return e.cellDiv});DayPilot.Util.removeClass(r,e)}i.$.row.cssClass=DayPilot.Util.removeClassFromString(i.$.row.cssClass,e),i.data.cssClass=DayPilot.Util.removeClassFromString(i.data.cssClass,e)};var a=function(e){var n=function(e){for(var n=0;n<t.elements.events.length;n++){var i=t.elements.events[n];if(i.event===e)return i}return null};this.wq=function(){e.expanded=!0;var i=t._m;DayPilot.list(e.events).forEach(function(e){i.push(e.id())});var a=n(e);if(a){t.xo(a);var r=DayPilot.indexOf(t.elements.events,a);r!==-1&&t.elements.events.splice(r,1)}},this.expand=function(){this.wq(),t.uj(),t.vj([e.row]),t.Ua(),t.Za()},this.vq=function(){if(e.lines.length>t.groupConcurrentEventsLimit){e.expanded=!1;var n=DayPilot.list(e.events).map(function(e){return e.id()});t._m=t._m.filter(function(e){return!DayPilot.contains(n,e)})}},this.collapse=function(){this.vq(),t.uj(),t.vj([e.row]),t.Ua()}},r=function(e,t){this.html=function(e){var n=i.calendar.divHeader,i=n.rows[i.index];if(!i)throw new DayPilot.Exception("Row not rendered");var a=i.cells[t],r=a.textDiv;return"undefined"==typeof e?r.innerHTML:void(r.innerHTML=e)}}},o.moving=null,o.movingEvent=null,o.originalMouse=null,o.resizing=null,o.resizingEvent=null,o.preventEventClick=!1,o.globalHandlers=!1,o.timeRangeTimeout=null,o.selectedCells=null,o.dragStart=function(e,t,n,i){DayPilot.us(e);var a=o.drag={};return a.element=e,a.duration=t,a.text=i,a.id=n,a.data={"id":n,"text":i,"duration":t,"externalHtml":i},!1},DayPilot.Scheduler.startDragging=function(e){var e=e||{},t=e.element,n=e.keepElement?null:t;DayPilot.us(t);var i=o.drag={};return i.element=n,i.id=e.id,i.duration=e.duration||60,i.text=e.text||"",i.data=e,!1},DayPilot.Scheduler.makeDraggable=function(e){function t(){var t=e.duration||60;t instanceof DayPilot.Duration&&(t=t.totalSeconds());var n=o.drag={};n.element=i,n.id=e.id,n.duration=t,n.text=e.text||"",n.data=e}e=e||{};var n=e.element,i=e.keepElement?null:e.remove||n;if(!n)throw new DayPilot.Exception("makeDraggable(options): options.element must be specified");DayPilot.us(n),DayPilot.re(n,"mousedown",function(e){if(DayPilot.Util.mouseButton(e).left){t();var n=e.target||e.srcElement;if(n.tagName){var i=n.tagName.toLowerCase();if("textarea"===i||"select"===i||"input"===i)return!1}return e.preventDefault&&e.preventDefault(),!1}}),n.ontouchstart=function(e){window.setTimeout(function(){t(),o.gTouchMove(e),e.preventDefault()},0),e.preventDefault()}},DayPilot.Scheduler.stopDragging=function(){if(o.drag&&o.drag.schedulerSourceEvent){var e=o.drag.schedulerSourceEvent,t=e.event.calendar;t&&DayPilot.Util.removeClass(e,t.G(n.Mo.eventMovingSource))}if(o.dragStop(),o.resizing&&(DayPilot.de(o.resizingShadow),o.resizing=null,o.resizingEvent=null,o.resizingShadow=null),o.moving){var n=o.movingEvent.calendar;n&&DayPilot.Util.removeClass(o.moving,n.G(n.Mo.eventMovingSource)),DayPilot.de(o.movingShadow),o.moving=null,o.movingEvent=null,o.movingShadow=null}if(o.range){var n=o.range.calendar;
n.clearSelection(),o.range=null}document.body.style.cursor="",DayPilot.list(o.registered).forEach(function(e){e.go(),e.tm(),e.kk.resetMoving(),e.mm.clear()})},o.dragStop=function(){o.gShadow&&(document.body.removeChild(o.gShadow),o.gShadow=null),o.drag=null},o.register=function(e){o.registered||(o.registered=DayPilot.list(),o.registered.out=function(){o.registered.forEach(function(e){e.Aa()})});for(var t=0;t<o.registered.length;t++)if(o.registered[t]===e)return;o.registered.push(e)},o.unregister=function(e){var t=o.registered;if(t){var n=DayPilot.indexOf(t,e);n!==-1&&t.splice(n,1),0===t.length&&(t=null)}t||(DayPilot.ue(document,"mousemove",o.gMouseMove),DayPilot.ue(document,"mouseup",o.gMouseUp),DayPilot.ue(document,"mousedown",o.gMouseDown),DayPilot.ue(document,"touchmove",o.gTouchMove),DayPilot.ue(document,"touchend",o.gTouchEnd),DayPilot.ue(window,"keyup",o.gKeyUp),o.globalHandlers=!1)},o.gTouchMove=function(e){if(o.resizing){var i=o.resizing.event.calendar;i.coords=i.Xc.relativeCoords(e),i.Xc.updateResizing(),e.preventDefault()}if(o.moving&&!o.drag){e.preventDefault();var i=o.movingEvent.calendar;i.coords=i.Xc.relativeCoords(e),i.Xc.updateMoving(),function(){if(i.dragOutAllowed){var n=t(e);if(!n||n!==i){var a=o.movingEvent;o.drag={};var r=o.drag;r.id=a.id(),r.text=a.text(),r.schedulerSourceEvent=o.moving,r.element=null,r.duration=(a.rawend().getTime()-a.start().getTime())/1e3,r.text=a.text(),r.id=a.id(),r.event=DayPilot.Util.copyProps(a,new DayPilot.Event),i.tm(),DayPilot.de(o.movingShadow),o.movingShadow.calendar=null,o.movingShadow=null,o.moveDragStart=null,o.registered.out()}}}()}if(o.drag){e.preventDefault();var a=n(e),i=t(e);if(i){if(o.gShadow&&document.body.removeChild(o.gShadow),o.gShadow=null,i.coords=i.Xc.relativeCoords(e),!o.movingShadow&&i.rowlist.length>0){if(!o.moving){o.moving={};var r=o.drag.event;if(!r){var s=i.itline[0].start,e={"id":o.drag.id,"start":s,"end":s.addSeconds(o.drag.duration),"text":o.drag.text},l=o.drag.data;if(l){var d=["duration","element","remove","id","text"];for(var c in l)DayPilot.contains(d,c)||(e[c]=l[c])}r=new DayPilot.Event(e),r.calendar=i,r.part.duration=1e3*o.drag.duration}r.part.external=!0;var u=o.drag.schedulerSourceEvent;u&&u.event&&u.event.calendar===i&&(r.part.external=!1),o.movingEvent=r}o.movingShadow=i.db(o.movingEvent)}o.moving&&i.Xc.updateMoving()}else{DayPilot.de(o.movingShadow);var h=o.moving;o.moving=null,o.movingEvent=null,o.movingShadow=null,o.gShadow||(o.gShadow=o.createGShadow(o.drag.data),o.gShadow.source=h);var f=o.gShadow;f.style.left=a.x+"px",f.style.top=a.y+"px",o.registered.out()}}},o.gTouchEnd=function(e){o.Xn=!1,o.gMouseUp(e)},o.gMouseMove=function(e){if("undefined"!=typeof o&&!DayPilot.Global.touch.active&&!DayPilot.Global.touch.start&&!(e.insideMainD||e.srcElement&&e.srcElement.inside)){var t=DayPilot.mc(e);if(o.drag){if(!o.drag.startFired){var n=o.drag.data||{},i=n.onDragStart,a=!1;if("function"==typeof i){var r={};r.data=n,r.preventDefault=function(){r.preventDefault.value=!0},i(r),a=r.preventDefault.value}if(o.drag.startFired=!0,a)return void(o.drag=null)}document.body.style.cursor="move",o.gShadow||(o.gShadow=o.createGShadow(o.drag.data));var s=o.gShadow;if(s.style.left=t.x+"px",s.style.top=t.y+"px",o.moving=null,o.movingEvent=null,o.movingShadow){var l=o.movingShadow.calendar;l&&l.tm(),o.movingShadow.calendar=null,DayPilot.de(o.movingShadow),o.movingShadow=null}}else if(o.moving&&o.movingEvent&&o.movingEvent.calendar.dragOutAllowed&&!o.drag){var l=o.movingEvent.calendar,e=o.movingEvent;document.body.style.cursor="move",o.gShadow||(o.gShadow=o.createGShadow(e.data),o.gShadow.source=o.moving);var s=o.gShadow;s.style.left=t.x+"px",s.style.top=t.y+"px",o.drag={};var d=o.drag;d.schedulerSourceEvent=o.moving,d.element=null,d.duration=(e.rawend().getTime()-e.start().getTime())/1e3,d.text=e.text(),d.id=e.value(),d.event=DayPilot.Util.copyProps(e,new DayPilot.Event),l.tm(),DayPilot.de(o.movingShadow),o.movingShadow.calendar=null,o.movingShadow=null}o.registered.out()}},o.gUnload=function(e){if(o.registered)for(var t=0;t<o.registered.length;t++){var n=o.registered[t];o.unregister(n)}},o.gMouseDown=function(e){o.editing&&o.editing.blur()},o.gKeyUp=function(e){17===e.keyCode&&o.rangeCalendar&&o.rangeCalendar.up.dispatch()},o.gMouseUp=function(e){if(DayPilot.list(o.registered).forEach(function(e){e.go(),e.kj={}}),o.resizing){var t=function(){var e=o.resizingEvent,t=e.calendar;document.body.style.cursor="",o.resizing=null,o.resizingEvent=null,DayPilot.de(o.resizingShadow),o.resizingShadow=null,t&&(t.Yo=null)};if(setTimeout(function(){o.preventEventClick=!1}),!o.resizingShadow)return void t();var n=o.resizingEvent,i=n.calendar,a=o.resizingShadow.finalStart,r=o.resizingShadow.finalEnd,l=o.resizingShadow.overlapping,u=!o.resizingShadow.allowed,h=i.cm.isInvalid();i.tm(),i.cm.clear();var f="left"===o.resizing.dpBorder?"start":"end";if(t(),l||u||h||i.cm.forbidden)return;i.Eb(n,a,r,f)}else if(o.movingEvent){var t=function(){DayPilot.Global.movingAreaData=null;var e=o.movingShadow&&o.movingShadow.calendar;o.movingShadow&&(DayPilot.de(o.movingShadow),o.movingShadow.calendar=null),document.body.style.cursor="",o.moving=null,o.movingEvent=null,o.drag=null,e&&(e.Ca=null)};if(!o.movingShadow)return void t();var v=o.drag&&o.drag.schedulerSourceEvent,n=v?v.event:o.movingEvent,i=o.movingShadow.calendar;if(!i)return void t();if(n.calendar&&n.calendar!==i){var p=n.calendar,m=n,g=DayPilot.Util.copyProps(n.data);n=new DayPilot.Event(g,p),n.part={"external":!0,"duration":p.El(m)}}if(o.movingShadow.source=o.moving,function(){if(o.drag&&o.drag.schedulerSourceEvent){var e=o.drag.schedulerSourceEvent;if(e&&e.event){var t=e.event.calendar;DayPilot.Util.removeClass(e,t.G(i.Mo.eventMovingSource))}}}(),!o.movingShadow.row)return void t();clearTimeout(i.Ll.timeout);var a=o.movingShadow.start,r=o.movingShadow.end,b="Days"!==i.viewType?o.movingShadow.row.id:null,y=n.part.external,w=o.movingShadow.line,l=o.movingShadow.overlapping,u=!o.movingShadow.allowed;if(o.drag&&(i.todo||(i.todo={}),i.todo.del=o.drag.element,o.drag=null),o.movingShadow.calendar=null,document.body.style.cursor="",o.moving=null,o.movingEvent=null,l||u||i.mm.forbidden||i.mm.invalid)return void i.Jb();i.Ib(n,a,r,b,y,e,w),DayPilot.Global.movingAreaData=null}else if(o.range){var x=DayPilot.Util.mouseButton(e),k=o.range,i=k.calendar,t=function(){};i.rp=null;var C=e.ctrlKey||e.metaKey;if(i.allowMultiRange)return i.elements.range2.overlapping?(DayPilot.de(i.elements.range2),i.elements.range2=null,i.tm()):i.up.add(k),o.range=null,C||x.left&&i.up.dispatch(),void t();if(o.timeRangeTimeout)return clearTimeout(o.timeRangeTimeout),o.timeRangeTimeout=null,void t();i.rangeHold=k,o.range=null;var S=function(e){return function(){o.timeRangeTimeout=null;var t=i.elements.range2;return t&&t.overlapping?void i.clearSelection():(i.Zj(e),void("Hold"!==i.timeRangeSelectedHandling&&"HoldForever"!==i.timeRangeSelectedHandling?s():i.rangeHold=e))}},E=i.sp(k);if(t(),!x.left)return void(o.timeRangeTimeout=null);if(k.moved||"Disabled"===i.timeRangeDoubleClickHandling)return S(E)(),e.cancelBubble=!0,!1;o.timeRangeTimeout=setTimeout(S(E),i.doubleClickTimeout)}else if(d.row){var i=d.calendar;i&&i.on()}else if(c.source){var i=c.calendar;i.Lk.Hg(),i.Lk.Kj(),c.source=null,c.calendar=null}else if(o.splitting){var D=o.splitting;D.cleanup(),o.splitting=null}else if(o.rectangleSelect){var T=o.rectangleSelect,i=T.calendar;if(!T.moved)return o.rectangleSelect=null,void(i.Vo(i.coords)||i.vp(e));var A=T.x,_=T.y,M=T.width,H=T.height,R=!1,B=i.wi.xi(A,_,M,H).map(function(e){return e.event}),P=function(){setTimeout(function(){i.gp.clear(),o.rectangleSelect=null},0),i.tm()};if("function"==typeof i.onRectangleEventSelect||"function"==typeof i.onRectangleSelect){var N=i.yk(_).i,U=i.yk(_+H).i,I={"start":{"y":N},"end":{"y":U}},L=i.uk(I),z={};if(z.events=B,z.append=!1,z.start=i.getDate(A,!0),z.end=i.getDate(A+M,!0),z.resources=L,z.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof i.onRectangleEventSelect&&i.onRectangleEventSelect(z),"function"==typeof i.onRectangleSelect&&i.onRectangleSelect(z),z.preventDefault.value)return i.gp.clear(),o.rectangleSelect=null,void P();R=z.append}if("EventSelect"===i.ea.kq()&&(R||i.multiselect.clear(!0),B.forEach(function(e){i.multiselect.add(e,!0)}),i.multiselect.redraw()),P(),"function"==typeof i.onRectangleEventSelected||"function"==typeof i.onRectangleSelected){var z={};z.events=B,"function"==typeof i.onRectangleEventSelected&&i.onRectangleEventSelected(z),"function"==typeof i.onRectangleSelected&&i.onRectangleSelected(z)}}if(o.drag&&(o.drag.event&&o.drag.event.part&&delete o.drag.event.part.external,o.drag=null,document.body.style.cursor=""),o.gShadow){if(o.gShadow.source){var i=o.gShadow.source.event.calendar;DayPilot.Util.removeClass(o.gShadow.source,i.G(i.Mo.eventMovingSource))}document.body.removeChild(o.gShadow),o.gShadow=null}o.moveOffsetX=null,o.moveDragStart=null},o.createGShadow=function(e){var e=e||{},t=document.createElement("div");return t.setAttribute("unselectable","on"),t.style.position="absolute",t.style.width="100px",t.style.height="20px",t.style.zIndex=101,t.style.pointerEvents="none",t.style.backgroundColor="#aaaaaa",t.style.opacity=.5,t.style.filter="alpha(opacity=50)",t.className=e.externalCssClass,e.externalHtml&&(t.innerHTML=e.externalHtml),document.body.appendChild(t),t};var d={};DayPilot.Global.rowmoving=d;var c={};DayPilot.Global.linking=c,"undefined"!=typeof jQuery&&!function(e){e.fn.daypilotScheduler=function(e){var t=null,n=this.each(function(){if(!this.daypilot){var n=new DayPilot.Scheduler(this.id||this,e);n.init(),this.daypilot=n,t||(t=n)}});return 1===this.length?t:n}}(jQuery),function(){var e=DayPilot.am();e&&e.directive("daypilotScheduler",["$parse",function(e){return{"restrict":"E","template":"<div id='{{id}}'></div>","compile":function(t,n){return t[0].removeAttribute("id"),t[0].innerHTML=this["template"].replace("{{id}}",n["id"]),function(t,n,i){var a=new DayPilot.Scheduler(n[0].firstChild);a.Ae.scope=t;var r=i["id"];r&&(t[r]=a);var o=i["publishAs"];if(o){(0,e(o).assign)(t,a)}for(var s in i)if(0===s.indexOf("on")){var l=DayPilot.Util.shouldApply(s);l?!function(n){a[n]=function(a){var r=e(i[n]);DayPilot.Util.safeApply(t,function(){r(t,{"args":a})})}}(s):!function(n){a[n]=function(a){e(i[n])(t,{"args":a})}}(s)}var d=t["$watch"],c=i["config"]||i["daypilotConfig"],u=i["events"]||i["daypilotEvents"];c||a.init(),d.call(t,c,function(e,t){a.De(e),a.S?(a.update(),a.Me()):a.init()},!0),u&&d.call(t,u,function(e){a.events.list=e,a.Ic({"eventsOnly":!0})},!0),t.$on("$destroy",function(){a.dispose()})}}}}])}(),"undefined"!=typeof Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded&&Sys.Application.notifyScriptLoaded()}}(DayPilot),"undefined"==typeof DayPilot)var DayPilot={};"undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(DayPilot){"undefined"==typeof DayPilot.Year&&(DayPilot.Year=function(e,t){this.v="2021.1.4880";this.startDate=new DayPilot.Date,this.cssOnly=!0,this.cssClassPrefix=null,this.columns=4,this.cellWidth=20,this.showWeekNumbers=!1,this.xq=[],this._g=function(){this.root.dp=this,this.uf=new DayPilot.Date(this.startDate.toString("yyyy-01-01","en-us"))},this.G=function(e){return this.cssClassPrefix?this.cssClassPrefix+e:""},this.ah=function(){return this.showWeekNumbers?this.cellWidth:0},this.im=function(){this.xq=[];var e=this.columns,t=12/e;this.root.className=this.G("_main"),this.root.style.width=e*(7*this.cellWidth+this.ah())+"px";for(var n=0;n<t;n++){for(var i=0;i<e;i++){var a=n*e+i,r=r+"_nav_"+a,o=document.createElement("div");o.id=r,o.style.float="left",this.root.appendChild(o);var s=new DayPilot.Navigator(r);s.startDate=this.uf.addMonths(a),s.cssOnly=this.cssOnly,s.cssClassPrefix=this.cssClassPrefix,s.cellWidth=this.cellWidth,s.showWeekNumbers=this.showWeekNumbers,s.internal.showLinks={},s.selectMode="none",s.timeRangeSelectedHandling="JavaScript",s.onTimeRangeSelected=this.yq,s.init(),s.root.className="",this.xq.push(s)}var l=document.createElement("div");l.style.clear="left",this.root.appendChild(l)}},this.yq=function(e){alert("clicked: "+e.day)},this.init=function(){if(this.root=document.getElementById(e),!this.root.dp)return this._g(),this.im(),this}})}(DayPilot);
